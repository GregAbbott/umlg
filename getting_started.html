<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">

    <title>UMLG</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- UMLG doc style -->
    <link href="stylesheets/umlg-doc.css" rel="stylesheet">

    <!-- Syntax Highlighter -->
    <link href="stylesheets/prettify.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body data-spy="scroll" data-target="#affix-nav">
<header class="navbar navbar-fixed-top navbar-inverse" role="banner">
    <div class="container">
        <div class="navbar-header">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="index.html" class="navbar-brand">UMLG</a>
        </div>
        <nav class="collapse navbar-collapse" role="navigation">
            <ul class="nav navbar-nav pull-right">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="doc_home.html">Home</a></li>
                        <li><a href="introduction.html">Introduction</a></li>
                        <li><a href="getting_started.html">Getting Started</a></li>
                        <li><a href="umlg_inaction.html">UMLG In action</a></li>
                        <li><a href="gremlin_extension.html">Gremlin Extension</a></li>
                        <li><a href="umlg_reference.html">UMLG Reference</a></li>
                        <li><a href="ocl_reference.html">OCL reference</a></li>
                        <li><a href="rest_interface.html">Rest Interface</a></li>
                        <li><a href="gui.html">Gui</a></li>
                    </ul>
                </li>
                <li>
                    <a href="https://github.com/pietermartin/umlg">Github</a>
                </li>
                <li>
                    <a href="http://demo.umlg.org">Demo</a>
                </li>
            </ul>
        </nav>
    </div>
</header>

<div class="jumbotron umlg-doc-jumbotron">
    <p>Getting started guide</p>
</div>

<!-- Begin Body -->
<div class="container umlgcontainer">
    <div class="row">
        <div class="col-md-3" id="leftcol">
            <div class="bs-docs-sidebar hidden-print" role="complementary">
                <ul class="nav bs-docs-sidebar" id="sidebar">
                    <li class="active"><a href="#GettingStartedID">Getting Started</a><ul class="nav">
<li><a href="#HowthebuildworksID">How the build works</a><ul class="nav">
<li><a href="#generatormoduleID">generator module</a></li><li><a href="#applicationmoduleID">application module</a><ul class="nav">
<li><a href="#entitiesID">entities</a></li><li><a href="#jettyID">jetty</a></li><li><a href="#restletID">restlet</a></li><li><a href="#warID">war</a></li></ul>
</li></ul>
</li><li><a href="#TheentitiesID">The entities</a></li></ul>
</li>
                </ul>
            </div>
        </div>
        <div class="col-md-9">

            <p class="pull-right visible-xs">
                <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
            </p>
            <!-- Getting started guide -->

<h1 id="GettingStartedID">Getting Started</h1>

<hr />

<p>For UML modeling <a href="http://projects.eclipse.org/projects/modeling.mdt.papyrus">Eclipse Papyrus</a> is the recommended tool.</p>

<p>So you will need to download and install Papyrus.</p>

<hr />

<p>UMLG uses <a href="http://maven.apache.org/">maven</a> as its build tool.</p>

<p>The easiest way to get started is to generate a maven project using the UMLG Maven Archetype.</p>

<p>To generate a sample project, type in the following at your project's root directory.</p>

<p><kbd>mvn archetype:generate -DarchetypeCatalog=local</kbd></p>

<p>You will be prompted to select the project you which to generate. Choose <code class="language-java">org.umlg:umlg-archetype-full</code></p>

<p>Follow the prompts to select your maven groupId, artifactId, version, java package and underlying graph database.
A sample uml model with UMLG's uml validation profile and
data types library will be preloaded. The archetype will create a fully functional UMLG application.</p>

<p><kbd>cd artifactId</kbd> into the application you just generated and run <kbd>maven install</kbd></p>

<p>Before compiling the application, maven will generate the entities and a rest interface to the entities from the sample model.</p>

<p>For the impatient to start the rest server and use the web interface <code class="language-java">cd artifactId-application/artifactId-jetty</code> and run <code class="language-java">mvn exec:exec</code>
You can view and use the application at <a href="http://localhost:8111/demo/ui2">http://localhost:8080/demo/ui2</a>.</p>

<p>Lastly there is a sample junit test <code class="language-java">org.umlg.test.TestDemo</code> in <code class="language-java">src/test/java</code>. You can execute it to see UMLG in action.</p>

<h2 id="HowthebuildworksID">How the build works</h2>

<p>The archetype will generate a maven project with 2 sub modules. The 2 modules are,</p>

<ul>
<li><strong>generator</strong> - This is responsible to load the uml model and generate the entities.</li>
<li><strong>application</strong> - This is where the generated entities and optional rest interface will go.</li>
</ul>

<p><br /></p>

<h3 id="generatormoduleID">generator module</h3>

<p><br /></p>

<p>In the <code class="language-java">generator</code> module there is only one java class <code class="language-java">DemoGenerator</code>. Running this class' <code class="language-java">main</code> method  will load
the sample model and generate the corresponding entities into the <strong>application</strong> module.</p>

<p>For <code class="language-java">DemoGenerator</code> to compile and be able to generate code the following maven dependency is required.</p>

<pre class="prettyprint"><code class="language-java">&lt;dependency&gt;
    &lt;groupId&gt;org.umlg&lt;/groupId&gt;
    &lt;artifactId&gt;java-generation&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>and the code to generate the code.</p>

<pre class="prettyprint"><code class="language-java">public class DemoGenerator {
    public static void main(String[] args) throws URISyntaxException {
        if (args.length == 0) {
            args = new String[]{"."};
        }
        JavaGenerator javaGenerator = new JavaGenerator();
        javaGenerator.generate(
                new File(args[0] + "/application/src/main/model/umlg-demo1.uml"),
                new File(args[0] + "/application"),
                RestletVisitors.getDefaultJavaVisitors());

    }
}
</code></pre>

<p><code class="language-java">org.umlg.generation.JavaGenerator</code> is the entry point to generating code in UMLG from UML. <code class="language-java">JavaGenerator.main</code> takes 3 parameters.
The first is the uml model, the second is the output location of the generated source and the 3rd is the generation visitors.
UMLG generates code via a sequential list of visitors to the UML model. Each visitor implements some feature of the model in java.</p>

<p>It is possible to add custom visitors to customize the entities. This is explained <a href="http://localhost/todo">here //TODO</a>.</p>

<p><br /></p>

<h3 id="applicationmoduleID">application module</h3>

<p>The <strong>application</strong> module has 4 sub modules.</p>

<h4 id="entitiesID">entities</h4>

<p>This is where the generated entities are. It also contains a resources folder with <code class="language-java">umlg.env.properties</code>.<br />
It contains the commented out property <code class="language-java">umlg.db.location=/tmp</code>. UMLG defaults to the systems tmp directory. Change this
property to point the db to a location of your choice.<br /></p>

<p>A sample junit test class <code class="language-java">org.umlg.test.TestDemo</code> is provided. Run it to see UMLG in action.</p>

<p>To compile the entities the following dependency is required. Replace the artifact with the underlying blueprints graph db of your choice.
This dependency will bring in the underlying graph db and everything the UMLG entities need.</p>

<pre class="prettyprint"><code class="language-java">&lt;dependency&gt;
    &lt;groupId&gt;org.umlg&lt;/groupId&gt;
    &lt;artifactId&gt;runtime-domain-bitsy&lt;/artifactId&gt;
    &lt;!--
    &lt;artifactId&gt;runtime-domain-neo4j&lt;/artifactId&gt;
    &lt;artifactId&gt;runtime-domain-titan&lt;/artifactId&gt;
    --&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p><br /></p>

<h4 id="jettyID">jetty</h4>

<p>This contains the jetty code to start the rest application in Jetty</p>

<h4 id="restletID">restlet</h4>

<p>This is where the generated restlet resources go.</p>

<p>To compile and execute the rest resources the following dependency is required
This brings in <a href="http://restlet.org/">Restlet</a>. Restlet is the rest framework used by UMLG to expose the entities as rest resources.</p>

<pre class="prettyprint"><code class="language-java">     &lt;dependency&gt;
         &lt;groupId&gt;org.umlg&lt;/groupId&gt;
         &lt;artifactId&gt;runtime-restlet&lt;/artifactId&gt;
         &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
     &lt;/dependency&gt;
</code></pre>

<p>And lastly to use the web ui add the following dependency This makes available web resources. The javascript, html and
css files needed for the UMLG admin gui.</p>

<pre class="prettyprint"><code class="language-java">     &lt;dependency&gt;
         &lt;groupId&gt;org.umlg&lt;/groupId&gt;
         &lt;artifactId&gt;runtime-ui&lt;/artifactId&gt;
         &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
     &lt;/dependency&gt;
</code></pre>

<h4 id="warID">war</h4>

<p>This packages the application as a war.</p>

<p><br /></p>

<h2 id="TheentitiesID">The entities</h2>

<p><br /></p>

<p>The generated demo's model models a simple One to Many relationship.</p>

<p><img src="images/uml/Package_umlg_demo1ClassDiagram.PNG" alt="One to Many" title="" /></p>

<p>Each class in the uml model have a respective java entity. To create a company and a person just instantiate <code class="language-java">Company</code>
and <code class="language-java">Person</code>.</p>

<pre class="prettyprint"><code class="language-java">One one = new One();
Many many = new Many();
</code></pre>

<p>For each property a standard setter and getter is generated.</p>

<pre class="prettyprint"><code class="language-java">one.setName("Coolraid");
many.setName("Joe");
one.setMany(many);
</code></pre>

<p>For each property with a multiplicity greater than 1 an adder method is generated. This is different to the setter in
that it appends to the collection as opposed to the setter that replaces the collection.</p>

<pre class="prettyprint"><code class="language-java">one.addToMany(many);
</code></pre>

<p>or just use the standard java collection 'add' method</p>

<pre class="prettyprint"><code class="language-java">one.getMany().add(many);
</code></pre>

<p>Similarly a remover is generated</p>

<pre class="prettyprint"><code class="language-java">one.removeFromMany(many);
</code></pre>

<p>or use the standard java collection 'remove' method</p>

<pre class="prettyprint"><code class="language-java">one.getMany().remove(many);
</code></pre>

<p>and lastly to persist the entities call,</p>

<pre class="prettyprint"><code class="language-java">UMLG.get().commit()
</code></pre>

<p>or rollback the transaction</p>

<pre class="prettyprint"><code class="language-java">UMLG.get().rollback()
</code></pre>

<p><code class="language-java">UMLG.get()</code> returns an instance of <code class="language-java">org.umlg.runtime.adaptor.UmlgGraph</code>. <code class="language-java">UmlgGraph</code> wraps the underlying blueprints graph and implements
'com.tinkerpop.blueprints.TransactionalGraph' and 'com.tinkerpop.blueprints.KeyIndexableGraph' It is a singleton and is
always available on the current thread via <code class="language-java">UMLG.get()</code></p>


        </div>
    </div>
    <hr>
    <footer class="pull-right">
        <p>100% open source. Licensed under the Apache Software License 2.0</p>
    </footer>

</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="javascripts/offcanvas.js"></script>
<script src="javascripts/prettify.js"></script>

<script type='text/javascript'>

    $(document).ready(function () {

        $('#sidebar').affix(
                {
                    offset: {
                        top: 80
                    }
                }
        );

        var $body = $(document.body);
        var navHeight = $('.navbar').outerHeight(true) + 10;

        $body.scrollspy({
            target: '#leftcol',
            offset: navHeight
        });

        /* smooth scrolling sections */
        $('a[href*=#]:not([href=#])').click(function () {
            if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                if (target.length) {
                    $('html,body').animate({
                        scrollTop: target.offset().top - 50
                    }, 1000);
                    return false;
                }
            }
        });

    });

    prettyPrint();

</script>

</body>
</html>
