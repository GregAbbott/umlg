!function(t){t.fn.drop=function(e,a,n){var i="string"==typeof e?e:"",o=t.isFunction(e)?e:t.isFunction(a)?a:null;return 0!==i.indexOf("drop")&&(i="drop"+i),n=(e==o?a:n)||{},o?this.bind(i,n,o):this.trigger(i)},t.drop=function(e){e=e||{},n.multi=e.multi===!0?1/0:e.multi===!1?1:isNaN(e.multi)?n.multi:e.multi,n.delay=e.delay||n.delay,n.tolerance=t.isFunction(e.tolerance)?e.tolerance:null===e.tolerance?null:n.tolerance,n.mode=e.mode||n.mode||"intersect"};var e=t.event,a=e.special,n=t.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(){var e=t.data(this,n.datakey);e.related+=1},remove:function(){t.data(this,n.datakey).related-=1},setup:function(){if(!t.data(this,n.datakey)){var e={related:0,active:[],anyactive:0,winner:0,location:{}};t.data(this,n.datakey,e),n.targets.push(this)}},teardown:function(){var e=t.data(this,n.datakey)||{};if(!e.related){t.removeData(this,n.datakey);var a=this;n.targets=t.grep(n.targets,function(t){return t!==a})}},handler:function(e,i){var o;if(i)switch(e.type){case"mousedown":case"touchstart":o=t(n.targets),"string"==typeof i.drop&&(o=o.filter(i.drop)),o.each(function(){var e=t.data(this,n.datakey);e.active=[],e.anyactive=0,e.winner=0}),i.droppable=o,a.drag.hijack(e,"dropinit",i);break;case"mousemove":case"touchmove":n.event=e,n.timer||n.tolerate(i);break;case"mouseup":case"touchend":n.timer=clearTimeout(n.timer),i.propagates&&(a.drag.hijack(e,"drop",i),a.drag.hijack(e,"dropend",i))}},locate:function(e,a){var i=t.data(e,n.datakey),o=t(e),r=o.offset()||{},d=o.outerHeight(),l=o.outerWidth(),c={elem:e,width:l,height:d,top:r.top,left:r.left,right:r.left+l,bottom:r.top+d};return i&&(i.location=c,i.index=a,i.elem=e),c},contains:function(t,e){return(e[0]||e.left)>=t.left&&(e[0]||e.right)<=t.right&&(e[1]||e.top)>=t.top&&(e[1]||e.bottom)<=t.bottom},modes:{intersect:function(t,e,a){return this.contains(a,[t.pageX,t.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(t,e,a){return Math.max(0,Math.min(a.bottom,e.bottom)-Math.max(a.top,e.top))*Math.max(0,Math.min(a.right,e.right)-Math.max(a.left,e.left))},fit:function(t,e,a){return this.contains(a,e)?1:0},middle:function(t,e,a){return this.contains(a,[e.left+.5*e.width,e.top+.5*e.height])?1:0}},sort:function(t,e){return e.winner-t.winner||t.index-e.index},tolerate:function(e){var i,o,r,d,l,c,s,u,p=0,h=e.interactions.length,m=[n.event.pageX,n.event.pageY],f=n.tolerance||n.modes[n.mode];do if(u=e.interactions[p]){if(!u)return;u.drop=[],l=[],c=u.droppable.length,f&&(r=n.locate(u.proxy)),i=0;do if(s=u.droppable[i]){if(d=t.data(s,n.datakey),o=d.location,!o)continue;d.winner=f?f.call(n,n.event,r,o):n.contains(o,m)?1:0,l.push(d)}while(++i<c);l.sort(n.sort),i=0;do(d=l[i])&&(d.winner&&u.drop.length<n.multi?(d.active[p]||d.anyactive||(a.drag.hijack(n.event,"dropstart",e,p,d.elem)[0]!==!1?(d.active[p]=1,d.anyactive+=1):d.winner=0),d.winner&&u.drop.push(d.elem)):d.active[p]&&1==d.anyactive&&(a.drag.hijack(n.event,"dropend",e,p,d.elem),d.active[p]=0,d.anyactive-=1));while(++i<c)}while(++p<h);n.last&&m[0]==n.last.pageX&&m[1]==n.last.pageY?delete n.timer:n.timer=setTimeout(function(){n.tolerate(e)},n.delay),n.last=n.event}};a.dropinit=a.dropstart=a.dropend=n}(jQuery);