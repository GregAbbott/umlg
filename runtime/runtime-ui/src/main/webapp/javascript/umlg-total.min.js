/*

 jquery.layout 1.3.0 - Release Candidate 30.79
 $Date: 2013-01-12 08:00:00 (Sat, 12 Jan 2013) $
 $Rev: 303007 $

 Copyright (c) 2013 Kevin Dalman (http://allpro.net)
 Based on work by Fabrizio Balliano (http://www.fabrizioballiano.net)

 Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.

 SEE: http://layout.jquery-dev.net/LICENSE.txt

 Changelog: http://layout.jquery-dev.net/changelog.cfm#1.3.0.rc30.79

 Docs: http://layout.jquery-dev.net/documentation.html
 Tips: http://layout.jquery-dev.net/tips.html
 Help: http://groups.google.com/group/jquery-ui-layout

 (c) 2009-2013 Michael Leibman
 michael{dot}leibman{at}gmail{dot}com
 http://github.com/mleibman/slickgrid

 Distributed under MIT license.
 All rights reserved.

 SlickGrid v2.2

 NOTES:
     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
     This increases the speed dramatically, but can only be done safely because there are no event handlers
     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
     and do proper cleanup.
*/
(function(){var $,AbstractChosen,Chosen,SelectParser,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent)if(__hasProp.call(parent,key))child[key]=parent[key];function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};SelectParser=function(){function SelectParser(){this.options_index=0;this.parsed=[]}SelectParser.prototype.add_node=function(child){if(child.nodeName.toUpperCase()===
"OPTGROUP")return this.add_group(child);else return this.add_option(child)};SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;group_position=this.parsed.length;this.parsed.push({array_index:group_position,group:true,label:this.escapeExpression(group.label),children:0,disabled:group.disabled});_ref=group.childNodes;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];_results.push(this.add_option(option,group_position,group.disabled))}return _results};
SelectParser.prototype.add_option=function(option,group_position,group_disabled){if(option.nodeName.toUpperCase()==="OPTION"){if(option.text!==""){if(group_position!=null)this.parsed[group_position].children+=1;this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,selected:option.selected,disabled:group_disabled===true?group_disabled:option.disabled,group_array_index:group_position,classes:option.className,style:option.style.cssText})}else this.parsed.push({array_index:this.parsed.length,
options_index:this.options_index,empty:true});return this.options_index+=1}};SelectParser.prototype.escapeExpression=function(text){var map,unsafe_chars;if(text==null||text===false)return"";if(!/[\&\<\>\"\'\`]/.test(text))return text;map={"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","`":"\x26#x60;"};unsafe_chars=/&(?!\w+;)|[\<\>\"\'\`]/g;return text.replace(unsafe_chars,function(chr){return map[chr]||"\x26amp;"})};return SelectParser}();SelectParser.select_to_array=function(select){var child,
parser,_i,_len,_ref;parser=new SelectParser;_ref=select.childNodes;for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];parser.add_node(child)}return parser.parsed};AbstractChosen=function(){function AbstractChosen(form_field,options){this.form_field=form_field;this.options=options!=null?options:{};if(!AbstractChosen.browser_is_supported())return;this.is_multiple=this.form_field.multiple;this.set_default_text();this.set_default_values();this.setup();this.set_up_html();this.register_observers()}
AbstractChosen.prototype.set_default_values=function(){var _this=this;this.click_test_action=function(evt){return _this.test_active_click(evt)};this.activate_action=function(evt){return _this.activate_field(evt)};this.active_field=false;this.mouse_on_container=false;this.results_showing=false;this.result_highlighted=null;this.result_single_selected=null;this.allow_single_deselect=this.options.allow_single_deselect!=null&&(this.form_field.options[0]!=null&&this.form_field.options[0].text==="")?this.options.allow_single_deselect:
false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||false;this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:true;this.group_search=this.options.group_search!=null?this.options.group_search:true;this.search_contains=this.options.search_contains||false;this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:true;
this.max_selected_options=this.options.max_selected_options||Infinity;this.inherit_select_classes=this.options.inherit_select_classes||false;this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:true;return this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:true};AbstractChosen.prototype.set_default_text=function(){if(this.form_field.getAttribute("data-placeholder"))this.default_text=
this.form_field.getAttribute("data-placeholder");else if(this.is_multiple)this.default_text=this.options.placeholder_text_multiple||(this.options.placeholder_text||AbstractChosen.default_multiple_text);else this.default_text=this.options.placeholder_text_single||(this.options.placeholder_text||AbstractChosen.default_single_text);return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||(this.options.no_results_text||AbstractChosen.default_no_result_text)};AbstractChosen.prototype.mouse_enter=
function(){return this.mouse_on_container=true};AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=false};AbstractChosen.prototype.input_focus=function(evt){var _this=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return _this.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()};AbstractChosen.prototype.input_blur=function(evt){var _this=this;if(!this.mouse_on_container){this.active_field=false;return setTimeout(function(){return _this.blur_test()},
100)}};AbstractChosen.prototype.results_option_build=function(options){var content,data,_i,_len,_ref;content="";_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){data=_ref[_i];if(data.group)content+=this.result_add_group(data);else content+=this.result_add_option(data);if(options!=null?options.first:void 0)if(data.selected&&this.is_multiple)this.choice_build(data);else if(data.selected&&!this.is_multiple)this.single_set_selected_text(data.text)}return content};AbstractChosen.prototype.result_add_option=
function(option){var classes,style;if(!option.search_match)return"";if(!this.include_option_in_results(option))return"";classes=[];if(!option.disabled&&!(option.selected&&this.is_multiple))classes.push("active-result");if(option.disabled&&!(option.selected&&this.is_multiple))classes.push("disabled-result");if(option.selected)classes.push("result-selected");if(option.group_array_index!=null)classes.push("group-option");if(option.classes!=="")classes.push(option.classes);style=option.style.cssText!==
""?' style\x3d"'+option.style+'"':"";return'\x3cli class\x3d"'+classes.join(" ")+'"'+style+' data-option-array-index\x3d"'+option.array_index+'"\x3e'+option.search_text+"\x3c/li\x3e"};AbstractChosen.prototype.result_add_group=function(group){if(!(group.search_match||group.group_match))return"";if(!(group.active_options>0))return"";return'\x3cli class\x3d"group-result"\x3e'+group.search_text+"\x3c/li\x3e"};AbstractChosen.prototype.results_update_field=function(){this.set_default_text();if(!this.is_multiple)this.results_reset_cleanup();
this.result_clear_highlight();this.result_single_selected=null;this.results_build();if(this.results_showing)return this.winnow_results()};AbstractChosen.prototype.results_toggle=function(){if(this.results_showing)return this.results_hide();else return this.results_show()};AbstractChosen.prototype.results_search=function(evt){if(this.results_showing)return this.winnow_results();else return this.results_show()};AbstractChosen.prototype.winnow_results=function(){var escapedSearchText,option,regex,regexAnchor,
results,results_group,searchText,startpos,text,zregex,_i,_len,_ref;this.no_results_clear();results=0;searchText=this.get_search_text();escapedSearchText=searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26");regexAnchor=this.search_contains?"":"^";regex=new RegExp(regexAnchor+escapedSearchText,"i");zregex=new RegExp(escapedSearchText,"i");_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];option.search_match=false;results_group=null;if(this.include_option_in_results(option)){if(option.group){option.group_match=
false;option.active_options=0}if(option.group_array_index!=null&&this.results_data[option.group_array_index]){results_group=this.results_data[option.group_array_index];if(results_group.active_options===0&&results_group.search_match)results+=1;results_group.active_options+=1}if(!(option.group&&!this.group_search)){option.search_text=option.group?option.label:option.html;option.search_match=this.search_string_match(option.search_text,regex);if(option.search_match&&!option.group)results+=1;if(option.search_match){if(searchText.length){startpos=
option.search_text.search(zregex);text=option.search_text.substr(0,startpos+searchText.length)+"\x3c/em\x3e"+option.search_text.substr(startpos+searchText.length);option.search_text=text.substr(0,startpos)+"\x3cem\x3e"+text.substr(startpos)}if(results_group!=null)results_group.group_match=true}else if(option.group_array_index!=null&&this.results_data[option.group_array_index].search_match)option.search_match=true}}}this.result_clear_highlight();if(results<1&&searchText.length){this.update_results_content("");
return this.no_results(searchText)}else{this.update_results_content(this.results_option_build());return this.winnow_results_set_highlight()}};AbstractChosen.prototype.search_string_match=function(search_string,regex){var part,parts,_i,_len;if(regex.test(search_string))return true;else if(this.enable_split_word_search&&(search_string.indexOf(" ")>=0||search_string.indexOf("[")===0)){parts=search_string.replace(/\[|\]/g,"").split(" ");if(parts.length)for(_i=0,_len=parts.length;_i<_len;_i++){part=parts[_i];
if(regex.test(part))return true}}};AbstractChosen.prototype.choices_count=function(){var option,_i,_len,_ref;if(this.selected_option_count!=null)return this.selected_option_count;this.selected_option_count=0;_ref=this.form_field.options;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];if(option.selected)this.selected_option_count+=1}return this.selected_option_count};AbstractChosen.prototype.choices_click=function(evt){evt.preventDefault();if(!(this.results_showing||this.is_disabled))return this.results_show()};
AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;stroke=(_ref=evt.which)!=null?_ref:evt.keyCode;this.search_field_scale();switch(stroke){case 8:if(this.is_multiple&&(this.backstroke_length<1&&this.choices_count()>0))return this.keydown_backstroke();else if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search()}break;case 13:evt.preventDefault();if(this.results_showing)return this.result_select(evt);break;case 27:if(this.results_showing)this.results_hide();
return true;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};AbstractChosen.prototype.container_width=function(){if(this.options.width!=null)return this.options.width;else return""+this.form_field.offsetWidth+"px"};AbstractChosen.prototype.include_option_in_results=function(option){if(this.is_multiple&&(!this.display_selected_options&&option.selected))return false;if(!this.display_disabled_options&&option.disabled)return false;if(option.empty)return false;
return true};AbstractChosen.browser_is_supported=function(){if(window.navigator.appName==="Microsoft Internet Explorer")return document.documentMode>=8;if(/iP(od|hone)/i.test(window.navigator.userAgent))return false;if(/Android/i.test(window.navigator.userAgent))if(/Mobile/i.test(window.navigator.userAgent))return false;return true};AbstractChosen.default_multiple_text="Select Some Options";AbstractChosen.default_single_text="Select an Option";AbstractChosen.default_no_result_text="No results match";
return AbstractChosen}();$=jQuery;$.fn.extend({chosen:function(options){if(!AbstractChosen.browser_is_supported())return this;return this.each(function(input_field){var $this,chosen;$this=$(this);chosen=$this.data("chosen");if(options==="destroy"&&chosen)chosen.destroy();else if(!chosen)$this.data("chosen",new Chosen(this,options))})}});Chosen=function(_super){__extends(Chosen,_super);function Chosen(){_ref=Chosen.__super__.constructor.apply(this,arguments);return _ref}Chosen.prototype.setup=function(){this.form_field_jq=
$(this.form_field);this.current_selectedIndex=this.form_field.selectedIndex;return this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")};Chosen.prototype.set_up_html=function(){var container_classes,container_props;container_classes=["chosen-container"];container_classes.push("chosen-container-"+(this.is_multiple?"multi":"single"));if(this.inherit_select_classes&&this.form_field.className)container_classes.push(this.form_field.className);if(this.is_rtl)container_classes.push("chosen-rtl");container_props=
{"class":container_classes.join(" "),"style":"width: "+this.container_width()+";","title":this.form_field.title};if(this.form_field.id.length)container_props.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen";this.container=$("\x3cdiv /\x3e",container_props);if(this.is_multiple)this.container.html('\x3cul class\x3d"chosen-choices"\x3e\x3cli class\x3d"search-field"\x3e\x3cinput type\x3d"text" value\x3d"'+this.default_text+'" class\x3d"default" autocomplete\x3d"off" style\x3d"width:25px;" /\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"chosen-drop"\x3e\x3cul class\x3d"chosen-results"\x3e\x3c/ul\x3e\x3c/div\x3e');
else this.container.html('\x3ca class\x3d"chosen-single chosen-default" tabindex\x3d"-1"\x3e\x3cspan\x3e'+this.default_text+'\x3c/span\x3e\x3cdiv\x3e\x3cb\x3e\x3c/b\x3e\x3c/div\x3e\x3c/a\x3e\x3cdiv class\x3d"chosen-drop"\x3e\x3cdiv class\x3d"chosen-search"\x3e\x3cinput type\x3d"text" autocomplete\x3d"off" /\x3e\x3c/div\x3e\x3cul class\x3d"chosen-results"\x3e\x3c/ul\x3e\x3c/div\x3e');this.form_field_jq.hide().after(this.container);this.dropdown=this.container.find("div.chosen-drop").first();this.search_field=
this.container.find("input").first();this.search_results=this.container.find("ul.chosen-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();if(this.is_multiple){this.search_choices=this.container.find("ul.chosen-choices").first();this.search_container=this.container.find("li.search-field").first()}else{this.search_container=this.container.find("div.chosen-search").first();this.selected_item=this.container.find(".chosen-single").first()}this.results_build();
this.set_tab_index();this.set_label_behavior();return this.form_field_jq.trigger("chosen:ready",{chosen:this})};Chosen.prototype.register_observers=function(){var _this=this;this.container.bind("mousedown.chosen",function(evt){_this.container_mousedown(evt)});this.container.bind("mouseup.chosen",function(evt){_this.container_mouseup(evt)});this.container.bind("mouseenter.chosen",function(evt){_this.mouse_enter(evt)});this.container.bind("mouseleave.chosen",function(evt){_this.mouse_leave(evt)});this.search_results.bind("mouseup.chosen",
function(evt){_this.search_results_mouseup(evt)});this.search_results.bind("mouseover.chosen",function(evt){_this.search_results_mouseover(evt)});this.search_results.bind("mouseout.chosen",function(evt){_this.search_results_mouseout(evt)});this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(evt){_this.search_results_mousewheel(evt)});this.form_field_jq.bind("chosen:updated.chosen",function(evt){_this.results_update_field(evt)});this.form_field_jq.bind("chosen:activate.chosen",
function(evt){_this.activate_field(evt)});this.form_field_jq.bind("chosen:open.chosen",function(evt){_this.container_mousedown(evt)});this.search_field.bind("blur.chosen",function(evt){_this.input_blur(evt)});this.search_field.bind("keyup.chosen",function(evt){_this.keyup_checker(evt)});this.search_field.bind("keydown.chosen",function(evt){_this.keydown_checker(evt)});this.search_field.bind("focus.chosen",function(evt){_this.input_focus(evt)});if(this.is_multiple)return this.search_choices.bind("click.chosen",
function(evt){_this.choices_click(evt)});else return this.container.bind("click.chosen",function(evt){evt.preventDefault()})};Chosen.prototype.destroy=function(){$(document).unbind("click.chosen",this.click_test_action);if(this.search_field[0].tabIndex)this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex;this.container.remove();this.form_field_jq.removeData("chosen");return this.form_field_jq.show()};Chosen.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;
if(this.is_disabled){this.container.addClass("chosen-disabled");this.search_field[0].disabled=true;if(!this.is_multiple)this.selected_item.unbind("focus.chosen",this.activate_action);return this.close_field()}else{this.container.removeClass("chosen-disabled");this.search_field[0].disabled=false;if(!this.is_multiple)return this.selected_item.bind("focus.chosen",this.activate_action)}};Chosen.prototype.container_mousedown=function(evt){if(!this.is_disabled){if(evt&&(evt.type==="mousedown"&&!this.results_showing))evt.preventDefault();
if(!(evt!=null&&$(evt.target).hasClass("search-choice-close"))){if(!this.active_field){if(this.is_multiple)this.search_field.val("");$(document).bind("click.chosen",this.click_test_action);this.results_show()}else if(!this.is_multiple&&(evt&&($(evt.target)[0]===this.selected_item[0]||$(evt.target).parents("a.chosen-single").length))){evt.preventDefault();this.results_toggle()}return this.activate_field()}}};Chosen.prototype.container_mouseup=function(evt){if(evt.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(evt)};
Chosen.prototype.search_results_mousewheel=function(evt){var delta,_ref1,_ref2;delta=-((_ref1=evt.originalEvent)!=null?_ref1.wheelDelta:void 0)||((_ref2=evt.originialEvent)!=null?_ref2.detail:void 0);if(delta!=null){evt.preventDefault();if(evt.type==="DOMMouseScroll")delta=delta*40;return this.search_results.scrollTop(delta+this.search_results.scrollTop())}};Chosen.prototype.blur_test=function(evt){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()};
Chosen.prototype.close_field=function(){$(document).unbind("click.chosen",this.click_test_action);this.active_field=false;this.results_hide();this.container.removeClass("chosen-container-active");this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};Chosen.prototype.activate_field=function(){this.container.addClass("chosen-container-active");this.active_field=true;this.search_field.val(this.search_field.val());return this.search_field.focus()};Chosen.prototype.test_active_click=
function(evt){if(this.container.is($(evt.target).closest(".chosen-container")))return this.active_field=true;else return this.close_field()};Chosen.prototype.results_build=function(){this.parsing=true;this.selected_option_count=null;this.results_data=SelectParser.select_to_array(this.form_field);if(this.is_multiple)this.search_choices.find("li.search-choice").remove();else if(!this.is_multiple){this.single_set_selected_text();if(this.disable_search||this.form_field.options.length<=this.disable_search_threshold){this.search_field[0].readOnly=
true;this.container.addClass("chosen-container-single-nosearch")}else{this.search_field[0].readOnly=false;this.container.removeClass("chosen-container-single-nosearch")}}this.update_results_content(this.results_option_build({first:true}));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();return this.parsing=false};Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){this.result_clear_highlight();
this.result_highlight=el;this.result_highlight.addClass("highlighted");maxHeight=parseInt(this.search_results.css("maxHeight"),10);visible_top=this.search_results.scrollTop();visible_bottom=maxHeight+visible_top;high_top=this.result_highlight.position().top+this.search_results.scrollTop();high_bottom=high_top+this.result_highlight.outerHeight();if(high_bottom>=visible_bottom)return this.search_results.scrollTop(high_bottom-maxHeight>0?high_bottom-maxHeight:0);else if(high_top<visible_top)return this.search_results.scrollTop(high_top)}};
Chosen.prototype.result_clear_highlight=function(){if(this.result_highlight)this.result_highlight.removeClass("highlighted");return this.result_highlight=null};Chosen.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false}this.container.addClass("chosen-with-drop");this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this});this.results_showing=true;this.search_field.focus();
this.search_field.val(this.search_field.val());return this.winnow_results()};Chosen.prototype.update_results_content=function(content){return this.search_results.html(content)};Chosen.prototype.results_hide=function(){if(this.results_showing){this.result_clear_highlight();this.container.removeClass("chosen-with-drop");this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})}return this.results_showing=false};Chosen.prototype.set_tab_index=function(el){var ti;if(this.form_field.tabIndex){ti=
this.form_field.tabIndex;this.form_field.tabIndex=-1;return this.search_field[0].tabIndex=ti}};Chosen.prototype.set_label_behavior=function(){var _this=this;this.form_field_label=this.form_field_jq.parents("label");if(!this.form_field_label.length&&this.form_field.id.length)this.form_field_label=$("label[for\x3d'"+this.form_field.id+"']");if(this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(evt){if(_this.is_multiple)return _this.container_mousedown(evt);else return _this.activate_field()})};
Chosen.prototype.show_search_field_default=function(){if(this.is_multiple&&(this.choices_count()<1&&!this.active_field)){this.search_field.val(this.default_text);return this.search_field.addClass("default")}else{this.search_field.val("");return this.search_field.removeClass("default")}};Chosen.prototype.search_results_mouseup=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target.length){this.result_highlight=
target;this.result_select(evt);return this.search_field.focus()}};Chosen.prototype.search_results_mouseover=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target)return this.result_do_highlight(target)};Chosen.prototype.search_results_mouseout=function(evt){if($(evt.target).hasClass("active-result"||$(evt.target).parents(".active-result").first()))return this.result_clear_highlight()};Chosen.prototype.choice_build=
function(item){var choice,close_link,_this=this;choice=$("\x3cli /\x3e",{"class":"search-choice"}).html("\x3cspan\x3e"+item.html+"\x3c/span\x3e");if(item.disabled)choice.addClass("search-choice-disabled");else{close_link=$("\x3ca /\x3e",{"class":"search-choice-close","data-option-array-index":item.array_index});close_link.bind("click.chosen",function(evt){return _this.choice_destroy_link_click(evt)});choice.append(close_link)}return this.search_container.before(choice)};Chosen.prototype.choice_destroy_link_click=
function(evt){evt.preventDefault();evt.stopPropagation();if(!this.is_disabled)return this.choice_destroy($(evt.target))};Chosen.prototype.choice_destroy=function(link){if(this.result_deselect(link[0].getAttribute("data-option-array-index"))){this.show_search_field_default();if(this.is_multiple&&(this.choices_count()>0&&this.search_field.val().length<1))this.results_hide();link.parents("li").first().remove();return this.search_field_scale()}};Chosen.prototype.results_reset=function(){this.form_field.options[0].selected=
true;this.selected_option_count=null;this.single_set_selected_text();this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};Chosen.prototype.results_reset_cleanup=function(){this.current_selectedIndex=this.form_field.selectedIndex;return this.selected_item.find("abbr").remove()};Chosen.prototype.result_select=function(evt){var high,item,selected_index;if(this.result_highlight){high=this.result_highlight;this.result_clear_highlight();
if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false}if(this.is_multiple)high.removeClass("active-result");else{if(this.result_single_selected){this.result_single_selected.removeClass("result-selected");selected_index=this.result_single_selected[0].getAttribute("data-option-array-index");this.results_data[selected_index].selected=false}this.result_single_selected=high}high.addClass("result-selected");item=
this.results_data[high[0].getAttribute("data-option-array-index")];item.selected=true;this.form_field.options[item.options_index].selected=true;this.selected_option_count=null;if(this.is_multiple)this.choice_build(item);else this.single_set_selected_text(item.text);if(!((evt.metaKey||evt.ctrlKey)&&this.is_multiple))this.results_hide();this.search_field.val("");if(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)this.form_field_jq.trigger("change",{"selected":this.form_field.options[item.options_index].value});
this.current_selectedIndex=this.form_field.selectedIndex;return this.search_field_scale()}};Chosen.prototype.single_set_selected_text=function(text){if(text==null)text=this.default_text;if(text===this.default_text)this.selected_item.addClass("chosen-default");else{this.single_deselect_control_build();this.selected_item.removeClass("chosen-default")}return this.selected_item.find("span").text(text)};Chosen.prototype.result_deselect=function(pos){var result_data;result_data=this.results_data[pos];if(!this.form_field.options[result_data.options_index].disabled){result_data.selected=
false;this.form_field.options[result_data.options_index].selected=false;this.selected_option_count=null;this.result_clear_highlight();if(this.results_showing)this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value});this.search_field_scale();return true}else return false};Chosen.prototype.single_deselect_control_build=function(){if(!this.allow_single_deselect)return;if(!this.selected_item.find("abbr").length)this.selected_item.find("span").first().after('\x3cabbr class\x3d"search-choice-close"\x3e\x3c/abbr\x3e');
return this.selected_item.addClass("chosen-single-with-deselect")};Chosen.prototype.get_search_text=function(){if(this.search_field.val()===this.default_text)return"";else return $("\x3cdiv/\x3e").text($.trim(this.search_field.val())).html()};Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;selected_results=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first();
if(do_high!=null)return this.result_do_highlight(do_high)};Chosen.prototype.no_results=function(terms){var no_results_html;no_results_html=$('\x3cli class\x3d"no-results"\x3e'+this.results_none_found+' "\x3cspan\x3e\x3c/span\x3e"\x3c/li\x3e');no_results_html.find("span").first().html(terms);return this.search_results.append(no_results_html)};Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};Chosen.prototype.keydown_arrow=function(){var next_sib;
if(this.results_showing&&this.result_highlight){next_sib=this.result_highlight.nextAll("li.active-result").first();if(next_sib)return this.result_do_highlight(next_sib)}else return this.results_show()};Chosen.prototype.keyup_arrow=function(){var prev_sibs;if(!this.results_showing&&!this.is_multiple)return this.results_show();else if(this.result_highlight){prev_sibs=this.result_highlight.prevAll("li.active-result");if(prev_sibs.length)return this.result_do_highlight(prev_sibs.first());else{if(this.choices_count()>
0)this.results_hide();return this.result_clear_highlight()}}};Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke()}else{next_available_destroy=this.search_container.siblings("li.search-choice").last();if(next_available_destroy.length&&!next_available_destroy.hasClass("search-choice-disabled")){this.pending_backstroke=next_available_destroy;if(this.single_backstroke_delete)return this.keydown_backstroke();
else return this.pending_backstroke.addClass("search-choice-focus")}}};Chosen.prototype.clear_backstroke=function(){if(this.pending_backstroke)this.pending_backstroke.removeClass("search-choice-focus");return this.pending_backstroke=null};Chosen.prototype.keydown_checker=function(evt){var stroke,_ref1;stroke=(_ref1=evt.which)!=null?_ref1:evt.keyCode;this.search_field_scale();if(stroke!==8&&this.pending_backstroke)this.clear_backstroke();switch(stroke){case 8:this.backstroke_length=this.search_field.val().length;
break;case 9:if(this.results_showing&&!this.is_multiple)this.result_select(evt);this.mouse_on_container=false;break;case 13:evt.preventDefault();break;case 38:evt.preventDefault();this.keyup_arrow();break;case 40:evt.preventDefault();this.keydown_arrow();break}};Chosen.prototype.search_field_scale=function(){var div,f_width,h,style,style_block,styles,w,_i,_len;if(this.is_multiple){h=0;w=0;style_block="position:absolute; left: -1000px; top: -1000px; display:none;";styles=["font-size","font-style",
"font-weight","font-family","line-height","text-transform","letter-spacing"];for(_i=0,_len=styles.length;_i<_len;_i++){style=styles[_i];style_block+=style+":"+this.search_field.css(style)+";"}div=$("\x3cdiv /\x3e",{"style":style_block});div.text(this.search_field.val());$("body").append(div);w=div.width()+25;div.remove();f_width=this.container.outerWidth();if(w>f_width-10)w=f_width-10;return this.search_field.css({"width":w+"px"})}};return Chosen}(AbstractChosen)}).call(this);
window.CodeMirror=function(){var gecko=/gecko\/\d/i.test(navigator.userAgent);var ie=/MSIE \d/.test(navigator.userAgent);var ie_lt8=ie&&(document.documentMode==null||document.documentMode<8);var ie_lt9=ie&&(document.documentMode==null||document.documentMode<9);var webkit=/WebKit\//.test(navigator.userAgent);var qtwebkit=webkit&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var chrome=/Chrome\//.test(navigator.userAgent);var opera=/Opera\//.test(navigator.userAgent);var safari=/Apple Computer/.test(navigator.vendor);
var khtml=/KHTML\//.test(navigator.userAgent);var mac_geLion=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent);var mac_geMountainLion=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var phantom=/PhantomJS/.test(navigator.userAgent);var ios=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var mobile=ios||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var mac=ios||/Mac/.test(navigator.platform);var windows=/win/i.test(navigator.platform);
var opera_version=opera&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(opera_version)opera_version=Number(opera_version[1]);if(opera_version&&opera_version>=15){opera=false;webkit=true}var flipCtrlCmd=mac&&(qtwebkit||opera&&(opera_version==null||opera_version<12.11));var captureMiddleClick=gecko||ie&&!ie_lt9;var sawReadOnlySpans=false,sawCollapsedSpans=false;function CodeMirror(place,options){if(!(this instanceof CodeMirror))return new CodeMirror(place,options);this.options=options=options||
{};for(var opt in defaults)if(!options.hasOwnProperty(opt)&&defaults.hasOwnProperty(opt))options[opt]=defaults[opt];setGuttersForLineNumbers(options);var docStart=typeof options.value=="string"?0:options.value.first;var display=this.display=makeDisplay(place,docStart);display.wrapper.CodeMirror=this;updateGutters(this);if(options.autofocus&&!mobile)focusInput(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,draggingText:false,
highlight:new Delayed};themeChanged(this);if(options.lineWrapping)this.display.wrapper.className+=" CodeMirror-wrap";var doc=options.value;if(typeof doc=="string")doc=new Doc(options.value,options.mode);operation(this,attachDoc)(this,doc);if(ie)setTimeout(bind(resetInput,this,true),20);registerEventHandlers(this);var hasFocus;try{hasFocus=document.activeElement==display.input}catch(e){}if(hasFocus||options.autofocus&&!mobile)setTimeout(bind(onFocus,this),20);else onBlur(this);operation(this,function(){for(var opt in optionHandlers)if(optionHandlers.propertyIsEnumerable(opt))optionHandlers[opt](this,
options[opt],Init);for(var i=0;i<initHooks.length;++i)initHooks[i](this)})()}function makeDisplay(place,docStart){var d={};var input=d.input=elt("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");if(webkit)input.style.width="1000px";else input.setAttribute("wrap","off");if(ios)input.style.border="1px solid black";input.setAttribute("autocorrect","off");input.setAttribute("autocapitalize","off");input.setAttribute("spellcheck","false");d.inputDiv=
elt("div",[input],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");d.scrollbarH=elt("div",[elt("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");d.scrollbarV=elt("div",[elt("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");d.scrollbarFiller=elt("div",null,"CodeMirror-scrollbar-filler");d.gutterFiller=elt("div",null,"CodeMirror-gutter-filler");d.lineDiv=elt("div",null,"CodeMirror-code");d.selectionDiv=elt("div",null,null,"position: relative; z-index: 1");d.cursor=
elt("div"," ","CodeMirror-cursor");d.otherCursor=elt("div"," ","CodeMirror-cursor CodeMirror-secondarycursor");d.measure=elt("div",null,"CodeMirror-measure");d.lineSpace=elt("div",[d.measure,d.selectionDiv,d.lineDiv,d.cursor,d.otherCursor],null,"position: relative; outline: none");d.mover=elt("div",[elt("div",[d.lineSpace],"CodeMirror-lines")],null,"position: relative");d.sizer=elt("div",[d.mover],"CodeMirror-sizer");d.heightForcer=elt("div",null,null,"position: absolute; height: "+scrollerCutOff+
"px; width: 1px;");d.gutters=elt("div",null,"CodeMirror-gutters");d.lineGutter=null;d.scroller=elt("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll");d.scroller.setAttribute("tabIndex","-1");d.wrapper=elt("div",[d.inputDiv,d.scrollbarH,d.scrollbarV,d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror");if(ie_lt8){d.gutters.style.zIndex=-1;d.scroller.style.paddingRight=0}if(place.appendChild)place.appendChild(d.wrapper);else place(d.wrapper);if(ios)input.style.width="0px";if(!webkit)d.scroller.draggable=
true;if(khtml){d.inputDiv.style.height="1px";d.inputDiv.style.position="absolute"}else if(ie_lt8)d.scrollbarH.style.minWidth=d.scrollbarV.style.minWidth="18px";d.viewOffset=d.lastSizeC=0;d.showingFrom=d.showingTo=docStart;d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null;d.prevInput="";d.alignWidgets=false;d.pollingFast=false;d.poll=new Delayed;d.cachedCharWidth=d.cachedTextHeight=null;d.measureLineCache=[];d.measureLineCachePos=0;d.inaccurateSelection=false;d.maxLine=null;d.maxLineLength=0;
d.maxLineChanged=false;d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null;return d}function loadMode(cm){cm.doc.mode=CodeMirror.getMode(cm.options,cm.doc.modeOption);cm.doc.iter(function(line){if(line.stateAfter)line.stateAfter=null;if(line.styles)line.styles=null});cm.doc.frontier=cm.doc.first;startWorker(cm,100);cm.state.modeGen++;if(cm.curOp)regChange(cm)}function wrappingChanged(cm){if(cm.options.lineWrapping){cm.display.wrapper.className+=" CodeMirror-wrap";cm.display.sizer.style.minWidth=
""}else{cm.display.wrapper.className=cm.display.wrapper.className.replace(" CodeMirror-wrap","");computeMaxLength(cm)}estimateLineHeights(cm);regChange(cm);clearCaches(cm);setTimeout(function(){updateScrollbars(cm)},100)}function estimateHeight(cm){var th=textHeight(cm.display),wrapping=cm.options.lineWrapping;var perLine=wrapping&&Math.max(5,cm.display.scroller.clientWidth/charWidth(cm.display)-3);return function(line){if(lineIsHidden(cm.doc,line))return 0;else if(wrapping)return(Math.ceil(line.text.length/
perLine)||1)*th;else return th}}function estimateLineHeights(cm){var doc=cm.doc,est=estimateHeight(cm);doc.iter(function(line){var estHeight=est(line);if(estHeight!=line.height)updateLineHeight(line,estHeight)})}function keyMapChanged(cm){var map=keyMap[cm.options.keyMap],style=map.style;cm.display.wrapper.className=cm.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(style?" cm-keymap-"+style:"");cm.state.disableInput=map.disableInput}function themeChanged(cm){cm.display.wrapper.className=
cm.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+cm.options.theme.replace(/(^|\s)\s*/g," cm-s-");clearCaches(cm)}function guttersChanged(cm){updateGutters(cm);regChange(cm);setTimeout(function(){alignHorizontally(cm)},20)}function updateGutters(cm){var gutters=cm.display.gutters,specs=cm.options.gutters;removeChildren(gutters);for(var i=0;i<specs.length;++i){var gutterClass=specs[i];var gElt=gutters.appendChild(elt("div",null,"CodeMirror-gutter "+gutterClass));if(gutterClass=="CodeMirror-linenumbers"){cm.display.lineGutter=
gElt;gElt.style.width=(cm.display.lineNumWidth||1)+"px"}}gutters.style.display=i?"":"none"}function lineLength(doc,line){if(line.height==0)return 0;var len=line.text.length,merged,cur=line;while(merged=collapsedSpanAtStart(cur)){var found=merged.find();cur=getLine(doc,found.from.line);len+=found.from.ch-found.to.ch}cur=line;while(merged=collapsedSpanAtEnd(cur)){var found=merged.find();len-=cur.text.length-found.from.ch;cur=getLine(doc,found.to.line);len+=cur.text.length-found.to.ch}return len}function computeMaxLength(cm){var d=
cm.display,doc=cm.doc;d.maxLine=getLine(doc,doc.first);d.maxLineLength=lineLength(doc,d.maxLine);d.maxLineChanged=true;doc.iter(function(line){var len=lineLength(doc,line);if(len>d.maxLineLength){d.maxLineLength=len;d.maxLine=line}})}function setGuttersForLineNumbers(options){var found=indexOf(options.gutters,"CodeMirror-linenumbers");if(found==-1&&options.lineNumbers)options.gutters=options.gutters.concat(["CodeMirror-linenumbers"]);else if(found>-1&&!options.lineNumbers){options.gutters=options.gutters.slice(0);
options.gutters.splice(found,1)}}function updateScrollbars(cm){var d=cm.display,docHeight=cm.doc.height;var totalHeight=docHeight+paddingVert(d);d.sizer.style.minHeight=d.heightForcer.style.top=totalHeight+"px";d.gutters.style.height=Math.max(totalHeight,d.scroller.clientHeight-scrollerCutOff)+"px";var scrollHeight=Math.max(totalHeight,d.scroller.scrollHeight);var needsH=d.scroller.scrollWidth>d.scroller.clientWidth+1;var needsV=scrollHeight>d.scroller.clientHeight+1;if(needsV){d.scrollbarV.style.display=
"block";d.scrollbarV.style.bottom=needsH?scrollbarWidth(d.measure)+"px":"0";d.scrollbarV.firstChild.style.height=scrollHeight-d.scroller.clientHeight+d.scrollbarV.clientHeight+"px"}else{d.scrollbarV.style.display="";d.scrollbarV.firstChild.style.height="0"}if(needsH){d.scrollbarH.style.display="block";d.scrollbarH.style.right=needsV?scrollbarWidth(d.measure)+"px":"0";d.scrollbarH.firstChild.style.width=d.scroller.scrollWidth-d.scroller.clientWidth+d.scrollbarH.clientWidth+"px"}else{d.scrollbarH.style.display=
"";d.scrollbarH.firstChild.style.width="0"}if(needsH&&needsV){d.scrollbarFiller.style.display="block";d.scrollbarFiller.style.height=d.scrollbarFiller.style.width=scrollbarWidth(d.measure)+"px"}else d.scrollbarFiller.style.display="";if(needsH&&(cm.options.coverGutterNextToScrollbar&&cm.options.fixedGutter)){d.gutterFiller.style.display="block";d.gutterFiller.style.height=scrollbarWidth(d.measure)+"px";d.gutterFiller.style.width=d.gutters.offsetWidth+"px"}else d.gutterFiller.style.display="";if(mac_geLion&&
scrollbarWidth(d.measure)===0){d.scrollbarV.style.minWidth=d.scrollbarH.style.minHeight=mac_geMountainLion?"18px":"12px";d.scrollbarV.style.pointerEvents=d.scrollbarH.style.pointerEvents="none"}}function visibleLines(display,doc,viewPort){var top=display.scroller.scrollTop,height=display.wrapper.clientHeight;if(typeof viewPort=="number")top=viewPort;else if(viewPort){top=viewPort.top;height=viewPort.bottom-viewPort.top}top=Math.floor(top-paddingTop(display));var bottom=Math.ceil(top+height);return{from:lineAtHeight(doc,
top),to:lineAtHeight(doc,bottom)}}function alignHorizontally(cm){var display=cm.display;if(!display.alignWidgets&&(!display.gutters.firstChild||!cm.options.fixedGutter))return;var comp=compensateForHScroll(display)-display.scroller.scrollLeft+cm.doc.scrollLeft;var gutterW=display.gutters.offsetWidth,l=comp+"px";for(var n=display.lineDiv.firstChild;n;n=n.nextSibling)if(n.alignable)for(var i=0,a=n.alignable;i<a.length;++i)a[i].style.left=l;if(cm.options.fixedGutter)display.gutters.style.left=comp+gutterW+
"px"}function maybeUpdateLineNumberWidth(cm){if(!cm.options.lineNumbers)return false;var doc=cm.doc,last=lineNumberFor(cm.options,doc.first+doc.size-1),display=cm.display;if(last.length!=display.lineNumChars){var test=display.measure.appendChild(elt("div",[elt("div",last)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var innerW=test.firstChild.offsetWidth,padding=test.offsetWidth-innerW;display.lineGutter.style.width="";display.lineNumInnerWidth=Math.max(innerW,display.lineGutter.offsetWidth-padding);
display.lineNumWidth=display.lineNumInnerWidth+padding;display.lineNumChars=display.lineNumInnerWidth?last.length:-1;display.lineGutter.style.width=display.lineNumWidth+"px";return true}return false}function lineNumberFor(options,i){return String(options.lineNumberFormatter(i+options.firstLineNumber))}function compensateForHScroll(display){return getRect(display.scroller).left-getRect(display.sizer).left}function updateDisplay(cm,changes,viewPort,forced){var oldFrom=cm.display.showingFrom,oldTo=cm.display.showingTo,
updated;var visible=visibleLines(cm.display,cm.doc,viewPort);for(var first=true;;first=false){var oldWidth=cm.display.scroller.clientWidth;if(!updateDisplayInner(cm,changes,visible,forced))break;updated=true;changes=[];updateSelection(cm);updateScrollbars(cm);if(first&&(cm.options.lineWrapping&&oldWidth!=cm.display.scroller.clientWidth)){forced=true;continue}forced=false;if(viewPort)viewPort=Math.min(cm.display.scroller.scrollHeight-cm.display.scroller.clientHeight,typeof viewPort=="number"?viewPort:
viewPort.top);visible=visibleLines(cm.display,cm.doc,viewPort);if(visible.from>=cm.display.showingFrom&&visible.to<=cm.display.showingTo)break}if(updated){signalLater(cm,"update",cm);if(cm.display.showingFrom!=oldFrom||cm.display.showingTo!=oldTo)signalLater(cm,"viewportChange",cm,cm.display.showingFrom,cm.display.showingTo)}return updated}function updateDisplayInner(cm,changes,visible,forced){var display=cm.display,doc=cm.doc;if(!display.wrapper.clientWidth){display.showingFrom=display.showingTo=
doc.first;display.viewOffset=0;return}if(!forced&&(changes.length==0&&(visible.from>display.showingFrom&&visible.to<display.showingTo)))return;if(maybeUpdateLineNumberWidth(cm))changes=[{from:doc.first,to:doc.first+doc.size}];var gutterW=display.sizer.style.marginLeft=display.gutters.offsetWidth+"px";display.scrollbarH.style.left=cm.options.fixedGutter?gutterW:"0";var positionsChangedFrom=Infinity;if(cm.options.lineNumbers)for(var i=0;i<changes.length;++i)if(changes[i].diff&&changes[i].from<positionsChangedFrom)positionsChangedFrom=
changes[i].from;var end=doc.first+doc.size;var from=Math.max(visible.from-cm.options.viewportMargin,doc.first);var to=Math.min(end,visible.to+cm.options.viewportMargin);if(display.showingFrom<from&&from-display.showingFrom<20)from=Math.max(doc.first,display.showingFrom);if(display.showingTo>to&&display.showingTo-to<20)to=Math.min(end,display.showingTo);if(sawCollapsedSpans){from=lineNo(visualLine(doc,getLine(doc,from)));while(to<end&&lineIsHidden(doc,getLine(doc,to)))++to}var intact=[{from:Math.max(display.showingFrom,
doc.first),to:Math.min(display.showingTo,end)}];if(intact[0].from>=intact[0].to)intact=[];else intact=computeIntact(intact,changes);if(sawCollapsedSpans)for(var i=0;i<intact.length;++i){var range=intact[i],merged;while(merged=collapsedSpanAtEnd(getLine(doc,range.to-1))){var newTo=merged.find().from.line;if(newTo>range.from)range.to=newTo;else{intact.splice(i--,1);break}}}var intactLines=0;for(var i=0;i<intact.length;++i){var range=intact[i];if(range.from<from)range.from=from;if(range.to>to)range.to=
to;if(range.from>=range.to)intact.splice(i--,1);else intactLines+=range.to-range.from}if(!forced&&(intactLines==to-from&&(from==display.showingFrom&&to==display.showingTo))){updateViewOffset(cm);return}intact.sort(function(a,b){return a.from-b.from});try{var focused=document.activeElement}catch(e){}if(intactLines<(to-from)*0.7)display.lineDiv.style.display="none";patchDisplay(cm,from,to,intact,positionsChangedFrom);display.lineDiv.style.display="";if(focused&&(document.activeElement!=focused&&focused.offsetHeight))focused.focus();
var different=from!=display.showingFrom||(to!=display.showingTo||display.lastSizeC!=display.wrapper.clientHeight);if(different){display.lastSizeC=display.wrapper.clientHeight;startWorker(cm,400)}display.showingFrom=from;display.showingTo=to;updateHeightsInViewport(cm);updateViewOffset(cm);return true}function updateHeightsInViewport(cm){var display=cm.display;var prevBottom=display.lineDiv.offsetTop;for(var node=display.lineDiv.firstChild,height;node;node=node.nextSibling)if(node.lineObj){if(ie_lt8){var bot=
node.offsetTop+node.offsetHeight;height=bot-prevBottom;prevBottom=bot}else{var box=getRect(node);height=box.bottom-box.top}var diff=node.lineObj.height-height;if(height<2)height=textHeight(display);if(diff>0.001||diff<-0.001){updateLineHeight(node.lineObj,height);var widgets=node.lineObj.widgets;if(widgets)for(var i=0;i<widgets.length;++i)widgets[i].height=widgets[i].node.offsetHeight}}}function updateViewOffset(cm){var off=cm.display.viewOffset=heightAtLine(cm,getLine(cm.doc,cm.display.showingFrom));
cm.display.mover.style.top=off+"px"}function computeIntact(intact,changes){for(var i=0,l=changes.length||0;i<l;++i){var change=changes[i],intact2=[],diff=change.diff||0;for(var j=0,l2=intact.length;j<l2;++j){var range=intact[j];if(change.to<=range.from&&change.diff)intact2.push({from:range.from+diff,to:range.to+diff});else if(change.to<=range.from||change.from>=range.to)intact2.push(range);else{if(change.from>range.from)intact2.push({from:range.from,to:change.from});if(change.to<range.to)intact2.push({from:change.to+
diff,to:range.to+diff})}}intact=intact2}return intact}function getDimensions(cm){var d=cm.display,left={},width={};for(var n=d.gutters.firstChild,i=0;n;n=n.nextSibling,++i){left[cm.options.gutters[i]]=n.offsetLeft;width[cm.options.gutters[i]]=n.offsetWidth}return{fixedPos:compensateForHScroll(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:left,gutterWidth:width,wrapperWidth:d.wrapper.clientWidth}}function patchDisplay(cm,from,to,intact,updateNumbersFrom){var dims=getDimensions(cm);var display=
cm.display,lineNumbers=cm.options.lineNumbers;if(!intact.length&&(!webkit||!cm.display.currentWheelTarget))removeChildren(display.lineDiv);var container=display.lineDiv,cur=container.firstChild;function rm(node){var next=node.nextSibling;if(webkit&&(mac&&cm.display.currentWheelTarget==node)){node.style.display="none";node.lineObj=null}else node.parentNode.removeChild(node);return next}var nextIntact=intact.shift(),lineN=from;cm.doc.iter(from,to,function(line){if(nextIntact&&nextIntact.to==lineN)nextIntact=
intact.shift();if(lineIsHidden(cm.doc,line)){if(line.height!=0)updateLineHeight(line,0);if(line.widgets&&(cur&&cur.previousSibling))for(var i=0;i<line.widgets.length;++i){var w=line.widgets[i];if(w.showIfHidden){var prev=cur.previousSibling;if(/pre/i.test(prev.nodeName)){var wrap=elt("div",null,null,"position: relative");prev.parentNode.replaceChild(wrap,prev);wrap.appendChild(prev);prev=wrap}var wnode=prev.appendChild(elt("div",[w.node],"CodeMirror-linewidget"));if(!w.handleMouseEvents)wnode.ignoreEvents=
true;positionLineWidget(w,wnode,prev,dims)}}}else if(nextIntact&&(nextIntact.from<=lineN&&nextIntact.to>lineN)){while(cur.lineObj!=line)cur=rm(cur);if(lineNumbers&&(updateNumbersFrom<=lineN&&cur.lineNumber))setTextContent(cur.lineNumber,lineNumberFor(cm.options,lineN));cur=cur.nextSibling}else{if(line.widgets)for(var j=0,search=cur,reuse;search&&j<20;++j,search=search.nextSibling)if(search.lineObj==line&&/div/i.test(search.nodeName)){reuse=search;break}var lineNode=buildLineElement(cm,line,lineN,
dims,reuse);if(lineNode!=reuse)container.insertBefore(lineNode,cur);else{while(cur!=reuse)cur=rm(cur);cur=cur.nextSibling}lineNode.lineObj=line}++lineN});while(cur)cur=rm(cur)}function buildLineElement(cm,line,lineNo,dims,reuse){var built=buildLineContent(cm,line),lineElement=built.pre;var markers=line.gutterMarkers,display=cm.display,wrap;var bgClass=built.bgClass?built.bgClass+" "+(line.bgClass||""):line.bgClass;if(!cm.options.lineNumbers&&(!markers&&(!bgClass&&(!line.wrapClass&&!line.widgets))))return lineElement;
if(reuse){reuse.alignable=null;var isOk=true,widgetsSeen=0,insertBefore=null;for(var n=reuse.firstChild,next;n;n=next){next=n.nextSibling;if(!/\bCodeMirror-linewidget\b/.test(n.className))reuse.removeChild(n);else{for(var i=0;i<line.widgets.length;++i){var widget=line.widgets[i];if(widget.node==n.firstChild){if(!widget.above&&!insertBefore)insertBefore=n;positionLineWidget(widget,n,reuse,dims);++widgetsSeen;break}}if(i==line.widgets.length){isOk=false;break}}}reuse.insertBefore(lineElement,insertBefore);
if(isOk&&widgetsSeen==line.widgets.length){wrap=reuse;reuse.className=line.wrapClass||""}}if(!wrap){wrap=elt("div",null,line.wrapClass,"position: relative");wrap.appendChild(lineElement)}if(bgClass)wrap.insertBefore(elt("div",null,bgClass+" CodeMirror-linebackground"),wrap.firstChild);if(cm.options.lineNumbers||markers){var gutterWrap=wrap.insertBefore(elt("div",null,null,"position: absolute; left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px"),wrap.firstChild);if(cm.options.fixedGutter)(wrap.alignable||
(wrap.alignable=[])).push(gutterWrap);if(cm.options.lineNumbers&&(!markers||!markers["CodeMirror-linenumbers"]))wrap.lineNumber=gutterWrap.appendChild(elt("div",lineNumberFor(cm.options,lineNo),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+dims.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+display.lineNumInnerWidth+"px"));if(markers)for(var k=0;k<cm.options.gutters.length;++k){var id=cm.options.gutters[k],found=markers.hasOwnProperty(id)&&markers[id];if(found)gutterWrap.appendChild(elt("div",
[found],"CodeMirror-gutter-elt","left: "+dims.gutterLeft[id]+"px; width: "+dims.gutterWidth[id]+"px"))}}if(ie_lt8)wrap.style.zIndex=2;if(line.widgets&&wrap!=reuse)for(var i=0,ws=line.widgets;i<ws.length;++i){var widget=ws[i],node=elt("div",[widget.node],"CodeMirror-linewidget");if(!widget.handleMouseEvents)node.ignoreEvents=true;positionLineWidget(widget,node,wrap,dims);if(widget.above)wrap.insertBefore(node,cm.options.lineNumbers&&line.height!=0?gutterWrap:lineElement);else wrap.appendChild(node);
signalLater(widget,"redraw")}return wrap}function positionLineWidget(widget,node,wrap,dims){if(widget.noHScroll){(wrap.alignable||(wrap.alignable=[])).push(node);var width=dims.wrapperWidth;node.style.left=dims.fixedPos+"px";if(!widget.coverGutter){width-=dims.gutterTotalWidth;node.style.paddingLeft=dims.gutterTotalWidth+"px"}node.style.width=width+"px"}if(widget.coverGutter){node.style.zIndex=5;node.style.position="relative";if(!widget.noHScroll)node.style.marginLeft=-dims.gutterTotalWidth+"px"}}
function updateSelection(cm){var display=cm.display;var collapsed=posEq(cm.doc.sel.from,cm.doc.sel.to);if(collapsed||cm.options.showCursorWhenSelecting)updateSelectionCursor(cm);else display.cursor.style.display=display.otherCursor.style.display="none";if(!collapsed)updateSelectionRange(cm);else display.selectionDiv.style.display="none";if(cm.options.moveInputWithCursor){var headPos=cursorCoords(cm,cm.doc.sel.head,"div");var wrapOff=getRect(display.wrapper),lineOff=getRect(display.lineDiv);display.inputDiv.style.top=
Math.max(0,Math.min(display.wrapper.clientHeight-10,headPos.top+lineOff.top-wrapOff.top))+"px";display.inputDiv.style.left=Math.max(0,Math.min(display.wrapper.clientWidth-10,headPos.left+lineOff.left-wrapOff.left))+"px"}}function updateSelectionCursor(cm){var display=cm.display,pos=cursorCoords(cm,cm.doc.sel.head,"div");display.cursor.style.left=pos.left+"px";display.cursor.style.top=pos.top+"px";display.cursor.style.height=Math.max(0,pos.bottom-pos.top)*cm.options.cursorHeight+"px";display.cursor.style.display=
"";if(pos.other){display.otherCursor.style.display="";display.otherCursor.style.left=pos.other.left+"px";display.otherCursor.style.top=pos.other.top+"px";display.otherCursor.style.height=(pos.other.bottom-pos.other.top)*0.85+"px"}else display.otherCursor.style.display="none"}function updateSelectionRange(cm){var display=cm.display,doc=cm.doc,sel=cm.doc.sel;var fragment=document.createDocumentFragment();var clientWidth=display.lineSpace.offsetWidth,pl=paddingLeft(cm.display);function add(left,top,
width,bottom){if(top<0)top=0;fragment.appendChild(elt("div",null,"CodeMirror-selected","position: absolute; left: "+left+"px; top: "+top+"px; width: "+(width==null?clientWidth-left:width)+"px; height: "+(bottom-top)+"px"))}function drawForLine(line,fromArg,toArg){var lineObj=getLine(doc,line);var lineLen=lineObj.text.length;var start,end;function coords(ch,bias){return charCoords(cm,Pos(line,ch),"div",lineObj,bias)}iterateBidiSections(getOrder(lineObj),fromArg||0,toArg==null?lineLen:toArg,function(from,
to,dir){var leftPos=coords(from,"left"),rightPos,left,right;if(from==to){rightPos=leftPos;left=right=leftPos.left}else{rightPos=coords(to-1,"right");if(dir=="rtl"){var tmp=leftPos;leftPos=rightPos;rightPos=tmp}left=leftPos.left;right=rightPos.right}if(fromArg==null&&from==0)left=pl;if(rightPos.top-leftPos.top>3){add(left,leftPos.top,null,leftPos.bottom);left=pl;if(leftPos.bottom<rightPos.top)add(left,leftPos.bottom,null,rightPos.top)}if(toArg==null&&to==lineLen)right=clientWidth;if(!start||(leftPos.top<
start.top||leftPos.top==start.top&&leftPos.left<start.left))start=leftPos;if(!end||(rightPos.bottom>end.bottom||rightPos.bottom==end.bottom&&rightPos.right>end.right))end=rightPos;if(left<pl+1)left=pl;add(left,rightPos.top,right-left,rightPos.bottom)});return{start:start,end:end}}if(sel.from.line==sel.to.line)drawForLine(sel.from.line,sel.from.ch,sel.to.ch);else{var fromLine=getLine(doc,sel.from.line),toLine=getLine(doc,sel.to.line);var singleVLine=visualLine(doc,fromLine)==visualLine(doc,toLine);
var leftEnd=drawForLine(sel.from.line,sel.from.ch,singleVLine?fromLine.text.length:null).end;var rightStart=drawForLine(sel.to.line,singleVLine?0:null,sel.to.ch).start;if(singleVLine)if(leftEnd.top<rightStart.top-2){add(leftEnd.right,leftEnd.top,null,leftEnd.bottom);add(pl,rightStart.top,rightStart.left,rightStart.bottom)}else add(leftEnd.right,leftEnd.top,rightStart.left-leftEnd.right,leftEnd.bottom);if(leftEnd.bottom<rightStart.top)add(pl,leftEnd.bottom,null,rightStart.top)}removeChildrenAndAdd(display.selectionDiv,
fragment);display.selectionDiv.style.display=""}function restartBlink(cm){if(!cm.state.focused)return;var display=cm.display;clearInterval(display.blinker);var on=true;display.cursor.style.visibility=display.otherCursor.style.visibility="";if(cm.options.cursorBlinkRate>0)display.blinker=setInterval(function(){display.cursor.style.visibility=display.otherCursor.style.visibility=(on=!on)?"":"hidden"},cm.options.cursorBlinkRate)}function startWorker(cm,time){if(cm.doc.mode.startState&&cm.doc.frontier<
cm.display.showingTo)cm.state.highlight.set(time,bind(highlightWorker,cm))}function highlightWorker(cm){var doc=cm.doc;if(doc.frontier<doc.first)doc.frontier=doc.first;if(doc.frontier>=cm.display.showingTo)return;var end=+new Date+cm.options.workTime;var state=copyState(doc.mode,getStateBefore(cm,doc.frontier));var changed=[],prevChange;doc.iter(doc.frontier,Math.min(doc.first+doc.size,cm.display.showingTo+500),function(line){if(doc.frontier>=cm.display.showingFrom){var oldStyles=line.styles;line.styles=
highlightLine(cm,line,state);var ischange=!oldStyles||oldStyles.length!=line.styles.length;for(var i=0;!ischange&&i<oldStyles.length;++i)ischange=oldStyles[i]!=line.styles[i];if(ischange)if(prevChange&&prevChange.end==doc.frontier)prevChange.end++;else changed.push(prevChange={start:doc.frontier,end:doc.frontier+1});line.stateAfter=copyState(doc.mode,state)}else{processLine(cm,line,state);line.stateAfter=doc.frontier%5==0?copyState(doc.mode,state):null}++doc.frontier;if(+new Date>end){startWorker(cm,
cm.options.workDelay);return true}});if(changed.length)operation(cm,function(){for(var i=0;i<changed.length;++i)regChange(this,changed[i].start,changed[i].end)})()}function findStartLine(cm,n,precise){var minindent,minline,doc=cm.doc;var lim=precise?-1:n-(cm.doc.mode.innerMode?1E3:100);for(var search=n;search>lim;--search){if(search<=doc.first)return doc.first;var line=getLine(doc,search-1);if(line.stateAfter&&(!precise||search<=doc.frontier))return search;var indented=countColumn(line.text,null,
cm.options.tabSize);if(minline==null||minindent>indented){minline=search-1;minindent=indented}}return minline}function getStateBefore(cm,n,precise){var doc=cm.doc,display=cm.display;if(!doc.mode.startState)return true;var pos=findStartLine(cm,n,precise),state=pos>doc.first&&getLine(doc,pos-1).stateAfter;if(!state)state=startState(doc.mode);else state=copyState(doc.mode,state);doc.iter(pos,n,function(line){processLine(cm,line,state);var save=pos==n-1||(pos%5==0||pos>=display.showingFrom&&pos<display.showingTo);
line.stateAfter=save?copyState(doc.mode,state):null;++pos});if(precise)doc.frontier=pos;return state}function paddingTop(display){return display.lineSpace.offsetTop}function paddingVert(display){return display.mover.offsetHeight-display.lineSpace.offsetHeight}function paddingLeft(display){var e=removeChildrenAndAdd(display.measure,elt("pre",null,null,"text-align: left")).appendChild(elt("span","x"));return e.offsetLeft}function measureChar(cm,line,ch,data,bias){var dir=-1;data=data||measureLine(cm,
line);if(data.crude){var left=data.left+ch*data.width;return{left:left,right:left+data.width,top:data.top,bottom:data.bottom}}for(var pos=ch;;pos+=dir){var r=data[pos];if(r)break;if(dir<0&&pos==0)dir=1}bias=pos>ch?"left":pos<ch?"right":bias;if(bias=="left"&&r.leftSide)r=r.leftSide;else if(bias=="right"&&r.rightSide)r=r.rightSide;return{left:pos<ch?r.right:r.left,right:pos>ch?r.left:r.right,top:r.top,bottom:r.bottom}}function findCachedMeasurement(cm,line){var cache=cm.display.measureLineCache;for(var i=
0;i<cache.length;++i){var memo=cache[i];if(memo.text==line.text&&(memo.markedSpans==line.markedSpans&&(cm.display.scroller.clientWidth==memo.width&&memo.classes==line.textClass+"|"+line.wrapClass)))return memo}}function clearCachedMeasurement(cm,line){var exists=findCachedMeasurement(cm,line);if(exists)exists.text=exists.measure=exists.markedSpans=null}function measureLine(cm,line){var cached=findCachedMeasurement(cm,line);if(cached)return cached.measure;var measure=measureLineInner(cm,line);var cache=
cm.display.measureLineCache;var memo={text:line.text,width:cm.display.scroller.clientWidth,markedSpans:line.markedSpans,measure:measure,classes:line.textClass+"|"+line.wrapClass};if(cache.length==16)cache[++cm.display.measureLineCachePos%16]=memo;else cache.push(memo);return measure}function measureLineInner(cm,line){if(!cm.options.lineWrapping&&line.text.length>=cm.options.crudeMeasuringFrom)return crudelyMeasureLine(cm,line);var display=cm.display,measure=emptyArray(line.text.length);var pre=buildLineContent(cm,
line,measure,true).pre;if(ie&&(!ie_lt8&&(!cm.options.lineWrapping&&pre.childNodes.length>100))){var fragment=document.createDocumentFragment();var chunk=10,n=pre.childNodes.length;for(var i=0,chunks=Math.ceil(n/chunk);i<chunks;++i){var wrap=elt("div",null,null,"display: inline-block");for(var j=0;j<chunk&&n;++j){wrap.appendChild(pre.firstChild);--n}fragment.appendChild(wrap)}pre.appendChild(fragment)}removeChildrenAndAdd(display.measure,pre);var outer=getRect(display.lineDiv);var vranges=[],data=
emptyArray(line.text.length),maxBot=pre.offsetHeight;if(ie_lt9&&display.measure.first!=pre)removeChildrenAndAdd(display.measure,pre);function measureRect(rect){var top=rect.top-outer.top,bot=rect.bottom-outer.top;if(bot>maxBot)bot=maxBot;if(top<0)top=0;for(var i=vranges.length-2;i>=0;i-=2){var rtop=vranges[i],rbot=vranges[i+1];if(rtop>bot||rbot<top)continue;if(rtop<=top&&rbot>=bot||(top<=rtop&&bot>=rbot||Math.min(bot,rbot)-Math.max(top,rtop)>=bot-top>>1)){vranges[i]=Math.min(top,rtop);vranges[i+1]=
Math.max(bot,rbot);break}}if(i<0){i=vranges.length;vranges.push(top,bot)}return{left:rect.left-outer.left,right:rect.right-outer.left,top:i,bottom:null}}function finishRect(rect){rect.bottom=vranges[rect.top+1];rect.top=vranges[rect.top]}for(var i=0,cur;i<measure.length;++i)if(cur=measure[i]){var node=cur,rect=null;if(/\bCodeMirror-widget\b/.test(cur.className)&&cur.getClientRects){if(cur.firstChild.nodeType==1)node=cur.firstChild;var rects=node.getClientRects();if(rects.length>1){rect=data[i]=measureRect(rects[0]);
rect.rightSide=measureRect(rects[rects.length-1])}}if(!rect)rect=data[i]=measureRect(getRect(node));if(cur.measureRight)rect.right=getRect(cur.measureRight).left;if(cur.leftSide)rect.leftSide=measureRect(getRect(cur.leftSide))}removeChildren(cm.display.measure);for(var i=0,cur;i<data.length;++i)if(cur=data[i]){finishRect(cur);if(cur.leftSide)finishRect(cur.leftSide);if(cur.rightSide)finishRect(cur.rightSide)}return data}function crudelyMeasureLine(cm,line){var copy=new Line(line.text.slice(0,100),
null);if(line.textClass)copy.textClass=line.textClass;var measure=measureLineInner(cm,copy);var left=measureChar(cm,copy,0,measure,"left");var right=measureChar(cm,copy,99,measure,"right");return{crude:true,top:left.top,left:left.left,bottom:left.bottom,width:(right.right-left.left)/100}}function measureLineWidth(cm,line){var hasBadSpan=false;if(line.markedSpans)for(var i=0;i<line.markedSpans;++i){var sp=line.markedSpans[i];if(sp.collapsed&&(sp.to==null||sp.to==line.text.length))hasBadSpan=true}var cached=
!hasBadSpan&&findCachedMeasurement(cm,line);if(cached||line.text.length>=cm.options.crudeMeasuringFrom)return measureChar(cm,line,line.text.length,cached&&cached.measure,"right").right;var pre=buildLineContent(cm,line,null,true).pre;var end=pre.appendChild(zeroWidthElement(cm.display.measure));removeChildrenAndAdd(cm.display.measure,pre);return getRect(end).right-getRect(cm.display.lineDiv).left}function clearCaches(cm){cm.display.measureLineCache.length=cm.display.measureLineCachePos=0;cm.display.cachedCharWidth=
cm.display.cachedTextHeight=null;if(!cm.options.lineWrapping)cm.display.maxLineChanged=true;cm.display.lineNumChars=null}function pageScrollX(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function pageScrollY(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function intoCoordSystem(cm,lineObj,rect,context){if(lineObj.widgets)for(var i=0;i<lineObj.widgets.length;++i)if(lineObj.widgets[i].above){var size=widgetHeight(lineObj.widgets[i]);
rect.top+=size;rect.bottom+=size}if(context=="line")return rect;if(!context)context="local";var yOff=heightAtLine(cm,lineObj);if(context=="local")yOff+=paddingTop(cm.display);else yOff-=cm.display.viewOffset;if(context=="page"||context=="window"){var lOff=getRect(cm.display.lineSpace);yOff+=lOff.top+(context=="window"?0:pageScrollY());var xOff=lOff.left+(context=="window"?0:pageScrollX());rect.left+=xOff;rect.right+=xOff}rect.top+=yOff;rect.bottom+=yOff;return rect}function fromCoordSystem(cm,coords,
context){if(context=="div")return coords;var left=coords.left,top=coords.top;if(context=="page"){left-=pageScrollX();top-=pageScrollY()}else if(context=="local"||!context){var localBox=getRect(cm.display.sizer);left+=localBox.left;top+=localBox.top}var lineSpaceBox=getRect(cm.display.lineSpace);return{left:left-lineSpaceBox.left,top:top-lineSpaceBox.top}}function charCoords(cm,pos,context,lineObj,bias){if(!lineObj)lineObj=getLine(cm.doc,pos.line);return intoCoordSystem(cm,lineObj,measureChar(cm,lineObj,
pos.ch,null,bias),context)}function cursorCoords(cm,pos,context,lineObj,measurement){lineObj=lineObj||getLine(cm.doc,pos.line);if(!measurement)measurement=measureLine(cm,lineObj);function get(ch,right){var m=measureChar(cm,lineObj,ch,measurement,right?"right":"left");if(right)m.left=m.right;else m.right=m.left;return intoCoordSystem(cm,lineObj,m,context)}function getBidi(ch,partPos){var part=order[partPos],right=part.level%2;if(ch==bidiLeft(part)&&(partPos&&part.level<order[partPos-1].level)){part=
order[--partPos];ch=bidiRight(part)-(part.level%2?0:1);right=true}else if(ch==bidiRight(part)&&(partPos<order.length-1&&part.level<order[partPos+1].level)){part=order[++partPos];ch=bidiLeft(part)-part.level%2;right=false}if(right&&(ch==part.to&&ch>part.from))return get(ch-1);return get(ch,right)}var order=getOrder(lineObj),ch=pos.ch;if(!order)return get(ch);var partPos=getBidiPartAt(order,ch);var val=getBidi(ch,partPos);if(bidiOther!=null)val.other=getBidi(ch,bidiOther);return val}function PosWithInfo(line,
ch,outside,xRel){var pos=new Pos(line,ch);pos.xRel=xRel;if(outside)pos.outside=true;return pos}function coordsChar(cm,x,y){var doc=cm.doc;y+=cm.display.viewOffset;if(y<0)return PosWithInfo(doc.first,0,true,-1);var lineNo=lineAtHeight(doc,y),last=doc.first+doc.size-1;if(lineNo>last)return PosWithInfo(doc.first+doc.size-1,getLine(doc,last).text.length,true,1);if(x<0)x=0;for(;;){var lineObj=getLine(doc,lineNo);var found=coordsCharInner(cm,lineObj,lineNo,x,y);var merged=collapsedSpanAtEnd(lineObj);var mergedPos=
merged&&merged.find();if(merged&&(found.ch>mergedPos.from.ch||found.ch==mergedPos.from.ch&&found.xRel>0))lineNo=mergedPos.to.line;else return found}}function coordsCharInner(cm,lineObj,lineNo,x,y){var innerOff=y-heightAtLine(cm,lineObj);var wrongLine=false,adjust=2*cm.display.wrapper.clientWidth;var measurement=measureLine(cm,lineObj);function getX(ch){var sp=cursorCoords(cm,Pos(lineNo,ch),"line",lineObj,measurement);wrongLine=true;if(innerOff>sp.bottom)return sp.left-adjust;else if(innerOff<sp.top)return sp.left+
adjust;else wrongLine=false;return sp.left}var bidi=getOrder(lineObj),dist=lineObj.text.length;var from=lineLeft(lineObj),to=lineRight(lineObj);var fromX=getX(from),fromOutside=wrongLine,toX=getX(to),toOutside=wrongLine;if(x>toX)return PosWithInfo(lineNo,to,toOutside,1);for(;;){if(bidi?to==from||to==moveVisually(lineObj,from,1):to-from<=1){var ch=x<fromX||x-fromX<=toX-x?from:to;var xDiff=x-(ch==from?fromX:toX);while(isExtendingChar.test(lineObj.text.charAt(ch)))++ch;var pos=PosWithInfo(lineNo,ch,
ch==from?fromOutside:toOutside,xDiff<0?-1:xDiff?1:0);return pos}var step=Math.ceil(dist/2),middle=from+step;if(bidi){middle=from;for(var i=0;i<step;++i)middle=moveVisually(lineObj,middle,1)}var middleX=getX(middle);if(middleX>x){to=middle;toX=middleX;if(toOutside=wrongLine)toX+=1E3;dist=step}else{from=middle;fromX=middleX;fromOutside=wrongLine;dist-=step}}}var measureText;function textHeight(display){if(display.cachedTextHeight!=null)return display.cachedTextHeight;if(measureText==null){measureText=
elt("pre");for(var i=0;i<49;++i){measureText.appendChild(document.createTextNode("x"));measureText.appendChild(elt("br"))}measureText.appendChild(document.createTextNode("x"))}removeChildrenAndAdd(display.measure,measureText);var height=measureText.offsetHeight/50;if(height>3)display.cachedTextHeight=height;removeChildren(display.measure);return height||1}function charWidth(display){if(display.cachedCharWidth!=null)return display.cachedCharWidth;var anchor=elt("span","x");var pre=elt("pre",[anchor]);
removeChildrenAndAdd(display.measure,pre);var width=anchor.offsetWidth;if(width>2)display.cachedCharWidth=width;return width||10}var nextOpId=0;function startOperation(cm){cm.curOp={changes:[],forceUpdate:false,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:false,cursorActivity:false,updateMaxLine:false,updateScrollPos:false,id:++nextOpId};if(!delayedCallbackDepth++)delayedCallbacks=[]}function endOperation(cm){var op=cm.curOp,doc=cm.doc,display=cm.display;cm.curOp=null;if(op.updateMaxLine)computeMaxLength(cm);
if(display.maxLineChanged&&(!cm.options.lineWrapping&&display.maxLine)){var width=measureLineWidth(cm,display.maxLine);display.sizer.style.minWidth=Math.max(0,width+3+scrollerCutOff)+"px";display.maxLineChanged=false;var maxScrollLeft=Math.max(0,display.sizer.offsetLeft+display.sizer.offsetWidth-display.scroller.clientWidth);if(maxScrollLeft<doc.scrollLeft&&!op.updateScrollPos)setScrollLeft(cm,Math.min(display.scroller.scrollLeft,maxScrollLeft),true)}var newScrollPos,updated;if(op.updateScrollPos)newScrollPos=
op.updateScrollPos;else if(op.selectionChanged&&display.scroller.clientHeight){var coords=cursorCoords(cm,doc.sel.head);newScrollPos=calculateScrollPos(cm,coords.left,coords.top,coords.left,coords.bottom)}if(op.changes.length||(op.forceUpdate||newScrollPos&&newScrollPos.scrollTop!=null)){updated=updateDisplay(cm,op.changes,newScrollPos&&newScrollPos.scrollTop,op.forceUpdate);if(cm.display.scroller.offsetHeight)cm.doc.scrollTop=cm.display.scroller.scrollTop}if(!updated&&op.selectionChanged)updateSelection(cm);
if(op.updateScrollPos){display.scroller.scrollTop=display.scrollbarV.scrollTop=doc.scrollTop=newScrollPos.scrollTop;display.scroller.scrollLeft=display.scrollbarH.scrollLeft=doc.scrollLeft=newScrollPos.scrollLeft;alignHorizontally(cm);if(op.scrollToPos)scrollPosIntoView(cm,clipPos(cm.doc,op.scrollToPos.from),clipPos(cm.doc,op.scrollToPos.to),op.scrollToPos.margin)}else if(newScrollPos)scrollCursorIntoView(cm);if(op.selectionChanged)restartBlink(cm);if(cm.state.focused&&op.updateInput)resetInput(cm,
op.userSelChange);var hidden=op.maybeHiddenMarkers,unhidden=op.maybeUnhiddenMarkers;if(hidden)for(var i=0;i<hidden.length;++i)if(!hidden[i].lines.length)signal(hidden[i],"hide");if(unhidden)for(var i=0;i<unhidden.length;++i)if(unhidden[i].lines.length)signal(unhidden[i],"unhide");var delayed;if(!--delayedCallbackDepth){delayed=delayedCallbacks;delayedCallbacks=null}if(op.textChanged)signal(cm,"change",cm,op.textChanged);if(op.cursorActivity)signal(cm,"cursorActivity",cm);if(delayed)for(var i=0;i<
delayed.length;++i)delayed[i]()}function operation(cm1,f){return function(){var cm=cm1||this,withOp=!cm.curOp;if(withOp)startOperation(cm);try{var result=f.apply(cm,arguments)}finally{if(withOp)endOperation(cm)}return result}}function docOperation(f){return function(){var withOp=this.cm&&!this.cm.curOp,result;if(withOp)startOperation(this.cm);try{result=f.apply(this,arguments)}finally{if(withOp)endOperation(this.cm)}return result}}function runInOp(cm,f){var withOp=!cm.curOp,result;if(withOp)startOperation(cm);
try{result=f()}finally{if(withOp)endOperation(cm)}return result}function regChange(cm,from,to,lendiff){if(from==null)from=cm.doc.first;if(to==null)to=cm.doc.first+cm.doc.size;cm.curOp.changes.push({from:from,to:to,diff:lendiff})}function slowPoll(cm){if(cm.display.pollingFast)return;cm.display.poll.set(cm.options.pollInterval,function(){readInput(cm);if(cm.state.focused)slowPoll(cm)})}function fastPoll(cm){var missed=false;cm.display.pollingFast=true;function p(){var changed=readInput(cm);if(!changed&&
!missed){missed=true;cm.display.poll.set(60,p)}else{cm.display.pollingFast=false;slowPoll(cm)}}cm.display.poll.set(20,p)}function readInput(cm){var input=cm.display.input,prevInput=cm.display.prevInput,doc=cm.doc,sel=doc.sel;if(!cm.state.focused||(hasSelection(input)||(isReadOnly(cm)||cm.state.disableInput)))return false;if(cm.state.pasteIncoming&&cm.state.fakedLastChar){input.value=input.value.substring(0,input.value.length-1);cm.state.fakedLastChar=false}var text=input.value;if(text==prevInput&&
posEq(sel.from,sel.to))return false;if(ie&&(!ie_lt9&&cm.display.inputHasSelection===text)){resetInput(cm,true);return false}var withOp=!cm.curOp;if(withOp)startOperation(cm);sel.shift=false;var same=0,l=Math.min(prevInput.length,text.length);while(same<l&&prevInput.charCodeAt(same)==text.charCodeAt(same))++same;var from=sel.from,to=sel.to;if(same<prevInput.length)from=Pos(from.line,from.ch-(prevInput.length-same));else if(cm.state.overwrite&&(posEq(from,to)&&!cm.state.pasteIncoming))to=Pos(to.line,
Math.min(getLine(doc,to.line).text.length,to.ch+(text.length-same)));var updateInput=cm.curOp.updateInput;var changeEvent={from:from,to:to,text:splitLines(text.slice(same)),origin:cm.state.pasteIncoming?"paste":"+input"};makeChange(cm.doc,changeEvent,"end");cm.curOp.updateInput=updateInput;signalLater(cm,"inputRead",cm,changeEvent);if(text.length>1E3||text.indexOf("\n")>-1)input.value=cm.display.prevInput="";else cm.display.prevInput=text;if(withOp)endOperation(cm);cm.state.pasteIncoming=false;return true}
function resetInput(cm,user){var minimal,selected,doc=cm.doc;if(!posEq(doc.sel.from,doc.sel.to)){cm.display.prevInput="";minimal=hasCopyEvent&&(doc.sel.to.line-doc.sel.from.line>100||(selected=cm.getSelection()).length>1E3);var content=minimal?"-":selected||cm.getSelection();cm.display.input.value=content;if(cm.state.focused)selectInput(cm.display.input);if(ie&&!ie_lt9)cm.display.inputHasSelection=content}else if(user){cm.display.prevInput=cm.display.input.value="";if(ie&&!ie_lt9)cm.display.inputHasSelection=
null}cm.display.inaccurateSelection=minimal}function focusInput(cm){if(cm.options.readOnly!="nocursor"&&(!mobile||document.activeElement!=cm.display.input))cm.display.input.focus()}function isReadOnly(cm){return cm.options.readOnly||cm.doc.cantEdit}function registerEventHandlers(cm){var d=cm.display;on(d.scroller,"mousedown",operation(cm,onMouseDown));if(ie)on(d.scroller,"dblclick",operation(cm,function(e){if(signalDOMEvent(cm,e))return;var pos=posFromMouse(cm,e);if(!pos||(clickInGutter(cm,e)||eventInWidget(cm.display,
e)))return;e_preventDefault(e);var word=findWordAt(getLine(cm.doc,pos.line).text,pos);extendSelection(cm.doc,word.from,word.to)}));else on(d.scroller,"dblclick",function(e){signalDOMEvent(cm,e)||e_preventDefault(e)});on(d.lineSpace,"selectstart",function(e){if(!eventInWidget(d,e))e_preventDefault(e)});if(!captureMiddleClick)on(d.scroller,"contextmenu",function(e){onContextMenu(cm,e)});on(d.scroller,"scroll",function(){if(d.scroller.clientHeight){setScrollTop(cm,d.scroller.scrollTop);setScrollLeft(cm,
d.scroller.scrollLeft,true);signal(cm,"scroll",cm)}});on(d.scrollbarV,"scroll",function(){if(d.scroller.clientHeight)setScrollTop(cm,d.scrollbarV.scrollTop)});on(d.scrollbarH,"scroll",function(){if(d.scroller.clientHeight)setScrollLeft(cm,d.scrollbarH.scrollLeft)});on(d.scroller,"mousewheel",function(e){onScrollWheel(cm,e)});on(d.scroller,"DOMMouseScroll",function(e){onScrollWheel(cm,e)});function reFocus(){if(cm.state.focused)setTimeout(bind(focusInput,cm),0)}on(d.scrollbarH,"mousedown",reFocus);
on(d.scrollbarV,"mousedown",reFocus);on(d.wrapper,"scroll",function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0});var resizeTimer;function onResize(){if(resizeTimer==null)resizeTimer=setTimeout(function(){resizeTimer=null;d.cachedCharWidth=d.cachedTextHeight=knownScrollbarWidth=null;clearCaches(cm);runInOp(cm,bind(regChange,cm))},100)}on(window,"resize",onResize);function unregister(){for(var p=d.wrapper.parentNode;p&&p!=document.body;p=p.parentNode);if(p)setTimeout(unregister,5E3);else off(window,
"resize",onResize)}setTimeout(unregister,5E3);on(d.input,"keyup",operation(cm,function(e){if(signalDOMEvent(cm,e)||cm.options.onKeyEvent&&cm.options.onKeyEvent(cm,addStop(e)))return;if(e.keyCode==16)cm.doc.sel.shift=false}));on(d.input,"input",function(){if(ie&&(!ie_lt9&&cm.display.inputHasSelection))cm.display.inputHasSelection=null;fastPoll(cm)});on(d.input,"keydown",operation(cm,onKeyDown));on(d.input,"keypress",operation(cm,onKeyPress));on(d.input,"focus",bind(onFocus,cm));on(d.input,"blur",bind(onBlur,
cm));function drag_(e){if(signalDOMEvent(cm,e)||cm.options.onDragEvent&&cm.options.onDragEvent(cm,addStop(e)))return;e_stop(e)}if(cm.options.dragDrop){on(d.scroller,"dragstart",function(e){onDragStart(cm,e)});on(d.scroller,"dragenter",drag_);on(d.scroller,"dragover",drag_);on(d.scroller,"drop",operation(cm,onDrop))}on(d.scroller,"paste",function(e){if(eventInWidget(d,e))return;focusInput(cm);fastPoll(cm)});on(d.input,"paste",function(){if(webkit&&(!cm.state.fakedLastChar&&!(new Date-cm.state.lastMiddleDown<
200))){var start=d.input.selectionStart,end=d.input.selectionEnd;d.input.value+="$";d.input.selectionStart=start;d.input.selectionEnd=end;cm.state.fakedLastChar=true}cm.state.pasteIncoming=true;fastPoll(cm)});function prepareCopy(){if(d.inaccurateSelection){d.prevInput="";d.inaccurateSelection=false;d.input.value=cm.getSelection();selectInput(d.input)}}on(d.input,"cut",prepareCopy);on(d.input,"copy",prepareCopy);if(khtml)on(d.sizer,"mouseup",function(){if(document.activeElement==d.input)d.input.blur();
focusInput(cm)})}function eventInWidget(display,e){for(var n=e_target(e);n!=display.wrapper;n=n.parentNode)if(!n||(n.ignoreEvents||n.parentNode==display.sizer&&n!=display.mover))return true}function posFromMouse(cm,e,liberal){var display=cm.display;if(!liberal){var target=e_target(e);if(target==display.scrollbarH||(target==display.scrollbarH.firstChild||(target==display.scrollbarV||(target==display.scrollbarV.firstChild||(target==display.scrollbarFiller||target==display.gutterFiller)))))return null}var x,
y,space=getRect(display.lineSpace);try{x=e.clientX;y=e.clientY}catch(e){return null}return coordsChar(cm,x-space.left,y-space.top)}var lastClick,lastDoubleClick;function onMouseDown(e){if(signalDOMEvent(this,e))return;var cm=this,display=cm.display,doc=cm.doc,sel=doc.sel;sel.shift=e.shiftKey;if(eventInWidget(display,e)){if(!webkit){display.scroller.draggable=false;setTimeout(function(){display.scroller.draggable=true},100)}return}if(clickInGutter(cm,e))return;var start=posFromMouse(cm,e);switch(e_button(e)){case 3:if(captureMiddleClick)onContextMenu.call(cm,
cm,e);return;case 2:if(webkit)cm.state.lastMiddleDown=+new Date;if(start)extendSelection(cm.doc,start);setTimeout(bind(focusInput,cm),20);e_preventDefault(e);return}if(!start){if(e_target(e)==display.scroller)e_preventDefault(e);return}if(!cm.state.focused)onFocus(cm);var now=+new Date,type="single";if(lastDoubleClick&&(lastDoubleClick.time>now-400&&posEq(lastDoubleClick.pos,start))){type="triple";e_preventDefault(e);setTimeout(bind(focusInput,cm),20);selectLine(cm,start.line)}else if(lastClick&&
(lastClick.time>now-400&&posEq(lastClick.pos,start))){type="double";lastDoubleClick={time:now,pos:start};e_preventDefault(e);var word=findWordAt(getLine(doc,start.line).text,start);extendSelection(cm.doc,word.from,word.to)}else lastClick={time:now,pos:start};var last=start;if(cm.options.dragDrop&&(dragAndDrop&&(!isReadOnly(cm)&&(!posEq(sel.from,sel.to)&&(!posLess(start,sel.from)&&(!posLess(sel.to,start)&&type=="single")))))){var dragEnd=operation(cm,function(e2){if(webkit)display.scroller.draggable=
false;cm.state.draggingText=false;off(document,"mouseup",dragEnd);off(display.scroller,"drop",dragEnd);if(Math.abs(e.clientX-e2.clientX)+Math.abs(e.clientY-e2.clientY)<10){e_preventDefault(e2);extendSelection(cm.doc,start);focusInput(cm)}});if(webkit)display.scroller.draggable=true;cm.state.draggingText=dragEnd;if(display.scroller.dragDrop)display.scroller.dragDrop();on(document,"mouseup",dragEnd);on(display.scroller,"drop",dragEnd);return}e_preventDefault(e);if(type=="single")extendSelection(cm.doc,
clipPos(doc,start));var startstart=sel.from,startend=sel.to,lastPos=start;function doSelect(cur){if(posEq(lastPos,cur))return;lastPos=cur;if(type=="single"){extendSelection(cm.doc,clipPos(doc,start),cur);return}startstart=clipPos(doc,startstart);startend=clipPos(doc,startend);if(type=="double"){var word=findWordAt(getLine(doc,cur.line).text,cur);if(posLess(cur,startstart))extendSelection(cm.doc,word.from,startend);else extendSelection(cm.doc,startstart,word.to)}else if(type=="triple")if(posLess(cur,
startstart))extendSelection(cm.doc,startend,clipPos(doc,Pos(cur.line,0)));else extendSelection(cm.doc,startstart,clipPos(doc,Pos(cur.line+1,0)))}var editorSize=getRect(display.wrapper);var counter=0;function extend(e){var curCount=++counter;var cur=posFromMouse(cm,e,true);if(!cur)return;if(!posEq(cur,last)){if(!cm.state.focused)onFocus(cm);last=cur;doSelect(cur);var visible=visibleLines(display,doc);if(cur.line>=visible.to||cur.line<visible.from)setTimeout(operation(cm,function(){if(counter==curCount)extend(e)}),
150)}else{var outside=e.clientY<editorSize.top?-20:e.clientY>editorSize.bottom?20:0;if(outside)setTimeout(operation(cm,function(){if(counter!=curCount)return;display.scroller.scrollTop+=outside;extend(e)}),50)}}function done(e){counter=Infinity;e_preventDefault(e);focusInput(cm);off(document,"mousemove",move);off(document,"mouseup",up)}var move=operation(cm,function(e){if(!ie&&!e_button(e))done(e);else extend(e)});var up=operation(cm,done);on(document,"mousemove",move);on(document,"mouseup",up)}function gutterEvent(cm,
e,type,prevent,signalfn){try{var mX=e.clientX,mY=e.clientY}catch(e){return false}if(mX>=Math.floor(getRect(cm.display.gutters).right))return false;if(prevent)e_preventDefault(e);var display=cm.display;var lineBox=getRect(display.lineDiv);if(mY>lineBox.bottom||!hasHandler(cm,type))return e_defaultPrevented(e);mY-=lineBox.top-display.viewOffset;for(var i=0;i<cm.options.gutters.length;++i){var g=display.gutters.childNodes[i];if(g&&getRect(g).right>=mX){var line=lineAtHeight(cm.doc,mY);var gutter=cm.options.gutters[i];
signalfn(cm,type,cm,line,gutter,e);return e_defaultPrevented(e)}}}function contextMenuInGutter(cm,e){if(!hasHandler(cm,"gutterContextMenu"))return false;return gutterEvent(cm,e,"gutterContextMenu",false,signal)}function clickInGutter(cm,e){return gutterEvent(cm,e,"gutterClick",true,signalLater)}var lastDrop=0;function onDrop(e){var cm=this;if(signalDOMEvent(cm,e)||(eventInWidget(cm.display,e)||cm.options.onDragEvent&&cm.options.onDragEvent(cm,addStop(e))))return;e_preventDefault(e);if(ie)lastDrop=
+new Date;var pos=posFromMouse(cm,e,true),files=e.dataTransfer.files;if(!pos||isReadOnly(cm))return;if(files&&(files.length&&(window.FileReader&&window.File))){var n=files.length,text=Array(n),read=0;var loadFile=function(file,i){var reader=new FileReader;reader.onload=function(){text[i]=reader.result;if(++read==n){pos=clipPos(cm.doc,pos);makeChange(cm.doc,{from:pos,to:pos,text:splitLines(text.join("\n")),origin:"paste"},"around")}};reader.readAsText(file)};for(var i=0;i<n;++i)loadFile(files[i],i)}else{if(cm.state.draggingText&&
!(posLess(pos,cm.doc.sel.from)||posLess(cm.doc.sel.to,pos))){cm.state.draggingText(e);setTimeout(bind(focusInput,cm),20);return}try{var text=e.dataTransfer.getData("Text");if(text){var curFrom=cm.doc.sel.from,curTo=cm.doc.sel.to;setSelection(cm.doc,pos,pos);if(cm.state.draggingText)replaceRange(cm.doc,"",curFrom,curTo,"paste");cm.replaceSelection(text,null,"paste");focusInput(cm);onFocus(cm)}}catch(e){}}}function onDragStart(cm,e){if(ie&&(!cm.state.draggingText||+new Date-lastDrop<100)){e_stop(e);
return}if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e))return;var txt=cm.getSelection();e.dataTransfer.setData("Text",txt);if(e.dataTransfer.setDragImage&&!safari){var img=elt("img",null,null,"position: fixed; left: 0; top: 0;");img.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw\x3d\x3d";if(opera){img.width=img.height=1;cm.display.wrapper.appendChild(img);img._top=img.offsetTop}e.dataTransfer.setDragImage(img,0,0);if(opera)img.parentNode.removeChild(img)}}function setScrollTop(cm,
val){if(Math.abs(cm.doc.scrollTop-val)<2)return;cm.doc.scrollTop=val;if(!gecko)updateDisplay(cm,[],val);if(cm.display.scroller.scrollTop!=val)cm.display.scroller.scrollTop=val;if(cm.display.scrollbarV.scrollTop!=val)cm.display.scrollbarV.scrollTop=val;if(gecko)updateDisplay(cm,[]);startWorker(cm,100)}function setScrollLeft(cm,val,isScroller){if(isScroller?val==cm.doc.scrollLeft:Math.abs(cm.doc.scrollLeft-val)<2)return;val=Math.min(val,cm.display.scroller.scrollWidth-cm.display.scroller.clientWidth);
cm.doc.scrollLeft=val;alignHorizontally(cm);if(cm.display.scroller.scrollLeft!=val)cm.display.scroller.scrollLeft=val;if(cm.display.scrollbarH.scrollLeft!=val)cm.display.scrollbarH.scrollLeft=val}var wheelSamples=0,wheelPixelsPerUnit=null;if(ie)wheelPixelsPerUnit=-0.53;else if(gecko)wheelPixelsPerUnit=15;else if(chrome)wheelPixelsPerUnit=-0.7;else if(safari)wheelPixelsPerUnit=-1/3;function onScrollWheel(cm,e){var dx=e.wheelDeltaX,dy=e.wheelDeltaY;if(dx==null&&(e.detail&&e.axis==e.HORIZONTAL_AXIS))dx=
e.detail;if(dy==null&&(e.detail&&e.axis==e.VERTICAL_AXIS))dy=e.detail;else if(dy==null)dy=e.wheelDelta;var display=cm.display,scroll=display.scroller;if(!(dx&&scroll.scrollWidth>scroll.clientWidth||dy&&scroll.scrollHeight>scroll.clientHeight))return;if(dy&&(mac&&webkit))for(var cur=e.target;cur!=scroll;cur=cur.parentNode)if(cur.lineObj){cm.display.currentWheelTarget=cur;break}if(dx&&(!gecko&&(!opera&&wheelPixelsPerUnit!=null))){if(dy)setScrollTop(cm,Math.max(0,Math.min(scroll.scrollTop+dy*wheelPixelsPerUnit,
scroll.scrollHeight-scroll.clientHeight)));setScrollLeft(cm,Math.max(0,Math.min(scroll.scrollLeft+dx*wheelPixelsPerUnit,scroll.scrollWidth-scroll.clientWidth)));e_preventDefault(e);display.wheelStartX=null;return}if(dy&&wheelPixelsPerUnit!=null){var pixels=dy*wheelPixelsPerUnit;var top=cm.doc.scrollTop,bot=top+display.wrapper.clientHeight;if(pixels<0)top=Math.max(0,top+pixels-50);else bot=Math.min(cm.doc.height,bot+pixels+50);updateDisplay(cm,[],{top:top,bottom:bot})}if(wheelSamples<20)if(display.wheelStartX==
null){display.wheelStartX=scroll.scrollLeft;display.wheelStartY=scroll.scrollTop;display.wheelDX=dx;display.wheelDY=dy;setTimeout(function(){if(display.wheelStartX==null)return;var movedX=scroll.scrollLeft-display.wheelStartX;var movedY=scroll.scrollTop-display.wheelStartY;var sample=movedY&&(display.wheelDY&&movedY/display.wheelDY)||movedX&&(display.wheelDX&&movedX/display.wheelDX);display.wheelStartX=display.wheelStartY=null;if(!sample)return;wheelPixelsPerUnit=(wheelPixelsPerUnit*wheelSamples+
sample)/(wheelSamples+1);++wheelSamples},200)}else{display.wheelDX+=dx;display.wheelDY+=dy}}function doHandleBinding(cm,bound,dropShift){if(typeof bound=="string"){bound=commands[bound];if(!bound)return false}if(cm.display.pollingFast&&readInput(cm))cm.display.pollingFast=false;var doc=cm.doc,prevShift=doc.sel.shift,done=false;try{if(isReadOnly(cm))cm.state.suppressEdits=true;if(dropShift)doc.sel.shift=false;done=bound(cm)!=Pass}finally{doc.sel.shift=prevShift;cm.state.suppressEdits=false}return done}
function allKeyMaps(cm){var maps=cm.state.keyMaps.slice(0);if(cm.options.extraKeys)maps.push(cm.options.extraKeys);maps.push(cm.options.keyMap);return maps}var maybeTransition;function handleKeyBinding(cm,e){var startMap=getKeyMap(cm.options.keyMap),next=startMap.auto;clearTimeout(maybeTransition);if(next&&!isModifierKey(e))maybeTransition=setTimeout(function(){if(getKeyMap(cm.options.keyMap)==startMap){cm.options.keyMap=next.call?next.call(null,cm):next;keyMapChanged(cm)}},50);var name=keyName(e,
true),handled=false;if(!name)return false;var keymaps=allKeyMaps(cm);if(e.shiftKey)handled=lookupKey("Shift-"+name,keymaps,function(b){return doHandleBinding(cm,b,true)})||lookupKey(name,keymaps,function(b){if(typeof b=="string"?/^go[A-Z]/.test(b):b.motion)return doHandleBinding(cm,b)});else handled=lookupKey(name,keymaps,function(b){return doHandleBinding(cm,b)});if(handled){e_preventDefault(e);restartBlink(cm);if(ie_lt9){e.oldKeyCode=e.keyCode;e.keyCode=0}signalLater(cm,"keyHandled",cm,name,e)}return handled}
function handleCharBinding(cm,e,ch){var handled=lookupKey("'"+ch+"'",allKeyMaps(cm),function(b){return doHandleBinding(cm,b,true)});if(handled){e_preventDefault(e);restartBlink(cm);signalLater(cm,"keyHandled",cm,"'"+ch+"'",e)}return handled}var lastStoppedKey=null;function onKeyDown(e){var cm=this;if(!cm.state.focused)onFocus(cm);if(signalDOMEvent(cm,e)||cm.options.onKeyEvent&&cm.options.onKeyEvent(cm,addStop(e)))return;if(ie&&e.keyCode==27)e.returnValue=false;var code=e.keyCode;cm.doc.sel.shift=
code==16||e.shiftKey;var handled=handleKeyBinding(cm,e);if(opera){lastStoppedKey=handled?code:null;if(!handled&&(code==88&&(!hasCopyEvent&&(mac?e.metaKey:e.ctrlKey))))cm.replaceSelection("")}}function onKeyPress(e){var cm=this;if(signalDOMEvent(cm,e)||cm.options.onKeyEvent&&cm.options.onKeyEvent(cm,addStop(e)))return;var keyCode=e.keyCode,charCode=e.charCode;if(opera&&keyCode==lastStoppedKey){lastStoppedKey=null;e_preventDefault(e);return}if((opera&&(!e.which||e.which<10)||khtml)&&handleKeyBinding(cm,
e))return;var ch=String.fromCharCode(charCode==null?keyCode:charCode);if(this.options.electricChars&&(this.doc.mode.electricChars&&(this.options.smartIndent&&(!isReadOnly(this)&&this.doc.mode.electricChars.indexOf(ch)>-1))))setTimeout(operation(cm,function(){indentLine(cm,cm.doc.sel.to.line,"smart")}),75);if(handleCharBinding(cm,e,ch))return;if(ie&&!ie_lt9)cm.display.inputHasSelection=null;fastPoll(cm)}function onFocus(cm){if(cm.options.readOnly=="nocursor")return;if(!cm.state.focused){signal(cm,
"focus",cm);cm.state.focused=true;if(cm.display.wrapper.className.search(/\bCodeMirror-focused\b/)==-1)cm.display.wrapper.className+=" CodeMirror-focused";if(!cm.curOp){resetInput(cm,true);if(webkit)setTimeout(bind(resetInput,cm,true),0)}}slowPoll(cm);restartBlink(cm)}function onBlur(cm){if(cm.state.focused){signal(cm,"blur",cm);cm.state.focused=false;cm.display.wrapper.className=cm.display.wrapper.className.replace(" CodeMirror-focused","")}clearInterval(cm.display.blinker);setTimeout(function(){if(!cm.state.focused)cm.doc.sel.shift=
false},150)}var detectingSelectAll;function onContextMenu(cm,e){if(signalDOMEvent(cm,e,"contextmenu"))return;var display=cm.display,sel=cm.doc.sel;if(eventInWidget(display,e)||contextMenuInGutter(cm,e))return;var pos=posFromMouse(cm,e),scrollPos=display.scroller.scrollTop;if(!pos||opera)return;var reset=cm.options.resetSelectionOnContextMenu;if(reset&&(posEq(sel.from,sel.to)||(posLess(pos,sel.from)||!posLess(pos,sel.to))))operation(cm,setSelection)(cm.doc,pos,pos);var oldCSS=display.input.style.cssText;
display.inputDiv.style.position="absolute";display.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity\x3d5);";focusInput(cm);resetInput(cm,true);if(posEq(sel.from,sel.to))display.input.value=display.prevInput=" ";function prepareSelectAllHack(){if(display.input.selectionStart!=null){var extval=
display.input.value="​"+(posEq(sel.from,sel.to)?"":display.input.value);display.prevInput="​";display.input.selectionStart=1;display.input.selectionEnd=extval.length}}function rehide(){display.inputDiv.style.position="relative";display.input.style.cssText=oldCSS;if(ie_lt9)display.scrollbarV.scrollTop=display.scroller.scrollTop=scrollPos;slowPoll(cm);if(display.input.selectionStart!=null){if(!ie||ie_lt9)prepareSelectAllHack();clearTimeout(detectingSelectAll);var i=0,poll=function(){if(display.prevInput==
" "&&display.input.selectionStart==0)operation(cm,commands.selectAll)(cm);else if(i++<10)detectingSelectAll=setTimeout(poll,500);else resetInput(cm)};detectingSelectAll=setTimeout(poll,200)}}if(ie&&!ie_lt9)prepareSelectAllHack();if(captureMiddleClick){e_stop(e);var mouseup=function(){off(window,"mouseup",mouseup);setTimeout(rehide,20)};on(window,"mouseup",mouseup)}else setTimeout(rehide,50)}var changeEnd=CodeMirror.changeEnd=function(change){if(!change.text)return change.to;return Pos(change.from.line+
change.text.length-1,lst(change.text).length+(change.text.length==1?change.from.ch:0))};function clipPostChange(doc,change,pos){if(!posLess(change.from,pos))return clipPos(doc,pos);var diff=change.text.length-1-(change.to.line-change.from.line);if(pos.line>change.to.line+diff){var preLine=pos.line-diff,lastLine=doc.first+doc.size-1;if(preLine>lastLine)return Pos(lastLine,getLine(doc,lastLine).text.length);return clipToLen(pos,getLine(doc,preLine).text.length)}if(pos.line==change.to.line+diff)return clipToLen(pos,
lst(change.text).length+(change.text.length==1?change.from.ch:0)+getLine(doc,change.to.line).text.length-change.to.ch);var inside=pos.line-change.from.line;return clipToLen(pos,change.text[inside].length+(inside?0:change.from.ch))}function computeSelAfterChange(doc,change,hint){if(hint&&typeof hint=="object")return{anchor:clipPostChange(doc,change,hint.anchor),head:clipPostChange(doc,change,hint.head)};if(hint=="start")return{anchor:change.from,head:change.from};var end=changeEnd(change);if(hint==
"around")return{anchor:change.from,head:end};if(hint=="end")return{anchor:end,head:end};var adjustPos=function(pos){if(posLess(pos,change.from))return pos;if(!posLess(change.to,pos))return end;var line=pos.line+change.text.length-(change.to.line-change.from.line)-1,ch=pos.ch;if(pos.line==change.to.line)ch+=end.ch-change.to.ch;return Pos(line,ch)};return{anchor:adjustPos(doc.sel.anchor),head:adjustPos(doc.sel.head)}}function filterChange(doc,change,update){var obj={canceled:false,from:change.from,
to:change.to,text:change.text,origin:change.origin,cancel:function(){this.canceled=true}};if(update)obj.update=function(from,to,text,origin){if(from)this.from=clipPos(doc,from);if(to)this.to=clipPos(doc,to);if(text)this.text=text;if(origin!==undefined)this.origin=origin};signal(doc,"beforeChange",doc,obj);if(doc.cm)signal(doc.cm,"beforeChange",doc.cm,obj);if(obj.canceled)return null;return{from:obj.from,to:obj.to,text:obj.text,origin:obj.origin}}function makeChange(doc,change,selUpdate,ignoreReadOnly){if(doc.cm){if(!doc.cm.curOp)return operation(doc.cm,
makeChange)(doc,change,selUpdate,ignoreReadOnly);if(doc.cm.state.suppressEdits)return}if(hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange")){change=filterChange(doc,change,true);if(!change)return}var split=sawReadOnlySpans&&(!ignoreReadOnly&&removeReadOnlyRanges(doc,change.from,change.to));if(split){for(var i=split.length-1;i>=1;--i)makeChangeNoReadonly(doc,{from:split[i].from,to:split[i].to,text:[""]});if(split.length)makeChangeNoReadonly(doc,{from:split[0].from,to:split[0].to,
text:change.text},selUpdate)}else makeChangeNoReadonly(doc,change,selUpdate)}function makeChangeNoReadonly(doc,change,selUpdate){if(change.text.length==1&&(change.text[0]==""&&posEq(change.from,change.to)))return;var selAfter=computeSelAfterChange(doc,change,selUpdate);addToHistory(doc,change,selAfter,doc.cm?doc.cm.curOp.id:NaN);makeChangeSingleDoc(doc,change,selAfter,stretchSpansOverChange(doc,change));var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==
-1){rebaseHist(doc.history,change);rebased.push(doc.history)}makeChangeSingleDoc(doc,change,null,stretchSpansOverChange(doc,change))})}function makeChangeFromHistory(doc,type){if(doc.cm&&doc.cm.state.suppressEdits)return;var hist=doc.history;var event=(type=="undo"?hist.done:hist.undone).pop();if(!event)return;var anti={changes:[],anchorBefore:event.anchorAfter,headBefore:event.headAfter,anchorAfter:event.anchorBefore,headAfter:event.headBefore,generation:hist.generation};(type=="undo"?hist.undone:
hist.done).push(anti);hist.generation=event.generation||++hist.maxGeneration;var filter=hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange");for(var i=event.changes.length-1;i>=0;--i){var change=event.changes[i];change.origin=type;if(filter&&!filterChange(doc,change,false)){(type=="undo"?hist.done:hist.undone).length=0;return}anti.changes.push(historyChangeFromChange(doc,change));var after=i?computeSelAfterChange(doc,change,null):{anchor:event.anchorBefore,head:event.headBefore};
makeChangeSingleDoc(doc,change,after,mergeOldSpans(doc,change));var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history)}makeChangeSingleDoc(doc,change,null,mergeOldSpans(doc,change))})}}function shiftDoc(doc,distance){function shiftPos(pos){return Pos(pos.line+distance,pos.ch)}doc.first+=distance;if(doc.cm)regChange(doc.cm,doc.first,doc.first,distance);doc.sel.head=shiftPos(doc.sel.head);doc.sel.anchor=
shiftPos(doc.sel.anchor);doc.sel.from=shiftPos(doc.sel.from);doc.sel.to=shiftPos(doc.sel.to)}function makeChangeSingleDoc(doc,change,selAfter,spans){if(doc.cm&&!doc.cm.curOp)return operation(doc.cm,makeChangeSingleDoc)(doc,change,selAfter,spans);if(change.to.line<doc.first){shiftDoc(doc,change.text.length-1-(change.to.line-change.from.line));return}if(change.from.line>doc.lastLine())return;if(change.from.line<doc.first){var shift=change.text.length-1-(doc.first-change.from.line);shiftDoc(doc,shift);
change={from:Pos(doc.first,0),to:Pos(change.to.line+shift,change.to.ch),text:[lst(change.text)],origin:change.origin}}var last=doc.lastLine();if(change.to.line>last)change={from:change.from,to:Pos(last,getLine(doc,last).text.length),text:[change.text[0]],origin:change.origin};change.removed=getBetween(doc,change.from,change.to);if(!selAfter)selAfter=computeSelAfterChange(doc,change,null);if(doc.cm)makeChangeSingleDocInEditor(doc.cm,change,spans,selAfter);else updateDoc(doc,change,spans,selAfter)}
function makeChangeSingleDocInEditor(cm,change,spans,selAfter){var doc=cm.doc,display=cm.display,from=change.from,to=change.to;var recomputeMaxLength=false,checkWidthStart=from.line;if(!cm.options.lineWrapping){checkWidthStart=lineNo(visualLine(doc,getLine(doc,from.line)));doc.iter(checkWidthStart,to.line+1,function(line){if(line==display.maxLine){recomputeMaxLength=true;return true}})}if(!posLess(doc.sel.head,change.from)&&!posLess(change.to,doc.sel.head))cm.curOp.cursorActivity=true;updateDoc(doc,
change,spans,selAfter,estimateHeight(cm));if(!cm.options.lineWrapping){doc.iter(checkWidthStart,from.line+change.text.length,function(line){var len=lineLength(doc,line);if(len>display.maxLineLength){display.maxLine=line;display.maxLineLength=len;display.maxLineChanged=true;recomputeMaxLength=false}});if(recomputeMaxLength)cm.curOp.updateMaxLine=true}doc.frontier=Math.min(doc.frontier,from.line);startWorker(cm,400);var lendiff=change.text.length-(to.line-from.line)-1;regChange(cm,from.line,to.line+
1,lendiff);if(hasHandler(cm,"change")){var changeObj={from:from,to:to,text:change.text,removed:change.removed,origin:change.origin};if(cm.curOp.textChanged){for(var cur=cm.curOp.textChanged;cur.next;cur=cur.next);cur.next=changeObj}else cm.curOp.textChanged=changeObj}}function replaceRange(doc,code,from,to,origin){if(!to)to=from;if(posLess(to,from)){var tmp=to;to=from;from=tmp}if(typeof code=="string")code=splitLines(code);makeChange(doc,{from:from,to:to,text:code,origin:origin},null)}function Pos(line,
ch){if(!(this instanceof Pos))return new Pos(line,ch);this.line=line;this.ch=ch}CodeMirror.Pos=Pos;function posEq(a,b){return a.line==b.line&&a.ch==b.ch}function posLess(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function copyPos(x){return Pos(x.line,x.ch)}function clipLine(doc,n){return Math.max(doc.first,Math.min(n,doc.first+doc.size-1))}function clipPos(doc,pos){if(pos.line<doc.first)return Pos(doc.first,0);var last=doc.first+doc.size-1;if(pos.line>last)return Pos(last,getLine(doc,last).text.length);
return clipToLen(pos,getLine(doc,pos.line).text.length)}function clipToLen(pos,linelen){var ch=pos.ch;if(ch==null||ch>linelen)return Pos(pos.line,linelen);else if(ch<0)return Pos(pos.line,0);else return pos}function isLine(doc,l){return l>=doc.first&&l<doc.first+doc.size}function extendSelection(doc,pos,other,bias){if(doc.sel.shift||doc.sel.extend){var anchor=doc.sel.anchor;if(other){var posBefore=posLess(pos,anchor);if(posBefore!=posLess(other,anchor)){anchor=pos;pos=other}else if(posBefore!=posLess(pos,
other))pos=other}setSelection(doc,anchor,pos,bias)}else setSelection(doc,pos,other||pos,bias);if(doc.cm)doc.cm.curOp.userSelChange=true}function filterSelectionChange(doc,anchor,head){var obj={anchor:anchor,head:head};signal(doc,"beforeSelectionChange",doc,obj);if(doc.cm)signal(doc.cm,"beforeSelectionChange",doc.cm,obj);obj.anchor=clipPos(doc,obj.anchor);obj.head=clipPos(doc,obj.head);return obj}function setSelection(doc,anchor,head,bias,checkAtomic){if(!checkAtomic&&hasHandler(doc,"beforeSelectionChange")||
doc.cm&&hasHandler(doc.cm,"beforeSelectionChange")){var filtered=filterSelectionChange(doc,anchor,head);head=filtered.head;anchor=filtered.anchor}var sel=doc.sel;sel.goalColumn=null;if(bias==null)bias=posLess(head,sel.head)?-1:1;if(checkAtomic||!posEq(anchor,sel.anchor))anchor=skipAtomic(doc,anchor,bias,checkAtomic!="push");if(checkAtomic||!posEq(head,sel.head))head=skipAtomic(doc,head,bias,checkAtomic!="push");if(posEq(sel.anchor,anchor)&&posEq(sel.head,head))return;sel.anchor=anchor;sel.head=head;
var inv=posLess(head,anchor);sel.from=inv?head:anchor;sel.to=inv?anchor:head;if(doc.cm)doc.cm.curOp.updateInput=doc.cm.curOp.selectionChanged=doc.cm.curOp.cursorActivity=true;signalLater(doc,"cursorActivity",doc)}function reCheckSelection(cm){setSelection(cm.doc,cm.doc.sel.from,cm.doc.sel.to,null,"push")}function skipAtomic(doc,pos,bias,mayClear){var flipped=false,curPos=pos;var dir=bias||1;doc.cantEdit=false;search:for(;;){var line=getLine(doc,curPos.line);if(line.markedSpans)for(var i=0;i<line.markedSpans.length;++i){var sp=
line.markedSpans[i],m=sp.marker;if((sp.from==null||(m.inclusiveLeft?sp.from<=curPos.ch:sp.from<curPos.ch))&&(sp.to==null||(m.inclusiveRight?sp.to>=curPos.ch:sp.to>curPos.ch))){if(mayClear){signal(m,"beforeCursorEnter");if(m.explicitlyCleared)if(!line.markedSpans)break;else{--i;continue}}if(!m.atomic)continue;var newPos=m.find()[dir<0?"from":"to"];if(posEq(newPos,curPos)){newPos.ch+=dir;if(newPos.ch<0)if(newPos.line>doc.first)newPos=clipPos(doc,Pos(newPos.line-1));else newPos=null;else if(newPos.ch>
line.text.length)if(newPos.line<doc.first+doc.size-1)newPos=Pos(newPos.line+1,0);else newPos=null;if(!newPos){if(flipped){if(!mayClear)return skipAtomic(doc,pos,bias,true);doc.cantEdit=true;return Pos(doc.first,0)}flipped=true;newPos=pos;dir=-dir}}curPos=newPos;continue search}}return curPos}}function scrollCursorIntoView(cm){var coords=scrollPosIntoView(cm,cm.doc.sel.head,null,cm.options.cursorScrollMargin);if(!cm.state.focused)return;var display=cm.display,box=getRect(display.sizer),doScroll=null;
if(coords.top+box.top<0)doScroll=true;else if(coords.bottom+box.top>(window.innerHeight||document.documentElement.clientHeight))doScroll=false;if(doScroll!=null&&!phantom){var hidden=display.cursor.style.display=="none";if(hidden){display.cursor.style.display="";display.cursor.style.left=coords.left+"px";display.cursor.style.top=coords.top-display.viewOffset+"px"}display.cursor.scrollIntoView(doScroll);if(hidden)display.cursor.style.display="none"}}function scrollPosIntoView(cm,pos,end,margin){if(margin==
null)margin=0;for(;;){var changed=false,coords=cursorCoords(cm,pos);var endCoords=!end||end==pos?coords:cursorCoords(cm,end);var scrollPos=calculateScrollPos(cm,Math.min(coords.left,endCoords.left),Math.min(coords.top,endCoords.top)-margin,Math.max(coords.left,endCoords.left),Math.max(coords.bottom,endCoords.bottom)+margin);var startTop=cm.doc.scrollTop,startLeft=cm.doc.scrollLeft;if(scrollPos.scrollTop!=null){setScrollTop(cm,scrollPos.scrollTop);if(Math.abs(cm.doc.scrollTop-startTop)>1)changed=true}if(scrollPos.scrollLeft!=
null){setScrollLeft(cm,scrollPos.scrollLeft);if(Math.abs(cm.doc.scrollLeft-startLeft)>1)changed=true}if(!changed)return coords}}function scrollIntoView(cm,x1,y1,x2,y2){var scrollPos=calculateScrollPos(cm,x1,y1,x2,y2);if(scrollPos.scrollTop!=null)setScrollTop(cm,scrollPos.scrollTop);if(scrollPos.scrollLeft!=null)setScrollLeft(cm,scrollPos.scrollLeft)}function calculateScrollPos(cm,x1,y1,x2,y2){var display=cm.display,snapMargin=textHeight(cm.display);if(y1<0)y1=0;var screen=display.scroller.clientHeight-
scrollerCutOff,screentop=display.scroller.scrollTop,result={};var docBottom=cm.doc.height+paddingVert(display);var atTop=y1<snapMargin,atBottom=y2>docBottom-snapMargin;if(y1<screentop)result.scrollTop=atTop?0:y1;else if(y2>screentop+screen){var newTop=Math.min(y1,(atBottom?docBottom:y2)-screen);if(newTop!=screentop)result.scrollTop=newTop}var screenw=display.scroller.clientWidth-scrollerCutOff,screenleft=display.scroller.scrollLeft;x1+=display.gutters.offsetWidth;x2+=display.gutters.offsetWidth;var gutterw=
display.gutters.offsetWidth;var atLeft=x1<gutterw+10;if(x1<screenleft+gutterw||atLeft){if(atLeft)x1=0;result.scrollLeft=Math.max(0,x1-10-gutterw)}else if(x2>screenw+screenleft-3)result.scrollLeft=x2+10-screenw;return result}function updateScrollPos(cm,left,top){cm.curOp.updateScrollPos={scrollLeft:left==null?cm.doc.scrollLeft:left,scrollTop:top==null?cm.doc.scrollTop:top}}function addToScrollPos(cm,left,top){var pos=cm.curOp.updateScrollPos||(cm.curOp.updateScrollPos={scrollLeft:cm.doc.scrollLeft,
scrollTop:cm.doc.scrollTop});var scroll=cm.display.scroller;pos.scrollTop=Math.max(0,Math.min(scroll.scrollHeight-scroll.clientHeight,pos.scrollTop+top));pos.scrollLeft=Math.max(0,Math.min(scroll.scrollWidth-scroll.clientWidth,pos.scrollLeft+left))}function indentLine(cm,n,how,aggressive){var doc=cm.doc;if(how==null)how="add";if(how=="smart")if(!cm.doc.mode.indent)how="prev";else var state=getStateBefore(cm,n);var tabSize=cm.options.tabSize;var line=getLine(doc,n),curSpace=countColumn(line.text,null,
tabSize);var curSpaceString=line.text.match(/^\s*/)[0],indentation;if(how=="smart"){indentation=cm.doc.mode.indent(state,line.text.slice(curSpaceString.length),line.text);if(indentation==Pass){if(!aggressive)return;how="prev"}}if(how=="prev")if(n>doc.first)indentation=countColumn(getLine(doc,n-1).text,null,tabSize);else indentation=0;else if(how=="add")indentation=curSpace+cm.options.indentUnit;else if(how=="subtract")indentation=curSpace-cm.options.indentUnit;else if(typeof how=="number")indentation=
curSpace+how;indentation=Math.max(0,indentation);var indentString="",pos=0;if(cm.options.indentWithTabs)for(var i=Math.floor(indentation/tabSize);i;--i){pos+=tabSize;indentString+="\t"}if(pos<indentation)indentString+=spaceStr(indentation-pos);if(indentString!=curSpaceString)replaceRange(cm.doc,indentString,Pos(n,0),Pos(n,curSpaceString.length),"+input");line.stateAfter=null}function changeLine(cm,handle,op){var no=handle,line=handle,doc=cm.doc;if(typeof handle=="number")line=getLine(doc,clipLine(doc,
handle));else no=lineNo(handle);if(no==null)return null;if(op(line,no))regChange(cm,no,no+1);else return null;return line}function findPosH(doc,pos,dir,unit,visually){var line=pos.line,ch=pos.ch,origDir=dir;var lineObj=getLine(doc,line);var possible=true;function findNextLine(){var l=line+dir;if(l<doc.first||l>=doc.first+doc.size)return possible=false;line=l;return lineObj=getLine(doc,l)}function moveOnce(boundToLine){var next=(visually?moveVisually:moveLogically)(lineObj,ch,dir,true);if(next==null)if(!boundToLine&&
findNextLine())if(visually)ch=(dir<0?lineRight:lineLeft)(lineObj);else ch=dir<0?lineObj.text.length:0;else return possible=false;else ch=next;return true}if(unit=="char")moveOnce();else if(unit=="column")moveOnce(true);else if(unit=="word"||unit=="group"){var sawType=null,group=unit=="group";for(var first=true;;first=false){if(dir<0&&!moveOnce(!first))break;var cur=lineObj.text.charAt(ch)||"\n";var type=isWordChar(cur)?"w":!group?null:/\s/.test(cur)?null:"p";if(sawType&&sawType!=type){if(dir<0){dir=
1;moveOnce()}break}if(type)sawType=type;if(dir>0&&!moveOnce(!first))break}}var result=skipAtomic(doc,Pos(line,ch),origDir,true);if(!possible)result.hitSide=true;return result}function findPosV(cm,pos,dir,unit){var doc=cm.doc,x=pos.left,y;if(unit=="page"){var pageSize=Math.min(cm.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);y=pos.top+dir*(pageSize-(dir<0?1.5:0.5)*textHeight(cm.display))}else if(unit=="line")y=dir>0?pos.bottom+3:pos.top-3;for(;;){var target=
coordsChar(cm,x,y);if(!target.outside)break;if(dir<0?y<=0:y>=doc.height){target.hitSide=true;break}y+=dir*5}return target}function findWordAt(line,pos){var start=pos.ch,end=pos.ch;if(line){if((pos.xRel<0||end==line.length)&&start)--start;else++end;var startChar=line.charAt(start);var check=isWordChar(startChar)?isWordChar:/\s/.test(startChar)?function(ch){return/\s/.test(ch)}:function(ch){return!/\s/.test(ch)&&!isWordChar(ch)};while(start>0&&check(line.charAt(start-1)))--start;while(end<line.length&&
check(line.charAt(end)))++end}return{from:Pos(pos.line,start),to:Pos(pos.line,end)}}function selectLine(cm,line){extendSelection(cm.doc,Pos(line,0),clipPos(cm.doc,Pos(line+1,0)))}CodeMirror.prototype={constructor:CodeMirror,focus:function(){window.focus();focusInput(this);onFocus(this);fastPoll(this)},setOption:function(option,value){var options=this.options,old=options[option];if(options[option]==value&&option!="mode")return;options[option]=value;if(optionHandlers.hasOwnProperty(option))operation(this,
optionHandlers[option])(this,value,old)},getOption:function(option){return this.options[option]},getDoc:function(){return this.doc},addKeyMap:function(map,bottom){this.state.keyMaps[bottom?"push":"unshift"](map)},removeKeyMap:function(map){var maps=this.state.keyMaps;for(var i=0;i<maps.length;++i)if(maps[i]==map||typeof maps[i]!="string"&&maps[i].name==map){maps.splice(i,1);return true}},addOverlay:operation(null,function(spec,options){var mode=spec.token?spec:CodeMirror.getMode(this.options,spec);
if(mode.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:mode,modeSpec:spec,opaque:options&&options.opaque});this.state.modeGen++;regChange(this)}),removeOverlay:operation(null,function(spec){var overlays=this.state.overlays;for(var i=0;i<overlays.length;++i){var cur=overlays[i].modeSpec;if(cur==spec||typeof spec=="string"&&cur.name==spec){overlays.splice(i,1);this.state.modeGen++;regChange(this);return}}}),indentLine:operation(null,function(n,dir,aggressive){if(typeof dir!=
"string"&&typeof dir!="number")if(dir==null)dir=this.options.smartIndent?"smart":"prev";else dir=dir?"add":"subtract";if(isLine(this.doc,n))indentLine(this,n,dir,aggressive)}),indentSelection:operation(null,function(how){var sel=this.doc.sel;if(posEq(sel.from,sel.to))return indentLine(this,sel.from.line,how);var e=sel.to.line-(sel.to.ch?0:1);for(var i=sel.from.line;i<=e;++i)indentLine(this,i,how)}),getTokenAt:function(pos,precise){var doc=this.doc;pos=clipPos(doc,pos);var state=getStateBefore(this,
pos.line,precise),mode=this.doc.mode;var line=getLine(doc,pos.line);var stream=new StringStream(line.text,this.options.tabSize);while(stream.pos<pos.ch&&!stream.eol()){stream.start=stream.pos;var style=mode.token(stream,state)}return{start:stream.start,end:stream.pos,string:stream.current(),className:style||null,type:style||null,state:state}},getTokenTypeAt:function(pos){pos=clipPos(this.doc,pos);var styles=getLineStyles(this,getLine(this.doc,pos.line));var before=0,after=(styles.length-1)/2,ch=pos.ch;
if(ch==0)return styles[2];for(;;){var mid=before+after>>1;if((mid?styles[mid*2-1]:0)>=ch)after=mid;else if(styles[mid*2+1]<ch)before=mid+1;else return styles[mid*2+2]}},getModeAt:function(pos){var mode=this.doc.mode;if(!mode.innerMode)return mode;return CodeMirror.innerMode(mode,this.getTokenAt(pos).state).mode},getHelper:function(pos,type){if(!helpers.hasOwnProperty(type))return;var help=helpers[type],mode=this.getModeAt(pos);return mode[type]&&help[mode[type]]||(mode.helperType&&help[mode.helperType]||
help[mode.name])},getStateAfter:function(line,precise){var doc=this.doc;line=clipLine(doc,line==null?doc.first+doc.size-1:line);return getStateBefore(this,line+1,precise)},cursorCoords:function(start,mode){var pos,sel=this.doc.sel;if(start==null)pos=sel.head;else if(typeof start=="object")pos=clipPos(this.doc,start);else pos=start?sel.from:sel.to;return cursorCoords(this,pos,mode||"page")},charCoords:function(pos,mode){return charCoords(this,clipPos(this.doc,pos),mode||"page")},coordsChar:function(coords,
mode){coords=fromCoordSystem(this,coords,mode||"page");return coordsChar(this,coords.left,coords.top)},lineAtHeight:function(height,mode){height=fromCoordSystem(this,{top:height,left:0},mode||"page").top;return lineAtHeight(this.doc,height+this.display.viewOffset)},heightAtLine:function(line,mode){var end=false,last=this.doc.first+this.doc.size-1;if(line<this.doc.first)line=this.doc.first;else if(line>last){line=last;end=true}var lineObj=getLine(this.doc,line);return intoCoordSystem(this,getLine(this.doc,
line),{top:0,left:0},mode||"page").top+(end?lineObj.height:0)},defaultTextHeight:function(){return textHeight(this.display)},defaultCharWidth:function(){return charWidth(this.display)},setGutterMarker:operation(null,function(line,gutterID,value){return changeLine(this,line,function(line){var markers=line.gutterMarkers||(line.gutterMarkers={});markers[gutterID]=value;if(!value&&isEmpty(markers))line.gutterMarkers=null;return true})}),clearGutter:operation(null,function(gutterID){var cm=this,doc=cm.doc,
i=doc.first;doc.iter(function(line){if(line.gutterMarkers&&line.gutterMarkers[gutterID]){line.gutterMarkers[gutterID]=null;regChange(cm,i,i+1);if(isEmpty(line.gutterMarkers))line.gutterMarkers=null}++i})}),addLineClass:operation(null,function(handle,where,cls){return changeLine(this,handle,function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":"wrapClass";if(!line[prop])line[prop]=cls;else if((new RegExp("(?:^|\\s)"+cls+"(?:$|\\s)")).test(line[prop]))return false;else line[prop]+=
" "+cls;return true})}),removeLineClass:operation(null,function(handle,where,cls){return changeLine(this,handle,function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":"wrapClass";var cur=line[prop];if(!cur)return false;else if(cls==null)line[prop]=null;else{var found=cur.match(new RegExp("(?:^|\\s+)"+cls+"(?:$|\\s+)"));if(!found)return false;var end=found.index+found[0].length;line[prop]=cur.slice(0,found.index)+(!found.index||end==cur.length?"":" ")+cur.slice(end)||null}return true})}),
addLineWidget:operation(null,function(handle,node,options){return addLineWidget(this,handle,node,options)}),removeLineWidget:function(widget){widget.clear()},lineInfo:function(line){if(typeof line=="number"){if(!isLine(this.doc,line))return null;var n=line;line=getLine(this.doc,line);if(!line)return null}else{var n=lineNo(line);if(n==null)return null}return{line:n,handle:line,text:line.text,gutterMarkers:line.gutterMarkers,textClass:line.textClass,bgClass:line.bgClass,wrapClass:line.wrapClass,widgets:line.widgets}},
getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(pos,node,scroll,vert,horiz){var display=this.display;pos=cursorCoords(this,clipPos(this.doc,pos));var top=pos.bottom,left=pos.left;node.style.position="absolute";display.sizer.appendChild(node);if(vert=="over")top=pos.top;else if(vert=="above"||vert=="near"){var vspace=Math.max(display.wrapper.clientHeight,this.doc.height),hspace=Math.max(display.sizer.clientWidth,display.lineSpace.clientWidth);
if((vert=="above"||pos.bottom+node.offsetHeight>vspace)&&pos.top>node.offsetHeight)top=pos.top-node.offsetHeight;else if(pos.bottom+node.offsetHeight<=vspace)top=pos.bottom;if(left+node.offsetWidth>hspace)left=hspace-node.offsetWidth}node.style.top=top+"px";node.style.left=node.style.right="";if(horiz=="right"){left=display.sizer.clientWidth-node.offsetWidth;node.style.right="0px"}else{if(horiz=="left")left=0;else if(horiz=="middle")left=(display.sizer.clientWidth-node.offsetWidth)/2;node.style.left=
left+"px"}if(scroll)scrollIntoView(this,left,top,left+node.offsetWidth,top+node.offsetHeight)},triggerOnKeyDown:operation(null,onKeyDown),execCommand:function(cmd){return commands[cmd](this)},findPosH:function(from,amount,unit,visually){var dir=1;if(amount<0){dir=-1;amount=-amount}for(var i=0,cur=clipPos(this.doc,from);i<amount;++i){cur=findPosH(this.doc,cur,dir,unit,visually);if(cur.hitSide)break}return cur},moveH:operation(null,function(dir,unit){var sel=this.doc.sel,pos;if(sel.shift||(sel.extend||
posEq(sel.from,sel.to)))pos=findPosH(this.doc,sel.head,dir,unit,this.options.rtlMoveVisually);else pos=dir<0?sel.from:sel.to;extendSelection(this.doc,pos,pos,dir)}),deleteH:operation(null,function(dir,unit){var sel=this.doc.sel;if(!posEq(sel.from,sel.to))replaceRange(this.doc,"",sel.from,sel.to,"+delete");else replaceRange(this.doc,"",sel.from,findPosH(this.doc,sel.head,dir,unit,false),"+delete");this.curOp.userSelChange=true}),findPosV:function(from,amount,unit,goalColumn){var dir=1,x=goalColumn;
if(amount<0){dir=-1;amount=-amount}for(var i=0,cur=clipPos(this.doc,from);i<amount;++i){var coords=cursorCoords(this,cur,"div");if(x==null)x=coords.left;else coords.left=x;cur=findPosV(this,coords,dir,unit);if(cur.hitSide)break}return cur},moveV:operation(null,function(dir,unit){var sel=this.doc.sel;var pos=cursorCoords(this,sel.head,"div");if(sel.goalColumn!=null)pos.left=sel.goalColumn;var target=findPosV(this,pos,dir,unit);if(unit=="page")addToScrollPos(this,0,charCoords(this,target,"div").top-
pos.top);extendSelection(this.doc,target,target,dir);sel.goalColumn=pos.left}),toggleOverwrite:function(value){if(value!=null&&value==this.state.overwrite)return;if(this.state.overwrite=!this.state.overwrite)this.display.cursor.className+=" CodeMirror-overwrite";else this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:operation(null,function(x,y){updateScrollPos(this,x,y)}),getScrollInfo:function(){var scroller=
this.display.scroller,co=scrollerCutOff;return{left:scroller.scrollLeft,top:scroller.scrollTop,height:scroller.scrollHeight-co,width:scroller.scrollWidth-co,clientHeight:scroller.clientHeight-co,clientWidth:scroller.clientWidth-co}},scrollIntoView:operation(null,function(range,margin){if(range==null)range={from:this.doc.sel.head,to:null};else if(typeof range=="number")range={from:Pos(range,0),to:null};else if(range.from==null)range={from:range,to:null};if(!range.to)range.to=range.from;if(!margin)margin=
0;var coords=range;if(range.from.line!=null){this.curOp.scrollToPos={from:range.from,to:range.to,margin:margin};coords={from:cursorCoords(this,range.from),to:cursorCoords(this,range.to)}}var sPos=calculateScrollPos(this,Math.min(coords.from.left,coords.to.left),Math.min(coords.from.top,coords.to.top)-margin,Math.max(coords.from.right,coords.to.right),Math.max(coords.from.bottom,coords.to.bottom)+margin);updateScrollPos(this,sPos.scrollLeft,sPos.scrollTop)}),setSize:operation(null,function(width,height){function interpret(val){return typeof val==
"number"||/^\d+$/.test(String(val))?val+"px":val}if(width!=null)this.display.wrapper.style.width=interpret(width);if(height!=null)this.display.wrapper.style.height=interpret(height);if(this.options.lineWrapping)this.display.measureLineCache.length=this.display.measureLineCachePos=0;this.curOp.forceUpdate=true}),operation:function(f){return runInOp(this,f)},refresh:operation(null,function(){var badHeight=this.display.cachedTextHeight==null;clearCaches(this);updateScrollPos(this,this.doc.scrollLeft,
this.doc.scrollTop);regChange(this);if(badHeight)estimateLineHeights(this)}),swapDoc:operation(null,function(doc){var old=this.doc;old.cm=null;attachDoc(this,doc);clearCaches(this);resetInput(this,true);updateScrollPos(this,doc.scrollLeft,doc.scrollTop);signalLater(this,"swapDoc",this,old);return old}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};
eventMixin(CodeMirror);var optionHandlers=CodeMirror.optionHandlers={};var defaults=CodeMirror.defaults={};function option(name,deflt,handle,notOnInit){CodeMirror.defaults[name]=deflt;if(handle)optionHandlers[name]=notOnInit?function(cm,val,old){if(old!=Init)handle(cm,val,old)}:handle}var Init=CodeMirror.Init={toString:function(){return"CodeMirror.Init"}};option("value","",function(cm,val){cm.setValue(val)},true);option("mode",null,function(cm,val){cm.doc.modeOption=val;loadMode(cm)},true);option("indentUnit",
2,loadMode,true);option("indentWithTabs",false);option("smartIndent",true);option("tabSize",4,function(cm){loadMode(cm);clearCaches(cm);regChange(cm)},true);option("electricChars",true);option("rtlMoveVisually",!windows);option("theme","default",function(cm){themeChanged(cm);guttersChanged(cm)},true);option("keyMap","default",keyMapChanged);option("extraKeys",null);option("onKeyEvent",null);option("onDragEvent",null);option("lineWrapping",false,wrappingChanged,true);option("gutters",[],function(cm){setGuttersForLineNumbers(cm.options);
guttersChanged(cm)},true);option("fixedGutter",true,function(cm,val){cm.display.gutters.style.left=val?compensateForHScroll(cm.display)+"px":"0";cm.refresh()},true);option("coverGutterNextToScrollbar",false,updateScrollbars,true);option("lineNumbers",false,function(cm){setGuttersForLineNumbers(cm.options);guttersChanged(cm)},true);option("firstLineNumber",1,guttersChanged,true);option("lineNumberFormatter",function(integer){return integer},guttersChanged,true);option("showCursorWhenSelecting",false,
updateSelection,true);option("resetSelectionOnContextMenu",true);option("readOnly",false,function(cm,val){if(val=="nocursor"){onBlur(cm);cm.display.input.blur()}else if(!val)resetInput(cm,true)});option("dragDrop",true);option("cursorBlinkRate",530);option("cursorScrollMargin",0);option("cursorHeight",1);option("workTime",100);option("workDelay",100);option("flattenSpans",true);option("pollInterval",100);option("undoDepth",40,function(cm,val){cm.doc.history.undoDepth=val});option("historyEventDelay",
500);option("viewportMargin",10,function(cm){cm.refresh()},true);option("maxHighlightLength",1E4,function(cm){loadMode(cm);cm.refresh()},true);option("crudeMeasuringFrom",1E4);option("moveInputWithCursor",true,function(cm,val){if(!val)cm.display.inputDiv.style.top=cm.display.inputDiv.style.left=0});option("tabindex",null,function(cm,val){cm.display.input.tabIndex=val||""});option("autofocus",null);var modes=CodeMirror.modes={},mimeModes=CodeMirror.mimeModes={};CodeMirror.defineMode=function(name,
mode){if(!CodeMirror.defaults.mode&&name!="null")CodeMirror.defaults.mode=name;if(arguments.length>2){mode.dependencies=[];for(var i=2;i<arguments.length;++i)mode.dependencies.push(arguments[i])}modes[name]=mode};CodeMirror.defineMIME=function(mime,spec){mimeModes[mime]=spec};CodeMirror.resolveMode=function(spec){if(typeof spec=="string"&&mimeModes.hasOwnProperty(spec))spec=mimeModes[spec];else if(spec&&(typeof spec.name=="string"&&mimeModes.hasOwnProperty(spec.name))){var found=mimeModes[spec.name];
spec=createObj(found,spec);spec.name=found.name}else if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(spec))return CodeMirror.resolveMode("application/xml");if(typeof spec=="string")return{name:spec};else return spec||{name:"null"}};CodeMirror.getMode=function(options,spec){var spec=CodeMirror.resolveMode(spec);var mfactory=modes[spec.name];if(!mfactory)return CodeMirror.getMode(options,"text/plain");var modeObj=mfactory(options,spec);if(modeExtensions.hasOwnProperty(spec.name)){var exts=
modeExtensions[spec.name];for(var prop in exts){if(!exts.hasOwnProperty(prop))continue;if(modeObj.hasOwnProperty(prop))modeObj["_"+prop]=modeObj[prop];modeObj[prop]=exts[prop]}}modeObj.name=spec.name;return modeObj};CodeMirror.defineMode("null",function(){return{token:function(stream){stream.skipToEnd()}}});CodeMirror.defineMIME("text/plain","null");var modeExtensions=CodeMirror.modeExtensions={};CodeMirror.extendMode=function(mode,properties){var exts=modeExtensions.hasOwnProperty(mode)?modeExtensions[mode]:
modeExtensions[mode]={};copyObj(properties,exts)};CodeMirror.defineExtension=function(name,func){CodeMirror.prototype[name]=func};CodeMirror.defineDocExtension=function(name,func){Doc.prototype[name]=func};CodeMirror.defineOption=option;var initHooks=[];CodeMirror.defineInitHook=function(f){initHooks.push(f)};var helpers=CodeMirror.helpers={};CodeMirror.registerHelper=function(type,name,value){if(!helpers.hasOwnProperty(type))helpers[type]=CodeMirror[type]={};helpers[type][name]=value};CodeMirror.isWordChar=
isWordChar;function copyState(mode,state){if(state===true)return state;if(mode.copyState)return mode.copyState(state);var nstate={};for(var n in state){var val=state[n];if(val instanceof Array)val=val.concat([]);nstate[n]=val}return nstate}CodeMirror.copyState=copyState;function startState(mode,a1,a2){return mode.startState?mode.startState(a1,a2):true}CodeMirror.startState=startState;CodeMirror.innerMode=function(mode,state){while(mode.innerMode){var info=mode.innerMode(state);if(!info||info.mode==
mode)break;state=info.state;mode=info.mode}return info||{mode:mode,state:state}};var commands=CodeMirror.commands={selectAll:function(cm){cm.setSelection(Pos(cm.firstLine(),0),Pos(cm.lastLine()))},killLine:function(cm){var from=cm.getCursor(true),to=cm.getCursor(false),sel=!posEq(from,to);if(!sel&&cm.getLine(from.line).length==from.ch)cm.replaceRange("",from,Pos(from.line+1,0),"+delete");else cm.replaceRange("",from,sel?to:Pos(from.line),"+delete")},deleteLine:function(cm){var l=cm.getCursor().line;
cm.replaceRange("",Pos(l,0),Pos(l),"+delete")},delLineLeft:function(cm){var cur=cm.getCursor();cm.replaceRange("",Pos(cur.line,0),cur,"+delete")},undo:function(cm){cm.undo()},redo:function(cm){cm.redo()},goDocStart:function(cm){cm.extendSelection(Pos(cm.firstLine(),0))},goDocEnd:function(cm){cm.extendSelection(Pos(cm.lastLine()))},goLineStart:function(cm){cm.extendSelection(lineStart(cm,cm.getCursor().line))},goLineStartSmart:function(cm){var cur=cm.getCursor(),start=lineStart(cm,cur.line);var line=
cm.getLineHandle(start.line);var order=getOrder(line);if(!order||order[0].level==0){var firstNonWS=Math.max(0,line.text.search(/\S/));var inWS=cur.line==start.line&&(cur.ch<=firstNonWS&&cur.ch);cm.extendSelection(Pos(start.line,inWS?0:firstNonWS))}else cm.extendSelection(start)},goLineEnd:function(cm){cm.extendSelection(lineEnd(cm,cm.getCursor().line))},goLineRight:function(cm){var top=cm.charCoords(cm.getCursor(),"div").top+5;cm.extendSelection(cm.coordsChar({left:cm.display.lineDiv.offsetWidth+
100,top:top},"div"))},goLineLeft:function(cm){var top=cm.charCoords(cm.getCursor(),"div").top+5;cm.extendSelection(cm.coordsChar({left:0,top:top},"div"))},goLineUp:function(cm){cm.moveV(-1,"line")},goLineDown:function(cm){cm.moveV(1,"line")},goPageUp:function(cm){cm.moveV(-1,"page")},goPageDown:function(cm){cm.moveV(1,"page")},goCharLeft:function(cm){cm.moveH(-1,"char")},goCharRight:function(cm){cm.moveH(1,"char")},goColumnLeft:function(cm){cm.moveH(-1,"column")},goColumnRight:function(cm){cm.moveH(1,
"column")},goWordLeft:function(cm){cm.moveH(-1,"word")},goGroupRight:function(cm){cm.moveH(1,"group")},goGroupLeft:function(cm){cm.moveH(-1,"group")},goWordRight:function(cm){cm.moveH(1,"word")},delCharBefore:function(cm){cm.deleteH(-1,"char")},delCharAfter:function(cm){cm.deleteH(1,"char")},delWordBefore:function(cm){cm.deleteH(-1,"word")},delWordAfter:function(cm){cm.deleteH(1,"word")},delGroupBefore:function(cm){cm.deleteH(-1,"group")},delGroupAfter:function(cm){cm.deleteH(1,"group")},indentAuto:function(cm){cm.indentSelection("smart")},
indentMore:function(cm){cm.indentSelection("add")},indentLess:function(cm){cm.indentSelection("subtract")},insertTab:function(cm){cm.replaceSelection("\t","end","+input")},defaultTab:function(cm){if(cm.somethingSelected())cm.indentSelection("add");else cm.replaceSelection("\t","end","+input")},transposeChars:function(cm){var cur=cm.getCursor(),line=cm.getLine(cur.line);if(cur.ch>0&&cur.ch<line.length-1)cm.replaceRange(line.charAt(cur.ch)+line.charAt(cur.ch-1),Pos(cur.line,cur.ch-1),Pos(cur.line,cur.ch+
1))},newlineAndIndent:function(cm){operation(cm,function(){cm.replaceSelection("\n","end","+input");cm.indentLine(cm.getCursor().line,null,true)})()},toggleOverwrite:function(cm){cm.toggleOverwrite()}};var keyMap=CodeMirror.keyMap={};keyMap.basic={"Left":"goCharLeft","Right":"goCharRight","Up":"goLineUp","Down":"goLineDown","End":"goLineEnd","Home":"goLineStartSmart","PageUp":"goPageUp","PageDown":"goPageDown","Delete":"delCharAfter","Backspace":"delCharBefore","Shift-Backspace":"delCharBefore","Tab":"defaultTab",
"Shift-Tab":"indentAuto","Enter":"newlineAndIndent","Insert":"toggleOverwrite"};keyMap.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext",
"Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};keyMap.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter",
"Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]};keyMap["default"]=mac?keyMap.macDefault:keyMap.pcDefault;keyMap.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp",
"Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};function getKeyMap(val){if(typeof val=="string")return keyMap[val];else return val}function lookupKey(name,maps,handle){function lookup(map){map=getKeyMap(map);var found=map[name];if(found===false)return"stop";if(found!=null&&handle(found))return true;if(map.nofallthrough)return"stop";var fallthrough=map.fallthrough;if(fallthrough==null)return false;
if(Object.prototype.toString.call(fallthrough)!="[object Array]")return lookup(fallthrough);for(var i=0,e=fallthrough.length;i<e;++i){var done=lookup(fallthrough[i]);if(done)return done}return false}for(var i=0;i<maps.length;++i){var done=lookup(maps[i]);if(done)return done!="stop"}}function isModifierKey(event){var name=keyNames[event.keyCode];return name=="Ctrl"||(name=="Alt"||(name=="Shift"||name=="Mod"))}function keyName(event,noShift){if(opera&&(event.keyCode==34&&event["char"]))return false;
var name=keyNames[event.keyCode];if(name==null||event.altGraphKey)return false;if(event.altKey)name="Alt-"+name;if(flipCtrlCmd?event.metaKey:event.ctrlKey)name="Ctrl-"+name;if(flipCtrlCmd?event.ctrlKey:event.metaKey)name="Cmd-"+name;if(!noShift&&event.shiftKey)name="Shift-"+name;return name}CodeMirror.lookupKey=lookupKey;CodeMirror.isModifierKey=isModifierKey;CodeMirror.keyName=keyName;CodeMirror.fromTextArea=function(textarea,options){if(!options)options={};options.value=textarea.value;if(!options.tabindex&&
textarea.tabindex)options.tabindex=textarea.tabindex;if(!options.placeholder&&textarea.placeholder)options.placeholder=textarea.placeholder;if(options.autofocus==null){var hasFocus=document.body;try{hasFocus=document.activeElement}catch(e){}options.autofocus=hasFocus==textarea||textarea.getAttribute("autofocus")!=null&&hasFocus==document.body}function save(){textarea.value=cm.getValue()}if(textarea.form){on(textarea.form,"submit",save);if(!options.leaveSubmitMethodAlone){var form=textarea.form,realSubmit=
form.submit;try{var wrappedSubmit=form.submit=function(){save();form.submit=realSubmit;form.submit();form.submit=wrappedSubmit}}catch(e){}}}textarea.style.display="none";var cm=CodeMirror(function(node){textarea.parentNode.insertBefore(node,textarea.nextSibling)},options);cm.save=save;cm.getTextArea=function(){return textarea};cm.toTextArea=function(){save();textarea.parentNode.removeChild(cm.getWrapperElement());textarea.style.display="";if(textarea.form){off(textarea.form,"submit",save);if(typeof textarea.form.submit==
"function")textarea.form.submit=realSubmit}};return cm};function StringStream(string,tabSize){this.pos=this.start=0;this.string=string;this.tabSize=tabSize||8;this.lastColumnPos=this.lastColumnValue=0}StringStream.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(match){var ch=this.string.charAt(this.pos);
if(typeof match=="string")var ok=ch==match;else var ok=ch&&(match.test?match.test(ch):match(ch));if(ok){++this.pos;return ch}},eatWhile:function(match){var start=this.pos;while(this.eat(match));return this.pos>start},eatSpace:function(){var start=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>start},skipToEnd:function(){this.pos=this.string.length},skipTo:function(ch){var found=this.string.indexOf(ch,this.pos);if(found>-1){this.pos=found;return true}},backUp:function(n){this.pos-=
n},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue},indentation:function(){return countColumn(this.string,null,this.tabSize)},match:function(pattern,consume,caseInsensitive){if(typeof pattern=="string"){var cased=function(str){return caseInsensitive?str.toLowerCase():str};var substr=this.string.substr(this.pos,pattern.length);if(cased(substr)==
cased(pattern)){if(consume!==false)this.pos+=pattern.length;return true}}else{var match=this.string.slice(this.pos).match(pattern);if(match&&match.index>0)return null;if(match&&consume!==false)this.pos+=match[0].length;return match}},current:function(){return this.string.slice(this.start,this.pos)}};CodeMirror.StringStream=StringStream;function TextMarker(doc,type){this.lines=[];this.type=type;this.doc=doc}CodeMirror.TextMarker=TextMarker;eventMixin(TextMarker);TextMarker.prototype.clear=function(){if(this.explicitlyCleared)return;
var cm=this.doc.cm,withOp=cm&&!cm.curOp;if(withOp)startOperation(cm);if(hasHandler(this,"clear")){var found=this.find();if(found)signalLater(this,"clear",found.from,found.to)}var min=null,max=null;for(var i=0;i<this.lines.length;++i){var line=this.lines[i];var span=getMarkedSpanFor(line.markedSpans,this);if(span.to!=null)max=lineNo(line);line.markedSpans=removeMarkedSpan(line.markedSpans,span);if(span.from!=null)min=lineNo(line);else if(this.collapsed&&(!lineIsHidden(this.doc,line)&&cm))updateLineHeight(line,
textHeight(cm.display))}if(cm&&(this.collapsed&&!cm.options.lineWrapping))for(var i=0;i<this.lines.length;++i){var visual=visualLine(cm.doc,this.lines[i]),len=lineLength(cm.doc,visual);if(len>cm.display.maxLineLength){cm.display.maxLine=visual;cm.display.maxLineLength=len;cm.display.maxLineChanged=true}}if(min!=null&&cm)regChange(cm,min,max+1);this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(cm)reCheckSelection(cm)}if(withOp)endOperation(cm)};
TextMarker.prototype.find=function(){var from,to;for(var i=0;i<this.lines.length;++i){var line=this.lines[i];var span=getMarkedSpanFor(line.markedSpans,this);if(span.from!=null||span.to!=null){var found=lineNo(line);if(span.from!=null)from=Pos(found,span.from);if(span.to!=null)to=Pos(found,span.to)}}if(this.type=="bookmark")return from;return from&&{from:from,to:to}};TextMarker.prototype.changed=function(){var pos=this.find(),cm=this.doc.cm;if(!pos||!cm)return;if(this.type!="bookmark")pos=pos.from;
var line=getLine(this.doc,pos.line);clearCachedMeasurement(cm,line);if(pos.line>=cm.display.showingFrom&&pos.line<cm.display.showingTo){for(var node=cm.display.lineDiv.firstChild;node;node=node.nextSibling)if(node.lineObj==line){if(node.offsetHeight!=line.height)updateLineHeight(line,node.offsetHeight);break}runInOp(cm,function(){cm.curOp.selectionChanged=cm.curOp.forceUpdate=cm.curOp.updateMaxLine=true})}};TextMarker.prototype.attachLine=function(line){if(!this.lines.length&&this.doc.cm){var op=
this.doc.cm.curOp;if(!op.maybeHiddenMarkers||indexOf(op.maybeHiddenMarkers,this)==-1)(op.maybeUnhiddenMarkers||(op.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(line)};TextMarker.prototype.detachLine=function(line){this.lines.splice(indexOf(this.lines,line),1);if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;(op.maybeHiddenMarkers||(op.maybeHiddenMarkers=[])).push(this)}};function markText(doc,from,to,options,type){if(options&&options.shared)return markTextShared(doc,from,to,options,
type);if(doc.cm&&!doc.cm.curOp)return operation(doc.cm,markText)(doc,from,to,options,type);var marker=new TextMarker(doc,type);if(type=="range"&&!posLess(from,to))return marker;if(options)copyObj(options,marker);if(marker.replacedWith){marker.collapsed=true;marker.replacedWith=elt("span",[marker.replacedWith],"CodeMirror-widget");if(!options.handleMouseEvents)marker.replacedWith.ignoreEvents=true}if(marker.collapsed)sawCollapsedSpans=true;if(marker.addToHistory)addToHistory(doc,{from:from,to:to,origin:"markText"},
{head:doc.sel.head,anchor:doc.sel.anchor},NaN);var curLine=from.line,size=0,collapsedAtStart,collapsedAtEnd,cm=doc.cm,updateMaxLine;doc.iter(curLine,to.line+1,function(line){if(cm&&(marker.collapsed&&(!cm.options.lineWrapping&&visualLine(doc,line)==cm.display.maxLine)))updateMaxLine=true;var span={from:null,to:null,marker:marker};size+=line.text.length;if(curLine==from.line){span.from=from.ch;size-=from.ch}if(curLine==to.line){span.to=to.ch;size-=line.text.length-to.ch}if(marker.collapsed){if(curLine==
to.line)collapsedAtEnd=collapsedSpanAt(line,to.ch);if(curLine==from.line)collapsedAtStart=collapsedSpanAt(line,from.ch);else updateLineHeight(line,0)}addMarkedSpan(line,span);++curLine});if(marker.collapsed)doc.iter(from.line,to.line+1,function(line){if(lineIsHidden(doc,line))updateLineHeight(line,0)});if(marker.clearOnEnter)on(marker,"beforeCursorEnter",function(){marker.clear()});if(marker.readOnly){sawReadOnlySpans=true;if(doc.history.done.length||doc.history.undone.length)doc.clearHistory()}if(marker.collapsed){if(collapsedAtStart!=
collapsedAtEnd)throw new Error("Inserting collapsed marker overlapping an existing one");marker.size=size;marker.atomic=true}if(cm){if(updateMaxLine)cm.curOp.updateMaxLine=true;if(marker.className||(marker.title||(marker.startStyle||(marker.endStyle||marker.collapsed))))regChange(cm,from.line,to.line+1);if(marker.atomic)reCheckSelection(cm)}return marker}function SharedTextMarker(markers,primary){this.markers=markers;this.primary=primary;for(var i=0,me=this;i<markers.length;++i){markers[i].parent=
this;on(markers[i],"clear",function(){me.clear()})}}CodeMirror.SharedTextMarker=SharedTextMarker;eventMixin(SharedTextMarker);SharedTextMarker.prototype.clear=function(){if(this.explicitlyCleared)return;this.explicitlyCleared=true;for(var i=0;i<this.markers.length;++i)this.markers[i].clear();signalLater(this,"clear")};SharedTextMarker.prototype.find=function(){return this.primary.find()};function markTextShared(doc,from,to,options,type){options=copyObj(options);options.shared=false;var markers=[markText(doc,
from,to,options,type)],primary=markers[0];var widget=options.replacedWith;linkedDocs(doc,function(doc){if(widget)options.replacedWith=widget.cloneNode(true);markers.push(markText(doc,clipPos(doc,from),clipPos(doc,to),options,type));for(var i=0;i<doc.linked.length;++i)if(doc.linked[i].isParent)return;primary=lst(markers)});return new SharedTextMarker(markers,primary)}function getMarkedSpanFor(spans,marker){if(spans)for(var i=0;i<spans.length;++i){var span=spans[i];if(span.marker==marker)return span}}
function removeMarkedSpan(spans,span){for(var r,i=0;i<spans.length;++i)if(spans[i]!=span)(r||(r=[])).push(spans[i]);return r}function addMarkedSpan(line,span){line.markedSpans=line.markedSpans?line.markedSpans.concat([span]):[span];span.marker.attachLine(line)}function markedSpansBefore(old,startCh,isInsert){if(old)for(var i=0,nw;i<old.length;++i){var span=old[i],marker=span.marker;var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=startCh:span.from<startCh);if(startsBefore||marker.type==
"bookmark"&&(span.from==startCh&&(!isInsert||!span.marker.insertLeft))){var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=startCh:span.to>startCh);(nw||(nw=[])).push({from:span.from,to:endsAfter?null:span.to,marker:marker})}}return nw}function markedSpansAfter(old,endCh,isInsert){if(old)for(var i=0,nw;i<old.length;++i){var span=old[i],marker=span.marker;var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=endCh:span.to>endCh);if(endsAfter||marker.type=="bookmark"&&(span.from==endCh&&
(!isInsert||span.marker.insertLeft))){var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=endCh:span.from<endCh);(nw||(nw=[])).push({from:startsBefore?null:span.from-endCh,to:span.to==null?null:span.to-endCh,marker:marker})}}return nw}function stretchSpansOverChange(doc,change){var oldFirst=isLine(doc,change.from.line)&&getLine(doc,change.from.line).markedSpans;var oldLast=isLine(doc,change.to.line)&&getLine(doc,change.to.line).markedSpans;if(!oldFirst&&!oldLast)return null;var startCh=
change.from.ch,endCh=change.to.ch,isInsert=posEq(change.from,change.to);var first=markedSpansBefore(oldFirst,startCh,isInsert);var last=markedSpansAfter(oldLast,endCh,isInsert);var sameLine=change.text.length==1,offset=lst(change.text).length+(sameLine?startCh:0);if(first)for(var i=0;i<first.length;++i){var span=first[i];if(span.to==null){var found=getMarkedSpanFor(last,span.marker);if(!found)span.to=startCh;else if(sameLine)span.to=found.to==null?null:found.to+offset}}if(last)for(var i=0;i<last.length;++i){var span=
last[i];if(span.to!=null)span.to+=offset;if(span.from==null){var found=getMarkedSpanFor(first,span.marker);if(!found){span.from=offset;if(sameLine)(first||(first=[])).push(span)}}else{span.from+=offset;if(sameLine)(first||(first=[])).push(span)}}if(sameLine&&first){for(var i=0;i<first.length;++i)if(first[i].from!=null&&(first[i].from==first[i].to&&first[i].marker.type!="bookmark"))first.splice(i--,1);if(!first.length)first=null}var newMarkers=[first];if(!sameLine){var gap=change.text.length-2,gapMarkers;
if(gap>0&&first)for(var i=0;i<first.length;++i)if(first[i].to==null)(gapMarkers||(gapMarkers=[])).push({from:null,to:null,marker:first[i].marker});for(var i=0;i<gap;++i)newMarkers.push(gapMarkers);newMarkers.push(last)}return newMarkers}function mergeOldSpans(doc,change){var old=getOldSpans(doc,change);var stretched=stretchSpansOverChange(doc,change);if(!old)return stretched;if(!stretched)return old;for(var i=0;i<old.length;++i){var oldCur=old[i],stretchCur=stretched[i];if(oldCur&&stretchCur)spans:for(var j=
0;j<stretchCur.length;++j){var span=stretchCur[j];for(var k=0;k<oldCur.length;++k)if(oldCur[k].marker==span.marker)continue spans;oldCur.push(span)}else if(stretchCur)old[i]=stretchCur}return old}function removeReadOnlyRanges(doc,from,to){var markers=null;doc.iter(from.line,to.line+1,function(line){if(line.markedSpans)for(var i=0;i<line.markedSpans.length;++i){var mark=line.markedSpans[i].marker;if(mark.readOnly&&(!markers||indexOf(markers,mark)==-1))(markers||(markers=[])).push(mark)}});if(!markers)return null;
var parts=[{from:from,to:to}];for(var i=0;i<markers.length;++i){var mk=markers[i],m=mk.find();for(var j=0;j<parts.length;++j){var p=parts[j];if(posLess(p.to,m.from)||posLess(m.to,p.from))continue;var newParts=[j,1];if(posLess(p.from,m.from)||!mk.inclusiveLeft&&posEq(p.from,m.from))newParts.push({from:p.from,to:m.from});if(posLess(m.to,p.to)||!mk.inclusiveRight&&posEq(p.to,m.to))newParts.push({from:m.to,to:p.to});parts.splice.apply(parts,newParts);j+=newParts.length-1}}return parts}function collapsedSpanAt(line,
ch){var sps=sawCollapsedSpans&&line.markedSpans,found;if(sps)for(var sp,i=0;i<sps.length;++i){sp=sps[i];if(!sp.marker.collapsed)continue;if((sp.from==null||sp.from<ch)&&((sp.to==null||sp.to>ch)&&(!found||found.width<sp.marker.width)))found=sp.marker}return found}function collapsedSpanAtStart(line){return collapsedSpanAt(line,-1)}function collapsedSpanAtEnd(line){return collapsedSpanAt(line,line.text.length+1)}function visualLine(doc,line){var merged;while(merged=collapsedSpanAtStart(line))line=getLine(doc,
merged.find().from.line);return line}function lineIsHidden(doc,line){var sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var sp,i=0;i<sps.length;++i){sp=sps[i];if(!sp.marker.collapsed)continue;if(sp.from==null)return true;if(sp.marker.replacedWith)continue;if(sp.from==0&&(sp.marker.inclusiveLeft&&lineIsHiddenInner(doc,line,sp)))return true}}function lineIsHiddenInner(doc,line,span){if(span.to==null){var end=span.marker.find().to,endLine=getLine(doc,end.line);return lineIsHiddenInner(doc,endLine,
getMarkedSpanFor(endLine.markedSpans,span.marker))}if(span.marker.inclusiveRight&&span.to==line.text.length)return true;for(var sp,i=0;i<line.markedSpans.length;++i){sp=line.markedSpans[i];if(sp.marker.collapsed&&(!sp.marker.replacedWith&&(sp.from==span.to&&((sp.marker.inclusiveLeft||span.marker.inclusiveRight)&&lineIsHiddenInner(doc,line,sp)))))return true}}function detachMarkedSpans(line){var spans=line.markedSpans;if(!spans)return;for(var i=0;i<spans.length;++i)spans[i].marker.detachLine(line);
line.markedSpans=null}function attachMarkedSpans(line,spans){if(!spans)return;for(var i=0;i<spans.length;++i)spans[i].marker.attachLine(line);line.markedSpans=spans}var LineWidget=CodeMirror.LineWidget=function(cm,node,options){if(options)for(var opt in options)if(options.hasOwnProperty(opt))this[opt]=options[opt];this.cm=cm;this.node=node};eventMixin(LineWidget);function widgetOperation(f){return function(){var withOp=!this.cm.curOp;if(withOp)startOperation(this.cm);try{var result=f.apply(this,arguments)}finally{if(withOp)endOperation(this.cm)}return result}}
LineWidget.prototype.clear=widgetOperation(function(){var ws=this.line.widgets,no=lineNo(this.line);if(no==null||!ws)return;for(var i=0;i<ws.length;++i)if(ws[i]==this)ws.splice(i--,1);if(!ws.length)this.line.widgets=null;var aboveVisible=heightAtLine(this.cm,this.line)<this.cm.doc.scrollTop;updateLineHeight(this.line,Math.max(0,this.line.height-widgetHeight(this)));if(aboveVisible)addToScrollPos(this.cm,0,-this.height);regChange(this.cm,no,no+1)});LineWidget.prototype.changed=widgetOperation(function(){var oldH=
this.height;this.height=null;var diff=widgetHeight(this)-oldH;if(!diff)return;updateLineHeight(this.line,this.line.height+diff);var no=lineNo(this.line);regChange(this.cm,no,no+1)});function widgetHeight(widget){if(widget.height!=null)return widget.height;if(!widget.node.parentNode||widget.node.parentNode.nodeType!=1)removeChildrenAndAdd(widget.cm.display.measure,elt("div",[widget.node],null,"position: relative"));return widget.height=widget.node.offsetHeight}function addLineWidget(cm,handle,node,
options){var widget=new LineWidget(cm,node,options);if(widget.noHScroll)cm.display.alignWidgets=true;changeLine(cm,handle,function(line){var widgets=line.widgets||(line.widgets=[]);if(widget.insertAt==null)widgets.push(widget);else widgets.splice(Math.min(widgets.length-1,Math.max(0,widget.insertAt)),0,widget);widget.line=line;if(!lineIsHidden(cm.doc,line)||widget.showIfHidden){var aboveVisible=heightAtLine(cm,line)<cm.doc.scrollTop;updateLineHeight(line,line.height+widgetHeight(widget));if(aboveVisible)addToScrollPos(cm,
0,widget.height)}return true});return widget}var Line=CodeMirror.Line=function(text,markedSpans,estimateHeight){this.text=text;attachMarkedSpans(this,markedSpans);this.height=estimateHeight?estimateHeight(this):1};eventMixin(Line);function updateLine(line,text,markedSpans,estimateHeight){line.text=text;if(line.stateAfter)line.stateAfter=null;if(line.styles)line.styles=null;if(line.order!=null)line.order=null;detachMarkedSpans(line);attachMarkedSpans(line,markedSpans);var estHeight=estimateHeight?
estimateHeight(line):1;if(estHeight!=line.height)updateLineHeight(line,estHeight)}function cleanUpLine(line){line.parent=null;detachMarkedSpans(line)}function runMode(cm,text,mode,state,f){var flattenSpans=mode.flattenSpans;if(flattenSpans==null)flattenSpans=cm.options.flattenSpans;var curStart=0,curStyle=null;var stream=new StringStream(text,cm.options.tabSize),style;if(text==""&&mode.blankLine)mode.blankLine(state);while(!stream.eol()){if(stream.pos>cm.options.maxHighlightLength){flattenSpans=false;
stream.pos=text.length;style=null}else style=mode.token(stream,state);if(!flattenSpans||curStyle!=style){if(curStart<stream.start)f(stream.start,curStyle);curStart=stream.start;curStyle=style}stream.start=stream.pos}while(curStart<stream.pos){var pos=Math.min(stream.pos,curStart+5E4);f(pos,curStyle);curStart=pos}}function highlightLine(cm,line,state){var st=[cm.state.modeGen];runMode(cm,line.text,cm.doc.mode,state,function(end,style){st.push(end,style)});for(var o=0;o<cm.state.overlays.length;++o){var overlay=
cm.state.overlays[o],i=1,at=0;runMode(cm,line.text,overlay.mode,true,function(end,style){var start=i;while(at<end){var i_end=st[i];if(i_end>end)st.splice(i,1,end,st[i+1],i_end);i+=2;at=Math.min(end,i_end)}if(!style)return;if(overlay.opaque){st.splice(start,i-start,end,style);i=start+2}else for(;start<i;start+=2){var cur=st[start+1];st[start+1]=cur?cur+" "+style:style}})}return st}function getLineStyles(cm,line){if(!line.styles||line.styles[0]!=cm.state.modeGen)line.styles=highlightLine(cm,line,line.stateAfter=
getStateBefore(cm,lineNo(line)));return line.styles}function processLine(cm,line,state){var mode=cm.doc.mode;var stream=new StringStream(line.text,cm.options.tabSize);if(line.text==""&&mode.blankLine)mode.blankLine(state);while(!stream.eol()&&stream.pos<=cm.options.maxHighlightLength){mode.token(stream,state);stream.start=stream.pos}}var styleToClassCache={};function interpretTokenStyle(style,builder){if(!style)return null;for(;;){var lineClass=style.match(/(?:^|\s)line-(background-)?(\S+)/);if(!lineClass)break;
style=style.slice(0,lineClass.index)+style.slice(lineClass.index+lineClass[0].length);var prop=lineClass[1]?"bgClass":"textClass";if(builder[prop]==null)builder[prop]=lineClass[2];else if(!(new RegExp("(?:^|s)"+lineClass[2]+"(?:$|s)")).test(builder[prop]))builder[prop]+=" "+lineClass[2]}return styleToClassCache[style]||(styleToClassCache[style]="cm-"+style.replace(/ +/g," cm-"))}function buildLineContent(cm,realLine,measure,copyWidgets){var merged,line=realLine,empty=true;while(merged=collapsedSpanAtStart(line))line=
getLine(cm.doc,merged.find().from.line);var builder={pre:elt("pre"),col:0,pos:0,measure:null,measuredSomething:false,cm:cm,copyWidgets:copyWidgets};do{if(line.text)empty=false;builder.measure=line==realLine&&measure;builder.pos=0;builder.addToken=builder.measure?buildTokenMeasure:buildToken;if((ie||webkit)&&cm.getOption("lineWrapping"))builder.addToken=buildTokenSplitSpaces(builder.addToken);var next=insertLineContent(line,builder,getLineStyles(cm,line));if(measure&&(line==realLine&&!builder.measuredSomething)){measure[0]=
builder.pre.appendChild(zeroWidthElement(cm.display.measure));builder.measuredSomething=true}if(next)line=getLine(cm.doc,next.to.line)}while(next);if(measure&&(!builder.measuredSomething&&!measure[0]))measure[0]=builder.pre.appendChild(empty?elt("span"," "):zeroWidthElement(cm.display.measure));if(!builder.pre.firstChild&&!lineIsHidden(cm.doc,realLine))builder.pre.appendChild(document.createTextNode(" "));var order;if(measure&&(ie&&(order=getOrder(line)))){var l=order.length-1;if(order[l].from==order[l].to)--l;
var last=order[l],prev=order[l-1];if(last.from+1==last.to&&(prev&&last.level<prev.level)){var span=measure[builder.pos-1];if(span)span.parentNode.insertBefore(span.measureRight=zeroWidthElement(cm.display.measure),span.nextSibling)}}var textClass=builder.textClass?builder.textClass+" "+(realLine.textClass||""):realLine.textClass;if(textClass)builder.pre.className=textClass;signal(cm,"renderLine",cm,realLine,builder.pre);return builder}var tokenSpecialChars=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;
function buildToken(builder,text,style,startStyle,endStyle,title){if(!text)return;if(!tokenSpecialChars.test(text)){builder.col+=text.length;var content=document.createTextNode(text)}else{var content=document.createDocumentFragment(),pos=0;while(true){tokenSpecialChars.lastIndex=pos;var m=tokenSpecialChars.exec(text);var skipped=m?m.index-pos:text.length-pos;if(skipped){content.appendChild(document.createTextNode(text.slice(pos,pos+skipped)));builder.col+=skipped}if(!m)break;pos+=skipped+1;if(m[0]==
"\t"){var tabSize=builder.cm.options.tabSize,tabWidth=tabSize-builder.col%tabSize;content.appendChild(elt("span",spaceStr(tabWidth),"cm-tab"));builder.col+=tabWidth}else{var token=elt("span","•","cm-invalidchar");token.title="\\u"+m[0].charCodeAt(0).toString(16);content.appendChild(token);builder.col+=1}}}if(style||(startStyle||(endStyle||builder.measure))){var fullStyle=style||"";if(startStyle)fullStyle+=startStyle;if(endStyle)fullStyle+=endStyle;var token=elt("span",[content],fullStyle);if(title)token.title=
title;return builder.pre.appendChild(token)}builder.pre.appendChild(content)}function buildTokenMeasure(builder,text,style,startStyle,endStyle){var wrapping=builder.cm.options.lineWrapping;for(var i=0;i<text.length;++i){var ch=text.charAt(i),start=i==0;if(ch>="\ud800"&&(ch<"\udbff"&&i<text.length-1)){ch=text.slice(i,i+2);++i}else if(i&&(wrapping&&spanAffectsWrapping(text,i)))builder.pre.appendChild(elt("wbr"));var old=builder.measure[builder.pos];var span=builder.measure[builder.pos]=buildToken(builder,
ch,style,start&&startStyle,i==text.length-1&&endStyle);if(old)span.leftSide=old.leftSide||old;if(ie&&(wrapping&&(ch==" "&&(i&&(!/\s/.test(text.charAt(i-1))&&(i<text.length-1&&!/\s/.test(text.charAt(i+1))))))))span.style.whiteSpace="normal";builder.pos+=ch.length}if(text.length)builder.measuredSomething=true}function buildTokenSplitSpaces(inner){function split(old){var out=" ";for(var i=0;i<old.length-2;++i)out+=i%2?" ":" ";out+=" ";return out}return function(builder,text,style,startStyle,endStyle,
title){return inner(builder,text.replace(/ {3,}/g,split),style,startStyle,endStyle,title)}}function buildCollapsedSpan(builder,size,marker,ignoreWidget){var widget=!ignoreWidget&&marker.replacedWith;if(widget){if(builder.copyWidgets)widget=widget.cloneNode(true);builder.pre.appendChild(widget);if(builder.measure){if(size)builder.measure[builder.pos]=widget;else{var elt=zeroWidthElement(builder.cm.display.measure);if(marker.type=="bookmark"&&!marker.insertLeft)builder.measure[builder.pos]=builder.pre.appendChild(elt);
else if(builder.measure[builder.pos])return;else builder.measure[builder.pos]=builder.pre.insertBefore(elt,widget)}builder.measuredSomething=true}}builder.pos+=size}function insertLineContent(line,builder,styles){var spans=line.markedSpans,allText=line.text,at=0;if(!spans){for(var i=1;i<styles.length;i+=2)builder.addToken(builder,allText.slice(at,at=styles[i]),interpretTokenStyle(styles[i+1],builder));return}var len=allText.length,pos=0,i=1,text="",style;var nextChange=0,spanStyle,spanEndStyle,spanStartStyle,
title,collapsed;for(;;){if(nextChange==pos){spanStyle=spanEndStyle=spanStartStyle=title="";collapsed=null;nextChange=Infinity;var foundBookmarks=[];for(var j=0;j<spans.length;++j){var sp=spans[j],m=sp.marker;if(sp.from<=pos&&(sp.to==null||sp.to>pos)){if(sp.to!=null&&nextChange>sp.to){nextChange=sp.to;spanEndStyle=""}if(m.className)spanStyle+=" "+m.className;if(m.startStyle&&sp.from==pos)spanStartStyle+=" "+m.startStyle;if(m.endStyle&&sp.to==nextChange)spanEndStyle+=" "+m.endStyle;if(m.title&&!title)title=
m.title;if(m.collapsed&&(!collapsed||collapsed.marker.size<m.size))collapsed=sp}else if(sp.from>pos&&nextChange>sp.from)nextChange=sp.from;if(m.type=="bookmark"&&(sp.from==pos&&m.replacedWith))foundBookmarks.push(m)}if(collapsed&&(collapsed.from||0)==pos){buildCollapsedSpan(builder,(collapsed.to==null?len:collapsed.to)-pos,collapsed.marker,collapsed.from==null);if(collapsed.to==null)return collapsed.marker.find()}if(!collapsed&&foundBookmarks.length)for(var j=0;j<foundBookmarks.length;++j)buildCollapsedSpan(builder,
0,foundBookmarks[j])}if(pos>=len)break;var upto=Math.min(len,nextChange);while(true){if(text){var end=pos+text.length;if(!collapsed){var tokenText=end>upto?text.slice(0,upto-pos):text;builder.addToken(builder,tokenText,style?style+spanStyle:spanStyle,spanStartStyle,pos+tokenText.length==nextChange?spanEndStyle:"",title)}if(end>=upto){text=text.slice(upto-pos);pos=upto;break}pos=end;spanStartStyle=""}text=allText.slice(at,at=styles[i++]);style=interpretTokenStyle(styles[i++],builder)}}}function updateDoc(doc,
change,markedSpans,selAfter,estimateHeight){function spansFor(n){return markedSpans?markedSpans[n]:null}function update(line,text,spans){updateLine(line,text,spans,estimateHeight);signalLater(line,"change",line,change)}var from=change.from,to=change.to,text=change.text;var firstLine=getLine(doc,from.line),lastLine=getLine(doc,to.line);var lastText=lst(text),lastSpans=spansFor(text.length-1),nlines=to.line-from.line;if(from.ch==0&&(to.ch==0&&lastText=="")){for(var i=0,e=text.length-1,added=[];i<e;++i)added.push(new Line(text[i],
spansFor(i),estimateHeight));update(lastLine,lastLine.text,lastSpans);if(nlines)doc.remove(from.line,nlines);if(added.length)doc.insert(from.line,added)}else if(firstLine==lastLine)if(text.length==1)update(firstLine,firstLine.text.slice(0,from.ch)+lastText+firstLine.text.slice(to.ch),lastSpans);else{for(var added=[],i=1,e=text.length-1;i<e;++i)added.push(new Line(text[i],spansFor(i),estimateHeight));added.push(new Line(lastText+firstLine.text.slice(to.ch),lastSpans,estimateHeight));update(firstLine,
firstLine.text.slice(0,from.ch)+text[0],spansFor(0));doc.insert(from.line+1,added)}else if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+text[0]+lastLine.text.slice(to.ch),spansFor(0));doc.remove(from.line+1,nlines)}else{update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));update(lastLine,lastText+lastLine.text.slice(to.ch),lastSpans);for(var i=1,e=text.length-1,added=[];i<e;++i)added.push(new Line(text[i],spansFor(i),estimateHeight));if(nlines>1)doc.remove(from.line+
1,nlines-1);doc.insert(from.line+1,added)}signalLater(doc,"change",doc,change);setSelection(doc,selAfter.anchor,selAfter.head,null,true)}function LeafChunk(lines){this.lines=lines;this.parent=null;for(var i=0,e=lines.length,height=0;i<e;++i){lines[i].parent=this;height+=lines[i].height}this.height=height}LeafChunk.prototype={chunkSize:function(){return this.lines.length},removeInner:function(at,n){for(var i=at,e=at+n;i<e;++i){var line=this.lines[i];this.height-=line.height;cleanUpLine(line);signalLater(line,
"delete")}this.lines.splice(at,n)},collapse:function(lines){lines.splice.apply(lines,[lines.length,0].concat(this.lines))},insertInner:function(at,lines,height){this.height+=height;this.lines=this.lines.slice(0,at).concat(lines).concat(this.lines.slice(at));for(var i=0,e=lines.length;i<e;++i)lines[i].parent=this},iterN:function(at,n,op){for(var e=at+n;at<e;++at)if(op(this.lines[at]))return true}};function BranchChunk(children){this.children=children;var size=0,height=0;for(var i=0,e=children.length;i<
e;++i){var ch=children[i];size+=ch.chunkSize();height+=ch.height;ch.parent=this}this.size=size;this.height=height;this.parent=null}BranchChunk.prototype={chunkSize:function(){return this.size},removeInner:function(at,n){this.size-=n;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var rm=Math.min(n,sz-at),oldHeight=child.height;child.removeInner(at,rm);this.height-=oldHeight-child.height;if(sz==rm){this.children.splice(i--,1);child.parent=null}if((n-=
rm)==0)break;at=0}else at-=sz}if(this.size-n<25){var lines=[];this.collapse(lines);this.children=[new LeafChunk(lines)];this.children[0].parent=this}},collapse:function(lines){for(var i=0,e=this.children.length;i<e;++i)this.children[i].collapse(lines)},insertInner:function(at,lines,height){this.size+=lines.length;this.height+=height;for(var i=0,e=this.children.length;i<e;++i){var child=this.children[i],sz=child.chunkSize();if(at<=sz){child.insertInner(at,lines,height);if(child.lines&&child.lines.length>
50){while(child.lines.length>50){var spilled=child.lines.splice(child.lines.length-25,25);var newleaf=new LeafChunk(spilled);child.height-=newleaf.height;this.children.splice(i+1,0,newleaf);newleaf.parent=this}this.maybeSpill()}break}at-=sz}},maybeSpill:function(){if(this.children.length<=10)return;var me=this;do{var spilled=me.children.splice(me.children.length-5,5);var sibling=new BranchChunk(spilled);if(!me.parent){var copy=new BranchChunk(me.children);copy.parent=me;me.children=[copy,sibling];
me=copy}else{me.size-=sibling.size;me.height-=sibling.height;var myIndex=indexOf(me.parent.children,me);me.parent.children.splice(myIndex+1,0,sibling)}sibling.parent=me.parent}while(me.children.length>10);me.parent.maybeSpill()},iterN:function(at,n,op){for(var i=0,e=this.children.length;i<e;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var used=Math.min(n,sz-at);if(child.iterN(at,used,op))return true;if((n-=used)==0)break;at=0}else at-=sz}}};var nextDocId=0;var Doc=CodeMirror.Doc=
function(text,mode,firstLine){if(!(this instanceof Doc))return new Doc(text,mode,firstLine);if(firstLine==null)firstLine=0;BranchChunk.call(this,[new LeafChunk([new Line("",null)])]);this.first=firstLine;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.history=makeHistory();this.cleanGeneration=1;this.frontier=firstLine;var start=Pos(firstLine,0);this.sel={from:start,to:start,head:start,anchor:start,shift:false,extend:false,goalColumn:null};this.id=++nextDocId;this.modeOption=mode;if(typeof text==
"string")text=splitLines(text);updateDoc(this,{from:start,to:start,text:text},null,{head:start,anchor:start})};Doc.prototype=createObj(BranchChunk.prototype,{constructor:Doc,iter:function(from,to,op){if(op)this.iterN(from-this.first,to-from,op);else this.iterN(this.first,this.first+this.size,from)},insert:function(at,lines){var height=0;for(var i=0,e=lines.length;i<e;++i)height+=lines[i].height;this.insertInner(at-this.first,lines,height)},remove:function(at,n){this.removeInner(at-this.first,n)},
getValue:function(lineSep){var lines=getLines(this,this.first,this.first+this.size);if(lineSep===false)return lines;return lines.join(lineSep||"\n")},setValue:function(code){var top=Pos(this.first,0),last=this.first+this.size-1;makeChange(this,{from:top,to:Pos(last,getLine(this,last).text.length),text:splitLines(code),origin:"setValue"},{head:top,anchor:top},true)},replaceRange:function(code,from,to,origin){from=clipPos(this,from);to=to?clipPos(this,to):from;replaceRange(this,code,from,to,origin)},
getRange:function(from,to,lineSep){var lines=getBetween(this,clipPos(this,from),clipPos(this,to));if(lineSep===false)return lines;return lines.join(lineSep||"\n")},getLine:function(line){var l=this.getLineHandle(line);return l&&l.text},setLine:function(line,text){if(isLine(this,line))replaceRange(this,text,Pos(line,0),clipPos(this,Pos(line)))},removeLine:function(line){if(line)replaceRange(this,"",clipPos(this,Pos(line-1)),clipPos(this,Pos(line)));else replaceRange(this,"",Pos(0,0),clipPos(this,Pos(1,
0)))},getLineHandle:function(line){if(isLine(this,line))return getLine(this,line)},getLineNumber:function(line){return lineNo(line)},getLineHandleVisualStart:function(line){if(typeof line=="number")line=getLine(this,line);return visualLine(this,line)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(pos){return clipPos(this,pos)},getCursor:function(start){var sel=this.sel,pos;if(start==null||start=="head")pos=
sel.head;else if(start=="anchor")pos=sel.anchor;else if(start=="end"||start===false)pos=sel.to;else pos=sel.from;return copyPos(pos)},somethingSelected:function(){return!posEq(this.sel.head,this.sel.anchor)},setCursor:docOperation(function(line,ch,extend){var pos=clipPos(this,typeof line=="number"?Pos(line,ch||0):line);if(extend)extendSelection(this,pos);else setSelection(this,pos,pos)}),setSelection:docOperation(function(anchor,head,bias){setSelection(this,clipPos(this,anchor),clipPos(this,head||
anchor),bias)}),extendSelection:docOperation(function(from,to,bias){extendSelection(this,clipPos(this,from),to&&clipPos(this,to),bias)}),getSelection:function(lineSep){return this.getRange(this.sel.from,this.sel.to,lineSep)},replaceSelection:function(code,collapse,origin){makeChange(this,{from:this.sel.from,to:this.sel.to,text:splitLines(code),origin:origin},collapse||"around")},undo:docOperation(function(){makeChangeFromHistory(this,"undo")}),redo:docOperation(function(){makeChangeFromHistory(this,
"redo")}),setExtending:function(val){this.sel.extend=val},historySize:function(){var hist=this.history;return{undo:hist.done.length,redo:hist.undone.length}},clearHistory:function(){this.history=makeHistory(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){this.history.lastOp=this.history.lastOrigin=null;return this.history.generation},isClean:function(gen){return this.history.generation==(gen||this.cleanGeneration)},getHistory:function(){return{done:copyHistoryArray(this.history.done),
undone:copyHistoryArray(this.history.undone)}},setHistory:function(histData){var hist=this.history=makeHistory(this.history.maxGeneration);hist.done=histData.done.slice(0);hist.undone=histData.undone.slice(0)},markText:function(from,to,options){return markText(this,clipPos(this,from),clipPos(this,to),options,"range")},setBookmark:function(pos,options){var realOpts={replacedWith:options&&(options.nodeType==null?options.widget:options),insertLeft:options&&options.insertLeft};pos=clipPos(this,pos);return markText(this,
pos,pos,realOpts,"bookmark")},findMarksAt:function(pos){pos=clipPos(this,pos);var markers=[],spans=getLine(this,pos.line).markedSpans;if(spans)for(var i=0;i<spans.length;++i){var span=spans[i];if((span.from==null||span.from<=pos.ch)&&(span.to==null||span.to>=pos.ch))markers.push(span.marker.parent||span.marker)}return markers},getAllMarks:function(){var markers=[];this.iter(function(line){var sps=line.markedSpans;if(sps)for(var i=0;i<sps.length;++i)if(sps[i].from!=null)markers.push(sps[i].marker)});
return markers},posFromIndex:function(off){var ch,lineNo=this.first;this.iter(function(line){var sz=line.text.length+1;if(sz>off){ch=off;return true}off-=sz;++lineNo});return clipPos(this,Pos(lineNo,ch))},indexFromPos:function(coords){coords=clipPos(this,coords);var index=coords.ch;if(coords.line<this.first||coords.ch<0)return 0;this.iter(this.first,coords.line,function(line){index+=line.text.length+1});return index},copy:function(copyHistory){var doc=new Doc(getLines(this,this.first,this.first+this.size),
this.modeOption,this.first);doc.scrollTop=this.scrollTop;doc.scrollLeft=this.scrollLeft;doc.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:false,goalColumn:this.sel.goalColumn};if(copyHistory){doc.history.undoDepth=this.history.undoDepth;doc.setHistory(this.getHistory())}return doc},linkedDoc:function(options){if(!options)options={};var from=this.first,to=this.first+this.size;if(options.from!=null&&options.from>from)from=options.from;if(options.to!=
null&&options.to<to)to=options.to;var copy=new Doc(getLines(this,from,to),options.mode||this.modeOption,from);if(options.sharedHist)copy.history=this.history;(this.linked||(this.linked=[])).push({doc:copy,sharedHist:options.sharedHist});copy.linked=[{doc:this,isParent:true,sharedHist:options.sharedHist}];return copy},unlinkDoc:function(other){if(other instanceof CodeMirror)other=other.doc;if(this.linked)for(var i=0;i<this.linked.length;++i){var link=this.linked[i];if(link.doc!=other)continue;this.linked.splice(i,
1);other.unlinkDoc(this);break}if(other.history==this.history){var splitIds=[other.id];linkedDocs(other,function(doc){splitIds.push(doc.id)},true);other.history=makeHistory();other.history.done=copyHistoryArray(this.history.done,splitIds);other.history.undone=copyHistoryArray(this.history.undone,splitIds)}},iterLinkedDocs:function(f){linkedDocs(this,f)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});Doc.prototype.eachLine=Doc.prototype.iter;var dontDelegate="iter insert remove copy getEditor".split(" ");
for(var prop in Doc.prototype)if(Doc.prototype.hasOwnProperty(prop)&&indexOf(dontDelegate,prop)<0)CodeMirror.prototype[prop]=function(method){return function(){return method.apply(this.doc,arguments)}}(Doc.prototype[prop]);eventMixin(Doc);function linkedDocs(doc,f,sharedHistOnly){function propagate(doc,skip,sharedHist){if(doc.linked)for(var i=0;i<doc.linked.length;++i){var rel=doc.linked[i];if(rel.doc==skip)continue;var shared=sharedHist&&rel.sharedHist;if(sharedHistOnly&&!shared)continue;f(rel.doc,
shared);propagate(rel.doc,doc,shared)}}propagate(doc,null,true)}function attachDoc(cm,doc){if(doc.cm)throw new Error("This document is already in use.");cm.doc=doc;doc.cm=cm;estimateLineHeights(cm);loadMode(cm);if(!cm.options.lineWrapping)computeMaxLength(cm);cm.options.mode=doc.modeOption;regChange(cm)}function getLine(chunk,n){n-=chunk.first;while(!chunk.lines)for(var i=0;;++i){var child=chunk.children[i],sz=child.chunkSize();if(n<sz){chunk=child;break}n-=sz}return chunk.lines[n]}function getBetween(doc,
start,end){var out=[],n=start.line;doc.iter(start.line,end.line+1,function(line){var text=line.text;if(n==end.line)text=text.slice(0,end.ch);if(n==start.line)text=text.slice(start.ch);out.push(text);++n});return out}function getLines(doc,from,to){var out=[];doc.iter(from,to,function(line){out.push(line.text)});return out}function updateLineHeight(line,height){var diff=height-line.height;for(var n=line;n;n=n.parent)n.height+=diff}function lineNo(line){if(line.parent==null)return null;var cur=line.parent,
no=indexOf(cur.lines,line);for(var chunk=cur.parent;chunk;cur=chunk,chunk=chunk.parent)for(var i=0;;++i){if(chunk.children[i]==cur)break;no+=chunk.children[i].chunkSize()}return no+cur.first}function lineAtHeight(chunk,h){var n=chunk.first;outer:do{for(var i=0,e=chunk.children.length;i<e;++i){var child=chunk.children[i],ch=child.height;if(h<ch){chunk=child;continue outer}h-=ch;n+=child.chunkSize()}return n}while(!chunk.lines);for(var i=0,e=chunk.lines.length;i<e;++i){var line=chunk.lines[i],lh=line.height;
if(h<lh)break;h-=lh}return n+i}function heightAtLine(cm,lineObj){lineObj=visualLine(cm.doc,lineObj);var h=0,chunk=lineObj.parent;for(var i=0;i<chunk.lines.length;++i){var line=chunk.lines[i];if(line==lineObj)break;else h+=line.height}for(var p=chunk.parent;p;chunk=p,p=chunk.parent)for(var i=0;i<p.children.length;++i){var cur=p.children[i];if(cur==chunk)break;else h+=cur.height}return h}function getOrder(line){var order=line.order;if(order==null)order=line.order=bidiOrdering(line.text);return order}
function makeHistory(startGen){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,generation:startGen||1,maxGeneration:startGen||1}}function attachLocalSpans(doc,change,from,to){var existing=change["spans_"+doc.id],n=0;doc.iter(Math.max(doc.first,from),Math.min(doc.first+doc.size,to),function(line){if(line.markedSpans)(existing||(existing=change["spans_"+doc.id]={}))[n]=line.markedSpans;++n})}function historyChangeFromChange(doc,change){var from={line:change.from.line,
ch:change.from.ch};var histChange={from:from,to:changeEnd(change),text:getBetween(doc,change.from,change.to)};attachLocalSpans(doc,histChange,change.from.line,change.to.line+1);linkedDocs(doc,function(doc){attachLocalSpans(doc,histChange,change.from.line,change.to.line+1)},true);return histChange}function addToHistory(doc,change,selAfter,opId){var hist=doc.history;hist.undone.length=0;var time=+new Date,cur=lst(hist.done);if(cur&&(hist.lastOp==opId||hist.lastOrigin==change.origin&&(change.origin&&
(change.origin.charAt(0)=="+"&&(doc.cm&&hist.lastTime>time-doc.cm.options.historyEventDelay)||change.origin.charAt(0)=="*")))){var last=lst(cur.changes);if(posEq(change.from,change.to)&&posEq(change.from,last.to))last.to=changeEnd(change);else cur.changes.push(historyChangeFromChange(doc,change));cur.anchorAfter=selAfter.anchor;cur.headAfter=selAfter.head}else{cur={changes:[historyChangeFromChange(doc,change)],generation:hist.generation,anchorBefore:doc.sel.anchor,headBefore:doc.sel.head,anchorAfter:selAfter.anchor,
headAfter:selAfter.head};hist.done.push(cur);hist.generation=++hist.maxGeneration;while(hist.done.length>hist.undoDepth)hist.done.shift()}hist.lastTime=time;hist.lastOp=opId;hist.lastOrigin=change.origin}function removeClearedSpans(spans){if(!spans)return null;for(var i=0,out;i<spans.length;++i)if(spans[i].marker.explicitlyCleared){if(!out)out=spans.slice(0,i)}else if(out)out.push(spans[i]);return!out?spans:out.length?out:null}function getOldSpans(doc,change){var found=change["spans_"+doc.id];if(!found)return null;
for(var i=0,nw=[];i<change.text.length;++i)nw.push(removeClearedSpans(found[i]));return nw}function copyHistoryArray(events,newGroup){for(var i=0,copy=[];i<events.length;++i){var event=events[i],changes=event.changes,newChanges=[];copy.push({changes:newChanges,anchorBefore:event.anchorBefore,headBefore:event.headBefore,anchorAfter:event.anchorAfter,headAfter:event.headAfter});for(var j=0;j<changes.length;++j){var change=changes[j],m;newChanges.push({from:change.from,to:change.to,text:change.text});
if(newGroup)for(var prop in change)if(m=prop.match(/^spans_(\d+)$/))if(indexOf(newGroup,Number(m[1]))>-1){lst(newChanges)[prop]=change[prop];delete change[prop]}}}return copy}function rebaseHistSel(pos,from,to,diff){if(to<pos.line)pos.line+=diff;else if(from<pos.line){pos.line=from;pos.ch=0}}function rebaseHistArray(array,from,to,diff){for(var i=0;i<array.length;++i){var sub=array[i],ok=true;for(var j=0;j<sub.changes.length;++j){var cur=sub.changes[j];if(!sub.copied){cur.from=copyPos(cur.from);cur.to=
copyPos(cur.to)}if(to<cur.from.line){cur.from.line+=diff;cur.to.line+=diff}else if(from<=cur.to.line){ok=false;break}}if(!sub.copied){sub.anchorBefore=copyPos(sub.anchorBefore);sub.headBefore=copyPos(sub.headBefore);sub.anchorAfter=copyPos(sub.anchorAfter);sub.readAfter=copyPos(sub.headAfter);sub.copied=true}if(!ok){array.splice(0,i+1);i=0}else{rebaseHistSel(sub.anchorBefore);rebaseHistSel(sub.headBefore);rebaseHistSel(sub.anchorAfter);rebaseHistSel(sub.headAfter)}}}function rebaseHist(hist,change){var from=
change.from.line,to=change.to.line,diff=change.text.length-(to-from)-1;rebaseHistArray(hist.done,from,to,diff);rebaseHistArray(hist.undone,from,to,diff)}function stopMethod(){e_stop(this)}function addStop(event){if(!event.stop)event.stop=stopMethod;return event}function e_preventDefault(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false}function e_stopPropagation(e){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true}function e_defaultPrevented(e){return e.defaultPrevented!=
null?e.defaultPrevented:e.returnValue==false}function e_stop(e){e_preventDefault(e);e_stopPropagation(e)}CodeMirror.e_stop=e_stop;CodeMirror.e_preventDefault=e_preventDefault;CodeMirror.e_stopPropagation=e_stopPropagation;function e_target(e){return e.target||e.srcElement}function e_button(e){var b=e.which;if(b==null)if(e.button&1)b=1;else if(e.button&2)b=3;else if(e.button&4)b=2;if(mac&&(e.ctrlKey&&b==1))b=3;return b}function on(emitter,type,f){if(emitter.addEventListener)emitter.addEventListener(type,
f,false);else if(emitter.attachEvent)emitter.attachEvent("on"+type,f);else{var map=emitter._handlers||(emitter._handlers={});var arr=map[type]||(map[type]=[]);arr.push(f)}}function off(emitter,type,f){if(emitter.removeEventListener)emitter.removeEventListener(type,f,false);else if(emitter.detachEvent)emitter.detachEvent("on"+type,f);else{var arr=emitter._handlers&&emitter._handlers[type];if(!arr)return;for(var i=0;i<arr.length;++i)if(arr[i]==f){arr.splice(i,1);break}}}function signal(emitter,type){var arr=
emitter._handlers&&emitter._handlers[type];if(!arr)return;var args=Array.prototype.slice.call(arguments,2);for(var i=0;i<arr.length;++i)arr[i].apply(null,args)}var delayedCallbacks,delayedCallbackDepth=0;function signalLater(emitter,type){var arr=emitter._handlers&&emitter._handlers[type];if(!arr)return;var args=Array.prototype.slice.call(arguments,2);if(!delayedCallbacks){++delayedCallbackDepth;delayedCallbacks=[];setTimeout(fireDelayed,0)}function bnd(f){return function(){f.apply(null,args)}}for(var i=
0;i<arr.length;++i)delayedCallbacks.push(bnd(arr[i]))}function signalDOMEvent(cm,e,override){signal(cm,override||e.type,cm,e);return e_defaultPrevented(e)||e.codemirrorIgnore}function fireDelayed(){--delayedCallbackDepth;var delayed=delayedCallbacks;delayedCallbacks=null;for(var i=0;i<delayed.length;++i)delayed[i]()}function hasHandler(emitter,type){var arr=emitter._handlers&&emitter._handlers[type];return arr&&arr.length>0}CodeMirror.on=on;CodeMirror.off=off;CodeMirror.signal=signal;function eventMixin(ctor){ctor.prototype.on=
function(type,f){on(this,type,f)};ctor.prototype.off=function(type,f){off(this,type,f)}}var scrollerCutOff=30;var Pass=CodeMirror.Pass={toString:function(){return"CodeMirror.Pass"}};function Delayed(){this.id=null}Delayed.prototype={set:function(ms,f){clearTimeout(this.id);this.id=setTimeout(f,ms)}};function countColumn(string,end,tabSize,startIndex,startValue){if(end==null){end=string.search(/[^\s\u00a0]/);if(end==-1)end=string.length}for(var i=startIndex||0,n=startValue||0;i<end;++i)if(string.charAt(i)==
"\t")n+=tabSize-n%tabSize;else++n;return n}CodeMirror.countColumn=countColumn;var spaceStrs=[""];function spaceStr(n){while(spaceStrs.length<=n)spaceStrs.push(lst(spaceStrs)+" ");return spaceStrs[n]}function lst(arr){return arr[arr.length-1]}function selectInput(node){if(ios){node.selectionStart=0;node.selectionEnd=node.value.length}else try{node.select()}catch(_e){}}function indexOf(collection,elt){if(collection.indexOf)return collection.indexOf(elt);for(var i=0,e=collection.length;i<e;++i)if(collection[i]==
elt)return i;return-1}function createObj(base,props){function Obj(){}Obj.prototype=base;var inst=new Obj;if(props)copyObj(props,inst);return inst}function copyObj(obj,target){if(!target)target={};for(var prop in obj)if(obj.hasOwnProperty(prop))target[prop]=obj[prop];return target}function emptyArray(size){for(var a=[],i=0;i<size;++i)a.push(undefined);return a}function bind(f){var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}}var nonASCIISingleCaseWordChar=
/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function isWordChar(ch){return/\w/.test(ch)||ch>""&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch))}function isEmpty(obj){for(var n in obj)if(obj.hasOwnProperty(n)&&obj[n])return false;return true}var isExtendingChar=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;
function elt(tag,content,className,style){var e=document.createElement(tag);if(className)e.className=className;if(style)e.style.cssText=style;if(typeof content=="string")setTextContent(e,content);else if(content)for(var i=0;i<content.length;++i)e.appendChild(content[i]);return e}function removeChildren(e){for(var count=e.childNodes.length;count>0;--count)e.removeChild(e.firstChild);return e}function removeChildrenAndAdd(parent,e){return removeChildren(parent).appendChild(e)}function setTextContent(e,
str){if(ie_lt9){e.innerHTML="";e.appendChild(document.createTextNode(str))}else e.textContent=str}function getRect(node){return node.getBoundingClientRect()}CodeMirror.replaceGetRect=function(f){getRect=f};var dragAndDrop=function(){if(ie_lt9)return false;var div=elt("div");return"draggable"in div||"dragDrop"in div}();function spanAffectsWrapping(){return false}if(gecko)spanAffectsWrapping=function(str,i){return str.charCodeAt(i-1)==36&&str.charCodeAt(i)==39};else if(safari&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent))spanAffectsWrapping=
function(str,i){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(str.slice(i-1,i+1))};else if(webkit&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent))spanAffectsWrapping=function(str,i){var code=str.charCodeAt(i-1);return code>=8208&&code<=8212};else if(webkit)spanAffectsWrapping=function(str,i){if(i>1&&str.charCodeAt(i-1)==45){if(/\w/.test(str.charAt(i-2))&&/[^\-?\.]/.test(str.charAt(i)))return true;if(i>2&&(/[\d\.,]/.test(str.charAt(i-2))&&/[\d\.,]/.test(str.charAt(i))))return false}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(str.slice(i-
1,i+1))};var knownScrollbarWidth;function scrollbarWidth(measure){if(knownScrollbarWidth!=null)return knownScrollbarWidth;var test=elt("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");removeChildrenAndAdd(measure,test);if(test.offsetWidth)knownScrollbarWidth=test.offsetHeight-test.clientHeight;return knownScrollbarWidth||0}var zwspSupported;function zeroWidthElement(measure){if(zwspSupported==null){var test=elt("span","​");removeChildrenAndAdd(measure,elt("span",[test,document.createTextNode("x")]));
if(measure.firstChild.offsetHeight!=0)zwspSupported=test.offsetWidth<=1&&(test.offsetHeight>2&&!ie_lt8)}if(zwspSupported)return elt("span","​");else return elt("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}var splitLines="\n\nb".split(/\n/).length!=3?function(string){var pos=0,result=[],l=string.length;while(pos<=l){var nl=string.indexOf("\n",pos);if(nl==-1)nl=string.length;var line=string.slice(pos,string.charAt(nl-1)=="\r"?nl-1:nl);var rt=line.indexOf("\r");if(rt!=-1){result.push(line.slice(0,
rt));pos+=rt+1}else{result.push(line);pos=nl+1}}return result}:function(string){return string.split(/\r\n?|\n/)};CodeMirror.splitLines=splitLines;var hasSelection=window.getSelection?function(te){try{return te.selectionStart!=te.selectionEnd}catch(e){return false}}:function(te){try{var range=te.ownerDocument.selection.createRange()}catch(e){}if(!range||range.parentElement()!=te)return false;return range.compareEndPoints("StartToEnd",range)!=0};var hasCopyEvent=function(){var e=elt("div");if("oncopy"in
e)return true;e.setAttribute("oncopy","return;");return typeof e.oncopy=="function"}();var keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"\x3d",127:"Delete",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",
63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};CodeMirror.keyNames=keyNames;(function(){for(var i=0;i<10;i++)keyNames[i+48]=String(i);for(var i=65;i<=90;i++)keyNames[i]=String.fromCharCode(i);for(var i=1;i<=12;i++)keyNames[i+111]=keyNames[i+63235]="F"+i})();function iterateBidiSections(order,from,to,f){if(!order)return f(from,to,"ltr");var found=false;for(var i=0;i<order.length;++i){var part=order[i];if(part.from<to&&part.to>
from||from==to&&part.to==from){f(Math.max(part.from,from),Math.min(part.to,to),part.level==1?"rtl":"ltr");found=true}}if(!found)f(from,to,"ltr")}function bidiLeft(part){return part.level%2?part.to:part.from}function bidiRight(part){return part.level%2?part.from:part.to}function lineLeft(line){var order=getOrder(line);return order?bidiLeft(order[0]):0}function lineRight(line){var order=getOrder(line);if(!order)return line.text.length;return bidiRight(lst(order))}function lineStart(cm,lineN){var line=
getLine(cm.doc,lineN);var visual=visualLine(cm.doc,line);if(visual!=line)lineN=lineNo(visual);var order=getOrder(visual);var ch=!order?0:order[0].level%2?lineRight(visual):lineLeft(visual);return Pos(lineN,ch)}function lineEnd(cm,lineN){var merged,line;while(merged=collapsedSpanAtEnd(line=getLine(cm.doc,lineN)))lineN=merged.find().to.line;var order=getOrder(line);var ch=!order?line.text.length:order[0].level%2?lineLeft(line):lineRight(line);return Pos(lineN,ch)}function compareBidiLevel(order,a,b){var linedir=
order[0].level;if(a==linedir)return true;if(b==linedir)return false;return a<b}var bidiOther;function getBidiPartAt(order,pos){for(var i=0,found;i<order.length;++i){var cur=order[i];if(cur.from<pos&&cur.to>pos){bidiOther=null;return i}if(cur.from==pos||cur.to==pos)if(found==null)found=i;else if(compareBidiLevel(order,cur.level,order[found].level)){bidiOther=found;return i}else{bidiOther=i;return found}}bidiOther=null;return found}function moveInLine(line,pos,dir,byUnit){if(!byUnit)return pos+dir;
do pos+=dir;while(pos>0&&isExtendingChar.test(line.text.charAt(pos)));return pos}function moveVisually(line,start,dir,byUnit){var bidi=getOrder(line);if(!bidi)return moveLogically(line,start,dir,byUnit);var pos=getBidiPartAt(bidi,start),part=bidi[pos];var target=moveInLine(line,start,part.level%2?-dir:dir,byUnit);for(;;){if(target>part.from&&target<part.to)return target;if(target==part.from||target==part.to){if(getBidiPartAt(bidi,target)==pos)return target;part=bidi[pos+=dir];return dir>0==part.level%
2?part.to:part.from}else{part=bidi[pos+=dir];if(!part)return null;if(dir>0==part.level%2)target=moveInLine(line,part.to,-1,byUnit);else target=moveInLine(line,part.from,1,byUnit)}}}function moveLogically(line,start,dir,byUnit){var target=start+dir;if(byUnit)while(target>0&&isExtendingChar.test(line.text.charAt(target)))target+=dir;return target<0||target>line.text.length?null:target}var bidiOrdering=function(){var lowTypes="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL";
var arabicTypes="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr";function charType(code){if(code<=255)return lowTypes.charAt(code);else if(1424<=code&&code<=1524)return"R";else if(1536<=code&&code<=1791)return arabicTypes.charAt(code-1536);else if(1792<=code&&code<=2220)return"r";else return"L"}
var bidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var isNeutral=/[stwN]/,isStrong=/[LRr]/,countsAsLeft=/[Lb1n]/,countsAsNum=/[1n]/;var outerType="L";return function(str){if(!bidiRE.test(str))return false;var len=str.length,types=[];for(var i=0,type;i<len;++i)types.push(type=charType(str.charCodeAt(i)));for(var i=0,prev=outerType;i<len;++i){var type=types[i];if(type=="m")types[i]=prev;else prev=type}for(var i=0,cur=outerType;i<len;++i){var type=types[i];if(type=="1"&&cur=="r")types[i]="n";else if(isStrong.test(type)){cur=
type;if(type=="r")types[i]="R"}}for(var i=1,prev=types[0];i<len-1;++i){var type=types[i];if(type=="+"&&(prev=="1"&&types[i+1]=="1"))types[i]="1";else if(type==","&&(prev==types[i+1]&&(prev=="1"||prev=="n")))types[i]=prev;prev=type}for(var i=0;i<len;++i){var type=types[i];if(type==",")types[i]="N";else if(type=="%"){for(var end=i+1;end<len&&types[end]=="%";++end);var replace=i&&types[i-1]=="!"||end<len-1&&types[end]=="1"?"1":"N";for(var j=i;j<end;++j)types[j]=replace;i=end-1}}for(var i=0,cur=outerType;i<
len;++i){var type=types[i];if(cur=="L"&&type=="1")types[i]="L";else if(isStrong.test(type))cur=type}for(var i=0;i<len;++i)if(isNeutral.test(types[i])){for(var end=i+1;end<len&&isNeutral.test(types[end]);++end);var before=(i?types[i-1]:outerType)=="L";var after=(end<len-1?types[end]:outerType)=="L";var replace=before||after?"L":"R";for(var j=i;j<end;++j)types[j]=replace;i=end-1}var order=[],m;for(var i=0;i<len;)if(countsAsLeft.test(types[i])){var start=i;for(++i;i<len&&countsAsLeft.test(types[i]);++i);
order.push({from:start,to:i,level:0})}else{var pos=i,at=order.length;for(++i;i<len&&types[i]!="L";++i);for(var j=pos;j<i;)if(countsAsNum.test(types[j])){if(pos<j)order.splice(at,0,{from:pos,to:j,level:1});var nstart=j;for(++j;j<i&&countsAsNum.test(types[j]);++j);order.splice(at,0,{from:nstart,to:j,level:2});pos=j}else++j;if(pos<i)order.splice(at,0,{from:pos,to:i,level:1})}if(order[0].level==1&&(m=str.match(/^\s+/))){order[0].from=m[0].length;order.unshift({from:0,to:m[0].length,level:0})}if(lst(order).level==
1&&(m=str.match(/\s+$/))){lst(order).to-=m[0].length;order.push({from:len-m[0].length,to:len,level:0})}if(order[0].level!=lst(order).level)order.push({from:len,to:len,level:order[0].level});return order}}();CodeMirror.version="3.19.0";return CodeMirror}();
CodeMirror.defineMode("groovy",function(config){function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=true;return obj}var keywords=words("abstract as assert boolean break byte case catch char class const continue def default "+"do double else enum extends final finally float for goto if implements import in "+"instanceof int interface long native new package private protected public return "+"short static strictfp super switch synchronized threadsafe throw throws transient "+
"try void volatile while");var blockKeywords=words("catch class do else finally for if switch try while enum interface def");var atoms=words("null true false this");var curPunc;function tokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'")return startString(ch,stream,state);if(/[\[\]{}\(\),;\:\.]/.test(ch)){curPunc=ch;return null}if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);if(stream.eat(/eE/)){stream.eat(/\+\-/);stream.eatWhile(/\d/)}return"number"}if(ch=="/"){if(stream.eat("*")){state.tokenize.push(tokenComment);
return tokenComment(stream,state)}if(stream.eat("/")){stream.skipToEnd();return"comment"}if(expectExpression(state.lastToken))return startString(ch,stream,state)}if(ch=="-"&&stream.eat("\x3e")){curPunc="-\x3e";return null}if(/[+\-*&%=<>!?|\/~]/.test(ch)){stream.eatWhile(/[+\-*&%=<>|~]/);return"operator"}stream.eatWhile(/[\w\$_]/);if(ch=="@"){stream.eatWhile(/[\w\$_\.]/);return"meta"}if(state.lastToken==".")return"property";if(stream.eat(":")){curPunc="proplabel";return"property"}var cur=stream.current();
if(atoms.propertyIsEnumerable(cur))return"atom";if(keywords.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"keyword"}return"variable"}tokenBase.isBase=true;function startString(quote,stream,state){var tripleQuoted=false;if(quote!="/"&&stream.eat(quote))if(stream.eat(quote))tripleQuoted=true;else return"string";function t(stream,state){var escaped=false,next,end=!tripleQuoted;while((next=stream.next())!=null){if(next==quote&&!escaped){if(!tripleQuoted)break;
if(stream.match(quote+quote)){end=true;break}}if(quote=='"'&&(next=="$"&&(!escaped&&stream.eat("{")))){state.tokenize.push(tokenBaseUntilBrace());return"string"}escaped=!escaped&&next=="\\"}if(end)state.tokenize.pop();return"string"}state.tokenize.push(t);return t(stream,state)}function tokenBaseUntilBrace(){var depth=1;function t(stream,state){if(stream.peek()=="}"){depth--;if(depth==0){state.tokenize.pop();return state.tokenize[state.tokenize.length-1](stream,state)}}else if(stream.peek()=="{")depth++;
return tokenBase(stream,state)}t.isBase=true;return t}function tokenComment(stream,state){var maybeEnd=false,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize.pop();break}maybeEnd=ch=="*"}return"comment"}function expectExpression(last){return!last||(last=="operator"||(last=="-\x3e"||(/[\.\[\{\(,;:]/.test(last)||(last=="newstatement"||(last=="keyword"||last=="proplabel")))))}function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=
align;this.prev=prev}function pushContext(state,col,type){return state.context=new Context(state.indented,col,type,null,state.context)}function popContext(state){var t=state.context.type;if(t==")"||(t=="]"||t=="}"))state.indented=state.context.indented;return state.context=state.context.prev}return{startState:function(basecolumn){return{tokenize:[tokenBase],context:new Context((basecolumn||0)-config.indentUnit,0,"top",false),indented:0,startOfLine:true,lastToken:null}},token:function(stream,state){var ctx=
state.context;if(stream.sol()){if(ctx.align==null)ctx.align=false;state.indented=stream.indentation();state.startOfLine=true;if(ctx.type=="statement"&&!expectExpression(state.lastToken)){popContext(state);ctx=state.context}}if(stream.eatSpace())return null;curPunc=null;var style=state.tokenize[state.tokenize.length-1](stream,state);if(style=="comment")return style;if(ctx.align==null)ctx.align=true;if((curPunc==";"||curPunc==":")&&ctx.type=="statement")popContext(state);else if(curPunc=="-\x3e"&&(ctx.type==
"statement"&&ctx.prev.type=="}")){popContext(state);state.context.align=false}else if(curPunc=="{")pushContext(state,stream.column(),"}");else if(curPunc=="[")pushContext(state,stream.column(),"]");else if(curPunc=="(")pushContext(state,stream.column(),")");else if(curPunc=="}"){while(ctx.type=="statement")ctx=popContext(state);if(ctx.type=="}")ctx=popContext(state);while(ctx.type=="statement")ctx=popContext(state)}else if(curPunc==ctx.type)popContext(state);else if(ctx.type=="}"||(ctx.type=="top"||
ctx.type=="statement"&&curPunc=="newstatement"))pushContext(state,stream.column(),"statement");state.startOfLine=false;state.lastToken=curPunc||style;return style},indent:function(state,textAfter){if(!state.tokenize[state.tokenize.length-1].isBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),ctx=state.context;if(ctx.type=="statement"&&!expectExpression(state.lastToken))ctx=ctx.prev;var closing=firstChar==ctx.type;if(ctx.type=="statement")return ctx.indented+(firstChar=="{"?0:config.indentUnit);
else if(ctx.align)return ctx.column+(closing?0:1);else return ctx.indented+(closing?0:config.indentUnit)},electricChars:"{}",fold:"brace"}});CodeMirror.defineMIME("text/x-groovy","groovy");
(function(window,undefined){var readyList,rootjQuery,core_strundefined=typeof undefined,document=window.document,location=window.location,_jQuery=window.jQuery,_$=window.$,class2type={},core_deletedIds=[],core_version="1.9.1",core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim=core_version.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,
context,rootjQuery)},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()},
completed=function(event){if(document.addEventListener||(event.type==="load"||document.readyState==="complete")){detach();jQuery.ready()}},detach=function(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false)}else{document.detachEvent("onreadystatechange",completed);window.detachEvent("onload",completed)}};jQuery.fn=jQuery.prototype={jquery:core_version,constructor:jQuery,init:function(selector,context,rootjQuery){var match,
elem;if(!selector)return this;if(typeof selector==="string"){if(selector.charAt(0)==="\x3c"&&(selector.charAt(selector.length-1)==="\x3e"&&selector.length>=3))match=[null,selector,null];else match=rquickExpr.exec(selector);if(match&&(match[1]||!context))if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)if(jQuery.isFunction(this[match]))this[match](context[match]);
else this.attr(match,context[match]);return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}else if(!context||context.jquery)return(context||rootjQuery).find(selector);else return this.constructor(context).find(selector)}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector))return rootjQuery.ready(selector);
if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)},selector:"",length:0,size:function(){return this.length},toArray:function(){return core_slice.call(this)},get:function(num){return num==null?this.toArray():num<0?this[this.length+num]:this[num]},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback,args){return jQuery.each(this,
callback,args)},ready:function(fn){jQuery.ready.promise().done(fn);return this},slice:function(){return this.pushStack(core_slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},
push:core_push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(typeof target!=="object"&&!jQuery.isFunction(target))target={};if(length===i){target=this;--i}for(;i<length;i++)if((options=arguments[i])!=null)for(name in options){src=target[name];copy=options[name];
if(target===copy)continue;if(deep&&(copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy))))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else clone=src&&jQuery.isPlainObject(src)?src:{};target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined)target[name]=copy}return target};jQuery.extend({noConflict:function(deep){if(window.$===jQuery)window.$=_$;if(deep&&window.jQuery===jQuery)window.jQuery=_jQuery;return jQuery},isReady:false,readyWait:1,
holdReady:function(hold){if(hold)jQuery.readyWait++;else jQuery.ready(true)},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady)return;if(!document.body)return setTimeout(jQuery.ready);jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger)jQuery(document).trigger("ready").off("ready")},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray||function(obj){return jQuery.type(obj)===
"array"},isWindow:function(obj){return obj!=null&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){if(obj==null)return String(obj);return typeof obj==="object"||typeof obj==="function"?class2type[core_toString.call(obj)]||"object":typeof obj},isPlainObject:function(obj){if(!obj||(jQuery.type(obj)!=="object"||(obj.nodeType||jQuery.isWindow(obj))))return false;try{if(obj.constructor&&(!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,
"isPrototypeOf")))return false}catch(e){return false}var key;for(key in obj);return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj)return false;return true},error:function(msg){throw new Error(msg);},parseHTML:function(data,context,keepScripts){if(!data||typeof data!=="string")return null;if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed)return[context.createElement(parsed[1])];
parsed=jQuery.buildFragment([data],context,scripts);if(scripts)jQuery(scripts).remove();return jQuery.merge([],parsed.childNodes)},parseJSON:function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data);if(data===null)return data;if(typeof data==="string"){data=jQuery.trim(data);if(data)if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))return(new Function("return "+data))()}jQuery.error("Invalid JSON: "+data)},parseXML:function(data){var xml,
tmp;if(!data||typeof data!=="string")return null;try{if(window.DOMParser){tmp=new DOMParser;xml=tmp.parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data)}}catch(e){xml=undefined}if(!xml||(!xml.documentElement||xml.getElementsByTagName("parsererror").length))jQuery.error("Invalid XML: "+data);return xml},noop:function(){},globalEval:function(data){if(data&&jQuery.trim(data))(window.execScript||function(data){window["eval"].call(window,data)})(data)},
camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args)if(isArray)for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false)break}else for(i in obj){value=callback.apply(obj[i],args);if(value===false)break}else if(isArray)for(;i<length;i++){value=
callback.call(obj[i],i,obj[i]);if(value===false)break}else for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false)break}return obj},trim:core_trim&&!core_trim.call("﻿ ")?function(text){return text==null?"":core_trim.call(text)}:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];if(arr!=null)if(isArraylike(Object(arr)))jQuery.merge(ret,typeof arr==="string"?[arr]:arr);else core_push.call(ret,arr);return ret},inArray:function(elem,
arr,i){var len;if(arr){if(core_indexOf)return core_indexOf.call(arr,elem,i);len=arr.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){var l=second.length,i=first.length,j=0;if(typeof l==="number")for(;j<l;j++)first[i++]=second[j];else while(second[j]!==undefined)first[i++]=second[j++];first.length=i;return first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;inv=!!inv;for(;i<length;i++){retVal=
!!callback(elems[i],i);if(inv!==retVal)ret.push(elems[i])}return ret},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null)ret[ret.length]=value}else for(i in elems){value=callback(elems[i],i,arg);if(value!=null)ret[ret.length]=value}return core_concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;if(typeof context==="string"){tmp=fn[context];context=fn;
fn=tmp}if(!jQuery.isFunction(fn))return undefined;args=core_slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(core_slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},access:function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key)jQuery.access(elems,fn,i,key[i],true,emptyGet,raw)}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value))raw=
true;if(bulk)if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}if(fn)for(;i<length;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()}});jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete")setTimeout(jQuery.ready);else if(document.addEventListener){document.addEventListener("DOMContentLoaded",
completed,false);window.addEventListener("load",completed,false)}else{document.attachEvent("onreadystatechange",completed);window.attachEvent("onload",completed);var top=false;try{top=window.frameElement==null&&document.documentElement}catch(e){}if(top&&top.doScroll)(function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach();jQuery.ready()}})()}}return readyList.promise(obj)};jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);if(jQuery.isWindow(obj))return false;if(obj.nodeType===1&&length)return true;return type==="array"||type!=="function"&&(length===0||typeof length==="number"&&(length>0&&length-1 in obj))}rootjQuery=jQuery(document);var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.match(core_rnotwhite)||[],function(_,flag){object[flag]=
true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?optionsCache[options]||createOptions(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=
false;break}firing=false;if(list)if(stack){if(stack.length)fire(stack.shift())}else if(memory)list=[];else self.disable()},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg))list.push(arg)}else if(arg&&(arg.length&&type!=="string"))add(arg)})})(arguments);if(firing)firingLength=list.length;else if(memory){firingStart=start;fire(memory)}}return this},remove:function(){if(list)jQuery.each(arguments,
function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength)firingLength--;if(index<=firingIndex)firingIndex--}}});return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!!(list&&list.length)},empty:function(){list=[];return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return!list},lock:function(){stack=undefined;if(!memory)self.disable();return this},locked:function(){return!stack},
fireWith:function(context,args){args=args||[];args=[context,args.slice?args.slice():args];if(list&&(!fired||stack))if(firing)stack.push(args);else fire(args);return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state=
"pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise))returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);
else newDefer[action+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString)list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock);deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?
promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func)func.call(deferred,deferred);return deferred},when:function(subordinate){var i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>
1?core_slice.call(arguments):value;if(values===progressValues)deferred.notifyWith(contexts,values);else if(!--remaining)deferred.resolveWith(contexts,values)}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++)if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise))resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,
progressContexts,progressValues));else--remaining}if(!remaining)deferred.resolveWith(resolveContexts,resolveValues);return deferred.promise()}});jQuery.support=function(){var support,all,a,input,select,fragment,opt,eventName,isSupported,i,div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  \x3clink/\x3e\x3ctable\x3e\x3c/table\x3e\x3ca href\x3d'/a'\x3ea\x3c/a\x3e\x3cinput type\x3d'checkbox'/\x3e";all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];
if(!all||(!a||!all.length))return{};select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];a.style.cssText="top:1px;float:left;opacity:.5";support={getSetAttribute:div.className!=="t",leadingWhitespace:div.firstChild.nodeType===3,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:a.getAttribute("href")===
"/a",opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:!!input.value,optSelected:opt.selected,enctype:!!document.createElement("form").enctype,html5Clone:document.createElement("nav").cloneNode(true).outerHTML!=="\x3c:nav\x3e\x3c/:nav\x3e",boxModel:document.compatMode==="CSS1Compat",deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};input.checked=true;support.noCloneChecked=
input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=false}input=document.createElement("input");input.setAttribute("value","");support.input=input.getAttribute("value")==="";input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";input.setAttribute("checked","t");input.setAttribute("name","t");fragment=document.createDocumentFragment();fragment.appendChild(input);support.appendChecked=
input.checked;support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;if(div.attachEvent){div.attachEvent("onclick",function(){support.noCloneEvent=false});div.cloneNode(true).click()}for(i in{submit:true,change:true,focusin:true}){div.setAttribute(eventName="on"+i,"t");support[i+"Bubbles"]=eventName in window||div.attributes[eventName].expando===false}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip===
"content-box";jQuery(function(){var container,marginDiv,tds,divReset="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",body=document.getElementsByTagName("body")[0];if(!body)return;container=document.createElement("div");container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";body.appendChild(container).appendChild(div);div.innerHTML="\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3et\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";
tds=div.getElementsByTagName("td");tds[0].style.cssText="padding:0;margin:0;border:0;display:none";isSupported=tds[0].offsetHeight===0;tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=isSupported&&tds[0].offsetHeight===0;div.innerHTML="";div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";support.boxSizing=div.offsetWidth===4;support.doesNotIncludeMarginInBodyOffset=
body.offsetTop!==1;if(window.getComputedStyle){support.pixelPosition=(window.getComputedStyle(div,null)||{}).top!=="1%";support.boxSizingReliable=(window.getComputedStyle(div,null)||{width:"4px"}).width==="4px";marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)}if(typeof div.style.zoom!==
core_strundefined){div.innerHTML="";div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1";support.inlineBlockNeedsLayout=div.offsetWidth===3;div.style.display="block";div.innerHTML="\x3cdiv\x3e\x3c/div\x3e";div.firstChild.style.width="5px";support.shrinkWrapBlocks=div.offsetWidth!==3;if(support.inlineBlockNeedsLayout)body.style.zoom=1}body.removeChild(container);container=div=tds=marginDiv=null});all=select=fragment=opt=a=input=null;return support}();var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
rmultiDash=/([A-Z])/g;function internalData(elem,name,data,pvt){if(!jQuery.acceptData(elem))return;var thisCache,ret,internalKey=jQuery.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if((!id||(!cache[id]||!pvt&&!cache[id].data))&&(getByName&&data===undefined))return;if(!id)if(isNode)elem[internalKey]=id=core_deletedIds.pop()||jQuery.guid++;else id=internalKey;if(!cache[id]){cache[id]={};if(!isNode)cache[id].toJSON=
jQuery.noop}if(typeof name==="object"||typeof name==="function")if(pvt)cache[id]=jQuery.extend(cache[id],name);else cache[id].data=jQuery.extend(cache[id].data,name);thisCache=cache[id];if(!pvt){if(!thisCache.data)thisCache.data={};thisCache=thisCache.data}if(data!==undefined)thisCache[jQuery.camelCase(name)]=data;if(getByName){ret=thisCache[name];if(ret==null)ret=thisCache[jQuery.camelCase(name)]}else ret=thisCache;return ret}function internalRemoveData(elem,name,pvt){if(!jQuery.acceptData(elem))return;
var i,l,thisCache,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(!cache[id])return;if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name))if(name in thisCache)name=[name];else{name=jQuery.camelCase(name);if(name in thisCache)name=[name];else name=name.split(" ")}else name=name.concat(jQuery.map(name,jQuery.camelCase));for(i=0,l=name.length;i<l;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}}if(!pvt){delete cache[id].data;
if(!isEmptyDataObject(cache[id]))return}if(isNode)jQuery.cleanData([elem],true);else if(jQuery.support.deleteExpando||cache!=cache.window)delete cache[id];else cache[id]=null}jQuery.extend({cache:{},expando:"jQuery"+(core_version+Math.random()).replace(/\D/g,""),noData:{"embed":true,"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000","applet":true},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem)},data:function(elem,
name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,true)},_removeData:function(elem,name){return internalRemoveData(elem,name,true)},acceptData:function(elem){if(elem.nodeType&&(elem.nodeType!==1&&elem.nodeType!==9))return false;var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||noData!==true&&elem.getAttribute("classid")===noData}});
jQuery.fn.extend({data:function(key,value){var attrs,name,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){attrs=elem.attributes;for(;i<attrs.length;i++){name=attrs[i].name;if(!name.indexOf("data-")){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}jQuery._data(elem,"parsedAttrs",true)}}return data}if(typeof key==="object")return this.each(function(){jQuery.data(this,key)});return jQuery.access(this,
function(value){if(value===undefined)return elem?dataAttr(elem,key,jQuery.data(elem,key)):null;this.each(function(){jQuery.data(this,key,value)})},null,value,arguments.length>1,null,true)},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?
false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){var name;for(name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name]))continue;if(name!=="toJSON")return false}return true}jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=jQuery._data(elem,type);if(data)if(!queue||jQuery.isArray(data))queue=jQuery._data(elem,
type,jQuery.makeArray(data));else queue.push(data);return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}hooks.cur=fn;if(fn){if(type==="fx")queue.unshift("inprogress");delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks)hooks.empty.fire()},_queueHooks:function(elem,type){var key=
type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue");jQuery._removeData(elem,key)})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter)return jQuery.queue(this[0],type);return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type===
"fx"&&queue[0]!=="inprogress")jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,
resolve=function(){if(!--count)defer.resolveWith(elements,[elements])};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=jQuery._data(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var nodeHook,boolHook,rclass=/[\t\r\n]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i,rboolean=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,
ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,getSetInput=jQuery.support.input;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=
undefined;delete this[name]}catch(e){}})},addClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=typeof value==="string"&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed){classes=(value||"").match(core_rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while(clazz=classes[j++])if(cur.indexOf(" "+
clazz+" ")<0)cur+=clazz+" ";elem.className=jQuery.trim(cur)}}}return this},removeClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=arguments.length===0||typeof value==="string"&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed){classes=(value||"").match(core_rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):
"");if(cur){j=0;while(clazz=classes[j++])while(cur.indexOf(" "+clazz+" ")>=0)cur=cur.replace(" "+clazz+" "," ");elem.className=value?jQuery.trim(cur):""}}}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value))return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)});return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=
value.match(core_rnotwhite)||[];while(className=classNames[i++]){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className)}}else if(type===core_strundefined||type==="boolean"){if(this.className)jQuery._data(this,"__className__",this.className);this.className=this.className||value===false?"":jQuery._data(this,"__className__")||""}})},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++)if(this[i].nodeType===1&&(" "+this[i].className+
" ").replace(rclass," ").indexOf(className)>=0)return true;return false},val:function(value){var ret,hooks,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&("get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined))return ret;ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val,self=jQuery(this);
if(this.nodeType!==1)return;if(isFunction)val=value.call(this,i,self.val());else val=value;if(val==null)val="";else if(typeof val==="number")val+="";else if(jQuery.isArray(val))val=jQuery.map(val,function(value){return value==null?"":value+""});hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||(!("set"in hooks)||hooks.set(this,val,"value")===undefined))this.value=val})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||
val.specified?elem.value:elem.text}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&((jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup")))){value=jQuery(option).val();
if(one)return value;values.push(value)}}return values},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0});if(!values.length)elem.selectedIndex=-1;return values}}},attr:function(elem,name,value){var hooks,notxml,ret,nType=elem.nodeType;if(!elem||(nType===3||(nType===8||nType===2)))return;if(typeof elem.getAttribute===core_strundefined)return jQuery.prop(elem,name,value);notxml=nType!==
1||!jQuery.isXMLDoc(elem);if(notxml){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)}if(value!==undefined)if(value===null)jQuery.removeAttr(elem,name);else if(hooks&&(notxml&&("set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)))return ret;else{elem.setAttribute(name,value+"");return value}else if(hooks&&(notxml&&("get"in hooks&&(ret=hooks.get(elem,name))!==null)))return ret;else{if(typeof elem.getAttribute!==core_strundefined)ret=elem.getAttribute(name);
return ret==null?undefined:ret}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&elem.nodeType===1)while(name=attrNames[i++]){propName=jQuery.propFix[name]||name;if(rboolean.test(name))if(!getSetAttribute&&ruseDefault.test(name))elem[jQuery.camelCase("default-"+name)]=elem[propName]=false;else elem[propName]=false;else jQuery.attr(elem,name,"");elem.removeAttribute(getSetAttribute?name:propName)}},attrHooks:{type:{set:function(elem,
value){if(!jQuery.support.radioValue&&(value==="radio"&&jQuery.nodeName(elem,"input"))){var val=elem.value;elem.setAttribute("type",value);if(val)elem.value=val;return value}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,
nType=elem.nodeType;if(!elem||(nType===3||(nType===8||nType===2)))return;notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined)if(hooks&&("set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined))return ret;else return elem[name]=value;else if(hooks&&("get"in hooks&&(ret=hooks.get(elem,name))!==null))return ret;else return elem[name]},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");
return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}});boolHook={get:function(elem,name){var prop=jQuery.prop(elem,name),attr=typeof prop==="boolean"&&elem.getAttribute(name),detail=typeof prop==="boolean"?getSetInput&&getSetAttribute?attr!=null:ruseDefault.test(name)?elem[jQuery.camelCase("default-"+name)]:!!attr:elem.getAttributeNode(name);return detail&&detail.value!==false?name.toLowerCase():
undefined},set:function(elem,value,name){if(value===false)jQuery.removeAttr(elem,name);else if(getSetInput&&getSetAttribute||!ruseDefault.test(name))elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name);else elem[jQuery.camelCase("default-"+name)]=elem[name]=true;return name}};if(!getSetInput||!getSetAttribute)jQuery.attrHooks.value={get:function(elem,name){var ret=elem.getAttributeNode(name);return jQuery.nodeName(elem,"input")?elem.defaultValue:ret&&ret.specified?ret.value:undefined},
set:function(elem,value,name){if(jQuery.nodeName(elem,"input"))elem.defaultValue=value;else return nodeHook&&nodeHook.set(elem,value,name)}};if(!getSetAttribute){nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);return ret&&(name==="id"||(name==="name"||name==="coords")?ret.value!=="":ret.specified)?ret.value:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret)elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name));
ret.value=value+="";return name==="value"||value===elem.getAttribute(name)?value:undefined}};jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){nodeHook.set(elem,value===""?false:value,name)}};jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value}}})})}if(!jQuery.support.hrefNormalized){jQuery.each(["href","src","width","height"],
function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret==null?undefined:ret}})});jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}})}if(!jQuery.support.style)jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||undefined},set:function(elem,value){return elem.style.cssText=value+""}};if(!jQuery.support.optSelected)jQuery.propHooks.selected=
jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode)parent.parentNode.selectedIndex}return null}});if(!jQuery.support.enctype)jQuery.propFix.enctype="encoding";if(!jQuery.support.checkOn)jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],
{set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}})});var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return true}function returnFalse(){return false}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,
handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(!elemData)return;if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid)handler.guid=jQuery.guid++;if(!(events=elemData.events))events=elemData.events={};if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!==core_strundefined&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined};
eventHandle.elem=elem}types=(types||"").match(core_rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),
namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false)if(elem.addEventListener)elem.addEventListener(type,eventHandle,false);else if(elem.attachEvent)elem.attachEvent("on"+type,eventHandle)}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid)handleObj.handler.guid=handler.guid}if(selector)handlers.splice(handlers.delegateCount++,
0,handleObj);else handlers.push(handleObj);jQuery.event.global[type]=true}elem=null},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(!elemData||!(events=elemData.events))return;types=(types||"").match(core_rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events)jQuery.event.remove(elem,
type+types[t],handler,selector,true);continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&((!handler||handler.guid===handleObj.guid)&&((!tmp||tmp.test(handleObj.namespace))&&(!selector||(selector===handleObj.selector||selector==="**"&&
handleObj.selector))))){handlers.splice(j,1);if(handleObj.selector)handlers.delegateCount--;if(special.remove)special.remove.call(elem,handleObj)}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false)jQuery.removeEvent(elem,type,elemData.handle);delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;jQuery._removeData(elem,"events")}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,
special,tmp,i,eventPath=[elem||document],type=core_hasOwn.call(event,"type")?event.type:event,namespaces=core_hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8)return;if(rfocusMorph.test(type+jQuery.event.triggered))return;if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event===
"object"&&event);event.isTrigger=true;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target)event.target=elem;data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&(special.trigger&&special.trigger.apply(elem,data)===false))return;if(!onlyHandlers&&(!special.noBubble&&!jQuery.isWindow(elem))){bubbleType=special.delegateType||
type;if(!rfocusMorph.test(bubbleType+type))cur=cur.parentNode;for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document))eventPath.push(tmp.defaultView||(tmp.parentWindow||window))}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");if(handle)handle.apply(cur,data);handle=ontype&&cur[ontype];if(handle&&(jQuery.acceptData(cur)&&
(handle.apply&&handle.apply(cur,data)===false)))event.preventDefault()}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented())if((!special._default||special._default.apply(elem.ownerDocument,data)===false)&&(!(type==="click"&&jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)))if(ontype&&(elem[type]&&!jQuery.isWindow(elem))){tmp=elem[ontype];if(tmp)elem[ontype]=null;jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=undefined;if(tmp)elem[ontype]=tmp}return event.result},
dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue=[],args=core_slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false)return;handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=
matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped())if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined)if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}if(special.postDispatch)special.postDispatch.call(this,event);return event.result},
handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&(cur.nodeType&&(!event.button||event.type!=="click")))for(;cur!=this;cur=cur.parentNode||this)if(cur.nodeType===1&&(cur.disabled!==true||event.type!=="click")){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined)matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,
this,null,[cur]).length;if(matches[sel])matches.push(handleObj)}if(matches.length)handlerQueue.push({elem:cur,handlers:matches})}if(delegateCount<handlers.length)handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)});return handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook)this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:
{};copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target)event.target=originalEvent.srcElement||document;if(event.target.nodeType===3)event.target=event.target.parentNode;event.metaKey=!!event.metaKey;return fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null)event.which=original.charCode!=null?original.charCode:original.keyCode;return event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||
document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||(body&&body.scrollLeft||0))-(doc&&doc.clientLeft||(body&&body.clientLeft||0));event.pageY=original.clientY+(doc&&doc.scrollTop||(body&&body.scrollTop||0))-(doc&&doc.clientTop||(body&&body.clientTop||0))}if(!event.relatedTarget&&fromElement)event.relatedTarget=fromElement===event.target?original.toElement:fromElement;if(!event.which&&button!==undefined)event.which=button&1?1:button&2?3:button&
4?2:0;return event}},special:{load:{noBubble:true},click:{trigger:function(){if(jQuery.nodeName(this,"input")&&(this.type==="checkbox"&&this.click)){this.click();return false}}},focus:{trigger:function(){if(this!==document.activeElement&&this.focus)try{this.focus();return false}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===document.activeElement&&this.blur){this.blur();return false}},delegateType:"focusout"},beforeunload:{postDispatch:function(event){if(event.result!==undefined)event.originalEvent.returnValue=
event.result}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true,originalEvent:{}});if(bubble)jQuery.event.trigger(e,null,elem);else jQuery.event.dispatch.call(elem,e);if(e.isDefaultPrevented())event.preventDefault()}};jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener)elem.removeEventListener(type,handle,false)}:function(elem,type,handle){var name="on"+type;if(elem.detachEvent){if(typeof elem[name]===
core_strundefined)elem[name]=null;elem.detachEvent(name,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||(src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse}else this.type=src;if(props)jQuery.extend(this,props);this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};
jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(!e)return;if(e.preventDefault)e.preventDefault();else e.returnValue=false},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(!e)return;if(e.stopPropagation)e.stopPropagation();e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=
returnTrue;this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!jQuery.support.submitBubbles)jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,
"form"))return false;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;if(form&&!jQuery._data(form,"submitBubbles")){jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=true});jQuery._data(form,"submitBubbles",true)}})},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;if(this.parentNode&&!event.isTrigger)jQuery.event.simulate("submit",
this.parentNode,event,true)}},teardown:function(){if(jQuery.nodeName(this,"form"))return false;jQuery.event.remove(this,"._submit")}};if(!jQuery.support.changeBubbles)jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){jQuery.event.add(this,"propertychange._change",function(event){if(event.originalEvent.propertyName==="checked")this._just_changed=true});jQuery.event.add(this,"click._change",function(event){if(this._just_changed&&
!event.isTrigger)this._just_changed=false;jQuery.event.simulate("change",this,event,true)})}return false}jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")){jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&(!event.isSimulated&&!event.isTrigger))jQuery.event.simulate("change",this.parentNode,event,true)});jQuery._data(elem,"changeBubbles",true)}})},handle:function(event){var elem=
event.target;if(this!==elem||(event.isSimulated||(event.isTrigger||elem.type!=="radio"&&elem.type!=="checkbox")))return event.handleObj.handler.apply(this,arguments)},teardown:function(){jQuery.event.remove(this,"._change");return!rformElems.test(this.nodeName)}};if(!jQuery.support.focusinBubbles)jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function(){if(attaches++===
0)document.addEventListener(orig,handler,true)},teardown:function(){if(--attaches===0)document.removeEventListener(orig,handler,true)}}});jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types)this.on(type,selector,data,types[type],one);return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null)if(typeof selector==="string"){fn=data;
data=undefined}else{fn=data;data=selector;selector=undefined}if(fn===false)fn=returnFalse;else if(!fn)return this;if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&(types.preventDefault&&
types.handleObj)){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types)this.off(type,selector,types[type]);return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false)fn=returnFalse;return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,
data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,
elem,true)}});(function(window,undefined){var i,cachedruns,Expr,getText,isXML,compile,hasDuplicate,outermostContext,setDocument,document,docElem,documentIsXML,rbuggyQSA,rbuggyMatches,matches,contains,sortOrder,expando="sizzle"+-new Date,preferredDoc=window.document,support={},dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),strundefined=typeof undefined,MAX_NEGATIVE=1<<31,arr=[],pop=arr.pop,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){var i=
0,len=this.length;for(;i<len;i++)if(this[i]===elem)return i;return-1},whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?\x3d)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,
8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f\x3e+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+characterEncoding+")"),"CLASS":new RegExp("^\\.("+characterEncoding+")"),"NAME":new RegExp("^\\[name\x3d['\"]?("+characterEncoding+")['\"]?\\]"),"TAG":new RegExp("^("+
characterEncoding.replace("w","w*")+")"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"needsContext":new RegExp("^"+whitespace+"*[\x3e+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?\x3d[^-]|$)","i")},rsibling=/[\x20\t\r\n\f]*[+~]/,rnative=
/^[^{]+\{\s*\[native code/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,runescape=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,funescape=function(_,escaped){var high="0x"+escaped-65536;return high!==high?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)};try{slice.call(preferredDoc.documentElement.childNodes,0)[0].nodeType}catch(e){slice=
function(i){var elem,results=[];while(elem=this[i++])results.push(elem);return results}}function isNative(fn){return rnative.test(fn+"")}function createCache(){var cache,keys=[];return cache=function(key,value){if(keys.push(key+=" ")>Expr.cacheLength)delete cache[keys.shift()];return cache[key]=value}}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=document.createElement("div");try{return fn(div)}catch(e){return false}finally{div=null}}function Sizzle(selector,context,
results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document)setDocument(context);context=context||document;results=results||[];if(!selector||typeof selector!=="string")return results;if((nodeType=context.nodeType)!==1&&nodeType!==9)return[];if(!documentIsXML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1])if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);
return results}}else return results}else{if(context.ownerDocument&&((elem=context.ownerDocument.getElementById(m))&&(contains(context,elem)&&elem.id===m))){results.push(elem);return results}}else if(match[2]){push.apply(results,slice.call(context.getElementsByTagName(selector),0));return results}else if((m=match[3])&&(support.getByClassName&&context.getElementsByClassName)){push.apply(results,slice.call(context.getElementsByClassName(m),0));return results}if(support.qsa&&!rbuggyQSA.test(selector)){old=
true;nid=expando;newContext=context;newSelector=nodeType===9&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if(old=context.getAttribute("id"))nid=old.replace(rescape,"\\$\x26");else context.setAttribute("id",nid);nid="[id\x3d'"+nid+"'] ";i=groups.length;while(i--)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&context.parentNode||context;newSelector=groups.join(",")}if(newSelector)try{push.apply(results,slice.call(newContext.querySelectorAll(newSelector),
0));return results}catch(qsaError){}finally{if(!old)context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||(doc.nodeType!==9||!doc.documentElement))return document;document=doc;
docElem=doc.documentElement;documentIsXML=isXML(doc);support.tagNameNoComments=assert(function(div){div.appendChild(doc.createComment(""));return!div.getElementsByTagName("*").length});support.attributes=assert(function(div){div.innerHTML="\x3cselect\x3e\x3c/select\x3e";var type=typeof div.lastChild.getAttribute("multiple");return type!=="boolean"&&type!=="string"});support.getByClassName=assert(function(div){div.innerHTML="\x3cdiv class\x3d'hidden e'\x3e\x3c/div\x3e\x3cdiv class\x3d'hidden'\x3e\x3c/div\x3e";
if(!div.getElementsByClassName||!div.getElementsByClassName("e").length)return false;div.lastChild.className="e";return div.getElementsByClassName("e").length===2});support.getByName=assert(function(div){div.id=expando+0;div.innerHTML="\x3ca name\x3d'"+expando+"'\x3e\x3c/a\x3e\x3cdiv name\x3d'"+expando+"'\x3e\x3c/div\x3e";docElem.insertBefore(div,docElem.firstChild);var pass=doc.getElementsByName&&doc.getElementsByName(expando).length===2+doc.getElementsByName(expando+0).length;support.getIdNotName=
!doc.getElementById(expando);docElem.removeChild(div);return pass});Expr.attrHandle=assert(function(div){div.innerHTML="\x3ca href\x3d'#'\x3e\x3c/a\x3e";return div.firstChild&&(typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#")})?{}:{"href":function(elem){return elem.getAttribute("href",2)},"type":function(elem){return elem.getAttribute("type")}};if(support.getIdNotName){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!==strundefined&&
!documentIsXML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{Expr.find["ID"]=function(id,context){if(typeof context.getElementById!==strundefined&&!documentIsXML){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}};Expr.filter["ID"]=function(id){var attrId=
id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find["TAG"]=support.tagNameNoComments?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while(elem=results[i++])if(elem.nodeType===1)tmp.push(elem);return tmp}return results};
Expr.find["NAME"]=support.getByName&&function(tag,context){if(typeof context.getElementsByName!==strundefined)return context.getElementsByName(name)};Expr.find["CLASS"]=support.getByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&!documentIsXML)return context.getElementsByClassName(className)};rbuggyMatches=[];rbuggyQSA=[":focus"];if(support.qsa=isNative(doc.querySelectorAll)){assert(function(div){div.innerHTML="\x3cselect\x3e\x3coption selected\x3d''\x3e\x3c/option\x3e\x3c/select\x3e";
if(!div.querySelectorAll("[selected]").length)rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)");if(!div.querySelectorAll(":checked").length)rbuggyQSA.push(":checked")});assert(function(div){div.innerHTML="\x3cinput type\x3d'hidden' i\x3d''/\x3e";if(div.querySelectorAll("[i^\x3d'']").length)rbuggyQSA.push("[*^$]\x3d"+whitespace+"*(?:\"\"|'')");if(!div.querySelectorAll(":enabled").length)rbuggyQSA.push(":enabled",":disabled");div.querySelectorAll("*,:x");
rbuggyQSA.push(",.*:")})}if(support.matchesSelector=isNative(matches=docElem.matchesSelector||(docElem.mozMatchesSelector||(docElem.webkitMatchesSelector||(docElem.oMatchesSelector||docElem.msMatchesSelector)))))assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!\x3d'']:x");rbuggyMatches.push("!\x3d",pseudos)});rbuggyQSA=new RegExp(rbuggyQSA.join("|"));rbuggyMatches=new RegExp(rbuggyMatches.join("|"));contains=isNative(docElem.contains)||docElem.compareDocumentPosition?
function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&(bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return true;return false};sortOrder=docElem.compareDocumentPosition?function(a,b){var compare;if(a===b){hasDuplicate=true;return 0}if(compare=b.compareDocumentPosition&&(a.compareDocumentPosition&&a.compareDocumentPosition(b))){if(compare&
1||a.parentNode&&a.parentNode.nodeType===11){if(a===doc||contains(preferredDoc,a))return-1;if(b===doc||contains(preferredDoc,b))return 1;return 0}return compare&4?-1:1}return a.compareDocumentPosition?-1:1}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b){hasDuplicate=true;return 0}else if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:0;else if(aup===bup)return siblingCheck(a,b);cur=a;while(cur=cur.parentNode)ap.unshift(cur);cur=b;while(cur=cur.parentNode)bp.unshift(cur);
while(ap[i]===bp[i])i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};hasDuplicate=false;[0,0].sort(sortOrder);support.detectDuplicates=hasDuplicate;return document};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document)setDocument(elem);expr=expr.replace(rattributeQuotes,"\x3d'$1']");if(support.matchesSelector&&(!documentIsXML&&((!rbuggyMatches||!rbuggyMatches.test(expr))&&
!rbuggyQSA.test(expr))))try{var ret=matches.call(elem,expr);if(ret||(support.disconnectedMatch||elem.document&&elem.document.nodeType!==11))return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document)setDocument(context);return contains(context,elem)};Sizzle.attr=function(elem,name){var val;if((elem.ownerDocument||elem)!==document)setDocument(elem);if(!documentIsXML)name=name.toLowerCase();if(val=Expr.attrHandle[name])return val(elem);
if(documentIsXML||support.attributes)return elem.getAttribute(name);return((val=elem.getAttributeNode(name))||elem.getAttribute(name))&&elem[name]===true?name:val&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],i=1,j=0;hasDuplicate=!support.detectDuplicates;results.sort(sortOrder);if(hasDuplicate){for(;elem=results[i];i++)if(elem===results[i-1])j=duplicates.push(i);
while(j--)results.splice(duplicates[j],1)}return results};function siblingCheck(a,b){var cur=b&&a,diff=cur&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)while(cur=cur.nextSibling)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||
name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--)if(seed[j=matchIndexes[i]])seed[j]=!(matches[j]=seed[j])})})}getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType)for(;node=elem[i];i++)ret+=getText(node);else if(nodeType===1||(nodeType===9||nodeType===11))if(typeof elem.textContent===
"string")return elem.textContent;else for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem);else if(nodeType===3||nodeType===4)return elem.nodeValue;return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,find:{},relative:{"\x3e":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[4]||
(match[5]||"")).replace(runescape,funescape);if(match[2]==="~\x3d")match[3]=" "+match[3]+" ";return match.slice(0,4)},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3])Sizzle.error(match[0]);match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3])Sizzle.error(match[0]);return match},"PSEUDO":function(match){var excess,unquoted=!match[5]&&match[2];if(matchExpr["CHILD"].test(match[0]))return null;
if(match[4])match[2]=match[4];else if(unquoted&&(rpseudo.test(unquoted)&&((excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)))){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{"TAG":function(nodeName){if(nodeName==="*")return function(){return true};nodeName=nodeName.replace(runescape,funescape).toLowerCase();return function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},
"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(elem.className||(typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||""))})},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null)return operator==="!\x3d";if(!operator)return true;result+="";return operator==="\x3d"?
result===check:operator==="!\x3d"?result!==check:operator==="^\x3d"?check&&result.indexOf(check)===0:operator==="*\x3d"?check&&result.indexOf(check)>-1:operator==="$\x3d"?check&&result.slice(-check.length)===check:operator==="~\x3d"?(" "+result+" ").indexOf(check)>-1:operator==="|\x3d"?result===check||result.slice(0,check.length+1)===check+"-":false}},"CHILD":function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===
1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=elem;while(node=node[dir])if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)return false;start=dir=type==="only"&&(!start&&"nextSibling")}return true}start=[forward?parent.firstChild:parent.lastChild];
if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&(node&&node[dir])||((diff=nodeIndex=0)||start.pop()))if(node.nodeType===1&&(++diff&&node===elem)){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&((cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns))diff=cache[1];else while(node=
++nodeIndex&&(node&&node[dir])||((diff=nodeIndex=0)||start.pop()))if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache)(node[expando]||(node[expando]={}))[type]=[dirruns,diff];if(node===elem)break}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||(Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo));if(fn[expando])return fn(argument);if(fn.length>1){args=
[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,
unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--)if(elem=unmatched[i])seed[i]=!(matches[i]=elem)}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return!results.pop()}}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),"contains":markFunction(function(text){return function(elem){return(elem.textContent||(elem.innerText||getText(elem))).indexOf(text)>-1}}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||
""))Sizzle.error("unsupported lang: "+lang);lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do if(elemLang=documentIsXML?elem.getAttribute("xml:lang")||elem.getAttribute("lang"):elem.lang){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),"target":function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},"root":function(elem){return elem===
docElem},"focus":function(elem){return elem===document.activeElement&&((!document.hasFocus||document.hasFocus())&&!!(elem.type||(elem.href||~elem.tabIndex)))},"enabled":function(elem){return elem.disabled===false},"disabled":function(elem){return elem.disabled===true},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},"selected":function(elem){if(elem.parentNode)elem.parentNode.selectedIndex;return elem.selected===
true},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeName>"@"||(elem.nodeType===3||elem.nodeType===4))return false;return true},"parent":function(elem){return!Expr.pseudos["empty"](elem)},"header":function(elem){return rheader.test(elem.nodeName)},"input":function(elem){return rinputs.test(elem.nodeName)},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},"text":function(elem){var attr;
return elem.nodeName.toLowerCase()==="input"&&(elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===elem.type))},"first":createPositionalPseudo(function(){return[0]}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1]}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),"even":createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),
"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;)matchIndexes.push(i);return matchIndexes}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;)matchIndexes.push(i);return matchIndexes})}};for(i in{radio:true,checkbox:true,file:true,
password:true,image:true})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:true,reset:true})Expr.pseudos[i]=createButtonPseudo(i);function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match)soFar=soFar.slice(match[0].length)||soFar;groups.push(tokens=[])}matched=false;if(match=
rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter)if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){var i=
0,len=tokens.length,selector="";for(;i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir])if(elem.nodeType===1||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml)while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements)if(matcher(elem,
context,xml))return true}else while(elem=elem[dir])if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((cache=outerCache[dir])&&cache[0]===dirkey){if((data=cache[1])===true||data===cachedruns)return data===true}else{cache=outerCache[dir]=[dirkey];cache[1]=matcher(elem,context,xml)||cachedruns;if(cache[1]===true)return true}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--)if(!matchers[i](elem,
context,xml))return false;return true}:matchers[0]}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++)if(elem=unmatched[i])if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped)map.push(i)}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando])postFilter=setMatcher(postFilter);if(postFinder&&!postFinder[expando])postFinder=
setMatcher(postFinder,postSelector);return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher)matcher(matcherIn,matcherOut,context,xml);if(postFilter){temp=condense(matcherOut,
postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--)if(elem=temp[i])matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--)if(elem=matcherOut[i])temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--)if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1)seed[temp]=!(results[temp]=elem)}}else{matcherOut=condense(matcherOut===results?
matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder)postFinder(null,results,matcherOut,xml);else push.apply(results,matcherOut)}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,
elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];for(;i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++)if(Expr.relative[tokens[j].type])break;return setMatcher(i>
1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1)).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=
[],matchedCount=0,i="0",unmatched=seed&&[],outermost=expandContext!=null,contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",expandContext&&context.parentNode||context),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||0.1;if(outermost){outermostContext=context!==document&&context;cachedruns=matcherCachedRuns}for(;(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;while(matcher=elementMatchers[j++])if(matcher(elem,context,xml)){results.push(elem);break}if(outermost){dirruns=
dirrunsUnique;cachedruns=++matcherCachedRuns}}if(bySet){if(elem=!matcher&&elem)matchedCount--;if(seed)unmatched.push(elem)}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++])matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)while(i--)if(!(unmatched[i]||setMatched[i]))setMatched[i]=pop.call(results);setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&(!seed&&(setMatched.length>0&&matchedCount+setMatchers.length>1)))Sizzle.uniqueSort(results)}if(outermost){dirruns=
dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!group)group=tokenize(selector);i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando])setMatchers.push(cached);else elementMatchers.push(cached)}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached};
function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++)Sizzle(selector,contexts[i],results);return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed)if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&((token=tokens[0]).type==="ID"&&(context.nodeType===9&&(!documentIsXML&&Expr.relative[tokens[1].type])))){context=Expr.find["ID"](token.matches[0].replace(runescape,funescape),
context)[0];if(!context)return results;selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type])break;if(find=Expr.find[type])if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,slice.call(seed,0));return results}break}}}compile(selector,
match)(seed,context,documentIsXML,results,rsibling.test(selector));return results}Expr.pseudos["nth"]=Expr.pseudos["eq"];function setFilters(){}Expr.filters=setFilters.prototype=Expr.pseudos;Expr.setFilters=new setFilters;setDocument();Sizzle.attr=jQuery.attr;jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains})(window);var runtil=/Until$/,rparentsprev=
/^(?:parents|prev(?:Until|All))/,isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var i,ret,self,len=this.length;if(typeof selector!=="string"){self=this;return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return true}))}ret=[];for(i=0;i<len;i++)jQuery.find(selector,this[i],ret);ret=this.pushStack(len>1?jQuery.unique(ret):
ret);ret.selector=(this.selector?this.selector+" ":"")+selector;return ret},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++)if(jQuery.contains(this,targets[i]))return true})},not:function(selector){return this.pushStack(winnow(this,selector,false))},filter:function(selector){return this.pushStack(winnow(this,selector,true))},is:function(selector){return!!selector&&(typeof selector==="string"?rneedsContext.test(selector)?jQuery(selector,
this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){cur=this[i];while(cur&&(cur.ownerDocument&&(cur!==context&&cur.nodeType!==11))){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}cur=cur.parentNode}}return this.pushStack(ret.length>
1?jQuery.unique(ret):ret)},index:function(elem){if(!elem)return this[0]&&this[0].parentNode?this.first().prevAll().length:-1;if(typeof elem==="string")return jQuery.inArray(this[0],jQuery(elem));return jQuery.inArray(elem.jquery?elem[0]:elem,this)},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(jQuery.unique(all))},addBack:function(selector){return this.add(selector==
null?this.prevObject:this.prevObject.filter(selector))}});jQuery.fn.andSelf=jQuery.fn.addBack;function sibling(cur,dir){do cur=cur[dir];while(cur&&cur.nodeType!==1);return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,
"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,
"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name))selector=until;if(selector&&typeof selector==="string")ret=jQuery.filter(selector,ret);ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;if(this.length>1&&rparentsprev.test(name))ret=ret.reverse();return this.pushStack(ret)}});jQuery.extend({filter:function(expr,elems,not){if(not)expr=
":not("+expr+")";return elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&(cur.nodeType!==9&&(until===undefined||(cur.nodeType!==1||!jQuery(cur).is(until))))){if(cur.nodeType===1)matched.push(cur);cur=cur[dir]}return matched},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling)if(n.nodeType===1&&n!==elem)r.push(n);return r}});function winnow(elements,qualifier,keep){qualifier=
qualifier||0;if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep});else if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier===keep});else if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);else qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,
function(elem){return jQuery.inArray(elem,qualifier)>=0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)while(list.length)safeFrag.createElement(list.pop());return safeFrag}var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=
new RegExp("\x3c(?:"+nodeNames+")[\\s/\x3e]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"\x3cselect multiple\x3d'multiple'\x3e",
"\x3c/select\x3e"],legend:[1,"\x3cfieldset\x3e","\x3c/fieldset\x3e"],area:[1,"\x3cmap\x3e","\x3c/map\x3e"],param:[1,"\x3cobject\x3e","\x3c/object\x3e"],thead:[1,"\x3ctable\x3e","\x3c/table\x3e"],tr:[2,"\x3ctable\x3e\x3ctbody\x3e","\x3c/tbody\x3e\x3c/table\x3e"],col:[2,"\x3ctable\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3ccolgroup\x3e","\x3c/colgroup\x3e\x3c/table\x3e"],td:[3,"\x3ctable\x3e\x3ctbody\x3e\x3ctr\x3e","\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e"],_default:jQuery.support.htmlSerialize?[0,"",""]:[1,
"X\x3cdiv\x3e","\x3c/div\x3e"]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},
wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode)wrap.insertBefore(this[0]);wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapInner(html.call(this,
i))});return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length)contents.wrapAll(html);else self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body"))jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===
1||(this.nodeType===11||this.nodeType===9))this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1||(this.nodeType===11||this.nodeType===9))this.insertBefore(elem,this.firstChild)})},before:function(){return this.domManip(arguments,false,function(elem){if(this.parentNode)this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,false,function(elem){if(this.parentNode)this.parentNode.insertBefore(elem,this.nextSibling)})},
remove:function(selector,keepData){var elem,i=0;for(;(elem=this[i])!=null;i++)if(!selector||jQuery.filter(selector,[elem]).length>0){if(!keepData&&elem.nodeType===1)jQuery.cleanData(getAll(elem));if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem))setGlobalEval(getAll(elem,"script"));elem.parentNode.removeChild(elem)}}return this},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1)jQuery.cleanData(getAll(elem,false));while(elem.firstChild)elem.removeChild(elem.firstChild);
if(elem.options&&jQuery.nodeName(elem,"select"))elem.options.length=0}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,
""):undefined;if(typeof value==="string"&&(!rnoInnerhtml.test(value)&&((jQuery.support.htmlSerialize||!rnoshimcache.test(value))&&((jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()])))){value=value.replace(rxhtmlTag,"\x3c$1\x3e\x3c/$2\x3e");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem)this.empty().append(value)},null,value,arguments.length)},
replaceWith:function(value){var isFunc=jQuery.isFunction(value);if(!isFunc&&typeof value!=="string")value=jQuery(value).not(this).detach();return this.domManip([value],true,function(elem){var next=this.nextSibling,parent=this.parentNode;if(parent){jQuery(this).remove();parent.insertBefore(elem,next)}})},detach:function(selector){return this.remove(selector,true)},domManip:function(args,table,callback){args=core_concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,
set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||!(l<=1||(typeof value!=="string"||(jQuery.support.checkClone||!rchecked.test(value)))))return this.each(function(index){var self=set.eq(index);if(isFunction)args[0]=value.call(this,index,table?self.html():undefined);self.domManip(args,table,callback)});if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,false,this);first=fragment.firstChild;if(fragment.childNodes.length===1)fragment=first;if(first){table=
table&&jQuery.nodeName(first,"tr");scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts)jQuery.merge(scripts,getAll(node,"script"))}callback.call(table&&jQuery.nodeName(this[i],"table")?findOrAppend(this[i],"tbody"):this[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||
"")&&(!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)))if(node.src)jQuery.ajax({url:node.src,type:"GET",dataType:"script",async:false,global:false,"throws":true});else jQuery.globalEval((node.text||(node.textContent||(node.innerHTML||""))).replace(rcleanScript,""))}}fragment=first=null}}return this}});function findOrAppend(elem,tag){return elem.getElementsByTagName(tag)[0]||elem.appendChild(elem.ownerDocument.createElement(tag))}function disableScript(elem){var attr=elem.getAttributeNode("type");
elem.type=(attr&&attr.specified)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match)elem.type=match[1];else elem.removeAttribute("type");return elem}function setGlobalEval(elems,refElements){var elem,i=0;for(;(elem=elems[i])!=null;i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src))return;var type,i,l,oldData=jQuery._data(src),
curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i])}if(curData.data)curData.data=jQuery.extend({},curData.data)}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(dest.nodeType!==1)return;nodeName=dest.nodeName.toLowerCase();if(!jQuery.support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events)jQuery.removeEvent(dest,
e,data.handle);dest.removeAttribute(jQuery.expando)}if(nodeName==="script"&&dest.text!==src.text){disableScript(dest).text=src.text;restoreScript(dest)}else if(nodeName==="object"){if(dest.parentNode)dest.outerHTML=src.outerHTML;if(jQuery.support.html5Clone&&(src.innerHTML&&!jQuery.trim(dest.innerHTML)))dest.innerHTML=src.innerHTML}else if(nodeName==="input"&&manipulation_rcheckableType.test(src.type)){dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value)dest.value=src.value}else if(nodeName===
"option")dest.defaultSelected=dest.selected=src.defaultSelected;else if(nodeName==="input"||nodeName==="textarea")dest.defaultValue=src.defaultValue}jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);core_push.apply(ret,
elems.get())}return this.pushStack(ret)}});function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==core_strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==core_strundefined?context.querySelectorAll(tag||"*"):undefined;if(!found)for(found=[],elems=context.childNodes||context;(elem=elems[i])!=null;i++)if(!tag||jQuery.nodeName(elem,tag))found.push(elem);else jQuery.merge(found,getAll(elem,tag));return tag===undefined||tag&&jQuery.nodeName(context,
tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){if(manipulation_rcheckableType.test(elem.type))elem.defaultChecked=elem.checked}jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(jQuery.support.html5Clone||(jQuery.isXMLDoc(elem)||!rnoshimcache.test("\x3c"+elem.nodeName+"\x3e")))clone=elem.cloneNode(true);else{fragmentDiv.innerHTML=elem.outerHTML;fragmentDiv.removeChild(clone=
fragmentDiv.firstChild)}if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&((elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem))){destElements=getAll(clone);srcElements=getAll(elem);for(i=0;(node=srcElements[i])!=null;++i)if(destElements[i])fixCloneNodeIssues(node,destElements[i])}if(dataAndEvents)if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0;(node=srcElements[i])!=null;i++)cloneCopyEvent(node,destElements[i])}else cloneCopyEvent(elem,
clone);destElements=getAll(clone,"script");if(destElements.length>0)setGlobalEval(destElements,!inPage&&getAll(elem,"script"));destElements=srcElements=node=null;return clone},buildFragment:function(elems,context,scripts,selection){var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;for(;i<l;i++){elem=elems[i];if(elem||elem===0)if(jQuery.type(elem)==="object")jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(!rhtml.test(elem))nodes.push(context.createTextNode(elem));
else{tmp=tmp||safe.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"\x3c$1\x3e\x3c/$2\x3e")+wrap[2];j=wrap[0];while(j--)tmp=tmp.lastChild;if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem))nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0]));if(!jQuery.support.tbody){elem=tag==="table"&&!rtbody.test(elem)?tmp.firstChild:wrap[1]==="\x3ctable\x3e"&&
!rtbody.test(elem)?tmp:0;j=elem&&elem.childNodes.length;while(j--)if(jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length)elem.removeChild(tbody)}jQuery.merge(nodes,tmp.childNodes);tmp.textContent="";while(tmp.firstChild)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}}if(tmp)safe.removeChild(tmp);if(!jQuery.support.appendChecked)jQuery.grep(getAll(nodes,"input"),fixDefaultChecked);i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)!==-1)continue;contains=
jQuery.contains(elem.ownerDocument,elem);tmp=getAll(safe.appendChild(elem),"script");if(contains)setGlobalEval(tmp);if(scripts){j=0;while(elem=tmp[j++])if(rscriptType.test(elem.type||""))scripts.push(elem)}}tmp=null;return safe},cleanData:function(elems,acceptData){var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;for(;(elem=elems[i])!=null;i++)if(acceptData||jQuery.acceptData(elem)){id=elem[internalKey];
data=id&&cache[id];if(data){if(data.events)for(type in data.events)if(special[type])jQuery.event.remove(elem,type);else jQuery.removeEvent(elem,type,data.handle);if(cache[id]){delete cache[id];if(deleteExpando)delete elem[internalKey];else if(typeof elem.removeAttribute!==core_strundefined)elem.removeAttribute(internalKey);else elem[internalKey]=null;core_deletedIds.push(id)}}}}});var iframe,getStyles,curCSS,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rposition=/^(top|right|bottom|left)$/,
rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([+-])\x3d("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style)return name;
var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style)return name}return origName}function isHidden(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style)continue;values[index]=jQuery._data(elem,
"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none")elem.style.display="";if(elem.style.display===""&&isHidden(elem))values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName))}else if(!values[index]){hidden=isHidden(elem);if(display&&display!=="none"||!hidden)jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style)continue;if(!show||(elem.style.display===
"none"||elem.style.display===""))elem.style.display=show?values[index]||"":"none"}return elements}jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){var len,styles,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],false,styles);return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,
true)},hide:function(){return showHide(this)},toggle:function(state){var bool=typeof state==="boolean";return this.each(function(){if(bool?state:isHidden(this))jQuery(this).show();else jQuery(this).hide()})}});jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{"columnCount":true,"fillOpacity":true,"fontWeight":true,"lineHeight":true,"opacity":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":jQuery.support.cssFloat?
"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||(elem.nodeType===3||(elem.nodeType===8||!elem.style)))return;var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==
null||type==="number"&&isNaN(value))return;if(type==="number"&&!jQuery.cssNumber[origName])value+="px";if(!jQuery.support.clearCloneStyle&&(value===""&&name.indexOf("background")===0))style[name]="inherit";if(!hooks||(!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined))try{style[name]=value}catch(e){}}else{if(hooks&&("get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined))return ret;return style[name]}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);
name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks)val=hooks.get(elem,true,extra);if(val===undefined)val=curCSS(elem,name,styles);if(val==="normal"&&name in cssNormalTransform)val=cssNormalTransform[name];if(extra===""||extra){num=parseFloat(val);return extra===true||jQuery.isNumeric(num)?num||0:val}return val},swap:function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=
elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret}});if(window.getComputedStyle){getStyles=function(elem){return window.getComputedStyle(elem,null)};curCSS=function(elem,name,_computed){var width,minWidth,maxWidth,computed=_computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:undefined,style=elem.style;if(computed){if(ret===""&&!jQuery.contains(elem.ownerDocument,elem))ret=jQuery.style(elem,
name);if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret}}else if(document.documentElement.currentStyle){getStyles=function(elem){return elem.currentStyle};curCSS=function(elem,name,_computed){var left,rs,rsLeft,computed=_computed||getStyles(elem),ret=computed?computed[name]:undefined,style=elem.style;
if(ret==null&&(style&&style[name]))ret=style[name];if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rs=elem.runtimeStyle;rsLeft=rs&&rs.left;if(rsLeft)rs.left=elem.currentStyle.left;style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft)rs.left=rsLeft}return ret===""?"auto":ret}}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,
name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin")val+=jQuery.css(elem,extra+cssExpand[i],true,styles);if(isBorderBox){if(extra==="content")val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="margin")val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding")val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",
true,styles)}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null)val=elem.style[name];if(rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]);val=parseFloat(val)||
0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function css_defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("\x3ciframe frameborder\x3d'0' width\x3d'0' height\x3d'0'/\x3e").css("cssText","display:block !important")).appendTo(doc.documentElement);doc=(iframe[0].contentWindow||iframe[0].contentDocument).document;
doc.write("\x3c!doctype html\x3e\x3chtml\x3e\x3cbody\x3e");doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");elem.remove();return display}jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return elem.offsetWidth===0&&rdisplayswap.test(jQuery.css(elem,
"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0)}}});if(!jQuery.support.opacity)jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:
elem.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity\x3d"+value*100+")":"",filter=currentStyle&&currentStyle.filter||(style.filter||"");style.zoom=1;if((value>=1||value==="")&&(jQuery.trim(filter.replace(ralpha,""))===""&&style.removeAttribute)){style.removeAttribute("filter");if(value===""||currentStyle&&!currentStyle.filter)return}style.filter=ralpha.test(filter)?
filter.replace(ralpha,opacity):filter+" "+opacity}};jQuery(function(){if(!jQuery.support.reliableMarginRight)jQuery.cssHooks.marginRight={get:function(elem,computed){if(computed)return jQuery.swap(elem,{"display":"inline-block"},curCSS,[elem,"marginRight"])}};if(!jQuery.support.pixelPosition&&jQuery.fn.position)jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+
"px":computed}}}})});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!jQuery.support.reliableHiddenOffsets&&(elem.style&&elem.style.display||jQuery.css(elem,"display"))==="none"};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}}jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value===
"string"?value.split(" "):[value];for(;i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||(parts[i-2]||parts[0]);return expanded}};if(!rmargin.test(prefix))jQuery.cssHooks[prefix+suffix].set=setPositiveNumber});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=
jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&(!jQuery(this).is(":disabled")&&(rsubmittable.test(this.nodeName)&&(!rsubmitterTypes.test(type)&&(this.checked||!manipulation_rcheckableType.test(type)))))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,
"\r\n")}}).get()}});jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"\x3d"+encodeURIComponent(value)};if(traditional===undefined)traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("\x26").replace(r20,
"+")};function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix))add(prefix,v);else buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)});else if(!traditional&&jQuery.type(obj)==="object")for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+
"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.hover=function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)};var ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;
dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(func))while(dataType=dataTypes[i++])if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;
inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&(!seekingTransport&&!inspected[dataTypeOrTransport])){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport)return!(selected=dataTypeOrTransport)});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,
src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)if(src[key]!==undefined)(flatOptions[key]?target:deep||(deep={}))[key]=src[key];if(deep)jQuery.extend(true,target,deep);return target}jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off,url.length);url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=
undefined}else if(params&&typeof params==="object")type="POST";if(self.length>0)jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("\x3cdiv\x3e").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])});return this};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],
function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}});jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,
contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,
jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?
jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString))responseHeaders[match[1].toLowerCase()]=match[2]}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return state===
2?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(!state)s.mimeType=type;return this},statusCode:function(map){var code;if(map)if(state<2)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||
strAbort;if(transport)transport.abort(finalText);done(0,finalText);return this}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||(s.url||ajaxLocation))+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.type=options.method||(options.type||(s.method||s.type));s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(core_rnotwhite)||[""];if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&
(parts[1]!==ajaxLocParts[1]||(parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443)))))}if(s.data&&(s.processData&&typeof s.data!=="string"))s.data=jQuery.param(s.data,s.traditional);inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2)return jqXHR;fireGlobals=s.global;if(fireGlobals&&jQuery.active++===0)jQuery.event.trigger("ajaxStart");s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=
s.url;if(!s.hasContent){if(s.data){cacheURL=s.url+=(ajax_rquery.test(cacheURL)?"\x26":"?")+s.data;delete s.data}if(s.cache===false)s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_\x3d"+ajax_nonce++):cacheURL+(ajax_rquery.test(cacheURL)?"\x26":"?")+"_\x3d"+ajax_nonce++}if(s.ifModified){if(jQuery.lastModified[cacheURL])jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);if(jQuery.etag[cacheURL])jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}if(s.data&&(s.hasContent&&
s.contentType!==false)||options.contentType)jqXHR.setRequestHeader("Content-Type",s.contentType);jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q\x3d0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);transport=
inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport)done(-1,"No Transport");else{jqXHR.readyState=1;if(fireGlobals)globalEventContext.trigger("ajaxSend",[jqXHR,s]);if(s.async&&s.timeout>0)timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout);try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2)done(-1,e);else throw e;}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;
if(state===2)return;state=2;if(timeoutTimer)clearTimeout(timeoutTimer);transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;if(responses)response=ajaxHandleResponses(s,jqXHR,responses);if(status>=200&&status<300||status===304){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified)jQuery.lastModified[cacheURL]=modified;modified=jqXHR.getResponseHeader("etag");if(modified)jQuery.etag[cacheURL]=modified}if(status===204){isSuccess=true;statusText=
"nocontent"}else if(status===304){isSuccess=true;statusText="notmodified"}else{isSuccess=ajaxConvert(s,response);statusText=isSuccess.state;success=isSuccess.data;error=isSuccess.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0)status=0}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess)deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);else deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);
jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals)globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active)jQuery.event.trigger("ajaxStop")}}return jqXHR},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,
data,callback,"json")}});function ajaxHandleResponses(s,jqXHR,responses){var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields)if(type in responses)jqXHR[responseFields[type]]=responses[type];while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined)ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in
responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType)firstDataType=type}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0])dataTypes.unshift(finalDataType);return responses[finalDataType]}}function ajaxConvert(s,response){var conv2,current,conv,tmp,converters={},i=0,dataTypes=s.dataTypes.slice(),prev=dataTypes[0];if(s.dataFilter)response=s.dataFilter(response,
s.dataType);if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(;current=dataTypes[++i];)if(current!=="*"){if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv)for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true)conv=converters[conv2];else if(converters[conv2]!==true){current=tmp[0];dataTypes.splice(i--,0,current)}break}}}if(conv!==
true)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}prev=current}return{state:"success",data:response}}jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",
function(s){if(s.cache===undefined)s.cache=false;if(s.crossDomain){s.type="GET";s.global=false}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||(jQuery("head")[0]||document.documentElement);return{send:function(_,callback){script=document.createElement("script");script.async=true;if(s.scriptCharset)script.charset=s.scriptCharset;script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||(!script.readyState||/loaded|complete/.test(script.readyState))){script.onload=
script.onreadystatechange=null;if(script.parentNode)script.parentNode.removeChild(script);script=null;if(!isAbort)callback(200,"success")}};head.insertBefore(script,head.firstChild)},abort:function(){if(script)script.onload(undefined,true)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+ajax_nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,
originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&(rjsonp.test(s.data)&&"data")));if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp)s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName);else if(s.jsonp!==false)s.url+=(ajax_rquery.test(s.url)?
"\x26":"?")+s.jsonp+"\x3d"+callbackName;s.converters["script json"]=function(){if(!responseContainer)jQuery.error(callbackName+" was not called");return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten))overwritten(responseContainer[0]);
responseContainer=overwritten=undefined});return"script"}});var xhrCallbacks,xhrSupported,xhrId=0,xhrOnUnloadAbort=window.ActiveXObject&&function(){var key;for(key in xhrCallbacks)xhrCallbacks[key](undefined,true)};function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:
createStandardXHR;xhrSupported=jQuery.ajaxSettings.xhr();jQuery.support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;xhrSupported=jQuery.support.ajax=!!xhrSupported;if(xhrSupported)jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username)xhr.open(s.type,s.url,s.async,s.username,s.password);else xhr.open(s.type,s.url,s.async);if(s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];
if(s.mimeType&&xhr.overrideMimeType)xhr.overrideMimeType(s.mimeType);if(!s.crossDomain&&!headers["X-Requested-With"])headers["X-Requested-With"]="XMLHttpRequest";try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(err){}xhr.send(s.hasContent&&s.data||null);callback=function(_,isAbort){var status,responseHeaders,statusText,responses;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=jQuery.noop;if(xhrOnUnloadAbort)delete xhrCallbacks[handle]}if(isAbort){if(xhr.readyState!==
4)xhr.abort()}else{responses={};status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();if(typeof xhr.responseText==="string")responses.text=xhr.responseText;try{statusText=xhr.statusText}catch(e){statusText=""}if(!status&&(s.isLocal&&!s.crossDomain))status=responses.text?200:404;else if(status===1223)status=204}}}catch(firefoxAccessException){if(!isAbort)complete(-1,firefoxAccessException)}if(responses)complete(status,statusText,responses,responseHeaders)};if(!s.async)callback();else if(xhr.readyState===
4)setTimeout(callback);else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};jQuery(window).unload(xhrOnUnloadAbort)}xhrCallbacks[handle]=callback}xhr.onreadystatechange=callback}},abort:function(){if(callback)callback(undefined,true)}}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])\x3d|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var end,unit,tween=this.createTween(prop,
value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1,maxIterations=20;if(parts){end=+parts[2];unit=parts[3]||(jQuery.cssNumber[prop]?"":"px");if(unit!=="px"&&start){start=jQuery.css(tween.elem,prop,true)||(end||1);do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&(scale!==1&&--maxIterations))}tween.unit=unit;tween.start=start;tween.end=parts[1]?start+(parts[1]+1)*end:end}return tween}]};function createFxNow(){setTimeout(function(){fxNow=
undefined});return fxNow=jQuery.now()}function createTweens(animation,props){jQuery.each(props,function(prop,value){var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++)if(collection[index].call(animation,prop,value))return})}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return false;var currentTime=
fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++)animation.tweens[index].run(percent);deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length)return remaining;else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},
options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;stopped=true;for(;index<length;index++)animation.tweens[index].run(1);if(gotoEnd)deferred.resolveWith(elem,
[animation,gotoEnd]);else deferred.rejectWith(elem,[animation,gotoEnd]);return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result)return result}createTweens(animation,props);if(jQuery.isFunction(animation.opts.start))animation.opts.start.call(elem,animation);jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,
animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var value,name,index,easing,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value)if(!(index in
props)){props[index]=value[index];specialEasing[index]=easing}}else specialEasing[name]=easing}}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else props=props.split(" ");var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){if(prepend)animationPrefilters.unshift(callback);else animationPrefilters.push(callback)}});
function defaultPrefilter(elem,props,opts){var prop,index,length,value,dataShow,toggle,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued)oldfire()}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length)hooks.empty.fire()})})}if(elem.nodeType===
1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];if(jQuery.css(elem,"display")==="inline"&&jQuery.css(elem,"float")==="none")if(!jQuery.support.inlineBlockNeedsLayout||css_defaultDisplay(elem.nodeName)==="inline")style.display="inline-block";else style.zoom=1}if(opts.overflow){style.overflow="hidden";if(!jQuery.support.shrinkWrapBlocks)anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}for(index in props){value=
props[index];if(rfxtypes.exec(value)){delete props[index];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show"))continue;handled.push(index)}}length=handled.length;if(length){dataShow=jQuery._data(elem,"fxshow")||jQuery._data(elem,"fxshow",{});if("hidden"in dataShow)hidden=dataShow.hidden;if(toggle)dataShow.hidden=!hidden;if(hidden)jQuery(elem).show();else anim.done(function(){jQuery(elem).hide()});anim.done(function(){var prop;jQuery._removeData(elem,"fxshow");for(prop in orig)jQuery.style(elem,
prop,orig[prop])});for(index=0;index<length;index++){prop=handled[index];tween=anim.createTween(prop,hidden?dataShow[prop]:0);orig[prop]=dataShow[prop]||jQuery.style(elem,prop);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,
prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration)this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);
else this.pos=eased=percent;this.now=(this.end-this.start)*eased+this.start;if(this.options.step)this.options.step.call(this.elem,this.now,this);if(hooks&&hooks.set)hooks.set(this);else Tween.propHooks._default.set(this);return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null))return tween.elem[tween.prop];result=jQuery.css(tween.elem,tween.prop,"");
return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop])jQuery.fx.step[tween.prop](tween);else if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop]))jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);else tween.elem[tween.prop]=tween.now}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode)tween.elem[tween.prop]=tween.now}};jQuery.each(["toggle",
"show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,
easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);doAnimation.finish=function(){anim.stop(true)};if(empty||jQuery._data(this,"finish"))anim.stop(true)};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=
type;type=undefined}if(clearQueue&&type!==false)this.queue(type||"fx",[]);return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index){if(data[index]&&data[index].stop)stopQueue(data[index])}else for(index in data)if(data[index]&&(data[index].stop&&rrun.test(index)))stopQueue(data[index]);for(index=timers.length;index--;)if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);
dequeue=false;timers.splice(index,1)}if(dequeue||!gotoEnd)jQuery.dequeue(this,type)})},finish:function(type){if(type!==false)type=type||"fx";return this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&(hooks.cur&&hooks.cur.finish))hooks.cur.finish.call(this);for(index=timers.length;index--;)if(timers[index].elem===this&&timers[index].queue===
type){timers[index].anim.stop(true);timers.splice(index,1)}for(index=0;index<length;index++)if(queue[index]&&queue[index].finish)queue[index].finish.call(this);delete data.finish})}});function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth)attrs.opacity=attrs.width=type;return attrs}jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),
fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||(!fn&&easing||jQuery.isFunction(speed)&&speed),duration:speed,easing:fn&&easing||easing&&(!jQuery.isFunction(easing)&&easing)};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?
opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true)opt.queue="fx";opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old))opt.old.call(this);if(opt.queue)jQuery.dequeue(this,opt.queue)};return opt};jQuery.easing={linear:function(p){return p},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2}};jQuery.timers=[];jQuery.fx=Tween.prototype.init;jQuery.fx.tick=function(){var timer,timers=jQuery.timers,
i=0;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer)timers.splice(i--,1)}if(!timers.length)jQuery.fx.stop();fxNow=undefined};jQuery.fx.timer=function(timer){if(timer()&&jQuery.timers.push(timer))jQuery.fx.start()};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId)timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)};jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fx.step=
{};if(jQuery.expr&&jQuery.expr.filters)jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(!doc)return;docElem=doc.documentElement;if(!jQuery.contains(docElem,elem))return box;if(typeof elem.getBoundingClientRect!==
core_strundefined)box=elem.getBoundingClientRect();win=getWindow(doc);return{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}};jQuery.offset={setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");if(position==="static")elem.style.position="relative";var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=
(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options))options=options.call(elem,i,curOffset);if(options.top!=null)props.top=options.top-curOffset.top+curTop;if(options.left!=null)props.left=options.left-curOffset.left+curLeft;
if("using"in options)options.using.call(elem,props);else curElem.css(props)}};jQuery.fn.extend({position:function(){if(!this[0])return;var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];if(jQuery.css(elem,"position")==="fixed")offset=elem.getBoundingClientRect();else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html"))parentOffset=offsetParent.offset();parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=
jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.documentElement;while(offsetParent&&(!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static"))offsetParent=offsetParent.offsetParent;return offsetParent||document.documentElement})}});
jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined)return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method];if(win)win.scrollTo(!top?val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop());else elem[method]=val},method,val,arguments.length,null)}});function getWindow(elem){return jQuery.isWindow(elem)?
elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false}jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem))return elem.document.documentElement["client"+
name];if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});window.jQuery=window.$=jQuery;if(typeof define==="function"&&(define.amd&&define.amd.jQuery))define("jquery",[],function(){return jQuery})})(window);
(function($,undefined){var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{};$.extend($.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({focus:function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();
if(fn)fn.call(elem)},delay)}):orig.apply(this,arguments)}}($.fn.focus),scrollParent:function(){var scrollParent;if($.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position")))scrollParent=this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,"position"))&&/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0);else scrollParent=this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,
"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||(position==="relative"||position==="fixed")){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0)return value}elem=
elem.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id)this.id="ui-id-"+ ++uuid})},removeUniqueId:function(){return this.each(function(){if(runiqueId.test(this.id))$(this).removeAttr("id")})}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||(!mapName||map.nodeName.toLowerCase()!=="map"))return false;img=$("img[usemap\x3d#"+mapName+
"]")[0];return!!img&&visible(img)}return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden"}).length}$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):
function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}});if(!$("\x3ca\x3e").outerWidth(1).jquery)$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,
innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border)size-=parseFloat($.css(elem,"border"+this+"Width"))||0;if(margin)size-=parseFloat($.css(elem,"margin"+this))||0});return size}$.fn["inner"+name]=function(size){if(size===undefined)return orig["inner"+name].call(this);return this.each(function(){$(this).css(type,reduce(this,size)+"px")})};$.fn["outer"+
name]=function(size,margin){if(typeof size!=="number")return orig["outer"+name].call(this,size);return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px")})}});if(!$.fn.addBack)$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))};if($("\x3ca\x3e").data("a-b","a").removeData("a-b").data("a-b"))$.fn.removeData=function(removeData){return function(key){if(arguments.length)return removeData.call(this,$.camelCase(key));
else return removeData.call(this)}}($.fn.removeData);$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.support.selectstart="onselectstart"in document.createElement("div");$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;
for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]])}},call:function(instance,name,args){var i,set=instance.plugins[name];if(!set||(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11))return;for(i=0;i<set.length;i++)if(instance.options[set[i][0]])set[i][1].apply(instance.element,args)}},hasScroll:function(el,a){if($(el).css("overflow")==="hidden")return false;var scroll=a&&a==="left"?"scrollLeft":"scrollTop",has=false;if(el[scroll]>
0)return true;el[scroll]=1;has=el[scroll]>0;el[scroll]=0;return has}})})(jQuery);
(function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)};$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget}$.expr[":"][fullName.toLowerCase()]=
function(elem){return!!$.data(elem,fullName)};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget)return new constructor(options,element);if(arguments.length)this._createWidget(options,element)};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base;basePrototype.options=$.widget.extend({},basePrototype.options);
$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return}proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;
return returnValue}}()});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)});delete existingConstructor._childConstructors}else base._childConstructors.push(constructor);
$.widget.bridge(name,constructor)};$.widget.extend=function(target){var input=slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++)for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined)if($.isPlainObject(value))target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);else target[key]=value}return target};$.widget.bridge=function(name,
object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options;if(isMethodCall)this.each(function(){var methodValue,instance=$.data(this,fullName);if(!instance)return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");if(!$.isFunction(instance[options])||
options.charAt(0)==="_")return $.error("no such method '"+options+"' for "+name+" widget instance");methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false}});else this.each(function(){var instance=$.data(this,fullName);if(instance)instance.option(options||{})._init();else $.data(this,fullName,new object(options,this))});return returnValue}};
$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"\x3cdiv\x3e",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||(this.defaultElement||this))[0];this.element=$(element);this.uuid=uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==
this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element)this.destroy()}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));
this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0)return $.widget.extend({},this.options);if(typeof key==="string"){options={};parts=key.split(".");
key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]]}key=parts.pop();if(value===undefined)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(value===undefined)return this.options[key]===undefined?null:this.options[key];options[key]=value}}this._setOptions(options);return this},_setOptions:function(options){var key;for(key in options)this._setOption(key,
options[key]);return this},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,
instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false}if(!handlers){handlers=element;element=this.element;delegateElement=this.widget()}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element)}$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled")))return;return(typeof handler==="string"?
instance[handler]:handler).apply(instance,arguments)}if(typeof handler!=="string")handlerProxy.guid=handler.guid=handler.guid||(handlerProxy.guid||$.guid++);var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector)delegateElement.delegate(selector,eventName,handlerProxy);else element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName)},
_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element);
this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig)for(prop in orig)if(!(prop in event))event[prop]=orig[prop];this.element.trigger(event,
data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented())}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string")options={effect:options};var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number")options=
{duration:options};hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay)element.delay(options.delay);if(hasOptions&&($.effects&&$.effects.effect[effectName]))element[method](options);else if(effectName!==method&&element[effectName])element[effectName](options.duration,options.easing,callback);else element.queue(function(next){$(this)[method]();if(callback)callback.call(element[0]);next()})}})})(jQuery);
(function($,undefined){var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false});$.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");
event.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate)$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(mouseHandled)return;this._mouseStarted&&this._mouseUp(event);this._mouseDownEvent=event;var that=this,btnIsLeft=event.which===1,elIsCancel=typeof this.options.cancel==="string"&&
event.target.nodeName?$(event.target).closest(this.options.cancel).length:false;if(!btnIsLeft||(elIsCancel||!this._mouseCapture(event)))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(event)!==false;if(!this._mouseStarted){event.preventDefault();return true}}if(true===$.data(event.target,
this.widgetName+".preventClickEvent"))$.removeData(event.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(event){return that._mouseMove(event)};this._mouseUpDelegate=function(event){return that._mouseUp(event)};$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true},_mouseMove:function(event){if($.ui.ie&&((!document.documentMode||document.documentMode<
9)&&!event.button))return this._mouseUp(event);if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault()}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==false;this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)}return!this._mouseStarted},_mouseUp:function(event){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);
if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target)$.data(event.target,this.widgetName+".preventClickEvent",true);this._mouseStop(event)}return false},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function($,undefined){$.widget("ui.draggable",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,
stop:null},_create:function(){if(this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";if(this.options.addClasses)this.element.addClass("ui-draggable");if(this.options.disabled)this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(event){var o=this.options;if(this.helper||
(o.disabled||$(event.target).closest(".ui-resizable-handle").length>0))return false;this.handle=this._getHandle(event);if(!this.handle)return false;$(o.iframeFix===true?"iframe":o.iframeFix).each(function(){$("\x3cdiv class\x3d'ui-draggable-iframeFix' style\x3d'background: #fff;'\x3e\x3c/div\x3e").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css($(this).offset()).appendTo("body")});return true},_mouseStart:function(event){var o=this.options;
this.helper=this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager)$.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};this.offset.scroll=false;$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);this._setContainment();if(this._trigger("start",event)===false){this._clear();return false}this._cacheHelperProportions();
if($.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,event);this._mouseDrag(event,true);if($.ui.ddmanager)$.ui.ddmanager.dragStart(this,event);return true},_mouseDrag:function(event,noPropagation){if(this.offsetParentCssPosition==="fixed")this.offset.parent=this._getParentOffset();this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp({});return false}this.position=
ui.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);return false},_mouseStop:function(event){var that=this,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour)dropped=$.ui.ddmanager.drop(this,event);if(this.dropped){dropped=this.dropped;this.dropped=false}if(this.options.helper==="original"&&
!$.contains(this.element[0].ownerDocument,this.element[0]))return false;if(this.options.revert==="invalid"&&!dropped||(this.options.revert==="valid"&&dropped||(this.options.revert===true||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))))$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false)that._clear()});else if(this._trigger("stop",event)!==false)this._clear();return false},_mouseUp:function(event){$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});
if($.ui.ddmanager)$.ui.ddmanager.dragStop(this,event);return $.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){if(this.helper.is(".ui-draggable-dragging"))this._mouseUp({});else this._clear();return this},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:true},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):o.helper==="clone"?this.element.clone().removeAttr("id"):
this.element;if(!helper.parents("body").length)helper.appendTo(o.appendTo==="parent"?this.element[0].parentNode:o.appendTo);if(helper[0]!==this.element[0]&&!/(fixed|absolute)/.test(helper.css("position")))helper.css("position","absolute");return helper},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string")obj=obj.split(" ");if($.isArray(obj))obj={left:+obj[0],top:+obj[1]||0};if("left"in obj)this.offset.click.left=obj.left+this.margins.left;if("right"in obj)this.offset.click.left=this.helperProportions.width-
obj.right+this.margins.left;if("top"in obj)this.offset.click.top=obj.top+this.margins.top;if("bottom"in obj)this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top},_getParentOffset:function(){var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&
(this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie))po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var over,c,ce,o=this.options;if(!o.containment){this.containment=null;return}if(o.containment===
"window"){this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(o.containment==="document"){this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,
($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(o.containment.constructor===Array){this.containment=o.containment;return}if(o.containment==="parent")o.containment=this.helper[0].parentNode;c=$(o.containment);ce=c[0];if(!ce)return;over=c.css("overflow")!=="hidden";this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),
10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=c},_convertPositionTo:function(d,pos){if(!pos)pos=
this.position;var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent;if(!this.offset.scroll)this.offset.scroll={top:scroll.scrollTop(),left:scroll.scrollLeft()};return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*mod,left:pos.left+this.offset.relative.left*mod+
this.offset.parent.left*mod-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*mod}},_generatePosition:function(event){var containment,co,top,left,o=this.options,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,pageX=event.pageX,pageY=event.pageY;if(!this.offset.scroll)this.offset.scroll={top:scroll.scrollTop(),left:scroll.scrollLeft()};if(this.originalPosition){if(this.containment){if(this.relative_container){co=
this.relative_container.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]}else containment=this.containment;if(event.pageX-this.offset.click.left<containment[0])pageX=containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<containment[1])pageY=containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>containment[2])pageX=containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>
containment[3])pageY=containment[3]+this.offset.click.top}if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3]?top:top-this.offset.click.top>=containment[1]?top-o.grid[1]:top+o.grid[1]:top;left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?left-this.offset.click.left>=
containment[0]||left-this.offset.click.left>containment[2]?left:left-this.offset.click.left>=containment[0]?left-o.grid[0]:left+o.grid[0]:left}}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval)this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui]);if(type==="drag")this.positionAbs=this._convertPositionTo("absolute");return $.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});
$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("ui-draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[];$(o.connectToSortable).each(function(){var sortable=$.data(this,"ui-sortable");if(sortable&&!sortable.options.disabled){inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert});sortable.refreshPositions();sortable._trigger("activate",event,uiSortable)}})},stop:function(event,ui){var inst=
$(this).data("ui-draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;inst.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=this.shouldRevert;this.instance._mouseStop(event);this.instance.options.helper=this.instance.options._helper;if(inst.options.helper==="original")this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=
false;this.instance._trigger("deactivate",event,uiSortable)}})},drag:function(event,ui){var inst=$(this).data("ui-draggable"),that=this;$.each(inst.sortables,function(){var innermostIntersecting=false,thisSortable=this;this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){innermostIntersecting=true;$.each(inst.sortables,function(){this.instance.positionAbs=
inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this!==thisSortable&&(this.instance._intersectsWith(this.instance.containerCache)&&$.contains(thisSortable.instance.element[0],this.instance.element[0])))innermostIntersecting=false;return innermostIntersecting})}if(innermostIntersecting){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",
true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return ui.helper[0]};event.target=this.instance.currentItem[0];this.instance._mouseCapture(event,true);this.instance._mouseStart(event,true,true);this.instance.offset.click.top=inst.offset.click.top;this.instance.offset.click.left=inst.offset.click.left;this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=inst.offset.parent.top-
this.instance.offset.parent.top;inst._trigger("toSortable",event);inst.dropped=this.instance.element;inst.currentItem=inst.element;this.instance.fromOutside=inst}if(this.instance.currentItem)this.instance._mouseDrag(event)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",event,this.instance._uiHash(this.instance));this.instance._mouseStop(event,true);this.instance.options.helper=this.instance.options._helper;
this.instance.currentItem.remove();if(this.instance.placeholder)this.instance.placeholder.remove();inst._trigger("fromSortable",event);inst.dropped=false}})}});$.ui.plugin.add("draggable","cursor",{start:function(){var t=$("body"),o=$(this).data("ui-draggable").options;if(t.css("cursor"))o._cursor=t.css("cursor");t.css("cursor",o.cursor)},stop:function(){var o=$(this).data("ui-draggable").options;if(o._cursor)$("body").css("cursor",o._cursor)}});$.ui.plugin.add("draggable","opacity",{start:function(event,
ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;if(t.css("opacity"))o._opacity=t.css("opacity");t.css("opacity",o.opacity)},stop:function(event,ui){var o=$(this).data("ui-draggable").options;if(o._opacity)$(ui.helper).css("opacity",o._opacity)}});$.ui.plugin.add("draggable","scroll",{start:function(){var i=$(this).data("ui-draggable");if(i.scrollParent[0]!==document&&i.scrollParent[0].tagName!=="HTML")i.overflowOffset=i.scrollParent.offset()},drag:function(event){var i=$(this).data("ui-draggable"),
o=i.options,scrolled=false;if(i.scrollParent[0]!==document&&i.scrollParent[0].tagName!=="HTML"){if(!o.axis||o.axis!=="x")if(i.overflowOffset.top+i.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity)i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity)i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed;if(!o.axis||o.axis!=="y")if(i.overflowOffset.left+i.scrollParent[0].offsetWidth-
event.pageX<o.scrollSensitivity)i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity)i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed}else{if(!o.axis||o.axis!=="x")if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)scrolled=
$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);if(!o.axis||o.axis!=="y")if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)}if(scrolled!==false&&($.ui.ddmanager&&!o.dropBehaviour))$.ui.ddmanager.prepareOffsets(i,event)}});$.ui.plugin.add("draggable",
"snap",{start:function(){var i=$(this).data("ui-draggable"),o=i.options;i.snapElements=[];$(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0])i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui){var ts,bs,ls,rs,l,r,t,b,i,first,inst=$(this).data("ui-draggable"),o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,
y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left;r=l+inst.snapElements[i].width;t=inst.snapElements[i].top;b=t+inst.snapElements[i].height;if(x2<l-d||(x1>r+d||(y2<t-d||(y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item))))){if(inst.snapElements[i].snapping)inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item}));
inst.snapElements[i].snapping=false;continue}if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left;if(rs)ui.position.left=
inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left}first=ts||(bs||(ls||rs));if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-
inst.margins.left;if(rs)ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left}if(!inst.snapElements[i].snapping&&(ts||(bs||(ls||(rs||first)))))inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item}));inst.snapElements[i].snapping=ts||(bs||(ls||(rs||first)))}}});$.ui.plugin.add("draggable","stack",{start:function(){var min,o=this.data("ui-draggable").options,
group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(!group.length)return;min=parseInt($(group[0]).css("zIndex"),10)||0;$(group).each(function(i){$(this).css("zIndex",min+i)});this.css("zIndex",min+group.length)}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;if(t.css("zIndex"))o._zIndex=t.css("zIndex");t.css("zIndex",o.zIndex)},stop:function(event,
ui){var o=$(this).data("ui-draggable").options;if(o._zIndex)$(ui.helper).css("zIndex",o._zIndex)}})})(jQuery);
(function($,undefined){function isOverAxis(x,reference,size){return x>reference&&x<reference+size}$.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var o=this.options,accept=o.accept;this.isover=false;this.isout=true;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept)};
this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[];$.ui.ddmanager.droppables[o.scope].push(this);o.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var i=0,drop=$.ui.ddmanager.droppables[this.options.scope];for(;i<drop.length;i++)if(drop[i]===this)drop.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(key,value){if(key===
"accept")this.accept=$.isFunction(value)?value:function(d){return d.is(value)};$.Widget.prototype._setOption.apply(this,arguments)},_activate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass)this.element.addClass(this.options.activeClass);if(draggable)this._trigger("activate",event,this.ui(draggable))},_deactivate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass)this.element.removeClass(this.options.activeClass);if(draggable)this._trigger("deactivate",
event,this.ui(draggable))},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0])return;if(this.accept.call(this.element[0],draggable.currentItem||draggable.element)){if(this.options.hoverClass)this.element.addClass(this.options.hoverClass);this._trigger("over",event,this.ui(draggable))}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0])return;
if(this.accept.call(this.element[0],draggable.currentItem||draggable.element)){if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger("out",event,this.ui(draggable))}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=false;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0])return false;this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,
"ui-droppable");if(inst.options.greedy&&(!inst.options.disabled&&(inst.options.scope===draggable.options.scope&&(inst.accept.call(inst.element[0],draggable.currentItem||draggable.element)&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance))))){childrenIntersection=true;return false}});if(childrenIntersection)return false;if(this.accept.call(this.element[0],draggable.currentItem||draggable.element)){if(this.options.activeClass)this.element.removeClass(this.options.activeClass);
if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger("drop",event,this.ui(draggable));return this.element}return false},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}});$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return false;var draggableLeft,draggableTop,x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,
y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case "fit":return l<=x1&&(x2<=r&&(t<=y1&&y2<=b));case "intersect":return l<x1+draggable.helperProportions.width/2&&(x2-draggable.helperProportions.width/2<r&&(t<y1+draggable.helperProportions.height/2&&y2-draggable.helperProportions.height/2<b));case "pointer":draggableLeft=
(draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left;draggableTop=(draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top;return isOverAxis(draggableTop,t,droppable.proportions.height)&&isOverAxis(draggableLeft,l,droppable.proportions.width);case "touch":return(y1>=t&&y1<=b||(y2>=t&&y2<=b||y1<t&&y2>b))&&(x1>=l&&x1<=r||(x2>=l&&x2<=r||x1<l&&x2>r));default:return false}};$.ui.ddmanager={current:null,
droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++){if(m[i].options.disabled||t&&!m[i].accept.call(m[i].element[0],t.currentItem||t.element))continue;for(j=0;j<list.length;j++)if(list[j]===m[i].element[0]){m[i].proportions.height=0;continue droppablesLoop}m[i].visible=m[i].element.css("display")!=="none";
if(!m[i].visible)continue;if(type==="mousedown")m[i]._activate.call(m[i],event);m[i].offset=m[i].element.offset();m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight}}},drop:function(draggable,event){var dropped=false;$.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){if(!this.options)return;if(!this.options.disabled&&(this.visible&&$.ui.intersect(draggable,this,this.options.tolerance)))dropped=this._drop.call(this,event)||dropped;
if(!this.options.disabled&&(this.visible&&this.accept.call(this.element[0],draggable.currentItem||draggable.element))){this.isout=true;this.isover=false;this._deactivate.call(this,event)}});return dropped},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){if(!draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event)})},drag:function(draggable,event){if(draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,
event);$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||(this.greedyChild||!this.visible))return;var parentInstance,scope,parent,intersects=$.ui.intersect(draggable,this,this.options.tolerance),c=!intersects&&this.isover?"isout":intersects&&!this.isover?"isover":null;if(!c)return;if(this.options.greedy){scope=this.options.scope;parent=this.element.parents(":data(ui-droppable)").filter(function(){return $.data(this,"ui-droppable").options.scope===scope});
if(parent.length){parentInstance=$.data(parent[0],"ui-droppable");parentInstance.greedyChild=c==="isover"}}if(parentInstance&&c==="isover"){parentInstance.isover=false;parentInstance.isout=true;parentInstance._out.call(parentInstance,event)}this[c]=true;this[c==="isout"?"isover":"isout"]=false;this[c==="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c==="isout"){parentInstance.isout=false;parentInstance.isover=true;parentInstance._over.call(parentInstance,event)}})},dragStop:function(draggable,
event){draggable.element.parentsUntil("body").unbind("scroll.droppable");if(!draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event)}}})(jQuery);
(function($,undefined){function num(v){return parseInt(v,10)||0}function isNumber(value){return!isNaN(parseInt(value,10))}$.widget("ui.resizable",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var n,
i,handle,axis,hname,that=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||(o.ghost||o.animate)?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap($("\x3cdiv class\x3d'ui-wrapper' style\x3d'overflow: hidden;'\x3e\x3c/div\x3e").css({position:this.element.css("position"),
width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,
marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",
se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor===String){if(this.handles==="all")this.handles="n,e,s,w,se,sw,ne,nw";n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){handle=$.trim(n[i]);hname="ui-resizable-"+handle;axis=$("\x3cdiv class\x3d'ui-resizable-handle "+hname+"'\x3e\x3c/div\x3e");axis.css({zIndex:o.zIndex});if("se"===handle)axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[handle]=".ui-resizable-"+
handle;this.element.append(axis)}}this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles){if(this.handles[i].constructor===String)this.handles[i]=$(this.handles[i],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){axis=$(this.handles[i],this.element);padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?
"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize()}if(!$(this.handles[i]).length)continue}};this._renderAxis(this.element);this._handles=$(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!that.resizing){if(this.className)axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);that.axis=axis&&axis[1]?axis[1]:"se"}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(o.disabled)return;
$(this).removeClass("ui-resizable-autohide");that._handles.show()}).mouseleave(function(){if(o.disabled)return;if(!that.resizing){$(this).addClass("ui-resizable-autohide");that._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){_destroy(this.element);
wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper);wrapper.remove()}this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this},_mouseCapture:function(event){var i,handle,capture=false;for(i in this.handles){handle=$(this.handles[i])[0];if(handle===event.target||$.contains(handle,event.target))capture=
true}return!this.options.disabled&&capture},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=true;if(/absolute/.test(el.css("position")))el.css({position:"absolute",top:el.css("top"),left:el.css("left")});else if(el.is(".ui-draggable"))el.css({position:"absolute",top:iniPos.top,left:iniPos.left});this._renderProxy();curleft=num(this.helper.css("left"));curtop=num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||
0;curtop+=$(o.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalPosition={left:curleft,top:curtop};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalMousePosition=
{left:event.pageX,top:event.pageY};this.aspectRatio=typeof o.aspectRatio==="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1;cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor==="auto"?this.axis+"-resize":cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true},_mouseDrag:function(event){var data,el=this.helper,props={},smp=this.originalMousePosition,a=this.axis,prevTop=this.position.top,prevLeft=this.position.left,
prevWidth=this.size.width,prevHeight=this.size.height,dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0,trigger=this._change[a];if(!trigger)return false;data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey)data=this._updateRatio(data,event);data=this._respectSize(data,event);this._updateCache(data);this._propagate("resize",event);if(this.position.top!==prevTop)props.top=this.position.top+"px";if(this.position.left!==prevLeft)props.left=
this.position.left+"px";if(this.size.width!==prevWidth)props.width=this.size.width+"px";if(this.size.height!==prevHeight)props.height=this.size.height+"px";el.css(props);if(!this._helper&&this._proportionallyResizeElements.length)this._proportionallyResize();if(!$.isEmptyObject(props))this._trigger("resize",event,this.ui());return false},_mouseStop:function(event){this.resizing=false;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;if(this._helper){pr=this._proportionallyResizeElements;
ista=pr.length&&/textarea/i.test(pr[0].nodeName);soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height;soffsetw=ista?0:that.sizeDiff.width;s={width:that.helper.width()-soffsetw,height:that.helper.height()-soffseth};left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null;top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;if(!o.animate)this.element.css($.extend(s,{top:top,left:left}));that.helper.height(that.size.height);
that.helper.width(that.size.width);if(this._helper&&!o.animate)this._proportionallyResize()}$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper)this.helper.remove();return false},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:isNumber(o.minHeight)?o.minHeight:
0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth)b.minWidth=pMinWidth;if(pMinHeight>b.minHeight)b.minHeight=pMinHeight;if(pMaxWidth<b.maxWidth)b.maxWidth=pMaxWidth;if(pMaxHeight<b.maxHeight)b.maxHeight=pMaxHeight}this._vBoundaries=b},_updateCache:function(data){this.offset=
this.helper.offset();if(isNumber(data.left))this.position.left=data.left;if(isNumber(data.top))this.position.top=data.top;if(isNumber(data.height))this.size.height=data.height;if(isNumber(data.width))this.size.width=data.width},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;if(isNumber(data.height))data.width=data.height*this.aspectRatio;else if(isNumber(data.width))data.height=data.width/this.aspectRatio;if(a==="sw"){data.left=cpos.left+(csize.width-data.width);data.top=
null}if(a==="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width)}return data},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=isNumber(data.width)&&(o.maxWidth&&o.maxWidth<data.width),ismaxh=isNumber(data.height)&&(o.maxHeight&&o.maxHeight<data.height),isminw=isNumber(data.width)&&(o.minWidth&&o.minWidth>data.width),isminh=isNumber(data.height)&&(o.minHeight&&o.minHeight>data.height),dw=this.originalPosition.left+this.originalSize.width,
dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw)data.width=o.minWidth;if(isminh)data.height=o.minHeight;if(ismaxw)data.width=o.maxWidth;if(ismaxh)data.height=o.maxHeight;if(isminw&&cw)data.left=dw-o.minWidth;if(ismaxw&&cw)data.left=dw-o.maxWidth;if(isminh&&ch)data.top=dh-o.minHeight;if(ismaxh&&ch)data.top=dh-o.maxHeight;if(!data.width&&(!data.height&&(!data.left&&data.top)))data.top=null;else if(!data.width&&(!data.height&&(!data.top&&data.left)))data.left=
null;return data},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var i,j,borders,paddings,prel,element=this.helper||this.element;for(i=0;i<this._proportionallyResizeElements.length;i++){prel=this._proportionallyResizeElements[i];if(!this.borderDif){this.borderDif=[];borders=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")];paddings=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),
prel.css("paddingLeft")];for(j=0;j<borders.length;j++)this.borderDif[j]=(parseInt(borders[j],10)||0)+(parseInt(paddings[j],10)||0)}prel.css({height:element.height()-this.borderDif[0]-this.borderDif[2]||0,width:element.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$("\x3cdiv style\x3d'overflow:hidden;'\x3e\x3c/div\x3e");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(event,dx){return{width:this.originalSize.width+dx}},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+
dy,height:cs.height-dy}},s:function(event,dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,
arguments),this._change.w.apply(this,[event,dx,dy]))}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);n!=="resize"&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).data("ui-resizable"),o=that.options,
pr=that._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:that.size.width-soffsetw,height:that.size.height-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;that.element.animate($.extend(style,top&&left?{top:top,
left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};if(pr&&pr.length)$(pr[0]).css({width:data.width,height:data.height});that._updateCache(data);that._propagate("resize",event)}})}});$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=
$(this).data("ui-resizable"),o=that.options,el=that.element,oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?el.parent().get(0):oc;if(!ce)return;that.containerElement=$(ce);if(/document/.test(oc)||oc===document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}}else{element=$(ce);p=[];$(["Top","Right","Left","Bottom"]).each(function(i,
name){p[i]=num(element.css("padding"+name))});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]};co=that.containerOffset;ch=that.containerSize.height;cw=that.containerSize.width;width=$.ui.hasScroll(ce,"left")?ce.scrollWidth:cw;height=$.ui.hasScroll(ce)?ce.scrollHeight:ch;that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}}},resize:function(event){var woset,
hoset,isParent,isOffsetRelative,that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement;if(ce[0]!==document&&/static/.test(ce.css("position")))cop=co;if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+(that._helper?that.position.left-co.left:that.position.left-cop.left);if(pRatio)that.size.height=that.size.width/that.aspectRatio;that.position.left=o.helper?co.left:
0}if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+(that._helper?that.position.top-co.top:that.position.top);if(pRatio)that.size.width=that.size.height*that.aspectRatio;that.position.top=that._helper?co.top:0}that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;woset=Math.abs((that._helper?that.offset.left-cop.left:that.offset.left-cop.left)+that.sizeDiff.width);hoset=Math.abs((that._helper?that.offset.top-cop.top:that.offset.top-
co.top)+that.sizeDiff.height);isParent=that.containerElement.get(0)===that.element.parent().get(0);isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative)woset-=that.parentData.left;if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio)that.size.height=that.size.width/that.aspectRatio}if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio)that.size.width=
that.size.height*that.aspectRatio}},stop:function(){var that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;if(that._helper&&(!o.animate&&/relative/.test(ce.css("position"))))$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});if(that._helper&&(!o.animate&&/static/.test(ce.css("position"))))$(this).css({left:ho.left-
cop.left-co.left,width:w,height:h})}});$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,_store=function(exp){$(exp).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)})})};if(typeof o.alsoResize==="object"&&!o.alsoResize.parentNode)if(o.alsoResize.length){o.alsoResize=o.alsoResize[0];_store(o.alsoResize)}else $.each(o.alsoResize,
function(exp){_store(exp)});else _store(o.alsoResize)},resize:function(event,ui){var that=$(this).data("ui-resizable"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:that.size.height-os.height||0,width:that.size.width-os.width||0,top:that.position.top-op.top||0,left:that.position.left-op.left||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?
["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0)style[prop]=sum||null});el.css(style)})};if(typeof o.alsoResize==="object"&&!o.alsoResize.nodeType)$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c)});else _alsoResize(o.alsoResize)},stop:function(){$(this).removeData("resizable-alsoresize")}});$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size;
that.ghost=that.originalElement.clone();that.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost==="string"?o.ghost:"");that.ghost.appendTo(that.helper)},resize:function(){var that=$(this).data("ui-resizable");if(that.ghost)that.ghost.css({position:"relative",height:that.size.height,width:that.size.width})},stop:function(){var that=$(this).data("ui-resizable");if(that.ghost&&that.helper)that.helper.get(0).removeChild(that.ghost.get(0))}});
$.ui.plugin.add("resizable","grid",{resize:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid=typeof o.grid==="number"?[o.grid,o.grid]:o.grid,gridX=grid[0]||1,gridY=grid[1]||1,ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&o.maxWidth<newWidth,isMaxHeight=o.maxHeight&&o.maxHeight<newHeight,isMinWidth=
o.minWidth&&o.minWidth>newWidth,isMinHeight=o.minHeight&&o.minHeight>newHeight;o.grid=grid;if(isMinWidth)newWidth=newWidth+gridX;if(isMinHeight)newHeight=newHeight+gridY;if(isMaxWidth)newWidth=newWidth-gridX;if(isMaxHeight)newHeight=newHeight-gridY;if(/^(se|s|e)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight}else if(/^(ne)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy}else if(/^(sw)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;
that.position.left=op.left-ox}else{that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;that.position.left=op.left-ox}}})})(jQuery);
(function($,undefined){$.widget("ui.selectable",$.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var selectees,that=this;this.element.addClass("ui-selectable");this.dragged=false;this.refresh=function(){selectees=$(that.options.filter,that.element[0]);selectees.addClass("ui-selectee");selectees.each(function(){var $this=$(this),pos=$this.offset();
$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:false,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")})})};this.refresh();this.selectees=selectees.addClass("ui-selectee");this._mouseInit();this.helper=$("\x3cdiv class\x3d'ui-selectable-helper'\x3e\x3c/div\x3e")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");
this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY];if(this.options.disabled)return;this.selectees=$(options.filter,this.element[0]);this._trigger("start",event);$(options.appendTo).append(this.helper);this.helper.css({"left":event.pageX,"top":event.pageY,"width":0,"height":0});if(options.autoRefresh)this.refresh();this.selectees.filter(".ui-selected").each(function(){var selectee=
$.data(this,"selectable-item");selectee.startselected=true;if(!event.metaKey&&!event.ctrlKey){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element})}});$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");if(selectee){doSelect=!event.metaKey&&!event.ctrlKey||!selectee.$element.hasClass("ui-selected");
selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting");selectee.unselecting=!doSelect;selectee.selecting=doSelect;selectee.selected=doSelect;if(doSelect)that._trigger("selecting",event,{selecting:selectee.element});else that._trigger("unselecting",event,{unselecting:selectee.element});return false}})},_mouseDrag:function(event){this.dragged=true;if(this.options.disabled)return;var tmp,that=this,options=this.options,x1=this.opos[0],
y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){tmp=x2;x2=x1;x1=tmp}if(y1>y2){tmp=y2;y2=y1;y1=tmp}this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=false;if(!selectee||selectee.element===that.element[0])return;if(options.tolerance==="touch")hit=!(selectee.left>x2||(selectee.right<x1||(selectee.top>y2||selectee.bottom<y1)));else if(options.tolerance==="fit")hit=selectee.left>x1&&(selectee.right<x2&&(selectee.top>
y1&&selectee.bottom<y2));if(hit){if(selectee.selected){selectee.$element.removeClass("ui-selected");selectee.selected=false}if(selectee.unselecting){selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false}if(!selectee.selecting){selectee.$element.addClass("ui-selecting");selectee.selecting=true;that._trigger("selecting",event,{selecting:selectee.element})}}else{if(selectee.selecting)if((event.metaKey||event.ctrlKey)&&selectee.startselected){selectee.$element.removeClass("ui-selecting");
selectee.selecting=false;selectee.$element.addClass("ui-selected");selectee.selected=true}else{selectee.$element.removeClass("ui-selecting");selectee.selecting=false;if(selectee.startselected){selectee.$element.addClass("ui-unselecting");selectee.unselecting=true}that._trigger("unselecting",event,{unselecting:selectee.element})}if(selectee.selected)if(!event.metaKey&&(!event.ctrlKey&&!selectee.startselected)){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");
selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element})}}});return false},_mouseStop:function(event){var that=this;this.dragged=false;$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false;selectee.startselected=false;that._trigger("unselected",event,{unselected:selectee.element})});$(".ui-selecting",this.element[0]).each(function(){var selectee=
$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected");selectee.selecting=false;selectee.selected=true;selectee.startselected=true;that._trigger("selected",event,{selected:selectee.element})});this._trigger("stop",event);this.helper.remove();return false}})})(jQuery);
(function($,undefined){function isOverAxis(x,reference,size){return x>reference&&x<reference+size}function isFloating(item){return/left|right/.test(item.css("float"))||/inline|table-cell/.test(item.css("display"))}$.widget("ui.sortable",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",
items:"\x3e *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var o=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?o.axis==="x"||isFloating(this.items[0].item):false;this.offset=
this.element.offset();this._mouseInit();this.ready=true},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_setOption:function(key,value){if(key==="disabled"){this.options[key]=value;this.widget().toggleClass("ui-sortable-disabled",!!value)}else $.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(event,overrideHandle){var currentItem=
null,validHandle=false,that=this;if(this.reverting)return false;if(this.options.disabled||this.options.type==="static")return false;this._refreshItems(event);$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")===that){currentItem=$(this);return false}});if($.data(event.target,that.widgetName+"-item")===that)currentItem=$(event.target);if(!currentItem)return false;if(this.options.handle&&!overrideHandle){$(this.options.handle,currentItem).find("*").addBack().each(function(){if(this===
event.target)validHandle=true});if(!validHandle)return false}this.currentItem=currentItem;this._removeCurrentsFromItems();return true},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
if(this.helper[0]!==this.currentItem[0])this.currentItem.hide();this._createPlaceholder();if(o.containment)this._setContainment();if(o.cursor&&o.cursor!=="auto"){body=this.document.find("body");this.storedCursor=body.css("cursor");body.css("cursor",o.cursor);this.storedStylesheet=$("\x3cstyle\x3e*{ cursor: "+o.cursor+" !important; }\x3c/style\x3e").appendTo(body)}if(o.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",o.opacity)}if(o.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=
this.helper.css("zIndex");this.helper.css("zIndex",o.zIndex)}if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions)this._cacheHelperProportions();if(!noActivation)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));if($.ui.ddmanager)$.ui.ddmanager.current=this;if($.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,
event);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(event);return true},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=false;this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-
event.pageY<o.scrollSensitivity)this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity)this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity)this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity)this.scrollParent[0].scrollLeft=
scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed}else{if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-
(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)}if(scrolled!==false&&($.ui.ddmanager&&!o.dropBehaviour))$.ui.ddmanager.prepareOffsets(this,event)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(i=this.items.length-1;i>=
0;i--){item=this.items[i];itemElement=item.item[0];intersection=this._intersectsWithPointer(item);if(!intersection)continue;if(item.instance!==this.currentContainer)continue;if(itemElement!==this.currentItem[0]&&(this.placeholder[intersection===1?"next":"prev"]()[0]!==itemElement&&(!$.contains(this.placeholder[0],itemElement)&&(this.options.type==="semi-dynamic"?!$.contains(this.element[0],itemElement):true)))){this.direction=intersection===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(item))this._rearrange(event,
item);else break;this._trigger("change",event,this._uiHash());break}}this._contactContainers(event);if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);this._trigger("sort",event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(event,noPropagation){if(!event)return;if($.ui.ddmanager&&!this.options.dropBehaviour)$.ui.ddmanager.drop(this,event);if(this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};if(!axis||axis===
"x")animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft);if(!axis||axis==="y")animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop);this.reverting=true;$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event)})}else this._clear(event,noPropagation);return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});
if(this.options.helper==="original")this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");else this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,this._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,this._uiHash(this));this.containers[i].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode)this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
if(this.options.helper!=="original"&&(this.helper&&this.helper[0].parentNode))this.helper.remove();$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev)$(this.domPosition.prev).after(this.currentItem);else $(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||
/(.+)[\-=_](.+)/);if(res)str.push((o.key||res[1]+"[]")+"\x3d"+(o.key&&o.expression?res[1]:res[2]))});if(!str.length&&o.key)str.push(o.key+"\x3d");return str.join("\x26")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")});return ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=
item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight=this.options.axis==="x"||y1+dyClick>t&&y1+dyClick<b,isOverElementWidth=this.options.axis==="y"||x1+dxClick>l&&x1+dxClick<r,isOverElement=isOverElementHeight&&isOverElementWidth;if(this.options.tolerance==="pointer"||(this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":
"height"]))return isOverElement;else return l<x1+this.helperProportions.width/2&&(x2-this.helperProportions.width/2<r&&(t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b))},_intersectsWithPointer:function(item){var isOverElementHeight=this.options.axis==="x"||isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=this.options.axis==="y"||isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&
isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement)return false;return this.floating?horizontalDirection&&horizontalDirection==="right"||verticalDirection==="down"?2:1:verticalDirection&&(verticalDirection==="down"?2:1)},_intersectsWithSides:function(item){var isOverBottomHalf=isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=isOverAxis(this.positionAbs.left+
this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection)return horizontalDirection==="right"&&isOverRightHalf||horizontalDirection==="left"&&!isOverRightHalf;else return verticalDirection&&(verticalDirection==="down"&&isOverBottomHalf||verticalDirection==="up"&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;
return delta!==0&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!==0&&(delta>0?"right":"left")},refresh:function(event){this._refreshItems(event);this.refreshPositions();return this},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();
if(connectWith&&connected)for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&(inst!==this&&!inst.options.disabled))queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst])}}queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):
$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(i=queries.length-1;i>=0;i--)queries[i][0].each(function(){items.push(this)});return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++)if(list[j]===item.item[0])return false;return true})},_refreshItems:function(event){this.items=[];this.containers=[this];var i,
j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&(inst!==this&&!inst.options.disabled)){queries.push([$.isFunction(inst.options.items)?
inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst)}}}for(i=queries.length-1;i>=0;i--){targetData=queries[i][1];_queries=queries[i][0];for(j=0,queriesLength=_queries.length;j<queriesLength;j++){item=$(_queries[j]);item.data(this.widgetName+"-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})}}},refreshPositions:function(fast){if(this.offsetParent&&this.helper)this.offset.parent=
this._getParentOffset();var i,item,t,p;for(i=this.items.length-1;i>=0;i--){item=this.items[i];if(item.instance!==this.currentContainer&&(this.currentContainer&&item.item[0]!==this.currentItem[0]))continue;t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight()}p=t.offset();item.left=p.left;item.top=p.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(i=this.containers.length-1;i>=0;i--){p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(that){that=that||this;var className,o=that.options;if(!o.placeholder||o.placeholder.constructor===String){className=o.placeholder;
o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("\x3c"+nodeName+"\x3e",that.document[0]).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");if(nodeName==="tr")that.currentItem.children().each(function(){$("\x3ctd\x3e\x26#160;\x3c/td\x3e",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(element)});else if(nodeName==="img")element.attr("src",that.currentItem.attr("src"));
if(!className)element.css("visibility","hidden");return element},update:function(container,p){if(className&&!o.forcePlaceholderSize)return;if(!p.height())p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10));if(!p.width())p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10))}}}that.placeholder=$(o.placeholder.element.call(that.element,
that.currentItem));that.currentItem.after(that.placeholder);o.placeholder.update(that,that.placeholder)},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,base,cur,nearBottom,floating,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],
innermostContainer.element[0]))continue;innermostContainer=this.containers[i];innermostIndex=i}else if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0}}if(!innermostContainer)return;if(this.containers.length===1){if(!this.containers[innermostIndex].containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1}}else{dist=
1E4;itemWithLeastDistance=null;floating=innermostContainer.floating||isFloating(this.currentItem);posProperty=floating?"left":"top";sizeProperty=floating?"width":"height";base=this.positionAbs[posProperty]+this.offset.click[posProperty];for(j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0]))continue;if(this.items[j].item[0]===this.currentItem[0])continue;if(floating&&!isOverAxis(this.positionAbs.top+this.offset.click.top,this.items[j].top,
this.items[j].height))continue;cur=this.items[j].item.offset()[posProperty];nearBottom=false;if(Math.abs(cur-base)>Math.abs(cur+this.items[j][sizeProperty]-base)){nearBottom=true;cur+=this.items[j][sizeProperty]}if(Math.abs(cur-base)<dist){dist=Math.abs(cur-base);itemWithLeastDistance=this.items[j];this.direction=nearBottom?"up":"down"}}if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[innermostIndex])return;itemWithLeastDistance?this._rearrange(event,
itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.currentContainer=this.containers[innermostIndex];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=
this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):o.helper==="clone"?this.currentItem.clone():this.currentItem;if(!helper.parents("body").length)$(o.appendTo!=="parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);if(helper[0]===this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};
if(!helper[0].style.width||o.forceHelperSize)helper.width(this.currentItem.width());if(!helper[0].style.height||o.forceHelperSize)helper.height(this.currentItem.height());return helper},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string")obj=obj.split(" ");if($.isArray(obj))obj={left:+obj[0],top:+obj[1]||0};if("left"in obj)this.offset.click.left=obj.left+this.margins.left;if("right"in obj)this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;if("top"in obj)this.offset.click.top=
obj.top+this.margins.top;if("bottom"in obj)this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&
(this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie))po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var ce,co,over,o=this.options;if(o.containment==="parent")o.containment=this.helper[0].parentNode;if(o.containment==="document"||o.containment==="window")this.containment=[0-this.offset.relative.left-
this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$(o.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,($(o.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(o.containment)){ce=$(o.containment)[0];co=$(o.containment).offset();over=$(ce).css("overflow")!=="hidden";this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),
10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||
0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-(this.cssPosition===
"fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:
this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0])pageX=this.containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<this.containment[1])pageY=this.containment[1]+this.offset.click.top;if(event.pageX-
this.offset.click.left>this.containment[2])pageX=this.containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>this.containment[3])pageY=this.containment[3]+this.offset.click.top}if(o.grid){top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3]?top:top-this.offset.click.top>=this.containment[1]?top-o.grid[1]:top+o.grid[1]:top;left=this.originalPageX+
Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2]?left:left-this.offset.click.left>=this.containment[0]?left-o.grid[0]:left+o.grid[0]:left}}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?i.item[0]:i.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){if(counter===this.counter)this.refreshPositions(!hardRefresh)})},_clear:function(event,noPropagation){this.reverting=
false;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length)this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!noPropagation)delayedTriggers.push(function(event){this._trigger("receive",event,
this._uiHash(this.fromOutside))});if((this.fromOutside||(this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0]))&&!noPropagation)delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash())});if(this!==this.currentContainer)if(!noPropagation){delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())});delayedTriggers.push(function(c){return function(event){c._trigger("receive",
event,this._uiHash(this))}}.call(this,this.currentContainer));delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.currentContainer))}for(i=this.containers.length-1;i>=0;i--){if(!noPropagation)delayedTriggers.push(function(c){return function(event){c._trigger("deactivate",event,this._uiHash(this))}}.call(this,this.containers[i]));if(this.containers[i].containerCache.over){delayedTriggers.push(function(c){return function(event){c._trigger("out",
event,this._uiHash(this))}}.call(this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity)this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());for(i=
0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}this.fromOutside=false;return false}if(!noPropagation)this._trigger("beforeStop",event,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!==this.currentItem[0])this.helper.remove();this.helper=null;if(!noPropagation){for(i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}this.fromOutside=
false;return true},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false)this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}})})(jQuery);
(function($,undefined){var dataSpace="ui-effects-";$.effects={effect:{}};(function(jQuery,undefined){var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]]}},
{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1]*2.55,execResult[2]*2.55,execResult[3]*2.55,execResult[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+
execResult[2],16),parseInt(execResult[3]+execResult[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]]}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha)},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,
type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:true,max:255},"percent":{max:1},"degrees":{mod:360,floor:true}},support=color.support={},supportElem=jQuery("\x3cp\x3e")[0],colors,each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)";support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1;each(spaces,function(spaceName,space){space.cache="_"+spaceName;space.props.alpha={idx:3,type:"percent",def:1}});function clamp(value,
prop,allowEmpty){var type=propTypes[prop.type]||{};if(value==null)return allowEmpty||!prop.def?null:prop.def;value=type.floor?~~value:parseFloat(value);if(isNaN(value))return prop.def;if(type.mod)return(value+type.mod)%type.mod;return 0>value?0:type.max<value?type.max:value}function stringParse(string){var inst=color(),rgba=inst._rgba=[];string=string.toLowerCase();each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||
"rgba";if(values){parsed=inst[spaceName](values);inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache];rgba=inst._rgba=parsed._rgba;return false}});if(rgba.length){if(rgba.join()==="0,0,0,0")jQuery.extend(rgba,colors.transparent);return inst}return colors[string]}color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this}if(red.jquery||red.nodeType){red=jQuery(red).css(green);green=undefined}var inst=this,type=
jQuery.type(red),rgba=this._rgba=[];if(green!==undefined){red=[red,green,blue,alpha];type="array"}if(type==="string")return this.parse(stringParse(red)||colors._default);if(type==="array"){each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop)});return this}if(type==="object"){if(red instanceof color)each(spaces,function(spaceName,space){if(red[space.cache])inst[space.cache]=red[space.cache].slice()});else each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,
function(key,prop){if(!inst[cache]&&space.to){if(key==="alpha"||red[key]==null)return;inst[cache]=space.to(inst._rgba)}inst[cache][prop.idx]=clamp(red[key],prop,true)});if(inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0){inst[cache][3]=1;if(space.from)inst._rgba=space.from(inst[cache])}});return this}},is:function(compare){var is=color(compare),same=true,inst=this;each(spaces,function(_,space){var localCache,isCache=is[space.cache];if(isCache){localCache=inst[space.cache]||(space.to&&space.to(inst._rgba)||
[]);each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=isCache[prop.idx]===localCache[prop.idx];return same}})}return same});return same},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache])used.push(spaceName)});return used.pop()},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=this.alpha()===0?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),
result=start.slice();end=end[space.cache];each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null)return;if(startValue===null)result[index]=endValue;else{if(type.mod)if(endValue-startValue>type.mod/2)startValue+=type.mod;else if(startValue-endValue>type.mod/2)startValue-=type.mod;result[index]=clamp((endValue-startValue)*distance+startValue,prop)}});return this[spaceName](result)},blend:function(opaque){if(this._rgba[3]===
1)return this;var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v}))},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return v==null?i>2?1:0:v});if(rgba[3]===1){rgba.pop();prefix="rgb("}return prefix+rgba.join()+")"},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null)v=i>2?1:0;if(i&&i<3)v=Math.round(v*100)+"%";return v});if(hsla[3]===1){hsla.pop();
prefix="hsl("}return prefix+hsla.join()+")"},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha)rgba.push(~~(alpha*255));return"#"+jQuery.map(rgba,function(v){v=(v||0).toString(16);return v.length===1?"0"+v:v}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1)return p+(q-p)*h*6;if(h*2<1)return q;if(h*3<2)return p+(q-p)*(2/3-h)*6;return p}
spaces.hsla.to=function(rgba){if(rgba[0]==null||(rgba[1]==null||rgba[2]==null))return[null,null,null,rgba[3]];var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max)h=0;else if(r===max)h=60*(g-b)/diff+360;else if(g===max)h=60*(b-r)/diff+120;else h=60*(r-g)/diff+240;if(diff===0)s=0;else if(l<=0.5)s=diff/add;else s=diff/(2-add);return[Math.round(h)%360,s,l,a==null?1:a]};spaces.hsla.from=function(hsla){if(hsla[0]==
null||(hsla[1]==null||hsla[2]==null))return[null,null,null,hsla[3]];var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(hue2rgb(p,q,h+1/3)*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-1/3)*255),a]};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache])this[cache]=to(this._rgba);if(value===undefined)return this[cache].slice();var ret,
type=jQuery.type(value),arr=type==="array"||type==="object"?value:arguments,local=this[cache].slice();each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null)val=local[prop.idx];local[prop.idx]=clamp(val,prop)});if(from){ret=color(from(local));ret[cache]=local;return ret}else return color(local)};each(props,function(key,prop){if(color.fn[key])return;color.fn[key]=function(value){var vtype=jQuery.type(value),fn=key==="alpha"?this._hsla?"hsla":"rgba":spaceName,local=this[fn](),
cur=local[prop.idx],match;if(vtype==="undefined")return cur;if(vtype==="function"){value=value.call(this,cur);vtype=jQuery.type(value)}if(value==null&&prop.empty)return this;if(vtype==="string"){match=rplusequals.exec(value);if(match)value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1)}local[prop.idx]=value;return this[fn](local)}})});color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";
if(value!=="transparent"&&(jQuery.type(value)!=="string"||(parsed=stringParse(value)))){value=color(parsed||value);if(!support.rgba&&value._rgba[3]!==1){curElem=hook==="backgroundColor"?elem.parentNode:elem;while((backgroundColor===""||backgroundColor==="transparent")&&(curElem&&curElem.style))try{backgroundColor=jQuery.css(curElem,"backgroundColor");curElem=curElem.parentNode}catch(e){}value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default")}value=value.toRgbaString()}try{elem.style[hook]=
value}catch(e){}}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true}jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos))}})};color.hook(stepHooks);jQuery.cssHooks.borderColor={expand:function(value){var expanded={};each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value});return expanded}};colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",
gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle",
"borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){if(fx.end!=="none"&&!fx.setAttr||fx.pos===1&&!fx.setAttr){jQuery.style(fx.elem,prop,fx.end);fx.setAttr=true}}});function getElementStyles(elem){var key,len,style=elem.ownerDocument.defaultView?elem.ownerDocument.defaultView.getComputedStyle(elem,null):elem.currentStyle,styles={};if(style&&(style.length&&(style[0]&&style[style[0]]))){len=style.length;while(len--){key=style[len];if(typeof style[key]==="string")styles[$.camelCase(key)]=
style[key]}}else for(key in style)if(typeof style[key]==="string")styles[key]=style[key];return styles}function styleDifference(oldStyle,newStyle){var diff={},name,value;for(name in newStyle){value=newStyle[name];if(oldStyle[name]!==value)if(!shorthandStyles[name])if($.fx.step[name]||!isNaN(parseFloat(value)))diff[name]=value}return diff}if(!$.fn.addBack)$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))};$.effects.animateClass=function(value,
duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var animated=$(this),baseClass=animated.attr("class")||"",applyClassChange,allAnimations=o.children?animated.find("*").addBack():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles(this)}});applyClassChange=function(){$.each(classAnimationActions,function(i,action){if(value[action])animated[action+"Class"](value[action])})};applyClassChange();allAnimations=
allAnimations.map(function(){this.end=getElementStyles(this.el[0]);this.diff=styleDifference(this.start,this.end);return this});animated.attr("class",baseClass);allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=$.extend({},o,{queue:false,complete:function(){dfd.resolve(styleInfo)}});this.el.animate(this.diff,opts);return dfd.promise()});$.when.apply($,allAnimations.get()).done(function(){applyClassChange();$.each(arguments,function(){var el=this.el;$.each(this.diff,
function(key){el.css(key,"")})});o.complete.call(animated[0])})})};$.fn.extend({addClass:function(orig){return function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):orig.apply(this,arguments)}}($.fn.addClass),removeClass:function(orig){return function(classNames,speed,easing,callback){return arguments.length>1?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):orig.apply(this,arguments)}}($.fn.removeClass),
toggleClass:function(orig){return function(classNames,force,speed,easing,callback){if(typeof force==="boolean"||force===undefined)if(!speed)return orig.apply(this,arguments);else return $.effects.animateClass.call(this,force?{add:classNames}:{remove:classNames},speed,easing,callback);else return $.effects.animateClass.call(this,{toggle:classNames},force,speed,easing)}}($.fn.toggleClass),switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},
speed,easing,callback)}})})();(function(){$.extend($.effects,{version:"1.10.3",save:function(element,set){for(var i=0;i<set.length;i++)if(set[i]!==null)element.data(dataSpace+set[i],element[0].style[set[i]])},restore:function(element,set){var val,i;for(i=0;i<set.length;i++)if(set[i]!==null){val=element.data(dataSpace+set[i]);if(val===undefined)val="";element.css(set[i],val)}},setMode:function(el,mode){if(mode==="toggle")mode=el.is(":hidden")?"show":"hide";return mode},getBaseline:function(origin,
original){var y,x;switch(origin[0]){case "top":y=0;break;case "middle":y=0.5;break;case "bottom":y=1;break;default:y=origin[0]/original.height}switch(origin[1]){case "left":x=0;break;case "center":x=0.5;break;case "right":x=1;break;default:x=origin[1]/original.width}return{x:x,y:y}},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper"))return element.parent();var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("\x3cdiv\x3e\x3c/div\x3e").addClass("ui-effects-wrapper").css({fontSize:"100%",
background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id}catch(e){active=document.body}element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active))$(active).focus();wrapper=element.parent();if(element.css("position")==="static"){wrapper.css({position:"relative"});element.css({position:"relative"})}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});
$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10)))props[pos]="auto"});element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}element.css(size);return wrapper.css(props).show()},removeWrapper:function(element){var active=document.activeElement;if(element.parent().is(".ui-effects-wrapper")){element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active))$(active).focus()}return element},
setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){var unit=element.cssUnit(x);if(unit[0]>0)value[x]=unit[0]*factor+unit[1]});return value}});function _normalizeArguments(effect,options,speed,callback){if($.isPlainObject(effect)){options=effect;effect=effect.effect}effect={effect:effect};if(options==null)options={};if($.isFunction(options)){callback=options;speed=null;options={}}if(typeof options==="number"||$.fx.speeds[options]){callback=speed;speed=options;
options={}}if($.isFunction(speed)){callback=speed;speed=null}if(options)$.extend(effect,options);speed=speed||options.duration;effect.duration=$.fx.off?0:typeof speed==="number"?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;effect.complete=callback||options.complete;return effect}function standardAnimationOption(option){if(!option||(typeof option==="number"||$.fx.speeds[option]))return true;if(typeof option==="string"&&!$.effects.effect[option])return true;if($.isFunction(option))return true;
if(typeof option==="object"&&!option.effect)return true;return false}$.fn.extend({effect:function(){var args=_normalizeArguments.apply(this,arguments),mode=args.mode,queue=args.queue,effectMethod=$.effects.effect[args.effect];if($.fx.off||!effectMethod)if(mode)return this[mode](args.duration,args.complete);else return this.each(function(){if(args.complete)args.complete.call(this)});function run(next){var elem=$(this),complete=args.complete,mode=args.mode;function done(){if($.isFunction(complete))complete.call(elem[0]);
if($.isFunction(next))next()}if(elem.is(":hidden")?mode==="hide":mode==="show"){elem[mode]();done()}else effectMethod.call(elem[0],args,done)}return queue===false?this.each(run):this.queue(queue||"fx",run)},show:function(orig){return function(option){if(standardAnimationOption(option))return orig.apply(this,arguments);else{var args=_normalizeArguments.apply(this,arguments);args.mode="show";return this.effect.call(this,args)}}}($.fn.show),hide:function(orig){return function(option){if(standardAnimationOption(option))return orig.apply(this,
arguments);else{var args=_normalizeArguments.apply(this,arguments);args.mode="hide";return this.effect.call(this,args)}}}($.fn.hide),toggle:function(orig){return function(option){if(standardAnimationOption(option)||typeof option==="boolean")return orig.apply(this,arguments);else{var args=_normalizeArguments.apply(this,arguments);args.mode="toggle";return this.effect.call(this,args)}}}($.fn.toggle),cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>
0)val=[parseFloat(style),unit]});return val}})})();(function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2)}});$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2)},Circ:function(p){return 1-Math.sqrt(1-p*p)},Elastic:function(p){return p===0||p===1?p:-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI/15)},Back:function(p){return p*p*(3*p-2)},Bounce:function(p){var pow2,bounce=4;while(p<((pow2=
Math.pow(2,--bounce))-1)/11);return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((pow2*3-2)/22-p,2)}});$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn;$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p)};$.easing["easeInOut"+name]=function(p){return p<0.5?easeIn(p*2)/2:1-easeIn(p*-2+2)/2}})})()})(jQuery);
(function($,undefined){var uid=0,hideProps={},showProps={};hideProps.height=hideProps.paddingTop=hideProps.paddingBottom=hideProps.borderTopWidth=hideProps.borderBottomWidth="hide";showProps.height=showProps.paddingTop=showProps.paddingBottom=showProps.borderTopWidth=showProps.borderBottomWidth="show";$.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:false,event:"click",header:"\x3e li \x3e :first-child,\x3e :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",
header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var options=this.options;this.prevShow=this.prevHide=$();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");if(!options.collapsible&&(options.active===false||options.active==null))options.active=0;this._processPanels();if(options.active<0)options.active+=this.headers.length;this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?$():this.active.next(),
content:!this.active.length?$():this.active.next()}},_createIcons:function(){var icons=this.options.icons;if(icons){$("\x3cspan\x3e").addClass("ui-accordion-header-icon ui-icon "+icons.header).prependTo(this.headers);this.active.children(".ui-accordion-header-icon").removeClass(icons.header).addClass(icons.activeHeader);this.headers.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var contents;
this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){if(/^ui-accordion/.test(this.id))this.removeAttribute("id")});this._destroyIcons();contents=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){if(/^ui-accordion/.test(this.id))this.removeAttribute("id")});
if(this.options.heightStyle!=="content")contents.css("height","")},_setOption:function(key,value){if(key==="active"){this._activate(value);return}if(key==="event"){if(this.options.event)this._off(this.headers,this.options.event);this._setupEvents(value)}this._super(key,value);if(key==="collapsible"&&(!value&&this.options.active===false))this._activate(0);if(key==="icons"){this._destroyIcons();if(value)this._createIcons()}if(key==="disabled")this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",
!!value)},_keydown:function(event){if(event.altKey||event.ctrlKey)return;var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];
break;case keyCode.END:toFocus=this.headers[length-1];break}if(toFocus){$(event.target).attr("tabIndex",-1);$(toFocus).attr("tabIndex",0);toFocus.focus();event.preventDefault()}},_panelKeyDown:function(event){if(event.keyCode===$.ui.keyCode.UP&&event.ctrlKey)$(event.currentTarget).prev().focus()},refresh:function(){var options=this.options;this._processPanels();if(options.active===false&&options.collapsible===true||!this.headers.length){options.active=false;this.active=$()}else if(options.active===
false)this._activate(0);else if(this.active.length&&!$.contains(this.element[0],this.active[0]))if(this.headers.length===this.headers.find(".ui-state-disabled").length){options.active=false;this.active=$()}else this._activate(Math.max(0,options.active-1));else options.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");
this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var maxHeight,options=this.options,heightStyle=options.heightStyle,parent=this.element.parent(),accordionId=this.accordionId="ui-accordion-"+(this.element.attr("id")||++uid);this.active=this._findActive(options.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();
this.headers.attr("role","tab").each(function(i){var header=$(this),headerId=header.attr("id"),panel=header.next(),panelId=panel.attr("id");if(!headerId){headerId=accordionId+"-header-"+i;header.attr("id",headerId)}if(!panelId){panelId=accordionId+"-panel-"+i;panel.attr("id",panelId)}header.attr("aria-controls",panelId);panel.attr("aria-labelledby",headerId)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false",
"aria-hidden":"true"}).hide();if(!this.active.length)this.headers.eq(0).attr("tabIndex",0);else this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"});this._createIcons();this._setupEvents(options.event);if(heightStyle==="fill"){maxHeight=parent.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed")return;maxHeight-=elem.outerHeight(true)});this.headers.each(function(){maxHeight-=
$(this).outerHeight(true)});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")}else if(heightStyle==="auto"){maxHeight=0;this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).css("height","").height())}).height(maxHeight)}},_activate:function(index){var active=this._findActive(index)[0];if(active===this.active[0])return;active=active||this.active[0];this._eventHandler({target:active,currentTarget:active,
preventDefault:$.noop})},_findActive:function(selector){return typeof selector==="number"?this.headers.eq(selector):$()},_setupEvents:function(event){var events={keydown:"_keydown"};if(event)$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,events);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(event){var options=
this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault();if(clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===false)return;options.active=collapsing?false:this.headers.index(clicked);this.active=
clickedIsActive?$():clicked;this._toggle(eventData);active.removeClass("ui-accordion-header-active ui-state-active");if(options.icons)active.children(".ui-accordion-header-icon").removeClass(options.icons.activeHeader).addClass(options.icons.header);if(!clickedIsActive){clicked.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top");if(options.icons)clicked.children(".ui-accordion-header-icon").removeClass(options.icons.header).addClass(options.icons.activeHeader);
clicked.next().addClass("ui-accordion-content-active")}},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=toShow;this.prevHide=toHide;if(this.options.animate)this._animate(toShow,toHide,data);else{toHide.hide();toShow.show();this._toggleComplete(data)}toHide.attr({"aria-expanded":"false","aria-hidden":"true"});toHide.prev().attr("aria-selected","false");if(toShow.length&&toHide.length)toHide.prev().attr("tabIndex",
-1);else if(toShow.length)this.headers.filter(function(){return $(this).attr("tabIndex")===0}).attr("tabIndex",-1);toShow.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,down=toShow.length&&(!toHide.length||toShow.index()<toHide.index()),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data)};if(typeof options===
"number")duration=options;if(typeof options==="string")easing=options;easing=easing||(options.easing||animate.easing);duration=duration||(options.duration||animate.duration);if(!toHide.length)return toShow.animate(showProps,duration,easing,complete);if(!toShow.length)return toHide.animate(hideProps,duration,easing,complete);total=toShow.show().outerHeight();toHide.animate(hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now)}});toShow.hide().animate(showProps,{duration:duration,
easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now);if(fx.prop!=="height")adjust+=fx.now;else if(that.options.heightStyle!=="content"){fx.now=Math.round(total-toHide.outerHeight()-adjust);adjust=0}}})},_toggleComplete:function(data){var toHide=data.oldPanel;toHide.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");if(toHide.length)toHide.parent()[0].className=toHide.parent()[0].className;this._trigger("activate",null,data)}})})(jQuery);
(function($,undefined){var requestIndex=0;$.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"\x3cinput\x3e",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea=nodeName==="textarea",
isInput=nodeName==="input";this.isMultiLine=isTextarea?true:isInput?false:this.element.prop("isContentEditable");this.valueMethod=this.element[isTextarea||isInput?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=true;suppressInput=true;suppressKeyPressRepeat=true;return}suppressKeyPress=false;suppressInput=false;suppressKeyPressRepeat=false;var keyCode=
$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=true;this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=true;this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=true;this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=true;this._keyEvent("next",event);break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:if(this.menu.active){suppressKeyPress=true;event.preventDefault();this.menu.select(event)}break;case keyCode.TAB:if(this.menu.active)this.menu.select(event);
break;case keyCode.ESCAPE:if(this.menu.element.is(":visible")){this._value(this.term);this.close(event);event.preventDefault()}break;default:suppressKeyPressRepeat=true;this._searchTimeout(event);break}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=false;if(!this.isMultiLine||this.menu.element.is(":visible"))event.preventDefault();return}if(suppressKeyPressRepeat)return;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",
event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event);break}},input:function(event){if(suppressInput){suppressInput=false;event.preventDefault();return}this._searchTimeout(event)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(event);this._change(event)}});this._initSource();this.menu=$("\x3cul\x3e").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu");
this._on(this.menu.element,{mousedown:function(event){event.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var menuElement=this.menu.element[0];if(!$(event.target).closest(".ui-menu-item").length)this._delay(function(){var that=this;this.document.one("mousedown",function(event){if(event.target!==that.element[0]&&(event.target!==menuElement&&!$.contains(menuElement,event.target)))that.close()})})},menufocus:function(event,ui){if(this.isNewMenu){this.isNewMenu=
false;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent)});return}}var item=ui.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",event,{item:item})){if(event.originalEvent&&/^key/.test(event.originalEvent.type))this._value(item.value)}else this.liveRegion.text(item.value)},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;
if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;this.selectedItem=item})}if(false!==this._trigger("select",event,{item:item}))this._value(item.value);this.term=this._value();this.close(event);this.selectedItem=item}});this.liveRegion=$("\x3cspan\x3e",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},
_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(key,value){this._super(key,value);if(key==="source")this._initSource();if(key==="appendTo")this.menu.element.appendTo(this._appendTo());if(key==="disabled"&&(value&&this.xhr))this.xhr.abort()},_appendTo:function(){var element=this.options.appendTo;if(element)element=element.jquery||element.nodeType?$(element):
this.document.find(element).eq(0);if(!element)element=this.element.closest(".ui-front");if(!element.length)element=this.document[0].body;return element},_initSource:function(){var array,url,that=this;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term))}}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(that.xhr)that.xhr.abort();that.xhr=
$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data)},error:function(){response([])}})}}else this.source=this.options.source},_searchTimeout:function(event){clearTimeout(this.searching);this.searching=this._delay(function(){if(this.term!==this._value()){this.selectedItem=null;this.search(null,event)}},this.options.delay)},search:function(value,event){value=value!=null?value:this._value();this.term=this._value();if(value.length<this.options.minLength)return this.close(event);
if(this._trigger("search",event)===false)return;return this._search(value)},_search:function(value){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:value},this._response())},_response:function(){var that=this,index=++requestIndex;return function(content){if(index===requestIndex)that.__response(content);that.pending--;if(!that.pending)that.element.removeClass("ui-autocomplete-loading")}},__response:function(content){if(content)content=this._normalize(content);
this._trigger("response",null,{content:content});if(!this.options.disabled&&(content&&(content.length&&!this.cancelSearch))){this._suggest(content);this._trigger("open")}else this._close()},close:function(event){this.cancelSearch=true;this._close(event)},_close:function(event){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",event)}},_change:function(event){if(this.previous!==this._value())this._trigger("change",event,{item:this.selectedItem})},
_normalize:function(items){if(items.length&&(items[0].label&&items[0].value))return items;return $.map(items,function(item){if(typeof item==="string")return{label:item,value:item};return $.extend({label:item.label||item.value,value:item.value||item.label},item)})},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items);this.isNewMenu=true;this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus)this.menu.next()},
_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item)})},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item)},_renderItem:function(ul,item){return $("\x3cli\x3e").append($("\x3ca\x3e").text(item.label)).appendTo(ul)},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,
event);return}if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){this._value(this.term);this.menu.blur();return}this.menu[direction](event)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault()}}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$\x26")},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||(value.value||value))})}});$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(content){var message;this._superApply(arguments);if(this.options.disabled||
this.cancelSearch)return;if(content&&content.length)message=this.options.messages.results(content.length);else message=this.options.messages.noResults;this.liveRegion.text(message)}})})(jQuery);
(function($,undefined){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var form=$(this);setTimeout(function(){form.find(":ui-button").button("refresh")},1)},radioGroup=function(radio){var name=radio.name,form=
radio.form,radios=$([]);if(name){name=name.replace(/'/g,"\\'");if(form)radios=$(form).find("[name\x3d'"+name+"']");else radios=$("[name\x3d'"+name+"']",radio.ownerDocument).filter(function(){return!this.form})}return radios};$.widget("ui.button",{version:"1.10.3",defaultElement:"\x3cbutton\x3e",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler);
if(typeof this.options.disabled!=="boolean")this.options.disabled=!!this.element.prop("disabled");else this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",activeClass=!toggleButton?"ui-state-active":"",focusClass="ui-state-focus";if(options.label===null)options.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html();
this._hoverable(this.buttonElement);this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(options.disabled)return;if(this===lastActive)$(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(options.disabled)return;$(this).removeClass(activeClass)}).bind("click"+this.eventNamespace,function(event){if(options.disabled){event.preventDefault();event.stopImmediatePropagation()}});this.element.bind("focus"+this.eventNamespace,
function(){that.buttonElement.addClass(focusClass)}).bind("blur"+this.eventNamespace,function(){that.buttonElement.removeClass(focusClass)});if(toggleButton){this.element.bind("change"+this.eventNamespace,function(){if(clickDragged)return;that.refresh()});this.buttonElement.bind("mousedown"+this.eventNamespace,function(event){if(options.disabled)return;clickDragged=false;startXPos=event.pageX;startYPos=event.pageY}).bind("mouseup"+this.eventNamespace,function(event){if(options.disabled)return;if(startXPos!==
event.pageX||startYPos!==event.pageY)clickDragged=true})}if(this.type==="checkbox")this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged)return false});else if(this.type==="radio")this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged)return false;$(this).addClass("ui-state-active");that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",
"false")});else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(options.disabled)return false;$(this).addClass("ui-state-active");lastActive=this;that.document.one("mouseup",function(){lastActive=null})}).bind("mouseup"+this.eventNamespace,function(){if(options.disabled)return false;$(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(event){if(options.disabled)return false;if(event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER)$(this).addClass("ui-state-active")}).bind("keyup"+
this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active")});if(this.buttonElement.is("a"))this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE)$(this).click()})}this._setOption("disabled",options.disabled);this._resetButton()},_determineButtonType:function(){var ancestor,labelSelector,checked;if(this.element.is("[type\x3dcheckbox]"))this.type="checkbox";else if(this.element.is("[type\x3dradio]"))this.type="radio";else if(this.element.is("input"))this.type=
"input";else this.type="button";if(this.type==="checkbox"||this.type==="radio"){ancestor=this.element.parents().last();labelSelector="label[for\x3d'"+this.element.attr("id")+"']";this.buttonElement=ancestor.find(labelSelector);if(!this.buttonElement.length){ancestor=ancestor.length?ancestor.siblings():this.element.siblings();this.buttonElement=ancestor.filter(labelSelector);if(!this.buttonElement.length)this.buttonElement=ancestor.find(labelSelector)}this.element.addClass("ui-helper-hidden-accessible");
checked=this.element.is(":checked");if(checked)this.buttonElement.addClass("ui-state-active");this.buttonElement.prop("aria-pressed",checked)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle)this.buttonElement.removeAttr("title")},
_setOption:function(key,value){this._super(key,value);if(key==="disabled"){if(value)this.element.prop("disabled",true);else this.element.prop("disabled",false);return}this._resetButton()},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");if(isDisabled!==this.options.disabled)this._setOption("disabled",isDisabled);if(this.type==="radio")radioGroup(this.element[0]).each(function(){if($(this).is(":checked"))$(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true");else $(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")});else if(this.type==="checkbox")if(this.element.is(":checked"))this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true");else this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")},_resetButton:function(){if(this.type==="input"){if(this.options.label)this.element.val(this.options.label);return}var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=
$("\x3cspan\x3e\x3c/span\x3e",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];if(icons.primary||icons.secondary){if(this.options.text)buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":icons.primary?"-primary":"-secondary"));if(icons.primary)buttonElement.prepend("\x3cspan class\x3d'ui-button-icon-primary ui-icon "+icons.primary+"'\x3e\x3c/span\x3e");
if(icons.secondary)buttonElement.append("\x3cspan class\x3d'ui-button-icon-secondary ui-icon "+icons.secondary+"'\x3e\x3c/span\x3e");if(!this.options.text){buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle)buttonElement.attr("title",$.trim(buttonText))}}else buttonClasses.push("ui-button-text-only");buttonElement.addClass(buttonClasses.join(" "))}});$.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type\x3dbutton], input[type\x3dsubmit], input[type\x3dreset], input[type\x3dcheckbox], input[type\x3dradio], a, :data(ui-button)"},
_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(key,value){if(key==="disabled")this.buttons.button("option",key,value);this._super(key,value)},refresh:function(){var rtl=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?
"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);
(function($,undefined){$.extend($.ui,{datepicker:{version:"1.10.3"}});var PROP_NAME="datepicker",instActive;function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass=
"ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday",
"Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",
showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=bindHover($("\x3cdiv id\x3d'"+this._mainDivId+
"' class\x3d'ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'\x3e\x3c/div\x3e"))}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=nodeName==="div"||nodeName==="span";if(!target.id){this.uuid+=1;target.id=
"dp"+this.uuid}inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input")this._connectDatepicker(target,inst);else if(inline)this._inlineDatepicker(target,inst)},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:!inline?this.dpDiv:bindHover($("\x3cdiv class\x3d'"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'\x3e\x3c/div\x3e"))}},
_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName))return;this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(inst);$.data(target,PROP_NAME,inst);if(inst.settings.disabled)this._disableDatepicker(target)},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),
isRTL=this._get(inst,"isRTL");if(inst.append)inst.append.remove();if(appendText){inst.append=$("\x3cspan class\x3d'"+this._appendClass+"'\x3e"+appendText+"\x3c/span\x3e");input[isRTL?"before":"after"](inst.append)}input.unbind("focus",this._showDatepicker);if(inst.trigger)inst.trigger.remove();showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both")input.focus(this._showDatepicker);if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,
"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("\x3cimg/\x3e").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("\x3cbutton type\x3d'button'\x3e\x3c/button\x3e").addClass(this._triggerClass).html(!buttonImage?buttonText:$("\x3cimg/\x3e").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0])$.datepicker._hideDatepicker();
else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0])}else $.datepicker._showDatepicker(input[0]);return false})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++)if(names[i].length>max){max=names[i].length;
maxI=i}return maxI};date.setMonth(findMax(this._get(inst,dateFormat.match(/MM/)?"monthNames":"monthNamesShort")));date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName))return;divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),
true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled)this._disableDatepicker(target);inst.dpDiv.css("display","block")},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("\x3cinput type\x3d'text' id\x3d'"+id+"' style\x3d'position: absolute; top: -100px; width: 0px;'/\x3e");this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);
inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{});date=date&&date.constructor===Date?this._formatDate(inst,date):date;this._dialogInput.val(date);this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null;if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;
scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI)$.blockUI(this.dpDiv);$.data(this._dialogInput[0],PROP_NAME,inst);return this},_destroyDatepicker:function(target){var nodeName,$target=$(target),
inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName))return;nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(nodeName==="div"||nodeName==="span")$target.removeClass(this.markerClassName).empty()},_enableDatepicker:function(target){var nodeName,
inline,$target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName))return;nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
false)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value})},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName))return;nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(nodeName==="div"||nodeName===
"span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target)return false;for(var i=0;i<this._disabledInputs.length;i++)if(this._disabledInputs[i]===target)return true;
return false},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string")return name==="defaults"?$.extend({},$.datepicker._defaults):inst?name==="all"?$.extend({},inst.settings):this._get(inst,name):null;settings=name||{};if(typeof name==="string"){settings={};settings[name]=value}if(inst){if(this._curInst===
inst)this._hideDatepicker();date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");extendRemove(inst.settings,settings);if(minDate!==null&&(settings.dateFormat!==undefined&&settings.minDate===undefined))inst.settings.minDate=this._formatDate(inst,minDate);if(maxDate!==null&&(settings.dateFormat!==undefined&&settings.maxDate===undefined))inst.settings.maxDate=this._formatDate(inst,maxDate);if("disabled"in settings)if(settings.disabled)this._disableDatepicker(target);
else this._enableDatepicker(target);this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst)this._updateDatepicker(inst)},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);
this._updateAlternate(inst)}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline)this._setDateFromField(inst,noDefault);return inst?this._getDate(inst):null},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing)switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=
$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);if(sel[0])$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])}else $.datepicker._hideDatepicker();return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,
"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:if(event.ctrlKey||event.metaKey)$.datepicker._clearDate(event.target);handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey)$.datepicker._gotoToday(event.target);handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,
isRTL?+1:-1,"D");handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 38:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,-7,"D");handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,isRTL?-1:+1,"D");handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)$.datepicker._adjustDate(event.target,
event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 40:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,+7,"D");handled=event.ctrlKey||event.metaKey;break;default:handled=false}else if(event.keyCode===36&&event.ctrlKey)$.datepicker._showDatepicker(this);else handled=false;if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,
"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||(event.metaKey||(chr<" "||(!chars||chars.indexOf(chr)>-1)))}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal)try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);
$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst)}}catch(err){}return true},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input")input=$("input",input.parentNode)[0];if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input)return;var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,
true);if(inst&&$.datepicker._datepickerShowing)$.datepicker._hideDatepicker($.datepicker._curInst.input[0])}beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false)return;extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog)input.value="";if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);
$.datepicker._pos[1]+=input.offsetHeight}isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return!isFixed});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",
display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.zIndex($(input).zIndex()+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim])inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration);else inst.dpDiv[showAnim||"show"](showAnim?duration:null);if($.datepicker._shouldFocusInput(inst))inst.input.focus();$.datepicker._curInst=inst}},_updateDatepicker:function(inst){this.maxRows=
4;instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);inst.dpDiv.find("."+this._dayOverClass+" a").mouseover();var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17;inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1)inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",width*cols+"em");inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");
inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&($.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)))inst.input.focus();if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml)inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);origyearshtml=inst.yearshtml=null},0)}},_shouldFocusInput:function(inst){return inst.input&&(inst.input.is(":visible")&&
(!inst.input.is(":disabled")&&!inst.input.is(":focus")))},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0;offset.left-=
isFixed&&offset.left===inst.input.offset().left?$(document).scrollLeft():0;offset.top-=isFixed&&offset.top===inst.input.offset().top+inputHeight?$(document).scrollTop():0;offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight):0);return offset},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,
"isRTL");while(obj&&(obj.type==="hidden"||(obj.nodeType!==1||$.expr.filters.hidden(obj))))obj=obj[isRTL?"previousSibling":"nextSibling"];position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||input&&inst!==$.data(input,PROP_NAME))return;if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst)};
if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim]))inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);else inst.dpDiv[showAnim==="slideDown"?"slideUp":showAnim==="fadeIn"?"fadeOut":"hide"](showAnim?duration:null,postProcess);if(!showAnim)postProcess();this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose)onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst]);this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",
left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst)return;var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if($target[0].id!==$.datepicker._mainDivId&&($target.parents("#"+$.datepicker._mainDivId).length===0&&(!$target.hasClass($.datepicker.markerClassName)&&(!$target.closest("."+
$.datepicker._triggerClass).length&&($.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))))||$target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)$.datepicker._hideDatepicker()},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0]))return;this._adjustInstDate(inst,offset+(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var date,
target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{date=new Date;inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);
inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0]))return;inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=
year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id);this._selectDate(target,"")},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=dateStr!=null?dateStr:this._formatDate(inst);if(inst.input)inst.input.val(dateStr);this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect)onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst]);else if(inst.input)inst.input.trigger("change");
if(inst.inline)this._updateDatepicker(inst);else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof inst.input[0]!=="object")inst.input.focus();this._lastInput=null}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},
noWeekends:function(date){var day=date.getDay();return[day>0&&day<6,""]},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/864E5)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null)throw"Invalid arguments";value=typeof value==="object"?value.toString():value+"";if(value==="")return null;
var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:(new Date).getFullYear()%100+parseInt(shortYearCutoffTemp,10),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=
(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches)iFormat++;return matches},getNumber=function(match){var isDoubled=lookAhead(match),size=match==="@"?14:match==="!"?20:match==="y"&&isDoubled?4:match==="o"?3:2,digits=new RegExp("^\\d{1,"+size+"}"),num=value.substring(iValue).match(digits);if(!num)throw"Missing number at position "+
iValue;iValue+=num[0].length;return parseInt(num[0],10)},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]]}).sort(function(a,b){return-(a[1].length-b[1].length)});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false}});if(index!==-1)return index+1;else throw"Unknown name at position "+iValue;},checkLiteral=
function(){if(value.charAt(iValue)!==format.charAt(iFormat))throw"Unexpected literal at position "+iValue;iValue++};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)if(format.charAt(iFormat)==="'"&&!lookAhead("'"))literal=false;else checkLiteral();else switch(format.charAt(iFormat)){case "d":day=getNumber("d");break;case "D":getName("D",dayNamesShort,dayNames);break;case "o":doy=getNumber("o");break;case "m":month=getNumber("m");break;case "M":month=getName("M",monthNamesShort,monthNames);
break;case "y":year=getNumber("y");break;case "@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case "!":date=new Date((getNumber("!")-this._ticksTo1970)/1E4);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case "'":if(lookAhead("'"))checkLiteral();else literal=true;break;default:checkLiteral()}if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra))throw"Extra/unparsed characters found in date: "+
extra;}if(year===-1)year=(new Date).getFullYear();else if(year<100)year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(year<=shortYearCutoff?0:-100);if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim)break;month++;day-=dim}while(true)}date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!==year||(date.getMonth()+1!==month||date.getDate()!==day))throw"Invalid date";return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1E7,formatDate:function(format,date,settings){if(!date)return"";var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?
settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches)iFormat++;return matches},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match))while(num.length<len)num="0"+num;return num},formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]},
output="",literal=false;if(date)for(iFormat=0;iFormat<format.length;iFormat++)if(literal)if(format.charAt(iFormat)==="'"&&!lookAhead("'"))literal=false;else output+=format.charAt(iFormat);else switch(format.charAt(iFormat)){case "d":output+=formatNumber("d",date.getDate(),2);break;case "D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case "o":output+=formatNumber("o",Math.round(((new Date(date.getFullYear(),date.getMonth(),date.getDate())).getTime()-(new Date(date.getFullYear(),
0,0)).getTime())/864E5),3);break;case "m":output+=formatNumber("m",date.getMonth()+1,2);break;case "M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case "y":output+=lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100;break;case "@":output+=date.getTime();break;case "!":output+=date.getTime()*1E4+this._ticksTo1970;break;case "'":if(lookAhead("'"))output+="'";else literal=true;break;default:output+=format.charAt(iFormat)}return output},_possibleChars:function(format){var iFormat,
chars="",literal=false,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches)iFormat++;return matches};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)if(format.charAt(iFormat)==="'"&&!lookAhead("'"))literal=false;else chars+=format.charAt(iFormat);else switch(format.charAt(iFormat)){case "d":case "m":case "y":case "@":chars+="0123456789";break;case "D":case "M":return null;case "'":if(lookAhead("'"))chars+="'";else literal=true;break;
default:chars+=format.charAt(iFormat)}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal)return;var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){dates=
noDefault?"":dates}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=dates?date.getDate():0;inst.currentMonth=dates?date.getMonth():0;inst.currentYear=dates?date.getFullYear():0;this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=
function(offset){var date=new Date;date.setDate(date.getDate()+offset);return date},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date,year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||
"d"){case "d":case "D":day+=parseInt(matches[1],10);break;case "w":case "W":day+=parseInt(matches[1],10)*7;break;case "m":case "M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case "y":case "Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)},newDate=date==null||date===""?defaultDate:typeof date==="string"?offsetString(date):typeof date==="number"?
isNaN(date)?defaultDate:offsetNumeric(date):new Date(date.getTime());newDate=newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate;if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0)}return this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){if(!date)return null;date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=
inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange)this._notifyChange(inst);this._adjustInstDate(inst);if(inst.input)inst.input.val(clear?"":this._formatDate(inst))},_getDate:function(inst){var startDate=
!inst.currentYear||inst.input&&inst.input.val()===""?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M")},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){$.datepicker._hideDatepicker()},
today:function(){$.datepicker._gotoToday(id)},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");return false},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,
gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date,today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,
"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=numMonths[0]!==1||numMonths[1]!==1,currentDate=this._daylightSavingAdjust(!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,
"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate()));maxDraw=minDate&&maxDraw<minDate?minDate:maxDraw;while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,
"prevText");prevText=!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst));prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"\x3ca class\x3d'ui-datepicker-prev ui-corner-all' data-handler\x3d'prev' data-event\x3d'click'"+" title\x3d'"+prevText+"'\x3e\x3cspan class\x3d'ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'\x3e"+prevText+"\x3c/span\x3e\x3c/a\x3e":hideIfNoPrevNext?"":"\x3ca class\x3d'ui-datepicker-prev ui-corner-all ui-state-disabled' title\x3d'"+
prevText+"'\x3e\x3cspan class\x3d'ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'\x3e"+prevText+"\x3c/span\x3e\x3c/a\x3e";nextText=this._get(inst,"nextText");nextText=!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst));next=this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"\x3ca class\x3d'ui-datepicker-next ui-corner-all' data-handler\x3d'next' data-event\x3d'click'"+" title\x3d'"+nextText+
"'\x3e\x3cspan class\x3d'ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'\x3e"+nextText+"\x3c/span\x3e\x3c/a\x3e":hideIfNoPrevNext?"":"\x3ca class\x3d'ui-datepicker-next ui-corner-all ui-state-disabled' title\x3d'"+nextText+"'\x3e\x3cspan class\x3d'ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'\x3e"+nextText+"\x3c/span\x3e\x3c/a\x3e";currentText=this._get(inst,"currentText");gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today;currentText=!navigationAsDateFormat?currentText:
this.formatDate(currentText,gotoDate,this._getFormatConfig(inst));controls=!inst.inline?"\x3cbutton type\x3d'button' class\x3d'ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler\x3d'hide' data-event\x3d'click'\x3e"+this._get(inst,"closeText")+"\x3c/button\x3e":"";buttonPanel=showButtonPanel?"\x3cdiv class\x3d'ui-datepicker-buttonpane ui-widget-content'\x3e"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"\x3cbutton type\x3d'button' class\x3d'ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler\x3d'today' data-event\x3d'click'"+
"\x3e"+currentText+"\x3c/button\x3e":"")+(isRTL?"":controls)+"\x3c/div\x3e":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=isNaN(firstDay)?0:firstDay;showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");
defaultDate=this._getDefaultDate(inst);html="";dow;for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="\x3cdiv class\x3d'ui-datepicker-group";if(numMonths[1]>1)switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";
cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break}calender+="'\x3e"}calender+="\x3cdiv class\x3d'ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'\x3e"+(/all|left/.test(cornerClass)&&row===0?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&row===0?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"\x3c/div\x3e\x3ctable class\x3d'ui-datepicker-calendar'\x3e\x3cthead\x3e"+
"\x3ctr\x3e";thead=showWeek?"\x3cth class\x3d'ui-datepicker-week-col'\x3e"+this._get(inst,"weekHeader")+"\x3c/th\x3e":"";for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="\x3cth"+((dow+firstDay+6)%7>=5?" class\x3d'ui-datepicker-week-end'":"")+"\x3e"+"\x3cspan title\x3d'"+dayNames[day]+"'\x3e"+dayNamesMin[day]+"\x3c/span\x3e\x3c/th\x3e"}calender+=thead+"\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth)inst.selectedDay=
Math.min(inst.selectedDay,daysInMonth);leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows;this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="\x3ctr\x3e";tbody=!showWeek?"":"\x3ctd class\x3d'ui-datepicker-week-col'\x3e"+this._get(inst,"calculateWeek")(printDate)+"\x3c/td\x3e";for(dow=
0;dow<7;dow++){daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[true,""];otherMonth=printDate.getMonth()!==drawMonth;unselectable=otherMonth&&!selectOtherMonths||(!daySettings[0]||(minDate&&printDate<minDate||maxDate&&printDate>maxDate));tbody+="\x3ctd class\x3d'"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()===selectedDate.getTime()&&(drawMonth===inst.selectedMonth&&inst._keyEvent)||
defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+((!otherMonth||showOtherMonths)&&daySettings[2]?" title\x3d'"+daySettings[2].replace(/'/g,"\x26#39;")+"'":"")+(unselectable?
"":" data-handler\x3d'selectDay' data-event\x3d'click' data-month\x3d'"+printDate.getMonth()+"' data-year\x3d'"+printDate.getFullYear()+"'")+"\x3e"+(otherMonth&&!showOtherMonths?"\x26#xa0;":unselectable?"\x3cspan class\x3d'ui-state-default'\x3e"+printDate.getDate()+"\x3c/span\x3e":"\x3ca class\x3d'ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href\x3d'#'\x3e"+
printDate.getDate()+"\x3c/a\x3e")+"\x3c/td\x3e";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"\x3c/tr\x3e"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="\x3c/tbody\x3e\x3c/table\x3e"+(isMultiMonth?"\x3c/div\x3e"+(numMonths[0]>0&&col===numMonths[1]-1?"\x3cdiv class\x3d'ui-datepicker-row-break'\x3e\x3c/div\x3e":""):"");group+=calender}html+=group}html+=buttonPanel;inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,
drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="\x3cdiv class\x3d'ui-datepicker-title'\x3e",monthHtml="";if(secondary||!changeMonth)monthHtml+="\x3cspan class\x3d'ui-datepicker-month'\x3e"+monthNames[drawMonth]+"\x3c/span\x3e";else{inMinYear=minDate&&minDate.getFullYear()===
drawYear;inMaxYear=maxDate&&maxDate.getFullYear()===drawYear;monthHtml+="\x3cselect class\x3d'ui-datepicker-month' data-handler\x3d'selectMonth' data-event\x3d'change'\x3e";for(month=0;month<12;month++)if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth()))monthHtml+="\x3coption value\x3d'"+month+"'"+(month===drawMonth?" selected\x3d'selected'":"")+"\x3e"+monthNamesShort[month]+"\x3c/option\x3e";monthHtml+="\x3c/select\x3e"}if(!showMonthAfterYear)html+=monthHtml+(secondary||
!(changeMonth&&changeYear)?"\x26#xa0;":"");if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear)html+="\x3cspan class\x3d'ui-datepicker-year'\x3e"+drawYear+"\x3c/span\x3e";else{years=this._get(inst,"yearRange").split(":");thisYear=(new Date).getFullYear();determineYear=function(value){var year=value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year};year=determineYear(years[0]);
endYear=Math.max(year,determineYear(years[1]||""));year=minDate?Math.max(year,minDate.getFullYear()):year;endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear;inst.yearshtml+="\x3cselect class\x3d'ui-datepicker-year' data-handler\x3d'selectYear' data-event\x3d'change'\x3e";for(;year<=endYear;year++)inst.yearshtml+="\x3coption value\x3d'"+year+"'"+(year===drawYear?" selected\x3d'selected'":"")+"\x3e"+year+"\x3c/option\x3e";inst.yearshtml+="\x3c/select\x3e";html+=inst.yearshtml;inst.yearshtml=
null}}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear)html+=(secondary||!(changeMonth&&changeYear)?"\x26#xa0;":"")+monthHtml;html+="\x3c/div\x3e";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period==="Y"?offset:0),month=inst.drawMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();
inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y")this._notifyChange(inst)},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=minDate&&date<minDate?minDate:date;return maxDate&&newDate>maxDate?maxDate:newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange)onChange.apply(inst.input?inst.input[0]:null,
[inst.selectedYear,inst.selectedMonth+1,inst])},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return numMonths==null?[1,1]:typeof numMonths==="number"?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return(new Date(year,month,1)).getDay()},
_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0)date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));return this._isInRange(inst,date)},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,
"yearRange");if(years){yearSplit=years.split(":");currentYear=(new Date).getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/))minYear+=currentYear;if(yearSplit[1].match(/[+\-].*/))maxYear+=currentYear}return(!minDate||date.getTime()>=minDate.getTime())&&((!maxDate||date.getTime()<=maxDate.getTime())&&((!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear)))},_getFormatConfig:function(inst){var shortYearCutoff=
this._get(inst,"shortYearCutoff");shortYearCutoff=typeof shortYearCutoff!=="string"?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10);return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=
inst.selectedYear}var date=day?typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==
-1)$(this).removeClass("ui-datepicker-prev-hover");if(this.className.indexOf("ui-datepicker-next")!==-1)$(this).removeClass("ui-datepicker-next-hover")}).delegate(selector,"mouseover",function(){if(!$.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1)$(this).addClass("ui-datepicker-prev-hover");
if(this.className.indexOf("ui-datepicker-next")!==-1)$(this).addClass("ui-datepicker-next-hover")}})}function extendRemove(target,props){$.extend(target,props);for(var name in props)if(props[name]==null)target[name]=props[name];return target}$.fn.datepicker=function(options){if(!this.length)return this;if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick);$.datepicker.initialized=true}if($("#"+$.datepicker._mainDivId).length===0)$("body").append($.datepicker.dpDiv);
var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||(options==="getDate"||options==="widget")))return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));if(options==="option"&&(arguments.length===2&&typeof arguments[1]==="string"))return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,
[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker;$.datepicker.initialized=false;$.datepicker.uuid=(new Date).getTime();$.datepicker.version="1.10.3"})(jQuery);
(function($,undefined){var sizeRelatedOptions={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};$.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:true,buttons:[],closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",
of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0)$(this).css("top",pos.top-topOffset)}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,
height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();if(this.options.draggable&&$.fn.draggable)this._makeDraggable();if(this.options.resizable&&
$.fn.resizable)this._makeResizable();this._isOpen=false},_init:function(){if(this.options.autoOpen)this.open()},_appendTo:function(){var element=this.options.appendTo;if(element&&(element.jquery||element.nodeType))return $(element);return this.document.find(element||"body").eq(0)},_destroy:function(){var next,originalPosition=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(true,
true).remove();if(this.originalTitle)this.element.attr("title",this.originalTitle);next=originalPosition.parent.children().eq(originalPosition.index);if(next.length&&next[0]!==this.element[0])next.before(this.element);else originalPosition.parent.append(this.element)},widget:function(){return this.uiDialog},disable:$.noop,enable:$.noop,close:function(event){var that=this;if(!this._isOpen||this._trigger("beforeClose",event)===false)return;this._isOpen=false;this._destroyOverlay();if(!this.opener.filter(":focusable").focus().length)$(this.document[0].activeElement).blur();
this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(event,silent){var moved=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;if(moved&&!silent)this._trigger("focus",event);return moved},open:function(){var that=this;if(this._isOpen){if(this._moveToTop())this._focusTabbable();return}this._isOpen=true;this.opener=$(this.document[0].activeElement);
this._size();this._position();this._createOverlay();this._moveToTop(null,true);this._show(this.uiDialog,this.options.show,function(){that._focusTabbable();that._trigger("focus")});this._trigger("open")},_focusTabbable:function(){var hasFocus=this.element.find("[autofocus]");if(!hasFocus.length)hasFocus=this.element.find(":tabbable");if(!hasFocus.length)hasFocus=this.uiDialogButtonPane.find(":tabbable");if(!hasFocus.length)hasFocus=this.uiDialogTitlebarClose.filter(":tabbable");if(!hasFocus.length)hasFocus=
this.uiDialog;hasFocus.eq(0).focus()},_keepFocus:function(event){function checkFocus(){var activeElement=this.document[0].activeElement,isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);if(!isActive)this._focusTabbable()}event.preventDefault();checkFocus.call(this);this._delay(checkFocus)},_createWrapper:function(){this.uiDialog=$("\x3cdiv\x3e").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,
role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&(!event.isDefaultPrevented()&&(event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE))){event.preventDefault();this.close(event);return}if(event.keyCode!==$.ui.keyCode.TAB)return;var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");if((event.target===last[0]||event.target===this.uiDialog[0])&&!event.shiftKey){first.focus(1);
event.preventDefault()}else if((event.target===first[0]||event.target===this.uiDialog[0])&&event.shiftKey){last.focus(1);event.preventDefault()}},mousedown:function(event){if(this._moveToTop(event))this._focusTabbable()}});if(!this.element.find("[aria-describedby]").length)this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var uiDialogTitle;this.uiDialogTitlebar=$("\x3cdiv\x3e").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);
this._on(this.uiDialogTitlebar,{mousedown:function(event){if(!$(event.target).closest(".ui-dialog-titlebar-close"))this.uiDialog.focus()}});this.uiDialogTitlebarClose=$("\x3cbutton\x3e\x3c/button\x3e").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:false}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault();this.close(event)}});uiDialogTitle=$("\x3cspan\x3e").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);
this._title(uiDialogTitle);this.uiDialog.attr({"aria-labelledby":uiDialogTitle.attr("id")})},_title:function(title){if(!this.options.title)title.html("\x26#160;");title.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=$("\x3cdiv\x3e").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=$("\x3cdiv\x3e").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var that=this,buttons=
this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if($.isEmptyObject(buttons)||$.isArray(buttons)&&!buttons.length){this.uiDialog.removeClass("ui-dialog-buttons");return}$.each(buttons,function(name,props){var click,buttonOptions;props=$.isFunction(props)?{click:props,text:name}:props;props=$.extend({type:"button"},props);click=props.click;props.click=function(){click.apply(that.element[0],arguments)};buttonOptions={icons:props.icons,text:props.showText};delete props.icons;
delete props.showText;$("\x3cbutton\x3e\x3c/button\x3e",props).button(buttonOptions).appendTo(that.uiButtonSet)});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var that=this,options=this.options;function filteredUi(ui){return{position:ui.position,offset:ui.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging");
that._blockFrames();that._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui))},stop:function(event,ui){options.position=[ui.position.left-that.document.scrollLeft(),ui.position.top-that.document.scrollTop()];$(this).removeClass("ui-dialog-dragging");that._unblockFrames();that._trigger("dragStop",event,filteredUi(ui))}})},_makeResizable:function(){var that=this,options=this.options,handles=options.resizable,position=this.uiDialog.css("position"),
resizeHandles=typeof handles==="string"?handles:"n,e,s,w,se,sw,ne,nw";function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing");that._blockFrames();
that._trigger("resizeStart",event,filteredUi(ui))},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui))},stop:function(event,ui){options.height=$(this).height();options.width=$(this).width();$(this).removeClass("ui-dialog-resizing");that._unblockFrames();that._trigger("resizeStop",event,filteredUi(ui))}}).css("position",position)},_minHeight:function(){var options=this.options;return options.height==="auto"?options.minHeight:Math.min(options.minHeight,options.height)},_position:function(){var isVisible=
this.uiDialog.is(":visible");if(!isVisible)this.uiDialog.show();this.uiDialog.position(this.options.position);if(!isVisible)this.uiDialog.hide()},_setOptions:function(options){var that=this,resize=false,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value);if(key in sizeRelatedOptions)resize=true;if(key in resizableRelatedOptions)resizableOptions[key]=value});if(resize){this._size();this._position()}if(this.uiDialog.is(":data(ui-resizable)"))this.uiDialog.resizable("option",
resizableOptions)},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;if(key==="dialogClass")uiDialog.removeClass(this.options.dialogClass).addClass(value);if(key==="disabled")return;this._super(key,value);if(key==="appendTo")this.uiDialog.appendTo(this._appendTo());if(key==="buttons")this._createButtons();if(key==="closeText")this.uiDialogTitlebarClose.button({label:""+value});if(key==="draggable"){isDraggable=uiDialog.is(":data(ui-draggable)");if(isDraggable&&!value)uiDialog.draggable("destroy");
if(!isDraggable&&value)this._makeDraggable()}if(key==="position")this._position();if(key==="resizable"){isResizable=uiDialog.is(":data(ui-resizable)");if(isResizable&&!value)uiDialog.resizable("destroy");if(isResizable&&typeof value==="string")uiDialog.resizable("option","handles",value);if(!isResizable&&value!==false)this._makeResizable()}if(key==="title")this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;
this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(options.minWidth>options.width)options.width=options.minWidth;nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight();minContentHeight=Math.max(0,options.minHeight-nonContentHeight);maxContentHeight=typeof options.maxHeight==="number"?Math.max(0,options.maxHeight-nonContentHeight):"none";if(options.height==="auto")this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"});
else this.element.height(Math.max(0,options.height-nonContentHeight));if(this.uiDialog.is(":data(ui-resizable)"))this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var iframe=$(this);return $("\x3cdiv\x3e").css({position:"absolute",width:iframe.outerWidth(),height:iframe.outerHeight()}).appendTo(iframe.parent()).offset(iframe.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();
delete this.iframeBlocks}},_allowInteraction:function(event){if($(event.target).closest(".ui-dialog").length)return true;return!!$(event.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal)return;var that=this,widgetFullName=this.widgetFullName;if(!$.ui.dialog.overlayInstances)this._delay(function(){if($.ui.dialog.overlayInstances)this.document.bind("focusin.dialog",function(event){if(!that._allowInteraction(event)){event.preventDefault();$(".ui-dialog:visible:last .ui-dialog-content").data(widgetFullName)._focusTabbable()}})});
this.overlay=$("\x3cdiv\x3e").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});$.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal)return;if(this.overlay){$.ui.dialog.overlayInstances--;if(!$.ui.dialog.overlayInstances)this.document.unbind("focusin.dialog");this.overlay.remove();this.overlay=null}}});$.ui.dialog.overlayInstances=0;if($.uiBackCompat!==false)$.widget("ui.dialog",$.ui.dialog,{_position:function(){var position=
this.options.position,myAt=[],offset=[0,0],isVisible;if(position){if(typeof position==="string"||typeof position==="object"&&"0"in position){myAt=position.split?position.split(" "):[position[0],position[1]];if(myAt.length===1)myAt[1]=myAt[0];$.each(["left","top"],function(i,offsetPosition){if(+myAt[i]===myAt[i]){offset[i]=myAt[i];myAt[i]=offsetPosition}});position={my:myAt[0]+(offset[0]<0?offset[0]:"+"+offset[0])+" "+myAt[1]+(offset[1]<0?offset[1]:"+"+offset[1]),at:myAt.join(" ")}}position=$.extend({},
$.ui.dialog.prototype.options.position,position)}else position=$.ui.dialog.prototype.options.position;isVisible=this.uiDialog.is(":visible");if(!isVisible)this.uiDialog.show();this.uiDialog.position(position);if(!isVisible)this.uiDialog.hide()}})})(jQuery);
(function($,undefined){var rvertical=/up|down|vertical/,rpositivemotion=/up|left|vertical|horizontal/;$.effects.effect.blind=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),direction=o.direction||"up",vertical=rvertical.test(direction),ref=vertical?"height":"width",ref2=vertical?"top":"left",motion=rpositivemotion.test(direction),animation={},show=mode==="show",wrapper,distance,margin;if(el.parent().is(".ui-effects-wrapper"))$.effects.save(el.parent(),
props);else $.effects.save(el,props);el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});distance=wrapper[ref]();margin=parseFloat(wrapper.css(ref2))||0;animation[ref]=show?distance:0;if(!motion){el.css(vertical?"bottom":"right",0).css(vertical?"top":"left","auto").css({position:"absolute"});animation[ref2]=show?margin:distance+margin}if(show){wrapper.css(ref,0);if(!motion)wrapper.css(ref2,margin+distance)}wrapper.animate(animation,{duration:o.duration,easing:o.easing,queue:false,
complete:function(){if(mode==="hide")el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);done()}})}})(jQuery);
(function($,undefined){$.effects.effect.bounce=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),hide=mode==="hide",show=mode==="show",direction=o.direction||"up",distance=o.distance,times=o.times||5,anims=times*2+(show||hide?1:0),speed=o.duration/anims,easing=o.easing,ref=direction==="up"||direction==="down"?"top":"left",motion=direction==="up"||direction==="left",i,upAnim,downAnim,queue=el.queue(),queuelen=
queue.length;if(show||hide)props.push("opacity");$.effects.save(el,props);el.show();$.effects.createWrapper(el);if(!distance)distance=el[ref==="top"?"outerHeight":"outerWidth"]()/3;if(show){downAnim={opacity:1};downAnim[ref]=0;el.css("opacity",0).css(ref,motion?-distance*2:distance*2).animate(downAnim,speed,easing)}if(hide)distance=distance/Math.pow(2,times-1);downAnim={};downAnim[ref]=0;for(i=0;i<times;i++){upAnim={};upAnim[ref]=(motion?"-\x3d":"+\x3d")+distance;el.animate(upAnim,speed,easing).animate(downAnim,
speed,easing);distance=hide?distance*2:distance/2}if(hide){upAnim={opacity:0};upAnim[ref]=(motion?"-\x3d":"+\x3d")+distance;el.animate(upAnim,speed,easing)}el.queue(function(){if(hide)el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);done()});if(queuelen>1)queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));el.dequeue()}})(jQuery);
(function($,undefined){$.effects.effect.clip=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",direction=o.direction||"vertical",vert=direction==="vertical",size=vert?"height":"width",position=vert?"top":"left",animation={},wrapper,animate,distance;$.effects.save(el,props);el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});animate=el[0].tagName==="IMG"?wrapper:el;distance=
animate[size]();if(show){animate.css(size,0);animate.css(position,distance/2)}animation[size]=show?distance:0;animation[position]=show?0:distance/2;animate.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(!show)el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);done()}})}})(jQuery);
(function($,undefined){$.effects.effect.drop=function(o,done){var el=$(this),props=["position","top","bottom","left","right","opacity","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",direction=o.direction||"left",ref=direction==="up"||direction==="down"?"top":"left",motion=direction==="up"||direction==="left"?"pos":"neg",animation={opacity:show?1:0},distance;$.effects.save(el,props);el.show();$.effects.createWrapper(el);distance=o.distance||el[ref==="top"?"outerHeight":
"outerWidth"](true)/2;if(show)el.css("opacity",0).css(ref,motion==="pos"?-distance:distance);animation[ref]=(show?motion==="pos"?"+\x3d":"-\x3d":motion==="pos"?"-\x3d":"+\x3d")+distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide")el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);done()}})}})(jQuery);
(function($,undefined){$.effects.effect.explode=function(o,done){var rows=o.pieces?Math.round(Math.sqrt(o.pieces)):3,cells=rows,el=$(this),mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",offset=el.show().css("visibility","hidden").offset(),width=Math.ceil(el.outerWidth()/cells),height=Math.ceil(el.outerHeight()/rows),pieces=[],i,j,left,top,mx,my;function childComplete(){pieces.push(this);if(pieces.length===rows*cells)animComplete()}for(i=0;i<rows;i++){top=offset.top+i*height;my=i-(rows-
1)/2;for(j=0;j<cells;j++){left=offset.left+j*width;mx=j-(cells-1)/2;el.clone().appendTo("body").wrap("\x3cdiv\x3e\x3c/div\x3e").css({position:"absolute",visibility:"visible",left:-j*width,top:-i*height}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:width,height:height,left:left+(show?mx*width:0),top:top+(show?my*height:0),opacity:show?0:1}).animate({left:left+(show?0:mx*width),top:top+(show?0:my*height),opacity:show?1:0},o.duration||500,o.easing,childComplete)}}function animComplete(){el.css({visibility:"visible"});
$(pieces).remove();if(!show)el.hide();done()}}})(jQuery);(function($,undefined){$.effects.effect.fade=function(o,done){var el=$(this),mode=$.effects.setMode(el,o.mode||"toggle");el.animate({opacity:mode},{queue:false,duration:o.duration,easing:o.easing,complete:done})}})(jQuery);
(function($,undefined){$.effects.effect.fold=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",hide=mode==="hide",size=o.size||15,percent=/([0-9]+)%/.exec(size),horizFirst=!!o.horizFirst,widthFirst=show!==horizFirst,ref=widthFirst?["width","height"]:["height","width"],duration=o.duration/2,wrapper,distance,animation1={},animation2={};$.effects.save(el,props);el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});
distance=widthFirst?[wrapper.width(),wrapper.height()]:[wrapper.height(),wrapper.width()];if(percent)size=parseInt(percent[1],10)/100*distance[hide?0:1];if(show)wrapper.css(horizFirst?{height:0,width:size}:{height:size,width:0});animation1[ref[0]]=show?distance[0]:size;animation2[ref[1]]=show?distance[1]:0;wrapper.animate(animation1,duration,o.easing).animate(animation2,duration,o.easing,function(){if(hide)el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);done()})}})(jQuery);
(function($,undefined){$.effects.effect.highlight=function(o,done){var elem=$(this),props=["backgroundImage","backgroundColor","opacity"],mode=$.effects.setMode(elem,o.mode||"show"),animation={backgroundColor:elem.css("backgroundColor")};if(mode==="hide")animation.opacity=0;$.effects.save(elem,props);elem.show().css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide")elem.hide();$.effects.restore(elem,
props);done()}})}})(jQuery);
(function($,undefined){$.effects.effect.pulsate=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"show"),show=mode==="show",hide=mode==="hide",showhide=show||mode==="hide",anims=(o.times||5)*2+(showhide?1:0),duration=o.duration/anims,animateTo=0,queue=elem.queue(),queuelen=queue.length,i;if(show||!elem.is(":visible")){elem.css("opacity",0).show();animateTo=1}for(i=1;i<anims;i++){elem.animate({opacity:animateTo},duration,o.easing);animateTo=1-animateTo}elem.animate({opacity:animateTo},duration,
o.easing);elem.queue(function(){if(hide)elem.hide();done()});if(queuelen>1)queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));elem.dequeue()}})(jQuery);
(function($,undefined){$.effects.effect.puff=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"hide"),hide=mode==="hide",percent=parseInt(o.percent,10)||150,factor=percent/100,original={height:elem.height(),width:elem.width(),outerHeight:elem.outerHeight(),outerWidth:elem.outerWidth()};$.extend(o,{effect:"scale",queue:false,fade:true,mode:mode,complete:done,percent:hide?percent:100,from:hide?original:{height:original.height*factor,width:original.width*factor,outerHeight:original.outerHeight*
factor,outerWidth:original.outerWidth*factor}});elem.effect(o)};$.effects.effect.scale=function(o,done){var el=$(this),options=$.extend(true,{},o),mode=$.effects.setMode(el,o.mode||"effect"),percent=parseInt(o.percent,10)||(parseInt(o.percent,10)===0?0:mode==="hide"?0:100),direction=o.direction||"both",origin=o.origin,original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()},factor={y:direction!=="horizontal"?percent/100:1,x:direction!=="vertical"?percent/
100:1};options.effect="size";options.queue=false;options.complete=done;if(mode!=="effect"){options.origin=origin||["middle","center"];options.restore=true}options.from=o.from||(mode==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:original);options.to={height:original.height*factor.y,width:original.width*factor.x,outerHeight:original.outerHeight*factor.y,outerWidth:original.outerWidth*factor.x};if(options.fade){if(mode==="show"){options.from.opacity=0;options.to.opacity=1}if(mode==="hide"){options.from.opacity=
1;options.to.opacity=0}}el.effect(options)};$.effects.effect.size=function(o,done){var original,baseline,factor,el=$(this),props0=["position","top","bottom","left","right","width","height","overflow","opacity"],props1=["position","top","bottom","left","right","overflow","opacity"],props2=["width","height","overflow"],cProps=["fontSize"],vProps=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],hProps=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],mode=$.effects.setMode(el,
o.mode||"effect"),restore=o.restore||mode!=="effect",scale=o.scale||"both",origin=o.origin||["middle","center"],position=el.css("position"),props=restore?props0:props1,zero={height:0,width:0,outerHeight:0,outerWidth:0};if(mode==="show")el.show();original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()};if(o.mode==="toggle"&&mode==="show"){el.from=o.to||zero;el.to=o.from||original}else{el.from=o.from||(mode==="show"?zero:original);el.to=o.to||(mode==="hide"?
zero:original)}factor={from:{y:el.from.height/original.height,x:el.from.width/original.width},to:{y:el.to.height/original.height,x:el.to.width/original.width}};if(scale==="box"||scale==="both"){if(factor.from.y!==factor.to.y){props=props.concat(vProps);el.from=$.effects.setTransition(el,vProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,vProps,factor.to.y,el.to)}if(factor.from.x!==factor.to.x){props=props.concat(hProps);el.from=$.effects.setTransition(el,hProps,factor.from.x,el.from);
el.to=$.effects.setTransition(el,hProps,factor.to.x,el.to)}}if(scale==="content"||scale==="both")if(factor.from.y!==factor.to.y){props=props.concat(cProps).concat(props2);el.from=$.effects.setTransition(el,cProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,cProps,factor.to.y,el.to)}$.effects.save(el,props);el.show();$.effects.createWrapper(el);el.css("overflow","hidden").css(el.from);if(origin){baseline=$.effects.getBaseline(origin,original);el.from.top=(original.outerHeight-el.outerHeight())*
baseline.y;el.from.left=(original.outerWidth-el.outerWidth())*baseline.x;el.to.top=(original.outerHeight-el.to.outerHeight)*baseline.y;el.to.left=(original.outerWidth-el.to.outerWidth)*baseline.x}el.css(el.from);if(scale==="content"||scale==="both"){vProps=vProps.concat(["marginTop","marginBottom"]).concat(cProps);hProps=hProps.concat(["marginLeft","marginRight"]);props2=props0.concat(vProps).concat(hProps);el.find("*[width]").each(function(){var child=$(this),c_original={height:child.height(),width:child.width(),
outerHeight:child.outerHeight(),outerWidth:child.outerWidth()};if(restore)$.effects.save(child,props2);child.from={height:c_original.height*factor.from.y,width:c_original.width*factor.from.x,outerHeight:c_original.outerHeight*factor.from.y,outerWidth:c_original.outerWidth*factor.from.x};child.to={height:c_original.height*factor.to.y,width:c_original.width*factor.to.x,outerHeight:c_original.height*factor.to.y,outerWidth:c_original.width*factor.to.x};if(factor.from.y!==factor.to.y){child.from=$.effects.setTransition(child,
vProps,factor.from.y,child.from);child.to=$.effects.setTransition(child,vProps,factor.to.y,child.to)}if(factor.from.x!==factor.to.x){child.from=$.effects.setTransition(child,hProps,factor.from.x,child.from);child.to=$.effects.setTransition(child,hProps,factor.to.x,child.to)}child.css(child.from);child.animate(child.to,o.duration,o.easing,function(){if(restore)$.effects.restore(child,props2)})})}el.animate(el.to,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(el.to.opacity===
0)el.css("opacity",el.from.opacity);if(mode==="hide")el.hide();$.effects.restore(el,props);if(!restore)if(position==="static")el.css({position:"relative",top:el.to.top,left:el.to.left});else $.each(["top","left"],function(idx,pos){el.css(pos,function(_,str){var val=parseInt(str,10),toRef=idx?el.to.left:el.to.top;if(str==="auto")return toRef+"px";return val+toRef+"px"})});$.effects.removeWrapper(el);done()}})}})(jQuery);
(function($,undefined){$.effects.effect.shake=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),direction=o.direction||"left",distance=o.distance||20,times=o.times||3,anims=times*2+1,speed=Math.round(o.duration/anims),ref=direction==="up"||direction==="down"?"top":"left",positiveMotion=direction==="up"||direction==="left",animation={},animation1={},animation2={},i,queue=el.queue(),queuelen=queue.length;$.effects.save(el,
props);el.show();$.effects.createWrapper(el);animation[ref]=(positiveMotion?"-\x3d":"+\x3d")+distance;animation1[ref]=(positiveMotion?"+\x3d":"-\x3d")+distance*2;animation2[ref]=(positiveMotion?"-\x3d":"+\x3d")+distance*2;el.animate(animation,speed,o.easing);for(i=1;i<times;i++)el.animate(animation1,speed,o.easing).animate(animation2,speed,o.easing);el.animate(animation1,speed,o.easing).animate(animation,speed/2,o.easing).queue(function(){if(mode==="hide")el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);
done()});if(queuelen>1)queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));el.dequeue()}})(jQuery);
(function($,undefined){$.effects.effect.slide=function(o,done){var el=$(this),props=["position","top","bottom","left","right","width","height"],mode=$.effects.setMode(el,o.mode||"show"),show=mode==="show",direction=o.direction||"left",ref=direction==="up"||direction==="down"?"top":"left",positiveMotion=direction==="up"||direction==="left",distance,animation={};$.effects.save(el,props);el.show();distance=o.distance||el[ref==="top"?"outerHeight":"outerWidth"](true);$.effects.createWrapper(el).css({overflow:"hidden"});
if(show)el.css(ref,positiveMotion?isNaN(distance)?"-"+distance:-distance:distance);animation[ref]=(show?positiveMotion?"+\x3d":"-\x3d":positiveMotion?"-\x3d":"+\x3d")+distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide")el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);done()}})}})(jQuery);
(function($,undefined){$.effects.effect.transfer=function(o,done){var elem=$(this),target=$(o.to),targetFixed=target.css("position")==="fixed",body=$("body"),fixTop=targetFixed?body.scrollTop():0,fixLeft=targetFixed?body.scrollLeft():0,endPosition=target.offset(),animation={top:endPosition.top-fixTop,left:endPosition.left-fixLeft,height:target.innerHeight(),width:target.innerWidth()},startPosition=elem.offset(),transfer=$("\x3cdiv class\x3d'ui-effects-transfer'\x3e\x3c/div\x3e").appendTo(document.body).addClass(o.className).css({top:startPosition.top-
fixTop,left:startPosition.left-fixLeft,height:elem.innerHeight(),width:elem.innerWidth(),position:targetFixed?"fixed":"absolute"}).animate(animation,o.duration,o.easing,function(){transfer.remove();done()})}})(jQuery);
(function($,undefined){$.widget("ui.menu",{version:"1.10.3",defaultElement:"\x3cul\x3e",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+
this.eventNamespace,$.proxy(function(event){if(this.options.disabled)event.preventDefault()},this));if(this.options.disabled)this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item \x3e a":function(event){event.preventDefault()},"click .ui-state-disabled \x3e a":function(event){event.preventDefault()},"click .ui-menu-item:has(a)":function(event){var target=$(event.target).closest(".ui-menu-item");if(!this.mouseHandled&&target.not(".ui-state-disabled").length){this.mouseHandled=
true;this.select(event);if(target.has(".ui-menu").length)this.expand(event);else if(!this.element.is(":focus")){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1)clearTimeout(this.timer)}}},"mouseenter .ui-menu-item":function(event){var target=$(event.currentTarget);target.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(event,target)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=
this.active||this.element.children(".ui-menu-item").eq(0);if(!keepActiveItem)this.focus(event,item)},blur:function(event){this._delay(function(){if(!$.contains(this.element[0],this.document[0].activeElement))this.collapseAll(event)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(!$(event.target).closest(".ui-menu").length)this.collapseAll(event);this.mouseHandled=false}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-carat"))elem.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(event){var match,prev,character,skip,regex,
preventDefault=true;function escape(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")}switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;
case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled"))this.expand(event);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev)skip=true;else character=prev+character;regex=new RegExp("^"+escape(character),"i");match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text())});
match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);regex=new RegExp("^"+escape(character),"i");match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text())})}if(match.length){this.focus(event,match);if(match.length>1){this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)}else delete this.previousFilter}else delete this.previousFilter}if(preventDefault)event.preventDefault()},
_activate:function(event){if(!this.active.is(".ui-state-disabled"))if(this.active.children("a[aria-haspopup\x3d'true']").length)this.expand(event);else this.select(event)},refresh:function(){var menus,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.prev("a"),
submenuCarat=$("\x3cspan\x3e").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",true);item.attr("aria-haspopup","true").prepend(submenuCarat);menu.attr("aria-labelledby",item.attr("id"))});menus=submenus.add(this.element);menus.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});menus.children(":not(.ui-menu-item)").each(function(){var item=$(this);
if(!/[^\-\u2014\u2013\s]/.test(item.text()))item.addClass("ui-widget-content ui-menu-divider")});menus.children(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!$.contains(this.element[0],this.active[0]))this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(key,value){if(key==="icons")this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu);this._super(key,value)},focus:function(event,
item){var nested,focused;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.children("a").addClass("ui-state-focus");if(this.options.role)this.element.attr("aria-activedescendant",focused.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");if(event&&event.type==="keydown")this._close();else this.timer=this._delay(function(){this._close()},this.delay);nested=item.children(".ui-menu");
if(nested.length&&/^mouse/.test(event.type))this._startOpening(nested);this.activeMenu=item.parent();this._trigger("focus",event,{item:item})},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();
elementHeight=this.activeMenu.height();itemHeight=item.height();if(offset<0)this.activeMenu.scrollTop(scroll+offset);else if(offset+itemHeight>elementHeight)this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight)}},blur:function(event,fromFocus){if(!fromFocus)clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus");this.active=null;this._trigger("blur",event,{item:this.active})},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!==
"true")return;this.timer=this._delay(function(){this._close();this._open(submenu)},this.delay)},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position)},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=
all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length)currentMenu=this.element;this._close(currentMenu);this.blur(event);this.activeMenu=currentMenu},this.delay)},_close:function(startMenu){if(!startMenu)startMenu=this.active?this.active.parent():this.element;startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(event){var newItem=this.active&&
this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,newItem)}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem)})}},next:function(event){this._move("next","first",event)},previous:function(event){this._move("prev","last",event)},isFirstItem:function(){return this.active&&
!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(direction,filter,event){var next;if(this.active)if(direction==="first"||direction==="last")next=this.active[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1);else next=this.active[direction+"All"](".ui-menu-item").eq(0);if(!next||(!next.length||!this.active))next=this.activeMenu.children(".ui-menu-item")[filter]();this.focus(event,next)},
nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return}if(this.isLastItem())return;if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0});this.focus(event,item)}else this.focus(event,this.activeMenu.children(".ui-menu-item")[!this.active?"first":"last"]())},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);
return}if(this.isFirstItem())return;if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base+height>0});this.focus(event,item)}else this.focus(event,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");
var ui={item:this.active};if(!this.active.has(".ui-menu").length)this.collapseAll(event,true);this._trigger("select",event,ui)}})})(jQuery);
(function($,undefined){$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),
10)||0}function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9)return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};if($.isWindow(raw))return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};if(raw.preventDefault)return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined)return cachedScrollbarWidth;
var w1,w2,div=$("\x3cdiv style\x3d'display:block;width:50px;height:50px;overflow:hidden;'\x3e\x3cdiv style\x3d'height:100px;width:auto;'\x3e\x3c/div\x3e\x3c/div\x3e"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2)w2=div[0].clientWidth;div.remove();return cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow?"":within.element.css("overflow-x"),overflowY=within.isWindow?"":within.element.css("overflow-y"),
hasOverflowX=overflowX==="scroll"||overflowX==="auto"&&within.width<within.element[0].scrollWidth,hasOverflowY=overflowY==="scroll"||overflowY==="auto"&&within.height<within.element[0].scrollHeight;return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);return{element:withinElement,isWindow:isWindow,offset:withinElement.offset()||{left:0,top:0},
scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()}}};$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),
collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault)options.at="left top";targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1)pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];
pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]});if(collision.length===1)collision[1]=collision[0];if(options.at[0]==="right")basePosition.left+=targetWidth;else if(options.at[0]==="center")basePosition.left+=targetWidth/2;
if(options.at[1]==="bottom")basePosition.top+=targetHeight;else if(options.at[1]==="center")basePosition.top+=targetHeight/2;atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+
scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right")position.left-=elemWidth;else if(options.my[0]==="center")position.left-=elemWidth/2;if(options.my[1]==="bottom")position.top-=elemHeight;else if(options.my[1]==="center")position.top-=elemHeight/2;position.left+=myOffset[0];position.top+=myOffset[1];if(!$.support.offsetFractions){position.left=
round(position.left);position.top=round(position.top)}collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]])$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,
within:within,elem:elem})});if(options.using)using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":
"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth)feedback.horizontal="center";if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight)feedback.vertical="middle";if(max(abs(left),abs(right))>max(abs(top),abs(bottom)))feedback.important="horizontal";else feedback.important="vertical";options.using.call(this,props,feedback)};elem.offset($.extend(position,{using:using}))})};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:
within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth)if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight}else if(overRight>0&&overLeft<=0)position.left=withinOffset;else if(overLeft>overRight)position.left=
withinOffset+outerWidth-data.collisionWidth;else position.left=withinOffset;else if(overLeft>0)position.left+=overLeft;else if(overRight>0)position.left-=overRight;else position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+
data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight)if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom}else if(overBottom>0&&overTop<=0)position.top=withinOffset;else if(overTop>overBottom)position.top=withinOffset+outerHeight-data.collisionHeight;else position.top=withinOffset;else if(overTop>0)position.top+=overTop;else if(overBottom>0)position.top-=overBottom;
else position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:
0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft))position.left+=myOffset+atOffset+offset}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight)position.left+=
myOffset+atOffset+offset}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:
data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(position.top+myOffset+atOffset+offset>overTop&&(newOverBottom<0||newOverBottom<abs(overTop)))position.top+=myOffset+atOffset+offset}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(position.top+myOffset+atOffset+offset>overBottom&&
(newOverTop>0||abs(newOverTop)<overBottom))position.top+=myOffset+atOffset+offset}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments)}}};(function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?
"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body)$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});for(i in testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;
$.support.offsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement)})()})(jQuery);
(function($,undefined){$.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=$("\x3cdiv class\x3d'ui-progressbar-value ui-widget-header ui-corner-left'\x3e\x3c/div\x3e").appendTo(this.element);this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove()},value:function(newValue){if(newValue===undefined)return this.options.value;this.options.value=this._constrainedValue(newValue);this._refreshValue()},_constrainedValue:function(newValue){if(newValue===undefined)newValue=this.options.value;this.indeterminate=newValue===false;if(typeof newValue!=="number")newValue=0;return this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,newValue))},_setOptions:function(options){var value=options.value;delete options.value;
this._super(options);this.options.value=this._constrainedValue(value);this._refreshValue()},_setOption:function(key,value){if(key==="max")value=Math.max(this.min,value);this._super(key,value)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var value=this.options.value,percentage=this._percentage();this.valueDiv.toggle(this.indeterminate||value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+
"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv)this.overlayDiv=$("\x3cdiv class\x3d'ui-progressbar-overlay'\x3e\x3c/div\x3e").appendTo(this.valueDiv)}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":value});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null}}if(this.oldValue!==value){this.oldValue=value;this._trigger("change")}if(value===this.options.max)this._trigger("complete")}})})(jQuery);
(function($,undefined){var numPages=5;$.widget("ui.slider",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+
" ui-widget-content"+" ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="\x3ca class\x3d'ui-slider-handle ui-state-default ui-corner-all' href\x3d'#'\x3e\x3c/a\x3e",handles=
[];handleCount=options.values&&options.values.length||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount)}for(i=existingHandles.length;i<handleCount;i++)handles.push(handle);this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",i)})},_createRange:function(){var options=this.options,classes="";
if(options.range){if(options.range===true)if(!options.values)options.values=[this._valueMin(),this._valueMin()];else if(options.values.length&&options.values.length!==2)options.values=[options.values[0],options.values[0]];else if($.isArray(options.values))options.values=options.values.slice(0);if(!this.range||!this.range.length){this.range=$("\x3cdiv\x3e\x3c/div\x3e").appendTo(this.element);classes="ui-slider-range"+" ui-widget-header ui-corner-all"}else this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({"left":"",
"bottom":""});this.range.addClass(classes+(options.range==="min"||options.range==="max"?" ui-slider-range-"+options.range:""))}else this.range=$([])},_setupEvents:function(){var elements=this.handles.add(this.range).filter("a");this._off(elements);this._on(elements,this._handleEvents);this._hoverable(elements);this._focusable(elements)},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-widget"+" ui-widget-content"+
" ui-corner-all");this._mouseDestroy()},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=
Math.abs(normValue-that.values(i));if(distance>thisDistance||distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min)){distance=thisDistance;closestHandle=$(this);index=i}});allowed=this._start(event,index);if(allowed===false)return false;this._mouseSliding=true;this._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,
top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover"))this._slide(event,index,normValue);this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=
this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,
pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}percentMouse=pixelMouse/pixelTotal;if(percentMouse>1)percentMouse=1;if(percentMouse<0)percentMouse=0;if(this.orientation==="vertical")percentMouse=1-percentMouse;valueTotal=
this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}return this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?
0:1);if(this.options.values.length===2&&this.options.range===true&&(index===0&&newVal>otherVal||index===1&&newVal<otherVal))newVal=otherVal;if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false)this.values(index,newVal,true)}}else if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});
if(allowed!==false)this.value(newVal)}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=
this.values()}this._lastChangedValue=index;this._trigger("change",event,uiHash)}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return}return this._value()},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return}if(arguments.length)if($.isArray(arguments[0])){vals=this.options.values;
newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i)}this._refreshValue()}else if(this.options.values&&this.options.values.length)return this._values(index);else return this.value();else return this._values()},_setOption:function(key,value){var i,valsLength=0;if(key==="range"&&this.options.range===true)if(value==="min"){this.options.value=this._values(0);this.options.values=null}else if(value==="max"){this.options.value=this._values(this.options.values.length-
1);this.options.values=null}if($.isArray(this.options.values))valsLength=this.options.values.length;$.Widget.prototype._setOption.apply(this,arguments);switch(key){case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();
for(i=0;i<valsLength;i+=1)this._change(null,i);this._animateOff=false;break;case "min":case "max":this._animateOff=true;this._refreshValue();this._animateOff=false;break;case "range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val}else if(this.options.values&&this.options.values.length){vals=
this.options.values.slice();for(i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(vals[i]);return vals}else return[]},_trimAlignValue:function(val){if(val<=this._valueMin())return this._valueMin();if(val>=this._valueMax())return this._valueMax();var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step)alignValue+=valModStep>0?step:-step;return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},
_valueMax:function(){return this.options.max},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=!this._animateOff?o.animate:false,_set={};if(this.options.values&&this.options.values.length)this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,
o.animate);if(that.options.range===true)if(that.orientation==="horizontal"){if(i===0)that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);if(i===1)that.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:false,duration:o.animate})}else{if(i===0)that.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate);if(i===1)that.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:false,duration:o.animate})}lastValPercent=
valPercent});else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal")this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);if(oRange==="max"&&this.orientation==="horizontal")this.range[animate?"animate":
"css"]({width:100-valPercent+"%"},{queue:false,duration:o.animate});if(oRange==="min"&&this.orientation==="vertical")this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);if(oRange==="max"&&this.orientation==="vertical")this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:false,duration:o.animate})}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();
if(!this._keySliding){this._keySliding=true;$(event.target).addClass("ui-state-active");allowed=this._start(event,index);if(allowed===false)return}break}step=this.options.step;if(this.options.values&&this.options.values.length)curVal=newVal=this.values(index);else curVal=newVal=this.value();switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+(this._valueMax()-this._valueMin())/
numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-(this._valueMax()-this._valueMin())/numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax())return;newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin())return;newVal=this._trimAlignValue(curVal-step);break}this._slide(event,index,newVal)},click:function(event){event.preventDefault()},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");
if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);$(event.target).removeClass("ui-state-active")}}}})})(jQuery);
(function($){function modifier(fn){return function(){var previous=this.element.val();fn.apply(this,arguments);this._refresh();if(previous!==this.element.val())this._trigger("change")}}$.widget("ui.spinner",{version:"1.10.3",defaultElement:"\x3cinput\x3e",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",
this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);this._value(this.element.val(),true);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var options={},element=this.element;$.each(["min","max","step"],function(i,option){var value=element.attr(option);if(value!==undefined&&value.length)options[option]=value});return options},_events:{keydown:function(event){if(this._start(event)&&
this._keydown(event))event.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return}this._stop();this._refresh();if(this.previous!==this.element.val())this._trigger("change",event)},mousewheel:function(event,delta){if(!delta)return;if(!this.spinning&&!this._start(event))return false;this._spin((delta>0?1:-1)*this.options.step,event);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning)this._stop(event)},
100);event.preventDefault()},"mousedown .ui-spinner-button":function(event){var previous;previous=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function checkFocus(){var isActive=this.element[0]===this.document[0].activeElement;if(!isActive){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous})}}event.preventDefault();checkFocus.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;checkFocus.call(this)});
if(this._start(event)===false)return;this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){if(!$(event.currentTarget).hasClass("ui-state-active"))return;if(this._start(event)===false)return false;this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var uiSpinner=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete",
"off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=uiSpinner.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");if(this.buttons.height()>Math.ceil(uiSpinner.height()*0.5)&&uiSpinner.height()>0)uiSpinner.height(uiSpinner.height());if(this.options.disabled)this.disable()},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:this._repeat(null,
1,event);return true;case keyCode.DOWN:this._repeat(null,-1,event);return true;case keyCode.PAGE_UP:this._repeat(null,options.page,event);return true;case keyCode.PAGE_DOWN:this._repeat(null,-options.page,event);return true}return false},_uiSpinnerHtml:function(){return"\x3cspan class\x3d'ui-spinner ui-widget ui-widget-content ui-corner-all'\x3e\x3c/span\x3e"},_buttonHtml:function(){return""+"\x3ca class\x3d'ui-spinner-button ui-spinner-up ui-corner-tr'\x3e"+"\x3cspan class\x3d'ui-icon "+this.options.icons.up+
"'\x3e\x26#9650;\x3c/span\x3e"+"\x3c/a\x3e"+"\x3ca class\x3d'ui-spinner-button ui-spinner-down ui-corner-br'\x3e"+"\x3cspan class\x3d'ui-icon "+this.options.icons.down+"'\x3e\x26#9660;\x3c/span\x3e"+"\x3c/a\x3e"},_start:function(event){if(!this.spinning&&this._trigger("start",event)===false)return false;if(!this.counter)this.counter=1;this.spinning=true;return true},_repeat:function(i,steps,event){i=i||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,steps,event)},i);
this._spin(steps*this.options.step,event)},_spin:function(step,event){var value=this.value()||0;if(!this.counter)this.counter=1;value=this._adjustValue(value+step*this._increment(this.counter));if(!this.spinning||this._trigger("spin",event,{value:value})!==false){this._value(value);this.counter++}},_increment:function(i){var incremental=this.options.incremental;if(incremental)return $.isFunction(incremental)?incremental(i):Math.floor(i*i*i/5E4-i*i/500+17*i/200+1);return 1},_precision:function(){var precision=
this._precisionOf(this.options.step);if(this.options.min!==null)precision=Math.max(precision,this._precisionOf(this.options.min));return precision},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1},_adjustValue:function(value){var base,aboveMin,options=this.options;base=options.min!==null?options.min:0;aboveMin=value-base;aboveMin=Math.round(aboveMin/options.step)*options.step;value=base+aboveMin;value=parseFloat(value.toFixed(this._precision()));
if(options.max!==null&&value>options.max)return options.max;if(options.min!==null&&value<options.min)return options.min;return value},_stop:function(event){if(!this.spinning)return;clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",event)},_setOption:function(key,value){if(key==="culture"||key==="numberFormat"){var prevValue=this._parse(this.element.val());this.options[key]=value;this.element.val(this._format(prevValue));return}if(key===
"max"||(key==="min"||key==="step"))if(typeof value==="string")value=this._parse(value);if(key==="icons"){this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(value.up);this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(value.down)}this._super(key,value);if(key==="disabled")if(value){this.element.prop("disabled",true);this.buttons.button("disable")}else{this.element.prop("disabled",false);this.buttons.button("enable")}},_setOptions:modifier(function(options){this._super(options);
this._value(this.element.val())}),_parse:function(val){if(typeof val==="string"&&val!=="")val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val;return val===""||isNaN(val)?null:val},_format:function(value){if(value==="")return"";return window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,
"aria-valuenow":this._parse(this.element.val())})},_value:function(value,allowAny){var parsed;if(value!==""){parsed=this._parse(value);if(parsed!==null){if(!allowAny)parsed=this._adjustValue(parsed);value=this._format(parsed)}}this.element.val(value);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},
stepUp:modifier(function(steps){this._stepUp(steps)}),_stepUp:function(steps){if(this._start()){this._spin((steps||1)*this.options.step);this._stop()}},stepDown:modifier(function(steps){this._stepDown(steps)}),_stepDown:function(steps){if(this._start()){this._spin((steps||1)*-this.options.step);this._stop()}},pageUp:modifier(function(pages){this._stepUp((pages||1)*this.options.page)}),pageDown:modifier(function(pages){this._stepDown((pages||1)*this.options.page)}),value:function(newVal){if(!arguments.length)return this._parse(this.element.val());
modifier(this._value).call(this,newVal)},widget:function(){return this.uiSpinner}})})(jQuery);
(function($,undefined){var tabId=0,rhash=/#.*$/;function getNextTabId(){return++tabId}function isLocal(anchor){return anchor.hash.length>1&&decodeURIComponent(anchor.href.replace(rhash,""))===decodeURIComponent(location.href.replace(rhash,""))}$.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var that=this,options=this.options;
this.running=false;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",options.collapsible).delegate(".ui-tabs-nav \x3e li","mousedown"+this.eventNamespace,function(event){if($(this).is(".ui-state-disabled"))event.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){if($(this).closest("li").is(".ui-state-disabled"))this.blur()});this._processTabs();options.active=this._initialActive();if($.isArray(options.disabled))options.disabled=
$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li)}))).sort();if(this.options.active!==false&&this.anchors.length)this.active=this._findActive(options.active);else this.active=$();this._refresh();if(this.active.length)this.load(options.active)},_initialActive:function(){var active=this.options.active,collapsible=this.options.collapsible,locationHash=location.hash.substring(1);if(active===null){if(locationHash)this.tabs.each(function(i,
tab){if($(tab).attr("aria-controls")===locationHash){active=i;return false}});if(active===null)active=this.tabs.index(this.tabs.filter(".ui-tabs-active"));if(active===null||active===-1)active=this.tabs.length?0:false}if(active!==false){active=this.tabs.index(this.tabs.eq(active));if(active===-1)active=collapsible?false:0}if(!collapsible&&(active===false&&this.anchors.length))active=0;return active},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?$():this._getPanelForTab(this.active)}},
_tabKeydown:function(event){var focusedTab=$(this.document[0].activeElement).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=true;if(this._handlePageNav(event))return;switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=false;selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:event.preventDefault();
clearTimeout(this.activating);this._activate(selectedIndex);return;case $.ui.keyCode.ENTER:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex===this.options.active?false:selectedIndex);return;default:return}event.preventDefault();clearTimeout(this.activating);selectedIndex=this._focusNextTab(selectedIndex,goingForward);if(!event.ctrlKey){focusedTab.attr("aria-selected","false");this.tabs.eq(selectedIndex).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",
selectedIndex)},this.delay)}},_panelKeydown:function(event){if(this._handlePageNav(event))return;if(event.ctrlKey&&event.keyCode===$.ui.keyCode.UP){event.preventDefault();this.active.focus()}},_handlePageNav:function(event){if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(index,
goingForward){var lastTabIndex=this.tabs.length-1;function constrain(){if(index>lastTabIndex)index=0;if(index<0)index=lastTabIndex;return index}while($.inArray(constrain(),this.options.disabled)!==-1)index=goingForward?index+1:index-1;return index},_focusNextTab:function(index,goingForward){index=this._findNextTab(index,goingForward);this.tabs.eq(index).focus();return index},_setOption:function(key,value){if(key==="active"){this._activate(value);return}if(key==="disabled"){this._setupDisabled(value);
return}this._super(key,value);if(key==="collapsible"){this.element.toggleClass("ui-tabs-collapsible",value);if(!value&&this.options.active===false)this._activate(0)}if(key==="event")this._setupEvents(value);if(key==="heightStyle")this._setupHeightStyle(value)},_tabId:function(tab){return tab.attr("aria-controls")||"ui-tabs-"+getNextTabId()},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$\x26"):""},refresh:function(){var options=this.options,lis=
this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab)});this._processTabs();if(options.active===false||!this.anchors.length){options.active=false;this.active=$()}else if(this.active.length&&!$.contains(this.tablist[0],this.active[0]))if(this.tabs.length===options.disabled.length){options.active=false;this.active=$()}else this._activate(this._findNextTab(Math.max(0,options.active-1),false));else options.active=this.tabs.index(this.active);
this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});if(!this.active.length)this.tabs.eq(0).attr("tabIndex",0);else{this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0});
this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})}},_processTabs:function(){var that=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("\x3e li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return $("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",
tabIndex:-1});this.panels=$();this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");if(isLocal(anchor)){selector=anchor.hash;panel=that.element.find(that._sanitizeSelector(selector))}else{panelId=that._tabId(tab);selector="#"+panelId;panel=that.element.find(selector);if(!panel.length){panel=that._createPanel(panelId);panel.insertAfter(that.panels[i-1]||that.tablist)}panel.attr("aria-live",
"polite")}if(panel.length)that.panels=that.panels.add(panel);if(originalAriaControls)tab.data("ui-tabs-aria-controls",originalAriaControls);tab.attr({"aria-controls":selector.substring(1),"aria-labelledby":anchorId});panel.attr("aria-labelledby",anchorId)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(id){return $("\x3cdiv\x3e").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",
true)},_setupDisabled:function(disabled){if($.isArray(disabled))if(!disabled.length)disabled=false;else if(disabled.length===this.anchors.length)disabled=true;for(var i=0,li;li=this.tabs[i];i++)if(disabled===true||$.inArray(i,disabled)!==-1)$(li).addClass("ui-state-disabled").attr("aria-disabled","true");else $(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=disabled},_setupEvents:function(event){var events={click:function(event){event.preventDefault()}};if(event)$.each(event.split(" "),
function(index,eventName){events[eventName]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,events);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(heightStyle){var maxHeight,parent=this.element.parent();if(heightStyle==="fill"){maxHeight=parent.height();maxHeight-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var elem=
$(this),position=elem.css("position");if(position==="absolute"||position==="fixed")return;maxHeight-=elem.outerHeight(true)});this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(true)});this.panels.each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")}else if(heightStyle==="auto"){maxHeight=0;this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height())}).height(maxHeight)}},
_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=!active.length?$():this._getPanelForTab(active),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault();if(tab.hasClass("ui-state-disabled")||(tab.hasClass("ui-tabs-loading")||(this.running||
(clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===false))))return;options.active=collapsing?false:this.tabs.index(tab);this.active=clickedIsActive?$():tab;if(this.xhr)this.xhr.abort();if(!toHide.length&&!toShow.length)$.error("jQuery UI Tabs: Mismatching fragment identifier.");if(toShow.length)this.load(this.tabs.index(tab),event);this._toggle(event,eventData)},_toggle:function(event,eventData){var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;
this.running=true;function complete(){that.running=false;that._trigger("activate",event,eventData)}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(toShow.length&&that.options.show)that._show(toShow,that.options.show,complete);else{toShow.show();complete()}}if(toHide.length&&this.options.hide)this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");show()});else{eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");
toHide.hide();show()}toHide.attr({"aria-expanded":"false","aria-hidden":"true"});eventData.oldTab.attr("aria-selected","false");if(toShow.length&&toHide.length)eventData.oldTab.attr("tabIndex",-1);else if(toShow.length)this.tabs.filter(function(){return $(this).attr("tabIndex")===0}).attr("tabIndex",-1);toShow.attr({"aria-expanded":"true","aria-hidden":"false"});eventData.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(index){var anchor,active=this._findActive(index);if(active[0]===
this.active[0])return;if(!active.length)active=this.active;anchor=active.find(".ui-tabs-anchor")[0];this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop})},_findActive:function(index){return index===false?$():this.tabs.eq(index)},_getIndex:function(index){if(typeof index==="string")index=this.anchors.index(this.anchors.filter("[href$\x3d'"+index+"']"));return index},_destroy:function(){if(this.xhr)this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){if($.data(this,"ui-tabs-destroy"))$(this).remove();else $(this).removeClass("ui-state-default ui-state-active ui-state-disabled "+"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});
this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");if(prev)li.attr("aria-controls",prev).removeData("ui-tabs-aria-controls");else li.removeAttr("aria-controls")});this.panels.show();if(this.options.heightStyle!=="content")this.panels.css("height","")},enable:function(index){var disabled=this.options.disabled;if(disabled===false)return;if(index===undefined)disabled=false;else{index=this._getIndex(index);if($.isArray(disabled))disabled=$.map(disabled,function(num){return num!==
index?num:null});else disabled=$.map(this.tabs,function(li,num){return num!==index?num:null})}this._setupDisabled(disabled)},disable:function(index){var disabled=this.options.disabled;if(disabled===true)return;if(index===undefined)disabled=true;else{index=this._getIndex(index);if($.inArray(index,disabled)!==-1)return;if($.isArray(disabled))disabled=$.merge([index],disabled).sort();else disabled=[index]}this._setupDisabled(disabled)},load:function(index,event){index=this._getIndex(index);var that=
this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel};if(isLocal(anchor[0]))return;this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData));if(this.xhr&&this.xhr.statusText!=="canceled"){tab.addClass("ui-tabs-loading");panel.attr("aria-busy","true");this.xhr.success(function(response){setTimeout(function(){panel.html(response);that._trigger("load",event,eventData)},1)}).complete(function(jqXHR,status){setTimeout(function(){if(status===
"abort")that.panels.stop(false,true);tab.removeClass("ui-tabs-loading");panel.removeAttr("aria-busy");if(jqXHR===that.xhr)delete that.xhr},1)})}},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData))}}},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id))}})})(jQuery);
(function($){var increments=0;function addDescribedBy(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id);elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")))}function removeDescribedBy(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);if(index!==-1)describedby.splice(index,1);elem.removeData("ui-tooltip-id");describedby=$.trim(describedby.join(" "));
if(describedby)elem.attr("aria-describedby",describedby);else elem.removeAttr("aria-describedby")}$.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var title=$(this).attr("title")||"";return $("\x3ca\x3e").text(title).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,tooltipClass:null,track:false,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents=
{};if(this.options.disabled)this._disable()},_setOption:function(key,value){var that=this;if(key==="disabled"){this[value?"_disable":"_enable"]();this.options[key]=value;return}this._super(key,value);if(key==="content")$.each(this.tooltips,function(id,element){that._updateContent(element)})},_disable:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0];that.close(event,true)});this.element.find(this.options.items).addBack().each(function(){var element=
$(this);if(element.is("[title]"))element.data("ui-tooltip-title",element.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var element=$(this);if(element.data("ui-tooltip-title"))element.attr("title",element.data("ui-tooltip-title"))})},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);if(!target.length||target.data("ui-tooltip-id"))return;if(target.attr("title"))target.data("ui-tooltip-title",
target.attr("title"));target.data("ui-tooltip-open",true);if(event&&event.type==="mouseover")target.parents().each(function(){var parent=$(this),blurEvent;if(parent.data("ui-tooltip-open")){blurEvent=$.Event("blur");blurEvent.target=blurEvent.currentTarget=this;that.close(blurEvent,true)}if(parent.attr("title")){parent.uniqueId();that.parents[this.id]={element:this,title:parent.attr("title")};parent.attr("title","")}});this._updateContent(target,event)},_updateContent:function(target,event){var content,
contentOption=this.options.content,that=this,eventType=event?event.type:null;if(typeof contentOption==="string")return this._open(event,target,contentOption);content=contentOption.call(target[0],function(response){if(!target.data("ui-tooltip-open"))return;that._delay(function(){if(event)event.type=eventType;this._open(event,target,response)})});if(content)this._open(event,target,content)},_open:function(event,target,content){var tooltip,events,delayedShow,positionOption=$.extend({},this.options.position);
if(!content)return;tooltip=this._find(target);if(tooltip.length){tooltip.find(".ui-tooltip-content").html(content);return}if(target.is("[title]"))if(event&&event.type==="mouseover")target.attr("title","");else target.removeAttr("title");tooltip=this._tooltip(target);addDescribedBy(target,tooltip.attr("id"));tooltip.find(".ui-tooltip-content").html(content);function position(event){positionOption.of=event;if(tooltip.is(":hidden"))return;tooltip.position(positionOption)}if(this.options.track&&(event&&
/^mouse/.test(event.type))){this._on(this.document,{mousemove:position});position(event)}else tooltip.position($.extend({of:target},this.options.position));tooltip.hide();this._show(tooltip,this.options.show);if(this.options.show&&this.options.show.delay)delayedShow=this.delayedShow=setInterval(function(){if(tooltip.is(":visible")){position(positionOption.of);clearInterval(delayedShow)}},$.fx.interval);this._trigger("open",event,{tooltip:tooltip});events={keyup:function(event){if(event.keyCode===
$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0];this.close(fakeEvent,true)}},remove:function(){this._removeTooltip(tooltip)}};if(!event||event.type==="mouseover")events.mouseleave="close";if(!event||event.type==="focusin")events.focusout="close";this._on(true,target,events)},close:function(event){var that=this,target=$(event?event.currentTarget:this.element),tooltip=this._find(target);if(this.closing)return;clearInterval(this.delayedShow);if(target.data("ui-tooltip-title"))target.attr("title",
target.data("ui-tooltip-title"));removeDescribedBy(target);tooltip.stop(true);this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this))});target.removeData("ui-tooltip-open");this._off(target,"mouseleave focusout keyup");if(target[0]!==this.element[0])this._off(target,"remove");this._off(this.document,"mousemove");if(event&&event.type==="mouseleave")$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title);delete that.parents[id]});this.closing=true;this._trigger("close",
event,{tooltip:tooltip});this.closing=false},_tooltip:function(element){var id="ui-tooltip-"+increments++,tooltip=$("\x3cdiv\x3e").attr({id:id,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));$("\x3cdiv\x3e").addClass("ui-tooltip-content").appendTo(tooltip);tooltip.appendTo(this.document[0].body);this.tooltips[id]=element;return tooltip},_find:function(target){var id=target.data("ui-tooltip-id");return id?$("#"+id):$()},_removeTooltip:function(tooltip){tooltip.remove();
delete this.tooltips[tooltip.attr("id")]},_destroy:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0];that.close(event,true);$("#"+id).remove();if(element.data("ui-tooltip-title")){element.attr("title",element.data("ui-tooltip-title"));element.removeData("ui-tooltip-title")}})}})})(jQuery);
(function($){$.ui.timepicker=$.ui.timepicker||{};if($.ui.timepicker.version)return;$.extend($.ui,{timepicker:{version:"1.4"}});var Timepicker=function(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:false};this._defaults=
{showButtonPanel:true,timeOnly:false,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:true,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,
microsecGrid:0,alwaysSetTime:true,separator:" ",altFieldTimeOnly:true,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:true,timezoneList:null,addSliderAccess:false,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"};$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,
microsec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(settings){extendRemove(this._defaults,
settings||{});return this},_newInst:function($input,opts){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}overrides={beforeShow:function(input,dp_inst){if($.isFunction(tp_inst._defaults.evnts.beforeShow))return tp_inst._defaults.evnts.beforeShow.call($input[0],
input,dp_inst,tp_inst)},onChangeMonthYear:function(year,month,dp_inst){tp_inst._updateDateTime(dp_inst);if($.isFunction(tp_inst._defaults.evnts.onChangeMonthYear))tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst)},onClose:function(dateText,dp_inst){if(tp_inst.timeDefined===true&&$input.val()!=="")tp_inst._updateDateTime(dp_inst);if($.isFunction(tp_inst._defaults.evnts.onClose))tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst)}};for(i in overrides)if(overrides.hasOwnProperty(i))fns[i]=
opts[i]||null;tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst});tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(val){return val.toUpperCase()});tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(val){return val.toUpperCase()});tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:""));
if(typeof tp_inst._defaults.controlType==="string"){if(tp_inst._defaults.controlType==="slider"&&typeof $.ui.slider==="undefined")tp_inst._defaults.controlType="select";tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]}else tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];if(tp_inst._defaults.timezoneList!==
null)timezoneList=tp_inst._defaults.timezoneList;var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&typeof timezoneList[0]!=="object")for(;tzi<tzl;tzi++){tzv=timezoneList[tzi];timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)}}tp_inst._defaults.timezoneList=timezoneList;tp_inst.timezone=tp_inst._defaults.timezone!==null?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):(new Date).getTimezoneOffset()*-1;tp_inst.hour=tp_inst._defaults.hour<
tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour;tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute;tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?
tp_inst._defaults.secondMax:tp_inst._defaults.second;tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec;tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec;tp_inst.ampm=
"";tp_inst.$input=$input;if(tp_inst._defaults.altField)tp_inst.$altInput=$(tp_inst._defaults.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")});if(tp_inst._defaults.minDate===0||tp_inst._defaults.minDateTime===0)tp_inst._defaults.minDate=new Date;if(tp_inst._defaults.maxDate===0||tp_inst._defaults.maxDateTime===0)tp_inst._defaults.maxDate=new Date;if(tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date)tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime());
if(tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date)tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime());if(tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date)tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime());if(tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date)tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime());tp_inst.$input.bind("focus",
function(){tp_inst._onFocus()});return tp_inst},_addTimePicker:function(dp_inst){var currDT=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(currDT);this._limitMinMaxDateTime(dp_inst,false);this._injectTimePicker()},_parseTime:function(timeString,withDate){if(!this.inst)this.inst=$.datepicker._getInst(this.$input[0]);if(withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,"dateFormat");
try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj)return false;$.extend(this,parseRes.timeObj)}catch(err){$.timepicker.log("Error parsing the date/time string: "+err+"\ndate/time string \x3d "+timeString+"\ntimeFormat \x3d "+this._defaults.timeFormat+"\ndateFormat \x3d "+dp_dateFormat);return false}return true}else{var timeObj=$.datepicker.parseTime(this._defaults.timeFormat,timeString,
this._defaults);if(!timeObj)return false;$.extend(this,timeObj);return true}},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem="",uitem="",show=null,max={},gridSize={},size=null,i=0,l=0;if($dp.find("div.ui-timepicker-div").length===0&&o.showTimepicker){var noDisplay=' style\x3d"display:none;"',html='\x3cdiv class\x3d"ui-timepicker-div'+(o.isRTL?" ui-timepicker-rtl":"")+'"\x3e\x3cdl\x3e'+'\x3cdt class\x3d"ui_tpicker_time_label"'+(o.showTime?"":noDisplay)+
"\x3e"+o.timeText+"\x3c/dt\x3e"+'\x3cdd class\x3d"ui_tpicker_time"'+(o.showTime?"":noDisplay)+"\x3e\x3c/dd\x3e";for(i=0,l=this.units.length;i<l;i++){litem=this.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);show=o["show"+uitem]!==null?o["show"+uitem]:this.support[litem];max[litem]=parseInt(o[litem+"Max"]-(o[litem+"Max"]-o[litem+"Min"])%o["step"+uitem],10);gridSize[litem]=0;html+='\x3cdt class\x3d"ui_tpicker_'+litem+'_label"'+(show?"":noDisplay)+"\x3e"+o[litem+"Text"]+"\x3c/dt\x3e"+
'\x3cdd class\x3d"ui_tpicker_'+litem+'"\x3e\x3cdiv class\x3d"ui_tpicker_'+litem+'_slider"'+(show?"":noDisplay)+"\x3e\x3c/div\x3e";if(show&&o[litem+"Grid"]>0){html+='\x3cdiv style\x3d"padding-left: 1px"\x3e\x3ctable class\x3d"ui-tpicker-grid-label"\x3e\x3ctr\x3e';if(litem==="hour")for(var h=o[litem+"Min"];h<=max[litem];h+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;var tmph=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:h},o);html+='\x3ctd data-for\x3d"'+litem+'"\x3e'+tmph+"\x3c/td\x3e"}else for(var m=
o[litem+"Min"];m<=max[litem];m+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;html+='\x3ctd data-for\x3d"'+litem+'"\x3e'+(m<10?"0":"")+m+"\x3c/td\x3e"}html+="\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e"}html+="\x3c/dd\x3e"}var showTz=o.showTimezone!==null?o.showTimezone:this.support.timezone;html+='\x3cdt class\x3d"ui_tpicker_timezone_label"'+(showTz?"":noDisplay)+"\x3e"+o.timezoneText+"\x3c/dt\x3e";html+='\x3cdd class\x3d"ui_tpicker_timezone" '+(showTz?"":noDisplay)+"\x3e\x3c/dd\x3e";html+="\x3c/dl\x3e\x3c/div\x3e";
var $tp=$(html);if(o.timeOnly===true){$tp.prepend('\x3cdiv class\x3d"ui-widget-header ui-helper-clearfix ui-corner-all"\x3e'+'\x3cdiv class\x3d"ui-datepicker-title"\x3e'+o.timeOnlyTitle+"\x3c/div\x3e"+"\x3c/div\x3e");$dp.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()}for(i=0,l=tp_inst.units.length;i<l;i++){litem=tp_inst.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);show=o["show"+uitem]!==null?o["show"+uitem]:this.support[litem];tp_inst[litem+"_slider"]=tp_inst.control.create(tp_inst,
$tp.find(".ui_tpicker_"+litem+"_slider"),litem,tp_inst[litem],o[litem+"Min"],max[litem],o["step"+uitem]);if(show&&o[litem+"Grid"]>0){size=100*gridSize[litem]*o[litem+"Grid"]/(max[litem]-o[litem+"Min"]);$tp.find(".ui_tpicker_"+litem+" table").css({width:size+"%",marginLeft:o.isRTL?"0":size/(-2*gridSize[litem])+"%",marginRight:o.isRTL?size/(-2*gridSize[litem])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(e){var $t=$(this),h=$t.html(),n=parseInt(h.replace(/[^0-9]/g),10),ap=h.replace(/[^apm]/ig),
f=$t.data("for");if(f==="hour")if(ap.indexOf("p")!==-1&&n<12)n+=12;else if(ap.indexOf("a")!==-1&&n===12)n=0;tp_inst.control.value(tp_inst,tp_inst[f+"_slider"],litem,n);tp_inst._onTimeChange();tp_inst._onSelectHandler()}).css({cursor:"pointer",width:100/gridSize[litem]+"%",textAlign:"center",overflow:"hidden"})}}this.timezone_select=$tp.find(".ui_tpicker_timezone").append("\x3cselect\x3e\x3c/select\x3e").find("select");$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val,idx){return $("\x3coption /\x3e").val(typeof val===
"object"?val.value:val).text(typeof val==="object"?val.label:val)}));if(typeof this.timezone!=="undefined"&&(this.timezone!==null&&this.timezone!=="")){var local_timezone=(new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12)).getTimezoneOffset()*-1;if(local_timezone===this.timezone)selectLocalTimezone(tp_inst);else this.timezone_select.val(this.timezone)}else if(typeof this.hour!=="undefined"&&(this.hour!==null&&this.hour!==""))this.timezone_select.val(o.timezone);else selectLocalTimezone(tp_inst);
this.timezone_select.change(function(){tp_inst._onTimeChange();tp_inst._onSelectHandler()});var $buttonPanel=$dp.find(".ui-datepicker-buttonpane");if($buttonPanel.length)$buttonPanel.before($tp);else $dp.append($tp);this.$timeObj=$tp.find(".ui_tpicker_time");if(this.inst!==null){var timeDefined=this.timeDefined;this._onTimeChange();this.timeDefined=timeDefined}if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;sliderAccessArgs.isRTL=rtl;
setTimeout(function(){if($tp.find(".ui-slider-access").length===0){$tp.find(".ui-slider:visible").sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find(".ui-slider-access:eq(0)").outerWidth(true);if(sliderAccessWidth)$tp.find("table:visible").each(function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?"marginRight":"marginLeft").toString().replace("%",""),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=oldMarginLeft*newWidth/oldWidth+"%",css={width:newWidth,marginRight:0,
marginLeft:0};css[rtl?"marginRight":"marginLeft"]=newMarginLeft;$g.css(css)})}},10)}tp_inst._limitMinMaxDateTime(this.inst,true)}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(!this._defaults.showTimepicker)return;if($.datepicker._get(dp_inst,"minDateTime")!==null&&($.datepicker._get(dp_inst,"minDateTime")!==undefined&&dp_date)){var minDateTime=$.datepicker._get(dp_inst,"minDateTime"),
minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);if(this.hourMinOriginal===null||(this.minuteMinOriginal===null||(this.secondMinOriginal===null||(this.millisecMinOriginal===null||this.microsecMinOriginal===null)))){this.hourMinOriginal=o.hourMin;this.minuteMinOriginal=o.minuteMin;this.secondMinOriginal=o.secondMin;this.millisecMinOriginal=o.millisecMin;this.microsecMinOriginal=o.microsecMin}if(dp_inst.settings.timeOnly||minDateTimeDate.getTime()===
dp_date.getTime()){this._defaults.hourMin=minDateTime.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=minDateTime.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=minDateTime.getSeconds();if(this.second<=this._defaults.secondMin){this.second=this._defaults.secondMin;this._defaults.millisecMin=minDateTime.getMilliseconds();if(this.millisec<=this._defaults.millisecMin){this.millisec=
this._defaults.millisecMin;this._defaults.microsecMin=minDateTime.getMicroseconds()}else{if(this.microsec<this._defaults.microsecMin)this.microsec=this._defaults.microsecMin;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.minuteMin=
this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.hourMin=this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}if($.datepicker._get(dp_inst,"maxDateTime")!==null&&($.datepicker._get(dp_inst,
"maxDateTime")!==undefined&&dp_date)){var maxDateTime=$.datepicker._get(dp_inst,"maxDateTime"),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||(this.minuteMaxOriginal===null||(this.secondMaxOriginal===null||this.millisecMaxOriginal===null))){this.hourMaxOriginal=o.hourMax;this.minuteMaxOriginal=o.minuteMax;this.secondMaxOriginal=o.secondMax;this.millisecMaxOriginal=o.millisecMax;this.microsecMaxOriginal=o.microsecMax}if(dp_inst.settings.timeOnly||
maxDateTimeDate.getTime()===dp_date.getTime()){this._defaults.hourMax=maxDateTime.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=maxDateTime.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMax=maxDateTime.getSeconds();if(this.second>=this._defaults.secondMax){this.second=this._defaults.secondMax;this._defaults.millisecMax=maxDateTime.getMilliseconds();if(this.millisec>=this._defaults.millisecMax){this.millisec=
this._defaults.millisecMax;this._defaults.microsecMax=maxDateTime.getMicroseconds()}else{if(this.microsec>this._defaults.microsecMax)this.microsec=this._defaults.microsecMax;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.minuteMax=
this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.hourMax=this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}if(adjustSliders!==undefined&&adjustSliders===true){var hourMax=parseInt(this._defaults.hourMax-
(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),minMax=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),secMax=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),millisecMax=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),microsecMax=parseInt(this._defaults.microsecMax-
(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);if(this.hour_slider){this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:hourMax});this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)}if(this.minute_slider){this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:minMax});this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)}if(this.second_slider){this.control.options(this,
this.second_slider,"second",{min:this._defaults.secondMin,max:secMax});this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)}if(this.millisec_slider){this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:millisecMax});this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)}if(this.microsec_slider){this.control.options(this,this.microsec_slider,"microsec",
{min:this._defaults.microsecMin,max:microsecMax});this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec)}}},_onTimeChange:function(){if(!this._defaults.showTimepicker)return;var hour=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):false,minute=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):false,second=this.second_slider?this.control.value(this,this.second_slider,"second"):false,millisec=this.millisec_slider?
this.control.value(this,this.millisec_slider,"millisec"):false,microsec=this.microsec_slider?this.control.value(this,this.microsec_slider,"microsec"):false,timezone=this.timezone_select?this.timezone_select.val():false,o=this._defaults,pickerTimeFormat=o.pickerTimeFormat||o.timeFormat,pickerTimeSuffix=o.pickerTimeSuffix||o.timeSuffix;if(typeof hour==="object")hour=false;if(typeof minute==="object")minute=false;if(typeof second==="object")second=false;if(typeof millisec==="object")millisec=false;if(typeof microsec===
"object")microsec=false;if(typeof timezone==="object")timezone=false;if(hour!==false)hour=parseInt(hour,10);if(minute!==false)minute=parseInt(minute,10);if(second!==false)second=parseInt(second,10);if(millisec!==false)millisec=parseInt(millisec,10);if(microsec!==false)microsec=parseInt(microsec,10);var ampm=o[hour<12?"amNames":"pmNames"][0];var hasChanged=hour!==this.hour||(minute!==this.minute||(second!==this.second||(millisec!==this.millisec||(microsec!==this.microsec||(this.ampm.length>0&&hour<
12!==($.inArray(this.ampm.toUpperCase(),this.amNames)!==-1)||this.timezone!==null&&timezone!==this.timezone)))));if(hasChanged){if(hour!==false)this.hour=hour;if(minute!==false)this.minute=minute;if(second!==false)this.second=second;if(millisec!==false)this.millisec=millisec;if(microsec!==false)this.microsec=microsec;if(timezone!==false)this.timezone=timezone;if(!this.inst)this.inst=$.datepicker._getInst(this.$input[0]);this._limitMinMaxDateTime(this.inst,true)}if(this.support.ampm)this.ampm=ampm;
this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o);if(this.$timeObj)if(pickerTimeFormat===o.timeFormat)this.$timeObj.text(this.formattedTime+pickerTimeSuffix);else this.$timeObj.text($.datepicker.formatTime(pickerTimeFormat,this,o)+pickerTimeSuffix);this.timeDefined=true;if(hasChanged)this._updateDateTime()},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect;var inputEl=this.$input?this.$input[0]:null;if(onSelect&&inputEl)onSelect.apply(inputEl,
[this.formattedDateTime,this])},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst;var dtTmp=dp_inst.currentYear>0?new Date(dp_inst.currentYear,dp_inst.currentMonth,dp_inst.currentDay):new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay),dt=$.datepicker._daylightSavingAdjust(dtTmp),dateFmt=$.datepicker._get(dp_inst,"dateFormat"),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=dt!==null&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,
dt===null?new Date:dt,formatCfg);var formattedDateTime=this.formattedDate;if(dp_inst.lastVa===""){dp_inst.currentYear=dp_inst.selectedYear;dp_inst.currentMonth=dp_inst.selectedMonth;dp_inst.currentDay=dp_inst.selectedDay}if(this._defaults.timeOnly===true)formattedDateTime=this.formattedTime;else if(this._defaults.timeOnly!==true&&(this._defaults.alwaysSetTime||timeAvailable))formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix;this.formattedDateTime=formattedDateTime;
if(!this._defaults.showTimepicker)this.$input.val(this.formattedDate);else if(this.$altInput&&(this._defaults.timeOnly===false&&this._defaults.altFieldTimeOnly===true)){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate)}else if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime="",altSeparator=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;
if(!this._defaults.timeOnly){if(this._defaults.altFormat)altFormattedDateTime=$.datepicker.formatDate(this._defaults.altFormat,dt===null?new Date:dt,formatCfg);else altFormattedDateTime=this.formattedDate;if(altFormattedDateTime)altFormattedDateTime+=altSeparator}if(this._defaults.altTimeFormat)altFormattedDateTime+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+altTimeSuffix;else altFormattedDateTime+=this.formattedTime+altTimeSuffix;this.$altInput.val(altFormattedDateTime)}else this.$input.val(formattedDateTime);
this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst)if(tp_inst._defaults.timeOnly&&inst.input.val()!==inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){var rtl=tp_inst._defaults.isRTL;return obj.prop("slide",
null).slider({orientation:"horizontal",value:rtl?val*-1:val,min:rtl?max*-1:min,max:rtl?min*-1:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),unit,rtl?ui.value*-1:ui.value);tp_inst._onTimeChange()},stop:function(event,ui){tp_inst._onSelectHandler()}})},options:function(tp_inst,obj,unit,opts,val){if(tp_inst._defaults.isRTL){if(typeof opts==="string"){if(opts==="min"||opts==="max"){if(val!==undefined)return obj.slider(opts,val*-1);return Math.abs(obj.slider(opts))}return obj.slider(opts)}var min=
opts.min,max=opts.max;opts.min=opts.max=null;if(min!==undefined)opts.max=min*-1;if(max!==undefined)opts.min=max*-1;return obj.slider(opts)}if(typeof opts==="string"&&val!==undefined)return obj.slider(opts,val);return obj.slider(opts)},value:function(tp_inst,obj,unit,val){if(tp_inst._defaults.isRTL){if(val!==undefined)return obj.slider("value",val*-1);return Math.abs(obj.slider("value"))}if(val!==undefined)return obj.slider("value",val);return obj.slider("value")}},select:{create:function(tp_inst,
obj,unit,val,min,max,step){var sel='\x3cselect class\x3d"ui-timepicker-select" data-unit\x3d"'+unit+'" data-min\x3d"'+min+'" data-max\x3d"'+max+'" data-step\x3d"'+step+'"\x3e',format=tp_inst._defaults.pickerTimeFormat||tp_inst._defaults.timeFormat;for(var i=min;i<=max;i+=step){sel+='\x3coption value\x3d"'+i+'"'+(i===val?" selected":"")+"\x3e";if(unit==="hour")sel+=$.datepicker.formatTime($.trim(format.replace(/[^ht ]/ig,"")),{hour:i},tp_inst._defaults);else if(unit==="millisec"||(unit==="microsec"||
i>=10))sel+=i;else sel+="0"+i.toString();sel+="\x3c/option\x3e"}sel+="\x3c/select\x3e";obj.children("select").remove();$(sel).appendTo(obj).change(function(e){tp_inst._onTimeChange();tp_inst._onSelectHandler()});return obj},options:function(tp_inst,obj,unit,opts,val){var o={},$t=obj.children("select");if(typeof opts==="string"){if(val===undefined)return $t.data(opts);o[opts]=val}else o=opts;return tp_inst.control.create(tp_inst,obj,$t.data("unit"),$t.val(),o.min||$t.data("min"),o.max||$t.data("max"),
o.step||$t.data("step"))},value:function(tp_inst,obj,unit,val){var $t=obj.children("select");if(val!==undefined)return $t.val(val);return $t.val()}}}});$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);if(typeof o==="object")tmp_args[0]=$.extend(o,{timeOnly:true});return $(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args)})},datetimepicker:function(o){o=o||{};var tmp_args=arguments;if(typeof o==="string")if(o==="getDate")return $.fn.datepicker.apply($(this[0]),
tmp_args);else return this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args)});else return this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults)})}});$.datepicker.parseDateTime=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec);
parseRes.date.setMicroseconds(t.microsec)}return parseRes.date};$.datepicker.parseTime=function(timeFormat,timeString,options){var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{}),iso8601=timeFormat.replace(/\'.*?\'/g,"").indexOf("Z")!==-1;var strictParse=function(f,s,o){var getPatternAmpm=function(amNames,pmNames){var markers=[];if(amNames)$.merge(markers,amNames);if(pmNames)$.merge(markers,pmNames);markers=$.map(markers,function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,"\\$\x26")});
return"("+markers.join("|")+")?"};var getFormatPositions=function(timeFormat){var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(finds)for(var i=0;i<finds.length;i++)if(orders[finds[i].toString().charAt(0)]===-1)orders[finds[i].toString().charAt(0)]=i+1;return orders};var regstr="^"+f.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){var ml=match.length;switch(match.charAt(0).toLowerCase()){case "h":return ml===
1?"(\\d?\\d)":"(\\d{"+ml+"})";case "m":return ml===1?"(\\d?\\d)":"(\\d{"+ml+"})";case "s":return ml===1?"(\\d?\\d)":"(\\d{"+ml+"})";case "l":return"(\\d?\\d?\\d)";case "c":return"(\\d?\\d?\\d)";case "z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case "t":return getPatternAmpm(o.amNames,o.pmNames);default:return"("+match.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(m){return"\\"+m})+")?"}}).replace(/\s/g,"\\s?")+o.timeSuffix+"$",order=getFormatPositions(f),ampm="",treg;treg=
s.match(new RegExp(regstr,"i"));var resTime={hour:0,minute:0,second:0,millisec:0,microsec:0};if(treg){if(order.t!==-1)if(treg[order.t]===undefined||treg[order.t].length===0){ampm="";resTime.ampm=""}else{ampm=$.inArray(treg[order.t].toUpperCase(),o.amNames)!==-1?"AM":"PM";resTime.ampm=o[ampm==="AM"?"amNames":"pmNames"][0]}if(order.h!==-1)if(ampm==="AM"&&treg[order.h]==="12")resTime.hour=0;else if(ampm==="PM"&&treg[order.h]!=="12")resTime.hour=parseInt(treg[order.h],10)+12;else resTime.hour=Number(treg[order.h]);
if(order.m!==-1)resTime.minute=Number(treg[order.m]);if(order.s!==-1)resTime.second=Number(treg[order.s]);if(order.l!==-1)resTime.millisec=Number(treg[order.l]);if(order.c!==-1)resTime.microsec=Number(treg[order.c]);if(order.z!==-1&&treg[order.z]!==undefined)resTime.timezone=$.timepicker.timezoneOffsetNumber(treg[order.z]);return resTime}return false};var looseParse=function(f,s,o){try{var d=new Date("2012-01-01 "+s);if(isNaN(d.getTime())){d=new Date("2012-01-01T"+s);if(isNaN(d.getTime())){d=new Date("01/01/2012 "+
s);if(isNaN(d.getTime()))throw"Unable to parse time with native Date: "+s;}}return{hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),millisec:d.getMilliseconds(),microsec:d.getMicroseconds(),timezone:d.getTimezoneOffset()*-1}}catch(err){try{return strictParse(f,s,o)}catch(err2){$.timepicker.log("Unable to parse \ntimeString: "+s+"\ntimeFormat: "+f)}}return false};if(typeof o.parse==="function")return o.parse(timeFormat,timeString,o);if(o.parse==="loose")return looseParse(timeFormat,timeString,
o);return strictParse(timeFormat,timeString,o)};$.datepicker.formatTime=function(format,time,options){options=options||{};options=$.extend({},$.timepicker._defaults,options);time=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},time);var tmptime=format,ampmName=options.amNames[0],hour=parseInt(time.hour,10);if(hour>11)ampmName=options.pmNames[0];tmptime=tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){switch(match){case "HH":return("0"+hour).slice(-2);
case "H":return hour;case "hh":return("0"+convert24to12(hour)).slice(-2);case "h":return convert24to12(hour);case "mm":return("0"+time.minute).slice(-2);case "m":return time.minute;case "ss":return("0"+time.second).slice(-2);case "s":return time.second;case "l":return("00"+time.millisec).slice(-3);case "c":return("00"+time.microsec).slice(-3);case "z":return $.timepicker.timezoneOffsetString(time.timezone===null?options.timezone:time.timezone,false);case "Z":return $.timepicker.timezoneOffsetString(time.timezone===
null?options.timezone:time.timezone,true);case "T":return ampmName.charAt(0).toUpperCase();case "TT":return ampmName.toUpperCase();case "t":return ampmName.charAt(0).toLowerCase();case "tt":return ampmName.toLowerCase();default:return match.replace(/'/g,"")}});return tmptime};$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,"timepicker");if(tp_inst){tp_inst._limitMinMaxDateTime(inst,true);inst.inline=
inst.stay_open=true;this._base_selectDate(id,dateStr);inst.inline=inst.stay_open=false;this._notifyChange(inst);this._updateDatepicker(inst)}else this._base_selectDate(id,dateStr)};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if($.datepicker._curInst&&($.datepicker._curInst!==inst&&($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input)))return;if(typeof inst.stay_open!=="boolean"||inst.stay_open===
false){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,"timepicker");if(tp_inst)tp_inst._addTimePicker(inst)}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst)if($.datepicker._get(inst,"constrainInput")){var ampm=tp_inst.support.ampm,tz=tp_inst._defaults.showTimezone!==null?tp_inst._defaults.showTimezone:tp_inst.support.timezone,dateChars=
$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,ampm?"APM":"").replace(/Tt/g,ampm?"AaPpMm":"").replace(/tT/g,ampm?"AaPpMm":"").replace(/T/g,ampm?"AP":"").replace(/tt/g,ampm?"apm":"").replace(/t/g,ampm?"ap":"")+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tz?tp_inst._defaults.timezoneList.join(""):"")+tp_inst._defaults.amNames.join("")+tp_inst._defaults.pmNames.join("")+dateChars,
chr=String.fromCharCode(event.charCode===undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<" "||(!dateChars||datetimeChars.indexOf(chr)>-1))}return $.datepicker._base_doKeyPress(event)};$.datepicker._base_updateAlternate=$.datepicker._updateAlternate;$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){var altFormat=tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat,date=this._getDate(inst),
formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime="",altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,altTimeFormat=tp_inst._defaults.altTimeFormat!==null?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix;if(!tp_inst._defaults.timeOnly&&
(!tp_inst._defaults.altFieldTimeOnly&&date!==null))if(tp_inst._defaults.altFormat)altFormattedDateTime=$.datepicker.formatDate(tp_inst._defaults.altFormat,date,formatCfg)+altSeparator+altFormattedDateTime;else altFormattedDateTime=tp_inst.formattedDate+altSeparator+altFormattedDateTime;$(altField).val(altFormattedDateTime)}}else $.datepicker._base_updateAlternate(inst)};$.datepicker._base_doKeyUp=$.datepicker._doKeyUp;$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),
tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst)if(tp_inst._defaults.timeOnly&&inst.input.val()!==inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}return $.datepicker._base_doKeyUp(event)};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]),$dp=inst.dpDiv;this._base_gotoToday(id);var tp_inst=this._get(inst,"timepicker");selectLocalTimezone(tp_inst);var now=new Date;this._setTime(inst,
now);$(".ui-datepicker-today",$dp).click()};$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst)return;var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate");if(tp_inst){inst.settings.showTimepicker=false;tp_inst._defaults.showTimepicker=false;tp_inst._updateDateTime(inst)}};$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst)return;var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate");
if(tp_inst){inst.settings.showTimepicker=true;tp_inst._defaults.showTimepicker=true;tp_inst._addTimePicker(inst);tp_inst._updateDateTime(inst)}};$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var defaults=tp_inst._defaults;tp_inst.hour=date?date.getHours():defaults.hour;tp_inst.minute=date?date.getMinutes():defaults.minute;tp_inst.second=date?date.getSeconds():defaults.second;tp_inst.millisec=date?date.getMilliseconds():defaults.millisec;tp_inst.microsec=
date?date.getMicroseconds():defaults.microsec;tp_inst._limitMinMaxDateTime(inst,true);tp_inst._onTimeChange();tp_inst._updateDateTime(inst)}};$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(!inst)return;var tp_inst=this._get(inst,"timepicker");if(tp_inst){this._setDateFromField(inst);var tp_date;if(date){if(typeof date==="string"){tp_inst._parseTime(date,withDate);tp_date=new Date;tp_date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec);
tp_date.setMicroseconds(tp_inst.microsec)}else{tp_date=new Date(date.getTime());tp_date.setMicroseconds(date.getMicroseconds())}if(tp_date.toString()==="Invalid Date")tp_date=undefined;this._setTime(inst,tp_date)}}};$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker;$.datepicker._setDateDatepicker=function(target,date){var inst=this._getInst(target);if(!inst)return;if(typeof date==="string"){date=new Date(date);if(!date.getTime())$.timepicker.log("Error creating Date object from string.")}var tp_inst=
this._get(inst,"timepicker");var tp_date;if(date instanceof Date){tp_date=new Date(date.getTime());tp_date.setMicroseconds(date.getMicroseconds())}else tp_date=date;if(tp_inst){if(!tp_inst.support.timezone&&tp_inst._defaults.timezone===null)tp_inst.timezone=tp_date.getTimezoneOffset()*-1;date=$.timepicker.timezoneAdjust(date,tp_inst.timezone);tp_date=$.timepicker.timezoneAdjust(tp_date,tp_inst.timezone)}this._updateDatepicker(inst);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(target,
tp_date,true)};$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker;$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(!inst)return;var tp_inst=this._get(inst,"timepicker");if(tp_inst){if(inst.lastVal===undefined)this._setDateFromField(inst,noDefault);var date=this._getDate(inst);if(date&&tp_inst._parseTime($(target).val(),tp_inst.timeOnly)){date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec);date.setMicroseconds(tp_inst.microsec);
if(tp_inst.timezone!=null){if(!tp_inst.support.timezone&&tp_inst._defaults.timezone===null)tp_inst.timezone=date.getTimezoneOffset()*-1;date=$.timepicker.timezoneAdjust(date,tp_inst.timezone)}}return date}return this._base_getDateDatepicker(target,noDefault)};$.datepicker._base_parseDate=$.datepicker.parseDate;$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings)}catch(err){if(err.indexOf(":")>=0){date=this._base_parseDate(format,value.substring(0,
value.length-(err.length-err.indexOf(":")-2)),settings);$.timepicker.log("Error parsing the date string: "+err+"\ndate string \x3d "+value+"\ndate format \x3d "+format)}else throw err;}return date};$.datepicker._base_formatDate=$.datepicker._formatDate;$.datepicker._formatDate=function(inst,day,month,year){var tp_inst=this._get(inst,"timepicker");if(tp_inst){tp_inst._updateDateTime(inst);return tp_inst.$input.val()}return this._base_formatDate(inst)};$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker;
$.datepicker._optionDatepicker=function(target,name,value){var inst=this._getInst(target),name_clone;if(!inst)return null;var tp_inst=this._get(inst,"timepicker");if(tp_inst){var min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={},prop;if(typeof name==="string")if(name==="minDate"||name==="minDateTime")min=value;else if(name==="maxDate"||name==="maxDateTime")max=value;else if(name==="onSelect")onselect=value;else{if(overrides.hasOwnProperty(name)){if(typeof value==="undefined")return overrides[name];
fns[name]=value;name_clone={}}}else if(typeof name==="object"){if(name.minDate)min=name.minDate;else if(name.minDateTime)min=name.minDateTime;else if(name.maxDate)max=name.maxDate;else if(name.maxDateTime)max=name.maxDateTime;for(prop in overrides)if(overrides.hasOwnProperty(prop)&&name[prop])fns[prop]=name[prop]}for(prop in fns)if(fns.hasOwnProperty(prop)){overrides[prop]=fns[prop];if(!name_clone)name_clone=$.extend({},name);delete name_clone[prop]}if(name_clone&&isEmptyObject(name_clone))return;
if(min){if(min===0)min=new Date;else min=new Date(min);tp_inst._defaults.minDate=min;tp_inst._defaults.minDateTime=min}else if(max){if(max===0)max=new Date;else max=new Date(max);tp_inst._defaults.maxDate=max;tp_inst._defaults.maxDateTime=max}else if(onselect)tp_inst._defaults.onSelect=onselect}if(value===undefined)return this._base_optionDatepicker.call($.datepicker,target,name);return this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value)};var isEmptyObject=function(obj){var prop;
for(prop in obj)if(obj.hasOwnProperty(prop))return false;return true};var extendRemove=function(target,props){$.extend(target,props);for(var name in props)if(props[name]===null||props[name]===undefined)target[name]=props[name];return target};var detectSupport=function(timeFormat){var tf=timeFormat.replace(/'.*?'/g,"").toLowerCase(),isIn=function(f,t){return f.indexOf(t)!==-1?true:false};return{hour:isIn(tf,"h"),minute:isIn(tf,"m"),second:isIn(tf,"s"),millisec:isIn(tf,"l"),microsec:isIn(tf,"c"),timezone:isIn(tf,
"z"),ampm:isIn(tf,"t")&&isIn(timeFormat,"h"),iso8601:isIn(timeFormat,"Z")}};var convert24to12=function(hour){hour%=12;if(hour===0)hour=12;return String(hour)};var computeEffectiveSetting=function(settings,property){return settings&&settings[property]?settings[property]:$.timepicker._defaults[property]};var splitDateTime=function(dateTimeString,timeSettings){var separator=computeEffectiveSetting(timeSettings,"separator"),format=computeEffectiveSetting(timeSettings,"timeFormat"),timeParts=format.split(separator),
timePartsLen=timeParts.length,allParts=dateTimeString.split(separator),allPartsLen=allParts.length;if(allPartsLen>1)return{dateString:allParts.splice(0,allPartsLen-timePartsLen).join(separator),timeString:allParts.splice(0,timePartsLen).join(separator)};return{dateString:dateTimeString,timeString:""}};var parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date,parts,parsedTime;parts=splitDateTime(dateTimeString,timeSettings);date=$.datepicker._base_parseDate(dateFormat,
parts.dateString,dateSettings);if(parts.timeString==="")return{date:date};parsedTime=$.datepicker.parseTime(timeFormat,parts.timeString,timeSettings);if(!parsedTime)throw"Wrong time format";return{date:date,timeObj:parsedTime}};var selectLocalTimezone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){var now=date||new Date;tp_inst.timezone_select.val(-now.getTimezoneOffset())}};$.timepicker=new Timepicker;$.timepicker.timezoneOffsetString=function(tzMinutes,iso8601){if(isNaN(tzMinutes)||
(tzMinutes>840||tzMinutes<-720))return tzMinutes;var off=tzMinutes,minutes=off%60,hours=(off-minutes)/60,iso=iso8601?":":"",tz=(off>=0?"+":"-")+("0"+Math.abs(hours)).slice(-2)+iso+("0"+Math.abs(minutes)).slice(-2);if(tz==="+00:00")return"Z";return tz};$.timepicker.timezoneOffsetNumber=function(tzString){var normalized=tzString.toString().replace(":","");if(normalized.toUpperCase()==="Z")return 0;if(!/^(\-|\+)\d{4}$/.test(normalized))return tzString;return(normalized.substr(0,1)==="-"?-1:1)*(parseInt(normalized.substr(1,
2),10)*60+parseInt(normalized.substr(3,2),10))};$.timepicker.timezoneAdjust=function(date,toTimezone){var toTz=$.timepicker.timezoneOffsetNumber(toTimezone);if(!isNaN(toTz))date.setMinutes(date.getMinutes()+-date.getTimezoneOffset()-toTz);return date};$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange("timepicker",startTime,endTime,options)};$.timepicker.datetimeRange=function(startTime,endTime,options){$.timepicker.handleRange("datetimepicker",startTime,endTime,
options)};$.timepicker.dateRange=function(startTime,endTime,options){$.timepicker.handleRange("datepicker",startTime,endTime,options)};$.timepicker.handleRange=function(method,startTime,endTime,options){options=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},options);function checkDates(changed,other){var startdt=startTime[method]("getDate"),enddt=endTime[method]("getDate"),changeddt=changed[method]("getDate");if(startdt!==null){var minDate=new Date(startdt.getTime()),maxDate=new Date(startdt.getTime());
minDate.setMilliseconds(minDate.getMilliseconds()+options.minInterval);maxDate.setMilliseconds(maxDate.getMilliseconds()+options.maxInterval);if(options.minInterval>0&&minDate>enddt)endTime[method]("setDate",minDate);else if(options.maxInterval>0&&maxDate<enddt)endTime[method]("setDate",maxDate);else if(startdt>enddt)other[method]("setDate",changeddt)}}function selected(changed,other,option){if(!changed.val())return;var date=changed[method].call(changed,"getDate");if(date!==null&&options.minInterval>
0){if(option==="minDate")date.setMilliseconds(date.getMilliseconds()+options.minInterval);if(option==="maxDate")date.setMilliseconds(date.getMilliseconds()-options.minInterval)}if(date.getTime)other[method].call(other,"option",option,date)}$.fn[method].call(startTime,$.extend({onClose:function(dateText,inst){checkDates($(this),endTime)},onSelect:function(selectedDateTime){selected($(this),endTime,"minDate")}},options,options.start));$.fn[method].call(endTime,$.extend({onClose:function(dateText,inst){checkDates($(this),
startTime)},onSelect:function(selectedDateTime){selected($(this),startTime,"maxDate")}},options,options.end));checkDates(startTime,endTime);selected(startTime,endTime,"minDate");selected(endTime,startTime,"maxDate");return $([startTime.get(0),endTime.get(0)])};$.timepicker.log=function(err){if(window.console)window.console.log(err)};$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,
_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal};if(!Date.prototype.getMicroseconds){Date.prototype.microseconds=0;Date.prototype.getMicroseconds=function(){return this.microseconds};Date.prototype.setMicroseconds=function(m){this.setMilliseconds(this.getMilliseconds()+Math.floor(m/1E3));this.microseconds=m%1E3;return this}}$.timepicker.version="1.4"})(jQuery);
(function($){$.fn.drag=function(str,arg,opts){var type=typeof str=="string"?str:"",fn=$.isFunction(str)?str:$.isFunction(arg)?arg:null;if(type.indexOf("drag")!==0)type="drag"+type;opts=(str==fn?arg:opts)||{};return fn?this.bind(type,opts,fn):this.trigger(type)};var $event=$.event,$special=$event.special,drag=$special.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",noBubble:true,add:function(obj){var data=$.data(this,drag.datakey),
opts=obj.data||{};data.related+=1;$.each(drag.defaults,function(key,def){if(opts[key]!==undefined)data[key]=opts[key]})},remove:function(){$.data(this,drag.datakey).related-=1},setup:function(){if($.data(this,drag.datakey))return;var data=$.extend({related:0},drag.defaults);$.data(this,drag.datakey,data);$event.add(this,"touchstart mousedown",drag.init,data);if(this.attachEvent)this.attachEvent("ondragstart",drag.dontstart)},teardown:function(){var data=$.data(this,drag.datakey)||{};if(data.related)return;
$.removeData(this,drag.datakey);$event.remove(this,"touchstart mousedown",drag.init);drag.textselect(true);if(this.detachEvent)this.detachEvent("ondragstart",drag.dontstart)},init:function(event){if(drag.touched)return;var dd=event.data,results;if(event.which!=0&&(dd.which>0&&event.which!=dd.which))return;if($(event.target).is(dd.not))return;if(dd.handle&&!$(event.target).closest(dd.handle,event.currentTarget).length)return;drag.touched=event.type=="touchstart"?this:null;dd.propagates=1;dd.mousedown=
this;dd.interactions=[drag.interaction(this,dd)];dd.target=event.target;dd.pageX=event.pageX;dd.pageY=event.pageY;dd.dragging=null;results=drag.hijack(event,"draginit",dd);if(!dd.propagates)return;results=drag.flatten(results);if(results&&results.length){dd.interactions=[];$.each(results,function(){dd.interactions.push(drag.interaction(this,dd))})}dd.propagates=dd.interactions.length;if(dd.drop!==false&&$special.drop)$special.drop.handler(event,dd);drag.textselect(false);if(drag.touched)$event.add(drag.touched,
"touchmove touchend",drag.handler,dd);else $event.add(document,"mousemove mouseup",drag.handler,dd);if(!drag.touched||dd.live)return false},interaction:function(elem,dd){var offset=$(elem)[dd.relative?"position":"offset"]()||{top:0,left:0};return{drag:elem,callback:new drag.callback,droppable:[],offset:offset}},handler:function(event){var dd=event.data;switch(event.type){case !dd.dragging&&"touchmove":event.preventDefault();case !dd.dragging&&"mousemove":if(Math.pow(event.pageX-dd.pageX,2)+Math.pow(event.pageY-
dd.pageY,2)<Math.pow(dd.distance,2))break;event.target=dd.target;drag.hijack(event,"dragstart",dd);if(dd.propagates)dd.dragging=true;case "touchmove":event.preventDefault();case "mousemove":if(dd.dragging){drag.hijack(event,"drag",dd);if(dd.propagates){if(dd.drop!==false&&$special.drop)$special.drop.handler(event,dd);break}event.type="mouseup"}case "touchend":case "mouseup":default:if(drag.touched)$event.remove(drag.touched,"touchmove touchend",drag.handler);else $event.remove(document,"mousemove mouseup",
drag.handler);if(dd.dragging){if(dd.drop!==false&&$special.drop)$special.drop.handler(event,dd);drag.hijack(event,"dragend",dd)}drag.textselect(true);if(dd.click===false&&dd.dragging)$.data(dd.mousedown,"suppress.click",(new Date).getTime()+5);dd.dragging=drag.touched=false;break}},hijack:function(event,type,dd,x,elem){if(!dd)return;var orig={event:event.originalEvent,type:event.type},mode=type.indexOf("drop")?"drag":"drop",result,i=x||0,ia,$elems,callback,len=!isNaN(x)?x:dd.interactions.length;event.type=
type;event.originalEvent=null;dd.results=[];do if(ia=dd.interactions[i]){if(type!=="dragend"&&ia.cancelled)continue;callback=drag.properties(event,dd,ia);ia.results=[];$(elem||(ia[mode]||dd.droppable)).each(function(p,subject){callback.target=subject;event.isPropagationStopped=function(){return false};result=subject?$event.dispatch.call(subject,event,callback):null;if(result===false){if(mode=="drag"){ia.cancelled=true;dd.propagates-=1}if(type=="drop")ia[mode][p]=null}else if(type=="dropinit")ia.droppable.push(drag.element(result)||
subject);if(type=="dragstart")ia.proxy=$(drag.element(result)||ia.drag)[0];ia.results.push(result);delete event.result;if(type!=="dropinit")return result});dd.results[i]=drag.flatten(ia.results);if(type=="dropinit")ia.droppable=drag.flatten(ia.droppable);if(type=="dragstart"&&!ia.cancelled)callback.update()}while(++i<len);event.type=orig.type;event.originalEvent=orig.event;return drag.flatten(dd.results)},properties:function(event,dd,ia){var obj=ia.callback;obj.drag=ia.drag;obj.proxy=ia.proxy||ia.drag;
obj.startX=dd.pageX;obj.startY=dd.pageY;obj.deltaX=event.pageX-dd.pageX;obj.deltaY=event.pageY-dd.pageY;obj.originalX=ia.offset.left;obj.originalY=ia.offset.top;obj.offsetX=obj.originalX+obj.deltaX;obj.offsetY=obj.originalY+obj.deltaY;obj.drop=drag.flatten((ia.drop||[]).slice());obj.available=drag.flatten((ia.droppable||[]).slice());return obj},element:function(arg){if(arg&&(arg.jquery||arg.nodeType==1))return arg},flatten:function(arr){return $.map(arr,function(member){return member&&member.jquery?
$.makeArray(member):member&&member.length?drag.flatten(member):member})},textselect:function(bool){$(document)[bool?"unbind":"bind"]("selectstart",drag.dontstart).css("MozUserSelect",bool?"":"none");document.unselectable=bool?"off":"on"},dontstart:function(){return false},callback:function(){}};drag.callback.prototype={update:function(){if($special.drop&&this.available.length)$.each(this.available,function(i){$special.drop.locate(this,i)})}};var $dispatch=$event.dispatch;$event.dispatch=function(event){if($.data(this,
"suppress."+event.type)-(new Date).getTime()>0){$.removeData(this,"suppress."+event.type);return}return $dispatch.apply(this,arguments)};var touchHooks=$event.fixHooks.touchstart=$event.fixHooks.touchmove=$event.fixHooks.touchend=$event.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(event,orig){if(orig){var touched=orig.touches&&orig.touches[0]||(orig.changedTouches&&orig.changedTouches[0]||null);if(touched)$.each(touchHooks.props,function(i,prop){event[prop]=
touched[prop]})}return event}};$special.draginit=$special.dragstart=$special.dragend=drag})(jQuery);
(function($){$.fn.drop=function(str,arg,opts){var type=typeof str=="string"?str:"",fn=$.isFunction(str)?str:$.isFunction(arg)?arg:null;if(type.indexOf("drop")!==0)type="drop"+type;opts=(str==fn?arg:opts)||{};return fn?this.bind(type,opts,fn):this.trigger(type)};$.drop=function(opts){opts=opts||{};drop.multi=opts.multi===true?Infinity:opts.multi===false?1:!isNaN(opts.multi)?opts.multi:drop.multi;drop.delay=opts.delay||drop.delay;drop.tolerance=$.isFunction(opts.tolerance)?opts.tolerance:opts.tolerance===
null?null:drop.tolerance;drop.mode=opts.mode||(drop.mode||"intersect")};var $event=$.event,$special=$event.special,drop=$.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:true,add:function(obj){var data=$.data(this,drop.datakey);data.related+=1},remove:function(){$.data(this,drop.datakey).related-=1},setup:function(){if($.data(this,drop.datakey))return;var data={related:0,active:[],anyactive:0,winner:0,location:{}};$.data(this,drop.datakey,data);drop.targets.push(this)},
teardown:function(){var data=$.data(this,drop.datakey)||{};if(data.related)return;$.removeData(this,drop.datakey);var element=this;drop.targets=$.grep(drop.targets,function(target){return target!==element})},handler:function(event,dd){var results,$targets;if(!dd)return;switch(event.type){case "mousedown":case "touchstart":$targets=$(drop.targets);if(typeof dd.drop=="string")$targets=$targets.filter(dd.drop);$targets.each(function(){var data=$.data(this,drop.datakey);data.active=[];data.anyactive=
0;data.winner=0});dd.droppable=$targets;$special.drag.hijack(event,"dropinit",dd);break;case "mousemove":case "touchmove":drop.event=event;if(!drop.timer)drop.tolerate(dd);break;case "mouseup":case "touchend":drop.timer=clearTimeout(drop.timer);if(dd.propagates){$special.drag.hijack(event,"drop",dd);$special.drag.hijack(event,"dropend",dd)}break}},locate:function(elem,index){var data=$.data(elem,drop.datakey),$elem=$(elem),posi=$elem.offset()||{},height=$elem.outerHeight(),width=$elem.outerWidth(),
location={elem:elem,width:width,height:height,top:posi.top,left:posi.left,right:posi.left+width,bottom:posi.top+height};if(data){data.location=location;data.index=index;data.elem=elem}return location},contains:function(target,test){return(test[0]||test.left)>=target.left&&((test[0]||test.right)<=target.right&&((test[1]||test.top)>=target.top&&(test[1]||test.bottom)<=target.bottom))},modes:{"intersect":function(event,proxy,target){return this.contains(target,[event.pageX,event.pageY])?1E9:this.modes.overlap.apply(this,
arguments)},"overlap":function(event,proxy,target){return Math.max(0,Math.min(target.bottom,proxy.bottom)-Math.max(target.top,proxy.top))*Math.max(0,Math.min(target.right,proxy.right)-Math.max(target.left,proxy.left))},"fit":function(event,proxy,target){return this.contains(target,proxy)?1:0},"middle":function(event,proxy,target){return this.contains(target,[proxy.left+proxy.width*0.5,proxy.top+proxy.height*0.5])?1:0}},sort:function(a,b){return b.winner-a.winner||a.index-b.index},tolerate:function(dd){var i,
drp,drg,data,arr,len,elem,x=0,ia,end=dd.interactions.length,xy=[drop.event.pageX,drop.event.pageY],tolerance=drop.tolerance||drop.modes[drop.mode];do if(ia=dd.interactions[x]){if(!ia)return;ia.drop=[];arr=[];len=ia.droppable.length;if(tolerance)drg=drop.locate(ia.proxy);i=0;do if(elem=ia.droppable[i]){data=$.data(elem,drop.datakey);drp=data.location;if(!drp)continue;data.winner=tolerance?tolerance.call(drop,drop.event,drg,drp):drop.contains(drp,xy)?1:0;arr.push(data)}while(++i<len);arr.sort(drop.sort);
i=0;do if(data=arr[i])if(data.winner&&ia.drop.length<drop.multi){if(!data.active[x]&&!data.anyactive)if($special.drag.hijack(drop.event,"dropstart",dd,x,data.elem)[0]!==false){data.active[x]=1;data.anyactive+=1}else data.winner=0;if(data.winner)ia.drop.push(data.elem)}else if(data.active[x]&&data.anyactive==1){$special.drag.hijack(drop.event,"dropend",dd,x,data.elem);data.active[x]=0;data.anyactive-=1}while(++i<len)}while(++x<end);if(drop.last&&(xy[0]==drop.last.pageX&&xy[1]==drop.last.pageY))delete drop.timer;
else drop.timer=setTimeout(function(){drop.tolerate(dd)},drop.delay);drop.last=drop.event}};$special.dropinit=$special.dropstart=$special.dropend=drop})(jQuery);
(function($){var min=Math.min,max=Math.max,round=Math.floor,isStr=function(v){return $.type(v)==="string"},runPluginCallbacks=function(Instance,a_fn){if($.isArray(a_fn))for(var i=0,c=a_fn.length;i<c;i++){var fn=a_fn[i];try{if(isStr(fn))fn=eval(fn);if($.isFunction(fn))g(fn)(Instance)}catch(ex){}}function g(f){return f}};$.layout={version:"1.3.rc30.79",revision:0.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},
drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",
right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",
padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",
height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(el){var $el=$(el),layout=$el.data("layout")||$el.data("parentLayout");if(layout){var $cont=layout.container;if($cont.data("layoutPane"))return $cont;var $pane=$cont.closest("."+$.layout.defaults.panes.paneClass);if($pane.data("layoutPane"))return $pane}return null},
getParentPaneInstance:function(el){var $pane=$.layout.getParentPaneElem(el);return $pane?$pane.data("layoutPane"):null},getParentLayoutInstance:function(el){var $pane=$.layout.getParentPaneElem(el);return $pane?$pane.data("parentLayout"):null},getEventObject:function(evt){return typeof evt==="object"&&evt.stopPropagation?evt:null},parsePaneName:function(evt_or_pane){var evt=$.layout.getEventObject(evt_or_pane),pane=evt_or_pane;if(evt){evt.stopPropagation();pane=$(this).data("layoutEdge")}if(pane&&
!/^(west|east|north|south|center)$/.test(pane)){$.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+pane+'"');pane="error"}return pane},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&($.effects.slide||$.effects.effect&&$.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||
$.layout.getScrollbarSize("height")},getScrollbarSize:function(dim){var $c=$('\x3cdiv style\x3d"position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"\x3e\x3c/div\x3e').appendTo("body");var d={width:$c.css("width")-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();window.scrollbarWidth=d.width;window.scrollbarHeight=d.height;return dim.match(/^(width|height)$/)?d[dim]:d},showInvisibly:function($E,force){if($E&&($E.length&&(force||$E.css("display")===
"none"))){var s=$E[0].style,CSS={display:s.display||"",visibility:s.visibility||""};$E.css({display:"block",visibility:"hidden"});return CSS}return{}},getElementDimensions:function($E,inset){var d={css:{},inset:{}},x=d.css,i={bottom:0},N=$.layout.cssNum,off=$E.offset(),b,p,ei;d.offsetLeft=off.left;d.offsetTop=off.top;if(!inset)inset={};$.each("Left,Right,Top,Bottom".split(","),function(idx,e){b=x["border"+e]=$.layout.borderWidth($E,e);p=x["padding"+e]=$.layout.cssNum($E,"padding"+e);ei=e.toLowerCase();
d.inset[ei]=inset[ei]>=0?inset[ei]:p;i[ei]=d.inset[ei]+b});x.width=$E.width();x.height=$E.height();x.top=N($E,"top",true);x.bottom=N($E,"bottom",true);x.left=N($E,"left",true);x.right=N($E,"right",true);d.outerWidth=$E.outerWidth();d.outerHeight=$E.outerHeight();d.innerWidth=max(0,d.outerWidth-i.left-i.right);d.innerHeight=max(0,d.outerHeight-i.top-i.bottom);d.layoutWidth=$E.innerWidth();d.layoutHeight=$E.innerHeight();return d},getElementStyles:function($E,list){var CSS={},style=$E[0].style,props=
list.split(","),sides="Top,Bottom,Left,Right".split(","),attrs="Color,Style,Width".split(","),p,s,a,i,j,k;for(i=0;i<props.length;i++){p=props[i];if(p.match(/(border|padding|margin)$/))for(j=0;j<4;j++){s=sides[j];if(p==="border")for(k=0;k<3;k++){a=attrs[k];CSS[p+s+a]=style[p+s+a]}else CSS[p+s]=style[p+s]}else CSS[p]=style[p]}return CSS},cssWidth:function($E,outerWidth){if(outerWidth<=0)return 0;var bs=!$.layout.browser.boxModel?"border-box":$.support.boxSizing?$E.css("boxSizing"):"content-box",b=$.layout.borderWidth,
n=$.layout.cssNum,W=outerWidth;if(bs!=="border-box")W-=b($E,"Left")+b($E,"Right");if(bs==="content-box")W-=n($E,"paddingLeft")+n($E,"paddingRight");return max(0,W)},cssHeight:function($E,outerHeight){if(outerHeight<=0)return 0;var bs=!$.layout.browser.boxModel?"border-box":$.support.boxSizing?$E.css("boxSizing"):"content-box",b=$.layout.borderWidth,n=$.layout.cssNum,H=outerHeight;if(bs!=="border-box")H-=b($E,"Top")+b($E,"Bottom");if(bs==="content-box")H-=n($E,"paddingTop")+n($E,"paddingBottom");return max(0,
H)},cssNum:function($E,prop,allowAuto){if(!$E.jquery)$E=$($E);var CSS=$.layout.showInvisibly($E),p=$.css($E[0],prop,true),v=allowAuto&&p=="auto"?p:Math.round(parseFloat(p)||0);$E.css(CSS);return v},borderWidth:function(el,side){if(el.jquery)el=el[0];var b="border"+side.substr(0,1).toUpperCase()+side.substr(1);return $.css(el,b+"Style",true)==="none"?0:Math.round(parseFloat($.css(el,b+"Width",true))||0)},isMouseOverElem:function(evt,el){var $E=$(el||this),d=$E.offset(),T=d.top,L=d.left,R=L+$E.outerWidth(),
B=T+$E.outerHeight(),x=evt.pageX,y=evt.pageY;return $.layout.browser.msie&&(x<0&&y<0)||x>=L&&x<=R&&(y>=T&&y<=B)},msg:function(info,popup,debugTitle,debugOpts){if($.isPlainObject(info)&&window.debugData){if(typeof popup==="string"){debugOpts=debugTitle;debugTitle=popup}else if(typeof debugTitle==="object"){debugOpts=debugTitle;debugTitle=null}var t=debugTitle||"log( \x3cobject\x3e )",o=$.extend({sort:false,returnHTML:false,display:false},debugOpts);if(popup===true||o.display)debugData(info,t,o);else if(window.console)console.log(debugData(info,
t,o))}else if(popup)alert(info);else if(window.console)console.log(info);else{var id="#layoutLogger",$l=$(id);if(!$l.length)$l=createLog();$l.children("ul").append('\x3cli style\x3d"padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;"\x3e'+info.replace(/\</g,"\x26lt;").replace(/\>/g,"\x26gt;")+"\x3c/li\x3e")}function createLog(){var pos=$.support.fixedPosition?"fixed":"absolute",$e=$('\x3cdiv id\x3d"layoutLogger" style\x3d"position: '+pos+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"\x3e'+
'\x3cdiv style\x3d"font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"\x3e'+'\x3cspan style\x3d"float: right; padding-left: 7px; cursor: pointer;" title\x3d"Remove Console" onclick\x3d"$(this).closest(\'#layoutLogger\').remove()"\x3eX\x3c/span\x3eLayout console.log\x3c/div\x3e'+'\x3cul style\x3d"font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"\x3e\x3c/ul\x3e'+"\x3c/div\x3e").appendTo("body");$e.css("left",
$(window).width()-$e.outerWidth()-5);if($.ui.draggable)$e.draggable({handle:":first-child"});return $e}}};var u=navigator.userAgent.toLowerCase(),m=/(chrome)[ \/]([\w.]+)/.exec(u)||(/(webkit)[ \/]([\w.]+)/.exec(u)||(/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(u)||(/(msie) ([\w.]+)/.exec(u)||(u.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(u)||[])))),b=m[1]||"",v=m[2]||0,ie=b==="msie";$.layout.browser={version:v,safari:b==="webkit",webkit:b==="chrome",msie:ie,isIE6:ie&&v==6,boxModel:!ie||
$.support.boxModel!==false};if(b)$.layout.browser[b]=true;if(ie)$(function(){$.layout.browser.boxModel=$.support.boxModel});$.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:true,resizeWithWindow:true,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:false,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:true,showErrorMessages:true,showDebugMessages:false,
zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",
callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:false,closable:true,resizable:true,slidable:true,initClosed:false,initHidden:false,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:false,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,
togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:true,autoResize:true,autoReopen:true,resizerDragOpacity:1,maskContents:false,maskObjects:false,maskZindex:null,resizingGrid:false,livePaneResizing:false,liveContentResizing:false,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:false,preventQuickSlideClose:$.layout.browser.webkit,
preventPrematureSlideClose:false,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:true,animatePaneSizing:false,children:null,containerSelector:"",initChildren:true,destroyChildren:true,
resizeChildren:true,triggerEventsOnLoad:false,triggerEventsDuringLiveResize:true,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",
size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};$.layout.optionsMap={layout:("name,instanceKey,stateManagement,effects,inset,zIndexes,errors,"+"zIndex,scrollToBookmarkOnLoad,showErrorMessages,maskPanesEarly,"+"outset,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,"+
"onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end").split(","),center:("paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,"+"showOverflowOnHover,maskContents,maskObjects,liveContentResizing,"+"containerSelector,children,initChildren,resizeChildren,destroyChildren,"+"onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end").split(","),noDefault:"paneSelector,resizerCursor,customHotkey".split(",")};
$.layout.transformData=function(hash,addKeys){var json=addKeys?{panes:{},center:{}}:{},branch,optKey,keys,key,val,i,c;if(typeof hash!=="object")return json;for(optKey in hash){branch=json;val=hash[optKey];keys=optKey.split("__");c=keys.length-1;for(i=0;i<=c;i++){key=keys[i];if(i===c)if($.isPlainObject(val))branch[key]=$.layout.transformData(val);else branch[key]=val;else{if(!branch[key])branch[key]={};branch=branch[key]}}}return json};$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",
childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys",
"cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(opts){var map=$.layout.backwardCompatibility.map,oldData,newData,value;for(var itemPath in map){oldData=
getBranch(itemPath);value=oldData.branch[oldData.key];if(value!==undefined){newData=getBranch(map[itemPath],true);newData.branch[newData.key]=value;delete oldData.branch[oldData.key]}}function getBranch(path,create){var a=path.split("."),c=a.length-1,D={branch:opts,key:a[c]},i=0,k,undef;for(;i<c;i++){k=a[i];if(D.branch[k]==undefined)if(create)D.branch=D.branch[k]={};else D.branch={};else D.branch=D.branch[k]}return D}},renameAllOptions:function(opts){var ren=$.layout.backwardCompatibility.renameOptions;
ren(opts);if(opts.defaults){if(typeof opts.panes!=="object")opts.panes={};$.extend(true,opts.panes,opts.defaults);delete opts.defaults}if(opts.panes)ren(opts.panes);$.each($.layout.config.allPanes,function(i,pane){if(opts[pane])ren(opts[pane])});return opts}};$.fn.layout=function(opts){var browser=$.layout.browser,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,styles=$.layout.getElementStyles,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,
options=$.extend(true,{},$.layout.defaults),effects=options.effects=$.extend(true,{},$.layout.effects),state={id:"layout"+$.now(),initialized:false,paneResizing:false,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(s,fn,ms){timer.clear(s);timer.data[s]=
setTimeout(fn,ms)},clear:function(s){var t=timer.data;if(t[s]){clearTimeout(t[s]);delete t[s]}}},_log=function(msg,popup,debug){var o=options;if(o.showErrorMessages&&!debug||debug&&o.showDebugMessages)$.layout.msg(o.name+" / "+msg,popup!==false);return false},_runCallbacks=function(evtName,pane,skipBoundEvents){var hasPane=pane&&isStr(pane),s=hasPane?state[pane]:state,o=hasPane?options[pane]:options,lName=options.name,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,
lng.length-4):"",fn=o[lng]||o[shrt],retVal="NC",args=[],$P;if(!hasPane&&$.type(pane)==="boolean"){skipBoundEvents=pane;pane=""}if(fn)try{if(isStr(fn))if(fn.match(/,/))args=fn.split(","),fn=eval(args[0]);else fn=eval(fn);if($.isFunction(fn))if(args.length)retVal=g(fn)(args[1]);else if(hasPane)retVal=g(fn)(pane,$Ps[pane],s,o,lName);else retVal=g(fn)(Instance,s,o,lName)}catch(ex){_log(options.errors.callbackError.replace(/EVENT/,$.trim((pane||"")+" "+lng)),false);if($.type(ex)==="string"&&string.length)_log("Exception:  "+
ex,false)}if(!skipBoundEvents&&retVal!==false)if(hasPane){$P=$Ps[pane];o=options[pane];s=state[pane];$P.triggerHandler("layoutpane"+lng,[pane,$P,s,o,lName]);if(shrt)$P.triggerHandler("layoutpane"+shrt,[pane,$P,s,o,lName])}else{$N.triggerHandler("layout"+lng,[Instance,s,o,lName]);if(shrt)$N.triggerHandler("layout"+shrt,[Instance,s,o,lName])}if(hasPane&&evtName==="onresize_end")resizeChildren(pane+"",true);return retVal;function g(f){return f}},_fixIframe=function(pane){if(browser.mozilla)return;var $P=
$Ps[pane];if(state[pane].tagName==="IFRAME")$P.css(_c.hidden).css(_c.visible);else $P.find("IFRAME").css(_c.hidden).css(_c.visible)},cssSize=function(pane,outerSize){var fn=_c[pane].dir=="horz"?cssH:cssW;return fn($Ps[pane],outerSize)},cssMinDims=function(pane){var $P=$Ps[pane],dir=_c[pane].dir,d={minWidth:1001-cssW($P,1E3),minHeight:1001-cssH($P,1E3)};if(dir==="horz")d.minSize=d.minHeight;if(dir==="vert")d.minSize=d.minWidth;return d},setOuterWidth=function(el,outerWidth,autoHide){var $E=el,w;if(isStr(el))$E=
$Ps[el];else if(!el.jquery)$E=$(el);w=cssW($E,outerWidth);$E.css({width:w});if(w>0){if(autoHide&&($E.data("autoHidden")&&$E.innerHeight()>0)){$E.show().data("autoHidden",false);if(!browser.mozilla)$E.css(_c.hidden).css(_c.visible)}}else if(autoHide&&!$E.data("autoHidden"))$E.hide().data("autoHidden",true)},setOuterHeight=function(el,outerHeight,autoHide){var $E=el,h;if(isStr(el))$E=$Ps[el];else if(!el.jquery)$E=$(el);h=cssH($E,outerHeight);$E.css({height:h,visibility:"visible"});if(h>0&&$E.innerWidth()>
0){if(autoHide&&$E.data("autoHidden")){$E.show().data("autoHidden",false);if(!browser.mozilla)$E.css(_c.hidden).css(_c.visible)}}else if(autoHide&&!$E.data("autoHidden"))$E.hide().data("autoHidden",true)},_parseSize=function(pane,size,dir){if(!dir)dir=_c[pane].dir;if(isStr(size)&&size.match(/%/))size=size==="100%"?-1:parseInt(size,10)/100;if(size===0)return 0;else if(size>=1)return parseInt(size,10);var o=options,avail=0;if(dir=="horz")avail=sC.innerHeight-($Ps.north?o.north.spacing_open:0)-($Ps.south?
o.south.spacing_open:0);else if(dir=="vert")avail=sC.innerWidth-($Ps.west?o.west.spacing_open:0)-($Ps.east?o.east.spacing_open:0);if(size===-1)return avail;else if(size>0)return round(avail*size);else if(pane=="center")return 0;else{var dim=dir==="horz"?"height":"width",$P=$Ps[pane],$C=dim==="height"?$Cs[pane]:false,vis=$.layout.showInvisibly($P),szP=$P.css(dim),szC=$C?$C.css(dim):0;$P.css(dim,"auto");if($C)$C.css(dim,"auto");size=dim==="height"?$P.outerHeight():$P.outerWidth();$P.css(dim,szP).css(vis);
if($C)$C.css(dim,szC);return size}},getPaneSize=function(pane,inclSpace){var $P=$Ps[pane],o=options[pane],s=state[pane],oSp=inclSpace?o.spacing_open:0,cSp=inclSpace?o.spacing_closed:0;if(!$P||s.isHidden)return 0;else if(s.isClosed||s.isSliding&&inclSpace)return cSp;else if(_c[pane].dir==="horz")return $P.outerHeight()+oSp;else return $P.outerWidth()+oSp},setSizeLimits=function(pane,slide){if(!isInitialized())return;var o=options[pane],s=state[pane],c=_c[pane],dir=c.dir,type=c.sizeType.toLowerCase(),
isSliding=slide!=undefined?slide:s.isSliding,$P=$Ps[pane],paneSpacing=o.spacing_open,altPane=_c.oppositeEdge[pane],altS=state[altPane],$altP=$Ps[altPane],altPaneSize=!$altP||(altS.isVisible===false||altS.isSliding)?0:dir=="horz"?$altP.outerHeight():$altP.outerWidth(),altPaneSpacing=(!$altP||altS.isHidden?0:options[altPane][altS.isClosed!==false?"spacing_closed":"spacing_open"])||0,containerSize=dir=="horz"?sC.innerHeight:sC.innerWidth,minCenterDims=cssMinDims("center"),minCenterSize=dir=="horz"?max(options.center.minHeight,
minCenterDims.minHeight):max(options.center.minWidth,minCenterDims.minWidth),limitSize=containerSize-paneSpacing-(isSliding?0:_parseSize("center",minCenterSize,dir)+altPaneSize+altPaneSpacing),minSize=s.minSize=max(_parseSize(pane,o.minSize),cssMinDims(pane).minSize),maxSize=s.maxSize=min(o.maxSize?_parseSize(pane,o.maxSize):1E5,limitSize),r=s.resizerPosition={},top=sC.inset.top,left=sC.inset.left,W=sC.innerWidth,H=sC.innerHeight,rW=o.spacing_open;switch(pane){case "north":r.min=top+minSize;r.max=
top+maxSize;break;case "west":r.min=left+minSize;r.max=left+maxSize;break;case "south":r.min=top+H-maxSize-rW;r.max=top+H-minSize-rW;break;case "east":r.min=left+W-maxSize-rW;r.max=left+W-minSize-rW;break}},calcNewCenterPaneDims=function(){var d={top:getPaneSize("north",true),bottom:getPaneSize("south",true),left:getPaneSize("west",true),right:getPaneSize("east",true),width:0,height:0};d.width=sC.innerWidth-d.left-d.right;d.height=sC.innerHeight-d.bottom-d.top;d.top+=sC.inset.top;d.bottom+=sC.inset.bottom;
d.left+=sC.inset.left;d.right+=sC.inset.right;return d},getHoverClasses=function(el,allStates){var $El=$(el),type=$El.data("layoutRole"),pane=$El.data("layoutEdge"),o=options[pane],root=o[type+"Class"],_pane="-"+pane,_open="-open",_closed="-closed",_slide="-sliding",_hover="-hover ",_state=$El.hasClass(root+_closed)?_closed:_open,_alt=_state===_closed?_open:_closed,classes=root+_hover+(root+_pane+_hover)+(root+_state+_hover)+(root+_pane+_state+_hover);if(allStates)classes+=root+_alt+_hover+(root+
_pane+_alt+_hover);if(type=="resizer"&&$El.hasClass(root+_slide))classes+=root+_slide+_hover+(root+_pane+_slide+_hover);return $.trim(classes)},addHover=function(evt,el){var $E=$(el||this);if(evt&&$E.data("layoutRole")==="toggler")evt.stopPropagation();$E.addClass(getHoverClasses($E))},removeHover=function(evt,el){var $E=$(el||this);$E.removeClass(getHoverClasses($E,true))},onResizerEnter=function(evt){var pane=$(this).data("layoutEdge"),s=state[pane];if(s.isClosed||(s.isResizing||state.paneResizing))return;
if($.fn.disableSelection)$("body").disableSelection();if(options.maskPanesEarly)showMasks(pane,{resizing:true})},onResizerLeave=function(evt,el){var e=el||this,pane=$(e).data("layoutEdge"),name=pane+"ResizerLeave";timer.clear(pane+"_openSlider");timer.clear(name);if(!el)timer.set(name,function(){onResizerLeave(evt,e)},200);else if(!state.paneResizing){if($.fn.enableSelection)$("body").enableSelection();if(options.maskPanesEarly)hideMasks()}},_create=function(){initOptions();var o=options,s=state;
s.creatingLayout=true;runPluginCallbacks(Instance,$.layout.onCreate);if(false===_runCallbacks("onload_start"))return"cancel";_initContainer();initHotkeys();$(window).bind("unload."+sID,unload);runPluginCallbacks(Instance,$.layout.onLoad);if(o.initPanes)_initLayoutElements();delete s.creatingLayout;return state.initialized},isInitialized=function(){if(state.initialized||state.creatingLayout)return true;else return _initLayoutElements()},_initLayoutElements=function(retry){var o=options;if(!$N.is(":visible")){if(!retry&&
(browser.webkit&&$N[0].tagName==="BODY"))setTimeout(function(){_initLayoutElements(true)},50);return false}if(!getPane("center").length)return _log(o.errors.centerPaneMissing);state.creatingLayout=true;$.extend(sC,elDims($N,o.inset));initPanes();if(o.scrollToBookmarkOnLoad){var l=self.location;if(l.hash)l.replace(l.hash)}if(Instance.hasParentLayout)o.resizeWithWindow=false;else if(o.resizeWithWindow)$(window).bind("resize."+sID,windowResize);delete state.creatingLayout;state.initialized=true;runPluginCallbacks(Instance,
$.layout.onReady);_runCallbacks("onload_end");return true},createChildren=function(evt_or_pane,opts){var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane];if(!$P)return;var $C=$Cs[pane],s=state[pane],o=options[pane],sm=options.stateManagement||{},cos=opts?o.children=opts:o.children;if($.isPlainObject(cos))cos=[cos];else if(!cos||!$.isArray(cos))return;$.each(cos,function(idx,co){if(!$.isPlainObject(co))return;var $containers=co.containerSelector?$P.find(co.containerSelector):$C||$P;$containers.each(function(){var $cont=
$(this),child=$cont.data("layout");if(!child){setInstanceKey({container:$cont,options:co},s);if(sm.includeChildren&&state.stateData[pane]){var paneChildren=state.stateData[pane].children||{},childState=paneChildren[co.instanceKey],co_sm=co.stateManagement||(co.stateManagement={autoLoad:true});if(co_sm.autoLoad===true&&childState){co_sm.autoSave=false;co_sm.includeChildren=true;co_sm.autoLoad=$.extend(true,{},childState)}}child=$cont.layout(co);if(child)refreshChildren(pane,child)}})})},setInstanceKey=
function(child,parentPaneState){var $c=child.container,o=child.options,sm=o.stateManagement,key=o.instanceKey||$c.data("layoutInstanceKey");if(!key)key=(sm&&sm.cookie?sm.cookie.name:"")||o.name;if(!key)key="layout"+ ++parentPaneState.childIdx;else key=key.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_");o.instanceKey=key;$c.data("layoutInstanceKey",key);return key},refreshChildren=function(pane,newChild){var $P=$Ps[pane],pC=children[pane],s=state[pane],o;if($.isPlainObject(pC)){$.each(pC,function(key,
child){if(child.destroyed)delete pC[key]});if($.isEmptyObject(pC))pC=children[pane]=null}if(!newChild&&!pC)newChild=$P.data("layout");if(newChild){newChild.hasParentLayout=true;o=newChild.options;setInstanceKey(newChild,s);if(!pC)pC=children[pane]={};pC[o.instanceKey]=newChild.container.data("layout")}Instance[pane].children=children[pane];if(!newChild)createChildren(pane)},windowResize=function(){var o=options,delay=Number(o.resizeWithWindowDelay);if(delay<10)delay=100;timer.clear("winResize");timer.set("winResize",
function(){timer.clear("winResize");timer.clear("winResizeRepeater");var dims=elDims($N,o.inset);if(dims.innerWidth!==sC.innerWidth||dims.innerHeight!==sC.innerHeight)resizeAll()},delay);if(!timer.data["winResizeRepeater"])setWindowResizeRepeater()},setWindowResizeRepeater=function(){var delay=Number(options.resizeWithWindowMaxDelay);if(delay>0)timer.set("winResizeRepeater",function(){setWindowResizeRepeater();resizeAll()},delay)},unload=function(){var o=options;_runCallbacks("onunload_start");runPluginCallbacks(Instance,
$.layout.onUnload);_runCallbacks("onunload_end")},_initContainer=function(){var N=$N[0],$H=$("html"),tag=sC.tagName=N.tagName,id=sC.id=N.id,cls=sC.className=N.className,o=options,name=o.name,props="position,margin,padding,border",css="layoutCSS",CSS={},hid="hidden",parent=$N.data("parentLayout"),pane=$N.data("layoutEdge"),isChild=parent&&pane,num=$.layout.cssNum,$parent,n;sC.selector=$N.selector.split(".slice")[0];sC.ref=(o.name?o.name+" layout / ":"")+tag+(id?"#"+id:cls?".["+cls+"]":"");sC.isBody=
tag==="BODY";if(!isChild&&!sC.isBody){$parent=$N.closest("."+$.layout.defaults.panes.paneClass);parent=$parent.data("parentLayout");pane=$parent.data("layoutEdge");isChild=parent&&pane}$N.data({layout:Instance,layoutContainer:sID}).addClass(o.containerClass);var layoutMethods={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(name in layoutMethods)$N.bind("layout"+name.toLowerCase()+"."+sID,Instance[layoutMethods[name]||name]);if(isChild){Instance.hasParentLayout=true;parent.refreshChildren(pane,
Instance)}if(!$N.data(css))if(sC.isBody){$N.data(css,$.extend(styles($N,props),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")}));$H.data(css,$.extend(styles($H,"padding"),{height:"auto",overflow:$H.css("overflow"),overflowX:$H.css("overflowX"),overflowY:$H.css("overflowY")}))}else $N.data(css,styles($N,props+",top,bottom,left,right,width,height,overflow,overflowX,overflowY"));try{CSS={overflow:hid,overflowX:hid,overflowY:hid};$N.css(CSS);
if(o.inset&&!$.isPlainObject(o.inset)){n=parseInt(o.inset,10)||0;o.inset={top:n,bottom:n,left:n,right:n}}if(sC.isBody){if(!o.outset)o.outset={top:num($H,"paddingTop"),bottom:num($H,"paddingBottom"),left:num($H,"paddingLeft"),right:num($H,"paddingRight")};else if(!$.isPlainObject(o.outset)){n=parseInt(o.outset,10)||0;o.outset={top:n,bottom:n,left:n,right:n}}$H.css(CSS).css({height:"100%",border:"none",padding:0,margin:0});if(browser.isIE6){$N.css({width:"100%",height:"100%",border:"none",padding:0,
margin:0,position:"relative"});if(!o.inset)o.inset=elDims($N).inset}else{$N.css({width:"auto",height:"auto",margin:0,position:"absolute"});$N.css(o.outset)}$.extend(sC,elDims($N,o.inset))}else{var p=$N.css("position");if(!p||!p.match(/(fixed|absolute|relative)/))$N.css("position","relative");if($N.is(":visible")){$.extend(sC,elDims($N,o.inset));if(sC.innerHeight<1)_log(o.errors.noContainerHeight.replace(/CONTAINER/,sC.ref))}}if(num($N,"minWidth"))$N.parent().css("overflowX","auto");if(num($N,"minHeight"))$N.parent().css("overflowY",
"auto")}catch(ex){}},initHotkeys=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var o=options[pane];if(o.enableCursorHotkey||o.customHotkey){$(document).bind("keydown."+sID,keyDown);return false}})},initOptions=function(){var data,d,pane,key,val,i,c,o;opts=$.layout.transformData(opts,true);opts=$.layout.backwardCompatibility.renameAllOptions(opts);if(!$.isEmptyObject(opts.panes)){data=$.layout.optionsMap.noDefault;for(i=0,c=data.length;i<c;i++){key=data[i];
delete opts.panes[key]}data=$.layout.optionsMap.layout;for(i=0,c=data.length;i<c;i++){key=data[i];delete opts.panes[key]}}data=$.layout.optionsMap.layout;var rootKeys=$.layout.config.optionRootKeys;for(key in opts){val=opts[key];if($.inArray(key,rootKeys)<0&&$.inArray(key,data)<0){if(!opts.panes[key])opts.panes[key]=$.isPlainObject(val)?$.extend(true,{},val):val;delete opts[key]}}$.extend(true,options,opts);$.each(_c.allPanes,function(i,pane){_c[pane]=$.extend(true,{},_c.panes,_c[pane]);d=options.panes;
o=options[pane];if(pane==="center"){data=$.layout.optionsMap.center;for(i=0,c=data.length;i<c;i++){key=data[i];if(!opts.center[key]&&(opts.panes[key]||!o[key]))o[key]=d[key]}}else{o=options[pane]=$.extend(true,{},d,o);createFxOptions(pane);if(!o.resizerClass)o.resizerClass="ui-layout-resizer";if(!o.togglerClass)o.togglerClass="ui-layout-toggler"}if(!o.paneClass)o.paneClass="ui-layout-pane"});var zo=opts.zIndex,z=options.zIndexes;if(zo>0){z.pane_normal=zo;z.content_mask=max(zo+1,z.content_mask);z.resizer_normal=
max(zo+2,z.resizer_normal)}delete options.panes;function createFxOptions(pane){var o=options[pane],d=options.panes;if(!o.fxSettings)o.fxSettings={};if(!d.fxSettings)d.fxSettings={};$.each(["_open","_close","_size"],function(i,n){var sName="fxName"+n,sSpeed="fxSpeed"+n,sSettings="fxSettings"+n,fxName=o[sName]=o[sName]||(d[sName]||(o.fxName||(d.fxName||"none"))),fxExists=$.effects&&($.effects[fxName]||$.effects.effect&&$.effects.effect[fxName]);if(fxName==="none"||(!options.effects[fxName]||!fxExists))fxName=
o[sName]="none";var fx=options.effects[fxName]||{},fx_all=fx.all||null,fx_pane=fx[pane]||null;o[sSpeed]=o[sSpeed]||(d[sSpeed]||(o.fxSpeed||(d.fxSpeed||null)));o[sSettings]=$.extend(true,{},fx_all,fx_pane,d.fxSettings,o.fxSettings,d[sSettings],o[sSettings])});delete o.fxName;delete o.fxSpeed;delete o.fxSettings}},getPane=function(pane){var sel=options[pane].paneSelector;if(sel.substr(0,1)==="#")return $N.find(sel).eq(0);else{var $P=$N.children(sel).eq(0);return $P.length?$P:$N.children("form:first").children(sel).eq(0)}},
initPanes=function(evt){evtPane(evt);$.each(_c.allPanes,function(idx,pane){addPane(pane,true)});initHandles();$.each(_c.borderPanes,function(i,pane){if($Ps[pane]&&state[pane].isVisible){setSizeLimits(pane);makePaneFit(pane)}});sizeMidPanes("center");$.each(_c.allPanes,function(idx,pane){afterInitPane(pane)})},addPane=function(pane,force){if(!force&&!isInitialized())return;var o=options[pane],s=state[pane],c=_c[pane],dir=c.dir,fx=s.fx,spacing=o.spacing_open||0,isCenter=pane==="center",CSS={},$P=$Ps[pane],
size,minSize,maxSize,child;if($P)removePane(pane,false,true,false);else $Cs[pane]=false;$P=$Ps[pane]=getPane(pane);if(!$P.length){$Ps[pane]=false;return}if(!$P.data("layoutCSS")){var props="position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border";$P.data("layoutCSS",styles($P,props))}Instance[pane]={name:pane,pane:$Ps[pane],content:$Cs[pane],options:options[pane],state:state[pane],children:children[pane]};$P.data({parentLayout:Instance,layoutPane:Instance[pane],
layoutEdge:pane,layoutRole:"pane"}).css(c.cssReq).css("zIndex",options.zIndexes.pane_normal).css(o.applyDemoStyles?c.cssDemo:{}).addClass(o.paneClass+" "+o.paneClass+"-"+pane).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var paneMethods={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",
disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"},name;for(name in paneMethods)$P.bind("layoutpane"+name.toLowerCase()+"."+sID,Instance[paneMethods[name]||name]);initContent(pane,false);if(!isCenter){size=s.size=_parseSize(pane,o.size);minSize=_parseSize(pane,o.minSize)||1;maxSize=_parseSize(pane,o.maxSize)||1E5;if(size>0)size=max(min(size,maxSize),
minSize);s.autoResize=o.autoResize;s.isClosed=false;s.isSliding=false;s.isResizing=false;s.isHidden=false;if(!s.pins)s.pins=[]}s.tagName=$P[0].tagName;s.edge=pane;s.noRoom=false;s.isVisible=true;setPanePosition(pane);if(dir==="horz")CSS.height=cssH($P,size);else if(dir==="vert")CSS.width=cssW($P,size);$P.css(CSS);if(dir!="horz")sizeMidPanes(pane,true);if(state.initialized){initHandles(pane);initHotkeys(pane)}if(o.initClosed&&(o.closable&&!o.initHidden))close(pane,true,true);else if(o.initHidden||
o.initClosed)hide(pane);else if(!s.noRoom)$P.css("display","block");$P.css("visibility","visible");if(o.showOverflowOnHover)$P.hover(allowOverflow,resetOverflow);if(state.initialized)afterInitPane(pane)},afterInitPane=function(pane){var $P=$Ps[pane],s=state[pane],o=options[pane];if(!$P)return;if($P.data("layout"))refreshChildren(pane,$P.data("layout"));if(s.isVisible){if(state.initialized)resizeAll();else sizeContent(pane);if(o.triggerEventsOnLoad)_runCallbacks("onresize_end",pane);else resizeChildren(pane,
true)}if(o.initChildren&&o.children)createChildren(pane)},setPanePosition=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var $P=$Ps[pane],$R=$Rs[pane],o=options[pane],s=state[pane],side=_c[pane].side,CSS={};if(!$P)return;switch(pane){case "north":CSS.top=sC.inset.top;CSS.left=sC.inset.left;CSS.right=sC.inset.right;break;case "south":CSS.bottom=sC.inset.bottom;CSS.left=sC.inset.left;CSS.right=sC.inset.right;break;case "west":CSS.left=sC.inset.left;break;case "east":CSS.right=
sC.inset.right;break;case "center":}$P.css(CSS);if($R&&s.isClosed)$R.css(side,sC.inset[side]);else if($R&&!s.isHidden)$R.css(side,sC.inset[side]+getPaneSize(pane))})},initHandles=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var $P=$Ps[pane];$Rs[pane]=false;$Ts[pane]=false;if(!$P)return;var o=options[pane],s=state[pane],c=_c[pane],paneId=o.paneSelector.substr(0,1)==="#"?o.paneSelector.substr(1):"",rClass=o.resizerClass,tClass=o.togglerClass,spacing=s.isVisible?
o.spacing_open:o.spacing_closed,_pane="-"+pane,_state=s.isVisible?"-open":"-closed",I=Instance[pane],$R=I.resizer=$Rs[pane]=$("\x3cdiv\x3e\x3c/div\x3e"),$T=I.toggler=o.closable?$Ts[pane]=$("\x3cdiv\x3e\x3c/div\x3e"):false;if(!s.isVisible&&o.slidable)$R.attr("title",o.tips.Slide).css("cursor",o.sliderCursor);$R.attr("id",paneId?paneId+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(o.applyDemoStyles?
_c.resizers.cssDemo:{}).addClass(rClass+" "+rClass+_pane).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).appendTo($N);if(o.resizerDblClickToggle)$R.bind("dblclick."+sID,toggle);if($T){$T.attr("id",paneId?paneId+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(o.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(tClass+" "+tClass+_pane).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo($R);
if(o.togglerContent_open)$("\x3cspan\x3e"+o.togglerContent_open+"\x3c/span\x3e").data({layoutEdge:pane,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",pane).addClass("content content-open").css("display","none").appendTo($T);if(o.togglerContent_closed)$("\x3cspan\x3e"+o.togglerContent_closed+"\x3c/span\x3e").data({layoutEdge:pane,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo($T);enableClosable(pane)}initResizable(pane);
if(s.isVisible)setAsOpen(pane);else{setAsClosed(pane);bindStartSlidingEvents(pane,true)}});sizeHandles()},initContent=function(pane,resize){if(!isInitialized())return;var o=options[pane],sel=o.contentSelector,I=Instance[pane],$P=$Ps[pane],$C;if(sel)$C=I.content=$Cs[pane]=o.findNestedContent?$P.find(sel).eq(0):$P.children(sel).eq(0);if($C&&$C.length){$C.data("layoutRole","content");if(!$C.data("layoutCSS"))$C.data("layoutCSS",styles($C,"height"));$C.css(_c.content.cssReq);if(o.applyDemoStyles){$C.css(_c.content.cssDemo);
$P.css(_c.content.cssDemoPane)}if($P.css("overflowX").match(/(scroll|auto)/))$P.css("overflow","hidden");state[pane].content={};if(resize!==false)sizeContent(pane)}else I.content=$Cs[pane]=false},initResizable=function(panes){var draggingAvailable=$.layout.plugins.draggable,side;panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(idx,pane){var o=options[pane];if(!draggingAvailable||(!$Ps[pane]||!o.resizable)){o.resizable=false;return true}var s=state[pane],z=options.zIndexes,c=_c[pane],
side=c.dir=="horz"?"top":"left",$P=$Ps[pane],$R=$Rs[pane],base=o.resizerClass,lastPos=0,r,live,resizerClass=base+"-drag",resizerPaneClass=base+"-"+pane+"-drag",helperClass=base+"-dragging",helperPaneClass=base+"-"+pane+"-dragging",helperLimitClass=base+"-dragging-limit",helperPaneLimitClass=base+"-"+pane+"-dragging-limit",helperClassesSet=false;if(!s.isClosed)$R.attr("title",o.tips.Resize).css("cursor",o.resizerCursor);$R.draggable({containment:$N[0],axis:c.dir=="horz"?"y":"x",delay:0,distance:1,
grid:o.resizingGrid,helper:"clone",opacity:o.resizerDragOpacity,addClasses:false,zIndex:z.resizer_drag,start:function(e,ui){o=options[pane];s=state[pane];live=o.livePaneResizing;if(false===_runCallbacks("ondrag_start",pane))return false;s.isResizing=true;state.paneResizing=pane;timer.clear(pane+"_closeSlider");setSizeLimits(pane);r=s.resizerPosition;lastPos=ui.position[side];$R.addClass(resizerClass+" "+resizerPaneClass);helperClassesSet=false;$("body").disableSelection();showMasks(pane,{resizing:true})},
drag:function(e,ui){if(!helperClassesSet){ui.helper.addClass(helperClass+" "+helperPaneClass).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden");helperClassesSet=true;if(s.isSliding)$Ps[pane].css("zIndex",z.pane_sliding)}var limit=0;if(ui.position[side]<r.min){ui.position[side]=r.min;limit=-1}else if(ui.position[side]>r.max){ui.position[side]=r.max;limit=1}if(limit){ui.helper.addClass(helperLimitClass+" "+helperPaneLimitClass);window.defaultStatus=limit>0&&pane.match(/(north|west)/)||
limit<0&&pane.match(/(south|east)/)?o.tips.maxSizeWarning:o.tips.minSizeWarning}else{ui.helper.removeClass(helperLimitClass+" "+helperPaneLimitClass);window.defaultStatus=""}if(live&&Math.abs(ui.position[side]-lastPos)>=o.liveResizingTolerance){lastPos=ui.position[side];resizePanes(e,ui,pane)}},stop:function(e,ui){$("body").enableSelection();window.defaultStatus="";$R.removeClass(resizerClass+" "+resizerPaneClass);s.isResizing=false;state.paneResizing=false;resizePanes(e,ui,pane,true)}})});var resizePanes=
function(evt,ui,pane,resizingDone){var dragPos=ui.position,c=_c[pane],o=options[pane],s=state[pane],resizerPos;switch(pane){case "north":resizerPos=dragPos.top;break;case "west":resizerPos=dragPos.left;break;case "south":resizerPos=sC.layoutHeight-dragPos.top-o.spacing_open;break;case "east":resizerPos=sC.layoutWidth-dragPos.left-o.spacing_open;break}var newSize=resizerPos-sC.inset[c.side];if(!resizingDone){if(Math.abs(newSize-s.size)<o.liveResizingTolerance)return;manualSizePane(pane,newSize,false,
true);sizeMasks()}else{if(false!==_runCallbacks("ondrag_end",pane))manualSizePane(pane,newSize,false,true);hideMasks(true);if(s.isSliding)showMasks(pane,{resizing:true})}}},sizeMask=function(){var $M=$(this),pane=$M.data("layoutMask"),s=state[pane];if(s.tagName=="IFRAME"&&s.isVisible)$M.css({top:s.offsetTop,left:s.offsetLeft,width:s.outerWidth,height:s.outerHeight})},sizeMasks=function(){$Ms.each(sizeMask)},showMasks=function(pane,args){var c=_c[pane],panes=["center"],z=options.zIndexes,a=$.extend({objectsOnly:false,
animation:false,resizing:true,sliding:state[pane].isSliding},args),o,s;if(a.resizing)panes.push(pane);if(a.sliding)panes.push(_c.oppositeEdge[pane]);if(c.dir==="horz"){panes.push("west");panes.push("east")}$.each(panes,function(i,p){s=state[p];o=options[p];if(s.isVisible&&(o.maskObjects||!a.objectsOnly&&o.maskContents))getMasks(p).each(function(){sizeMask.call(this);this.style.zIndex=s.isSliding?z.pane_sliding+1:z.pane_normal+1;this.style.display="block"})})},hideMasks=function(force){if(force||!state.paneResizing)$Ms.hide();
else if(!force&&!$.isEmptyObject(state.panesSliding)){var i=$Ms.length-1,p,$M;for(;i>=0;i--){$M=$Ms.eq(i);p=$M.data("layoutMask");if(!options[p].maskObjects)$M.hide()}}},getMasks=function(pane){var $Masks=$([]),$M,i=0,c=$Ms.length;for(;i<c;i++){$M=$Ms.eq(i);if($M.data("layoutMask")===pane)$Masks=$Masks.add($M)}if($Masks.length)return $Masks;else return createMasks(pane)},createMasks=function(pane){var $P=$Ps[pane],s=state[pane],o=options[pane],z=options.zIndexes,$Masks=$([]),isIframe,el,$M,css,i;
if(!o.maskContents&&!o.maskObjects)return $Masks;for(i=0;i<(o.maskObjects?2:1);i++){isIframe=o.maskObjects&&i==0;el=document.createElement(isIframe?"iframe":"div");$M=$(el).data("layoutMask",pane);el.className="ui-layout-mask ui-layout-mask-"+pane;css=el.style;css.display="block";css.position="absolute";css.background="#FFF";if(isIframe){el.frameborder=0;el.src="about:blank";css.opacity=0;css.filter="Alpha(Opacity\x3d'0')";css.border=0}if(s.tagName=="IFRAME"){css.zIndex=z.pane_normal+1;$N.append(el)}else{$M.addClass("ui-layout-mask-inside-pane");
css.zIndex=o.maskZindex||z.content_mask;css.top=0;css.left=0;css.width="100%";css.height="100%";$P.append(el)}$Masks=$Masks.add(el);$Ms=$Ms.add(el)}return $Masks},destroy=function(evt_or_destroyChildren,destroyChildren){$(window).unbind("."+sID);$(document).unbind("."+sID);if(typeof evt_or_destroyChildren==="object")evtPane(evt_or_destroyChildren);else destroyChildren=evt_or_destroyChildren;$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+
sID);$Ms.remove();$.each(_c.allPanes,function(i,pane){removePane(pane,false,true,destroyChildren)});var css="layoutCSS";if($N.data(css)&&!$N.data("layoutRole"))$N.css($N.data(css)).removeData(css);if(sC.tagName==="BODY"&&($N=$("html")).data(css))$N.css($N.data(css)).removeData(css);runPluginCallbacks(Instance,$.layout.onDestroy);unload();for(var n in Instance)if(!n.match(/^(container|options)$/))delete Instance[n];Instance.destroyed=true;return Instance},removePane=function(evt_or_pane,remove,skipResize,
destroyChild){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane],$C=$Cs[pane],$R=$Rs[pane],$T=$Ts[pane];if($P&&$.isEmptyObject($P.data()))$P=false;if($C&&$.isEmptyObject($C.data()))$C=false;if($R&&$.isEmptyObject($R.data()))$R=false;if($T&&$.isEmptyObject($T.data()))$T=false;if($P)$P.stop(true,true);var o=options[pane],s=state[pane],d="layout",css="layoutCSS",pC=children[pane],hasChildren=$.isPlainObject(pC)&&!$.isEmptyObject(pC),destroy=destroyChild!==undefined?destroyChild:
o.destroyChildren;if(hasChildren&&destroy){$.each(pC,function(key,child){if(!child.destroyed)child.destroy(true);if(child.destroyed)delete pC[key]});if($.isEmptyObject(pC)){pC=children[pane]=null;hasChildren=false}}if($P&&(remove&&!hasChildren))$P.remove();else if($P&&$P[0]){var root=o.paneClass,pRoot=root+"-"+pane,_open="-open",_sliding="-sliding",_closed="-closed",classes=[root,root+_open,root+_closed,root+_sliding,pRoot,pRoot+_open,pRoot+_closed,pRoot+_sliding];$.merge(classes,getHoverClasses($P,
true));$P.removeClass(classes.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID);if(hasChildren&&$C){$C.width($C.width());$.each(pC,function(key,child){child.resizeAll()})}else if($C)$C.css($C.data(css)).removeData(css).removeData("layoutRole");if(!$P.data(d))$P.css($P.data(css)).removeData(css)}if($T)$T.remove();if($R)$R.remove();Instance[pane]=$Ps[pane]=$Cs[pane]=$Rs[pane]=$Ts[pane]=false;s={removed:true};
if(!skipResize)resizeAll()},_hidePane=function(pane){var $P=$Ps[pane],o=options[pane],s=$P[0].style;if(o.useOffscreenClose){if(!$P.data(_c.offscreenReset))$P.data(_c.offscreenReset,{left:s.left,right:s.right});$P.css(_c.offscreenCSS)}else $P.hide().removeData(_c.offscreenReset)},_showPane=function(pane){var $P=$Ps[pane],o=options[pane],off=_c.offscreenCSS,old=$P.data(_c.offscreenReset),s=$P[0].style;$P.show().removeData(_c.offscreenReset);if(o.useOffscreenClose&&old){if(s.left==off.left)s.left=old.left;
if(s.right==off.right)s.right=old.right}},hide=function(evt_or_pane,noAnimation){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||s.isHidden)return;if(state.initialized&&false===_runCallbacks("onhide_start",pane))return;s.isSliding=false;delete state.panesSliding[pane];if($R)$R.hide();if(!state.initialized||s.isClosed){s.isClosed=true;s.isHidden=true;s.isVisible=false;if(!state.initialized)_hidePane(pane);sizeMidPanes(_c[pane].dir===
"horz"?"":"center");if(state.initialized||o.triggerEventsOnLoad)_runCallbacks("onhide_end",pane)}else{s.isHiding=true;close(pane,false,noAnimation)}},show=function(evt_or_pane,openPane,noAnimation,noAlert){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||!s.isHidden)return;if(false===_runCallbacks("onshow_start",pane))return;s.isShowing=true;s.isSliding=false;delete state.panesSliding[pane];if(openPane===false)close(pane,
true);else open(pane,false,noAnimation,noAlert)},toggle=function(evt_or_pane,slide){if(!isInitialized())return;var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),s=state[pane];if(evt)evt.stopImmediatePropagation();if(s.isHidden)show(pane);else if(s.isClosed)open(pane,!!slide);else close(pane)},_closePane=function(pane,setHandles){var $P=$Ps[pane],s=state[pane];_hidePane(pane);s.isClosed=true;s.isVisible=false;if(setHandles)setAsClosed(pane)},close=function(evt_or_pane,force,noAnimation,
skipCallback){var pane=evtPane.call(this,evt_or_pane);if(!state.initialized&&$Ps[pane]){_closePane(pane,true);return}if(!isInitialized())return;var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],c=_c[pane],doFX,isShowing,isHiding,wasSliding;$N.queue(function(queueNext){if(!$P||(!o.closable&&(!s.isShowing&&!s.isHiding)||!force&&(s.isClosed&&!s.isShowing)))return queueNext();var abort=!s.isShowing&&false===_runCallbacks("onclose_start",pane);isShowing=s.isShowing;isHiding=s.isHiding;
wasSliding=s.isSliding;delete s.isShowing;delete s.isHiding;if(abort)return queueNext();doFX=!noAnimation&&(!s.isClosed&&o.fxName_close!="none");s.isMoving=true;s.isClosed=true;s.isVisible=false;if(isHiding)s.isHidden=true;else if(isShowing)s.isHidden=false;if(s.isSliding)bindStopSlidingEvents(pane,false);else sizeMidPanes(_c[pane].dir==="horz"?"":"center",false);setAsClosed(pane);if(doFX){lockPaneForFX(pane,true);$P.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(pane,
false);if(s.isClosed)close_2();queueNext()})}else{_hidePane(pane);close_2();queueNext()}});function close_2(){s.isMoving=false;bindStartSlidingEvents(pane,true);var altPane=_c.oppositeEdge[pane];if(state[altPane].noRoom){setSizeLimits(altPane);makePaneFit(altPane)}if(!skipCallback&&(state.initialized||o.triggerEventsOnLoad)){if(!isShowing)_runCallbacks("onclose_end",pane);if(isShowing)_runCallbacks("onshow_end",pane);if(isHiding)_runCallbacks("onhide_end",pane)}}},setAsClosed=function(pane){if(!$Rs[pane])return;
var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],side=_c[pane].side,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_sliding="-sliding",_closed="-closed";$R.css(side,sC.inset[side]).removeClass(rClass+_open+" "+rClass+_pane+_open).removeClass(rClass+_sliding+" "+rClass+_pane+_sliding).addClass(rClass+_closed+" "+rClass+_pane+_closed);if(o.resizable&&$.layout.plugins.draggable)$R.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",
"");if($T){$T.removeClass(tClass+_open+" "+tClass+_pane+_open).addClass(tClass+_closed+" "+tClass+_pane+_closed).attr("title",o.tips.Open);$T.children(".content-open").hide();$T.children(".content-closed").css("display","block")}syncPinBtns(pane,false);if(state.initialized)sizeHandles()},open=function(evt_or_pane,slide,noAnimation,noAlert){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],c=_c[pane],doFX,isShowing;
$N.queue(function(queueNext){if(!$P||(!o.resizable&&(!o.closable&&!s.isShowing)||s.isVisible&&!s.isSliding))return queueNext();if(s.isHidden&&!s.isShowing){queueNext();show(pane,true);return}if(s.autoResize&&s.size!=o.size)sizePane(pane,o.size,true,true,true);else setSizeLimits(pane,slide);var cbReturn=_runCallbacks("onopen_start",pane);if(cbReturn==="abort")return queueNext();if(cbReturn!=="NC")setSizeLimits(pane,slide);if(s.minSize>s.maxSize){syncPinBtns(pane,false);if(!noAlert&&o.tips.noRoomToOpen)alert(o.tips.noRoomToOpen);
return queueNext()}if(slide)bindStopSlidingEvents(pane,true);else if(s.isSliding)bindStopSlidingEvents(pane,false);else if(o.slidable)bindStartSlidingEvents(pane,false);s.noRoom=false;makePaneFit(pane);isShowing=s.isShowing;delete s.isShowing;doFX=!noAnimation&&(s.isClosed&&o.fxName_open!="none");s.isMoving=true;s.isVisible=true;s.isClosed=false;if(isShowing)s.isHidden=false;if(doFX){lockPaneForFX(pane,true);$P.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(pane,false);
if(s.isVisible)open_2();queueNext()})}else{_showPane(pane);open_2();queueNext()}});function open_2(){s.isMoving=false;_fixIframe(pane);if(!s.isSliding)sizeMidPanes(_c[pane].dir=="vert"?"center":"",false);setAsOpen(pane)}},setAsOpen=function(pane,skipCallback){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],side=_c[pane].side,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_closed="-closed",_sliding="-sliding";$R.css(side,sC.inset[side]+getPaneSize(pane)).removeClass(rClass+
_closed+" "+rClass+_pane+_closed).addClass(rClass+_open+" "+rClass+_pane+_open);if(s.isSliding)$R.addClass(rClass+_sliding+" "+rClass+_pane+_sliding);else $R.removeClass(rClass+_sliding+" "+rClass+_pane+_sliding);removeHover(0,$R);if(o.resizable&&$.layout.plugins.draggable)$R.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.tips.Resize);else if(!s.isSliding)$R.css("cursor","default");if($T){$T.removeClass(tClass+_closed+" "+tClass+_pane+_closed).addClass(tClass+_open+" "+tClass+_pane+
_open).attr("title",o.tips.Close);removeHover(0,$T);$T.children(".content-closed").hide();$T.children(".content-open").css("display","block")}syncPinBtns(pane,!s.isSliding);$.extend(s,elDims($P));if(state.initialized){sizeHandles();sizeContent(pane,true)}if(!skipCallback&&((state.initialized||o.triggerEventsOnLoad)&&$P.is(":visible"))){_runCallbacks("onopen_end",pane);if(s.isShowing)_runCallbacks("onshow_end",pane);if(state.initialized)_runCallbacks("onresize_end",pane)}},slideOpen=function(evt_or_pane){if(!isInitialized())return;
var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),s=state[pane],delay=options[pane].slideDelay_open;if(evt)evt.stopImmediatePropagation();if(s.isClosed&&(evt&&(evt.type==="mouseenter"&&delay>0)))timer.set(pane+"_openSlider",open_NOW,delay);else open_NOW();function open_NOW(){if(!s.isClosed)bindStopSlidingEvents(pane,true);else if(!s.isMoving)open(pane,true)}},slideClose=function(evt_or_pane){if(!isInitialized())return;var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),o=
options[pane],s=state[pane],delay=s.isMoving?1E3:300;if(s.isClosed||s.isResizing)return;else if(o.slideTrigger_close==="click")close_NOW();else if(o.preventQuickSlideClose&&s.isMoving)return;else if(o.preventPrematureSlideClose&&(evt&&$.layout.isMouseOverElem(evt,$Ps[pane])))return;else if(evt)timer.set(pane+"_closeSlider",close_NOW,max(o.slideDelay_close,delay));else close_NOW();function close_NOW(){if(s.isClosed)bindStopSlidingEvents(pane,false);else if(!s.isMoving)close(pane)}},slideToggle=function(evt_or_pane){var pane=
evtPane.call(this,evt_or_pane);toggle(pane,true)},lockPaneForFX=function(pane,doLock){var $P=$Ps[pane],s=state[pane],o=options[pane],z=options.zIndexes;if(doLock){showMasks(pane,{animation:true,objectsOnly:true});$P.css({zIndex:z.pane_animate});if(pane=="south")$P.css({top:sC.inset.top+sC.innerHeight-$P.outerHeight()});else if(pane=="east")$P.css({left:sC.inset.left+sC.innerWidth-$P.outerWidth()})}else{hideMasks();$P.css({zIndex:s.isSliding?z.pane_sliding:z.pane_normal});if(pane=="south")$P.css({top:"auto"});
else if(pane=="east"&&!$P.css("left").match(/\-99999/))$P.css({left:"auto"});if(browser.msie&&(o.fxOpacityFix&&(o.fxName_open!="slide"&&($P.css("filter")&&$P.css("opacity")==1))))$P[0].style.removeAttribute("filter")}},bindStartSlidingEvents=function(pane,enable){var o=options[pane],$P=$Ps[pane],$R=$Rs[pane],evtName=o.slideTrigger_open.toLowerCase();if(!$R||enable&&!o.slidable)return;if(evtName.match(/mouseover/))evtName=o.slideTrigger_open="mouseenter";else if(!evtName.match(/(click|dblclick|mouseenter)/))evtName=
o.slideTrigger_open="click";if(o.resizerDblClickToggle&&evtName.match(/click/))$R[enable?"unbind":"bind"]("dblclick."+sID,toggle);$R[enable?"bind":"unbind"](evtName+"."+sID,slideOpen).css("cursor",enable?o.sliderCursor:"default").attr("title",enable?o.tips.Slide:"")},bindStopSlidingEvents=function(pane,enable){var o=options[pane],s=state[pane],c=_c[pane],z=options.zIndexes,evtName=o.slideTrigger_close.toLowerCase(),action=enable?"bind":"unbind",$P=$Ps[pane],$R=$Rs[pane];timer.clear(pane+"_closeSlider");
if(enable){s.isSliding=true;state.panesSliding[pane]=true;bindStartSlidingEvents(pane,false)}else{s.isSliding=false;delete state.panesSliding[pane]}$P.css("zIndex",enable?z.pane_sliding:z.pane_normal);$R.css("zIndex",enable?z.pane_sliding+2:z.resizer_normal);if(!evtName.match(/(click|mouseleave)/))evtName=o.slideTrigger_close="mouseleave";$R[action](evtName,slideClose);if(evtName==="mouseleave"){$P[action]("mouseleave."+sID,slideClose);$R[action]("mouseenter."+sID,cancelMouseOut);$P[action]("mouseenter."+
sID,cancelMouseOut)}if(!enable)timer.clear(pane+"_closeSlider");else if(evtName==="click"&&!o.resizable){$R.css("cursor",enable?o.sliderCursor:"default");$R.attr("title",enable?o.tips.Close:"")}function cancelMouseOut(evt){timer.clear(pane+"_closeSlider");evt.stopPropagation()}},makePaneFit=function(pane,isOpening,skipCallback,force){var o=options[pane],s=state[pane],c=_c[pane],$P=$Ps[pane],$R=$Rs[pane],isSidePane=c.dir==="vert",hasRoom=false;if(pane==="center"||isSidePane&&s.noVerticalRoom){hasRoom=
s.maxHeight>=0;if(hasRoom&&s.noRoom){_showPane(pane);if($R)$R.show();s.isVisible=true;s.noRoom=false;if(isSidePane)s.noVerticalRoom=false;_fixIframe(pane)}else if(!hasRoom&&!s.noRoom){_hidePane(pane);if($R)$R.hide();s.isVisible=false;s.noRoom=true}}if(pane==="center");else if(s.minSize<=s.maxSize){hasRoom=true;if(s.size>s.maxSize)sizePane(pane,s.maxSize,skipCallback,true,force);else if(s.size<s.minSize)sizePane(pane,s.minSize,skipCallback,true,force);else if($R&&(s.isVisible&&$P.is(":visible"))){var pos=
s.size+sC.inset[c.side];if($.layout.cssNum($R,c.side)!=pos)$R.css(c.side,pos)}if(s.noRoom)if(s.wasOpen&&o.closable)if(o.autoReopen)open(pane,false,true,true);else s.noRoom=false;else show(pane,s.wasOpen,true,true)}else if(!s.noRoom){s.noRoom=true;s.wasOpen=!s.isClosed&&!s.isSliding;if(s.isClosed);else if(o.closable)close(pane,true,true);else hide(pane,true)}},manualSizePane=function(evt_or_pane,size,skipCallback,noAnimation,force){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),
o=options[pane],s=state[pane],forceResize=force||o.livePaneResizing&&!s.isResizing;s.autoResize=false;sizePane(pane,size,skipCallback,noAnimation,forceResize)},sizePane=function(evt_or_pane,size,skipCallback,noAnimation,force){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],side=_c[pane].side,dimName=_c[pane].sizeType.toLowerCase(),skipResizeWhileDragging=s.isResizing&&!o.triggerEventsDuringLiveResize,doFX=noAnimation!==true&&
o.animatePaneSizing,oldSize,newSize;$N.queue(function(queueNext){setSizeLimits(pane);oldSize=s.size;size=_parseSize(pane,size);size=max(size,_parseSize(pane,o.minSize));size=min(size,s.maxSize);if(size<s.minSize){queueNext();makePaneFit(pane,false,skipCallback);return}if(!force&&size===oldSize)return queueNext();s.newSize=size;if(!skipCallback&&(state.initialized&&s.isVisible))_runCallbacks("onresize_start",pane);newSize=cssSize(pane,size);if(doFX&&$P.is(":visible")){var fx=$.layout.effects.size[pane]||
$.layout.effects.size.all,easing=o.fxSettings_size.easing||fx.easing,z=options.zIndexes,props={};props[dimName]=newSize+"px";s.isMoving=true;$P.css({zIndex:z.pane_animate}).show().animate(props,o.fxSpeed_size,easing,function(){$P.css({zIndex:s.isSliding?z.pane_sliding:z.pane_normal});s.isMoving=false;delete s.newSize;sizePane_2();queueNext()})}else{$P.css(dimName,newSize);delete s.newSize;if($P.is(":visible"))sizePane_2();else{s.size=size;$.extend(s,elDims($P))}queueNext()}});function sizePane_2(){var actual=
dimName==="width"?$P.outerWidth():$P.outerHeight(),tries=[{pane:pane,count:1,target:size,actual:actual,correct:size===actual,attempt:size,cssSize:newSize}],lastTry=tries[0],thisTry={},msg="Inaccurate size after resizing the "+pane+"-pane.";while(!lastTry.correct){thisTry={pane:pane,count:lastTry.count+1,target:size};if(lastTry.actual>size)thisTry.attempt=max(0,lastTry.attempt-(lastTry.actual-size));else thisTry.attempt=max(0,lastTry.attempt+(size-lastTry.actual));thisTry.cssSize=cssSize(pane,thisTry.attempt);
$P.css(dimName,thisTry.cssSize);thisTry.actual=dimName=="width"?$P.outerWidth():$P.outerHeight();thisTry.correct=size===thisTry.actual;if(tries.length===1){_log(msg,false,true);_log(lastTry,false,true)}_log(thisTry,false,true);if(tries.length>3)break;tries.push(thisTry);lastTry=tries[tries.length-1]}s.size=size;$.extend(s,elDims($P));if(s.isVisible&&$P.is(":visible")){if($R)$R.css(side,size+sC.inset[side]);sizeContent(pane)}if(!skipCallback&&(!skipResizeWhileDragging&&(state.initialized&&s.isVisible)))_runCallbacks("onresize_end",
pane);if(!skipCallback){if(!s.isSliding)sizeMidPanes(_c[pane].dir=="horz"?"":"center",skipResizeWhileDragging,force);sizeHandles()}var altPane=_c.oppositeEdge[pane];if(size<oldSize&&state[altPane].noRoom){setSizeLimits(altPane);makePaneFit(altPane,false,skipCallback)}if(tries.length>1)_log(msg+"\nSee the Error Console for details.",true,true)}},sizeMidPanes=function(panes,skipCallback,force){panes=(panes?panes:"east,west,center").split(",");$.each(panes,function(i,pane){if(!$Ps[pane])return;var o=
options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],isCenter=pane=="center",hasRoom=true,CSS={},visCSS=$.layout.showInvisibly($P),newCenter=calcNewCenterPaneDims();$.extend(s,elDims($P));if(pane==="center"){if(!force&&(s.isVisible&&(newCenter.width===s.outerWidth&&newCenter.height===s.outerHeight))){$P.css(visCSS);return true}$.extend(s,cssMinDims(pane),{maxWidth:newCenter.width,maxHeight:newCenter.height});CSS=newCenter;s.newWidth=CSS.width;s.newHeight=CSS.height;CSS.width=cssW($P,CSS.width);CSS.height=
cssH($P,CSS.height);hasRoom=CSS.width>=0&&CSS.height>=0;if(!state.initialized&&o.minWidth>newCenter.width){var reqPx=o.minWidth-s.outerWidth,minE=options.east.minSize||0,minW=options.west.minSize||0,sizeE=state.east.size,sizeW=state.west.size,newE=sizeE,newW=sizeW;if(reqPx>0&&(state.east.isVisible&&sizeE>minE)){newE=max(sizeE-minE,sizeE-reqPx);reqPx-=sizeE-newE}if(reqPx>0&&(state.west.isVisible&&sizeW>minW)){newW=max(sizeW-minW,sizeW-reqPx);reqPx-=sizeW-newW}if(reqPx===0){if(sizeE&&sizeE!=minE)sizePane("east",
newE,true,true,force);if(sizeW&&sizeW!=minW)sizePane("west",newW,true,true,force);sizeMidPanes("center",skipCallback,force);$P.css(visCSS);return}}}else{if(s.isVisible&&!s.noVerticalRoom)$.extend(s,elDims($P),cssMinDims(pane));if(!force&&(!s.noVerticalRoom&&newCenter.height===s.outerHeight)){$P.css(visCSS);return true}CSS.top=newCenter.top;CSS.bottom=newCenter.bottom;s.newSize=newCenter.height;CSS.height=cssH($P,newCenter.height);s.maxHeight=CSS.height;hasRoom=s.maxHeight>=0;if(!hasRoom)s.noVerticalRoom=
true}if(hasRoom){if(!skipCallback&&state.initialized)_runCallbacks("onresize_start",pane);$P.css(CSS);if(pane!=="center")sizeHandles(pane);if(s.noRoom&&(!s.isClosed&&!s.isHidden))makePaneFit(pane);if(s.isVisible){$.extend(s,elDims($P));if(state.initialized)sizeContent(pane)}}else if(!s.noRoom&&s.isVisible)makePaneFit(pane);$P.css(visCSS);delete s.newSize;delete s.newWidth;delete s.newHeight;if(!s.isVisible)return true;if(pane==="center"){var fix=browser.isIE6||!browser.boxModel;if($Ps.north&&(fix||
state.north.tagName=="IFRAME"))$Ps.north.css("width",cssW($Ps.north,sC.innerWidth));if($Ps.south&&(fix||state.south.tagName=="IFRAME"))$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}if(!skipCallback&&state.initialized)_runCallbacks("onresize_end",pane)})},resizeAll=function(evt_or_refresh){var oldW=sC.innerWidth,oldH=sC.innerHeight;evtPane(evt_or_refresh);if(!$N.is(":visible"))return;if(!state.initialized){_initLayoutElements();return}if(evt_or_refresh===true&&$.isPlainObject(options.outset))$N.css(options.outset);
$.extend(sC,elDims($N,options.inset));if(!sC.outerHeight)return;if(evt_or_refresh===true)setPanePosition();if(false===_runCallbacks("onresizeall_start"))return false;var shrunkH=sC.innerHeight<oldH,shrunkW=sC.innerWidth<oldW,$P,o,s;$.each(["south","north","east","west"],function(i,pane){if(!$Ps[pane])return;o=options[pane];s=state[pane];if(s.autoResize&&s.size!=o.size)sizePane(pane,o.size,true,true,true);else{setSizeLimits(pane);makePaneFit(pane,false,true,true)}});sizeMidPanes("",true,true);sizeHandles();
$.each(_c.allPanes,function(i,pane){$P=$Ps[pane];if(!$P)return;if(state[pane].isVisible)_runCallbacks("onresize_end",pane)});_runCallbacks("onresizeall_end")},resizeChildren=function(evt_or_pane,skipRefresh){var pane=evtPane.call(this,evt_or_pane);if(!options[pane].resizeChildren)return;if(!skipRefresh)refreshChildren(pane);var pC=children[pane];if($.isPlainObject(pC))$.each(pC,function(key,child){if(!child.destroyed)child.resizeAll()})},sizeContent=function(evt_or_panes,remeasure){if(!isInitialized())return;
var panes=evtPane.call(this,evt_or_panes);panes=panes?panes.split(","):_c.allPanes;$.each(panes,function(idx,pane){var $P=$Ps[pane],$C=$Cs[pane],o=options[pane],s=state[pane],m=s.content;if(!$P||(!$C||!$P.is(":visible")))return true;if(!$C.length){initContent(pane,false);if(!$C)return}if(false===_runCallbacks("onsizecontent_start",pane))return;if(!s.isMoving&&!s.isResizing||(o.liveContentResizing||(remeasure||m.top==undefined))){_measure();if(m.hiddenFooters>0&&$P.css("overflow")==="hidden"){$P.css("overflow",
"visible");_measure();$P.css("overflow","hidden")}}var newH=s.innerHeight-(m.spaceAbove-s.css.paddingTop)-(m.spaceBelow-s.css.paddingBottom);if(!$C.is(":visible")||m.height!=newH){setOuterHeight($C,newH,true);m.height=newH}if(state.initialized)_runCallbacks("onsizecontent_end",pane);function _below($E){return max(s.css.paddingBottom,parseInt($E.css("marginBottom"),10)||0)}function _measure(){var ignore=options[pane].contentIgnoreSelector,$Fs=$C.nextAll().not(".ui-layout-mask").not(ignore||":lt(0)"),
$Fs_vis=$Fs.filter(":visible"),$F=$Fs_vis.filter(":last");m={top:$C[0].offsetTop,height:$C.outerHeight(),numFooters:$Fs.length,hiddenFooters:$Fs.length-$Fs_vis.length,spaceBelow:0};m.spaceAbove=m.top;m.bottom=m.top+m.height;if($F.length)m.spaceBelow=$F[0].offsetTop+$F.outerHeight()-m.bottom+_below($F);else m.spaceBelow=_below($C)}})},sizeHandles=function(evt_or_panes){var panes=evtPane.call(this,evt_or_panes);panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var o=options[pane],
s=state[pane],$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],$TC;if(!$P||!$R)return;var dir=_c[pane].dir,_state=s.isClosed?"_closed":"_open",spacing=o["spacing"+_state],togAlign=o["togglerAlign"+_state],togLen=o["togglerLength"+_state],paneLen,left,offset,CSS={};if(spacing===0){$R.hide();return}else if(!s.noRoom&&!s.isHidden)$R.show();if(dir==="horz"){paneLen=sC.innerWidth;s.resizerLength=paneLen;left=$.layout.cssNum($P,"left");$R.css({width:cssW($R,paneLen),height:cssH($R,spacing),left:left>-9999?left:sC.inset.left})}else{paneLen=
$P.outerHeight();s.resizerLength=paneLen;$R.css({height:cssH($R,paneLen),width:cssW($R,spacing),top:sC.inset.top+getPaneSize("north",true)})}removeHover(o,$R);if($T){if(togLen===0||s.isSliding&&o.hideTogglerOnSlide){$T.hide();return}else $T.show();if(!(togLen>0)||(togLen==="100%"||togLen>paneLen)){togLen=paneLen;offset=0}else if(isStr(togAlign))switch(togAlign){case "top":case "left":offset=0;break;case "bottom":case "right":offset=paneLen-togLen;break;case "middle":case "center":default:offset=round((paneLen-
togLen)/2)}else{var x=parseInt(togAlign,10);if(togAlign>=0)offset=x;else offset=paneLen-togLen+x}if(dir==="horz"){var width=cssW($T,togLen);$T.css({width:width,height:cssH($T,spacing),left:offset,top:0});$T.children(".content").each(function(){$TC=$(this);$TC.css("marginLeft",round((width-$TC.outerWidth())/2))})}else{var height=cssH($T,togLen);$T.css({height:height,width:cssW($T,spacing),top:offset,left:0});$T.children(".content").each(function(){$TC=$(this);$TC.css("marginTop",round((height-$TC.outerHeight())/
2))})}removeHover(0,$T)}if(!state.initialized&&(o.initHidden||s.isHidden)){$R.hide();if($T)$T.hide()}})},enableClosable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$T=$Ts[pane],o=options[pane];if(!$T)return;o.closable=true;$T.bind("click."+sID,function(evt){evt.stopPropagation();toggle(pane)}).css("visibility","visible").css("cursor","pointer").attr("title",state[pane].isClosed?o.tips.Open:o.tips.Close).show()},disableClosable=function(evt_or_pane,hide){if(!isInitialized())return;
var pane=evtPane.call(this,evt_or_pane),$T=$Ts[pane];if(!$T)return;options[pane].closable=false;if(state[pane].isClosed)open(pane,false,true);$T.unbind("."+sID).css("visibility",hide?"hidden":"visible").css("cursor","default").attr("title","")},enableSlidable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R||!$R.data("draggable"))return;options[pane].slidable=true;if(state[pane].isClosed)bindStartSlidingEvents(pane,true)},disableSlidable=
function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R)return;options[pane].slidable=false;if(state[pane].isSliding)close(pane,false,true);else{bindStartSlidingEvents(pane,false);$R.css("cursor","default").attr("title","");removeHover(null,$R[0])}},enableResizable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane],o=options[pane];if(!$R||!$R.data("draggable"))return;o.resizable=true;$R.draggable("enable");
if(!state[pane].isClosed)$R.css("cursor",o.resizerCursor).attr("title",o.tips.Resize)},disableResizable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R||!$R.data("draggable"))return;options[pane].resizable=false;$R.draggable("disable").css("cursor","default").attr("title","");removeHover(null,$R[0])},swapPanes=function(evt_or_pane1,pane2){if(!isInitialized())return;var pane1=evtPane.call(this,evt_or_pane1);state[pane1].edge=pane2;state[pane2].edge=
pane1;if(false===_runCallbacks("onswap_start",pane1)||false===_runCallbacks("onswap_start",pane2)){state[pane1].edge=pane1;state[pane2].edge=pane2;return}var oPane1=copy(pane1),oPane2=copy(pane2),sizes={};sizes[pane1]=oPane1?oPane1.state.size:0;sizes[pane2]=oPane2?oPane2.state.size:0;$Ps[pane1]=false;$Ps[pane2]=false;state[pane1]={};state[pane2]={};if($Ts[pane1])$Ts[pane1].remove();if($Ts[pane2])$Ts[pane2].remove();if($Rs[pane1])$Rs[pane1].remove();if($Rs[pane2])$Rs[pane2].remove();$Rs[pane1]=$Rs[pane2]=
$Ts[pane1]=$Ts[pane2]=false;move(oPane1,pane2);move(oPane2,pane1);oPane1=oPane2=sizes=null;if($Ps[pane1])$Ps[pane1].css(_c.visible);if($Ps[pane2])$Ps[pane2].css(_c.visible);resizeAll();_runCallbacks("onswap_end",pane1);_runCallbacks("onswap_end",pane2);return;function copy(n){var $P=$Ps[n],$C=$Cs[n];return!$P?false:{pane:n,P:$P?$P[0]:false,C:$C?$C[0]:false,state:$.extend(true,{},state[n]),options:$.extend(true,{},options[n])}}function move(oPane,pane){if(!oPane)return;var P=oPane.P,C=oPane.C,oldPane=
oPane.pane,c=_c[pane],s=$.extend(true,{},state[pane]),o=options[pane],fx={resizerCursor:o.resizerCursor},re,size,pos;$.each("fxName,fxSpeed,fxSettings".split(","),function(i,k){fx[k+"_open"]=o[k+"_open"];fx[k+"_close"]=o[k+"_close"];fx[k+"_size"]=o[k+"_size"]});$Ps[pane]=$(P).data({layoutPane:Instance[pane],layoutEdge:pane}).css(_c.hidden).css(c.cssReq);$Cs[pane]=C?$(C):false;options[pane]=$.extend(true,{},oPane.options,fx);state[pane]=$.extend(true,{},oPane.state);re=new RegExp(o.paneClass+"-"+oldPane,
"g");P.className=P.className.replace(re,o.paneClass+"-"+pane);initHandles(pane);if(c.dir!=_c[oldPane].dir){size=sizes[pane]||0;setSizeLimits(pane);size=max(size,state[pane].minSize);manualSizePane(pane,size,true,true)}else $Rs[pane].css(c.side,sC.inset[c.side]+(state[pane].isVisible?getPaneSize(pane):0));if(oPane.state.isVisible&&!s.isVisible)setAsOpen(pane,true);else{setAsClosed(pane);bindStartSlidingEvents(pane,true)}oPane=null}},syncPinBtns=function(pane,doPin){if($.layout.plugins.buttons)$.each(state[pane].pins,
function(i,selector){$.layout.buttons.setPinState(Instance,$(selector),pane,doPin)})};function keyDown(evt){if(!evt)return true;var code=evt.keyCode;if(code<33)return true;var PANE={38:"north",40:"south",37:"west",39:"east"},ALT=evt.altKey,SHIFT=evt.shiftKey,CTRL=evt.ctrlKey,CURSOR=CTRL&&(code>=37&&code<=40),o,k,m,pane;if(CURSOR&&options[PANE[code]].enableCursorHotkey)pane=PANE[code];else if(CTRL||SHIFT)$.each(_c.borderPanes,function(i,p){o=options[p];k=o.customHotkey;m=o.customHotkeyModifier;if(SHIFT&&
m=="SHIFT"||(CTRL&&m=="CTRL"||CTRL&&SHIFT))if(k&&code===(isNaN(k)||k<=9?k.toUpperCase().charCodeAt(0):k)){pane=p;return false}});if(!pane||(!$Ps[pane]||(!options[pane].closable||state[pane].isHidden)))return true;toggle(pane);evt.stopPropagation();evt.returnValue=false;return false}function allowOverflow(el){if(!isInitialized())return;if(this&&this.tagName)el=this;var $P;if(isStr(el))$P=$Ps[el];else if($(el).data("layoutRole"))$P=$(el);else $(el).parents().each(function(){if($(this).data("layoutRole")){$P=
$(this);return false}});if(!$P||!$P.length)return;var pane=$P.data("layoutEdge"),s=state[pane];if(s.cssSaved)resetOverflow(pane);if(s.isSliding||(s.isResizing||s.isClosed)){s.cssSaved=false;return}var newCSS={zIndex:options.zIndexes.resizer_normal+1},curCSS={},of=$P.css("overflow"),ofX=$P.css("overflowX"),ofY=$P.css("overflowY");if(of!="visible"){curCSS.overflow=of;newCSS.overflow="visible"}if(ofX&&!ofX.match(/(visible|auto)/)){curCSS.overflowX=ofX;newCSS.overflowX="visible"}if(ofY&&!ofY.match(/(visible|auto)/)){curCSS.overflowY=
ofX;newCSS.overflowY="visible"}s.cssSaved=curCSS;$P.css(newCSS);$.each(_c.allPanes,function(i,p){if(p!=pane)resetOverflow(p)})}function resetOverflow(el){if(!isInitialized())return;if(this&&this.tagName)el=this;var $P;if(isStr(el))$P=$Ps[el];else if($(el).data("layoutRole"))$P=$(el);else $(el).parents().each(function(){if($(this).data("layoutRole")){$P=$(this);return false}});if(!$P||!$P.length)return;var pane=$P.data("layoutEdge"),s=state[pane],CSS=s.cssSaved||{};if(!s.isSliding&&!s.isResizing)$P.css("zIndex",
options.zIndexes.pane_normal);$P.css(CSS);s.cssSaved=false}var $N=$(this).eq(0);if(!$N.length)return _log(options.errors.containerMissing);if($N.data("layoutContainer")&&$N.data("layout"))return $N.data("layout");var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id;var Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,
setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,showMasks:showMasks,hideMasks:hideMasks,initContent:initContent,addPane:addPane,removePane:removePane,createChildren:createChildren,refreshChildren:refreshChildren,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,
destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:false,children:children,north:false,south:false,west:false,east:false,center:false};if(_create()==="cancel")return null;else return Instance}})(jQuery);
(function($){if(!$.ui)$.ui={};$.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(name){var c=document.cookie,cs=c?c.split(";"):[],pair;for(var i=0,n=cs.length;i<n;i++){pair=$.trim(cs[i]).split("\x3d");if(pair[0]==name)return decodeURIComponent(pair[1])}return null},write:function(name,val,cookieOpts){var params="",date="",clear=false,o=cookieOpts||{},x=o.expires||null,t=$.type(x);if(t==="date")date=x;else if(t==="string"&&x>0){x=parseInt(x,10);t="number"}if(t==="number"){date=new Date;
if(x>0)date.setDate(date.getDate()+x);else{date.setFullYear(1970);clear=true}}if(date)params+=";expires\x3d"+date.toUTCString();if(o.path)params+=";path\x3d"+o.path;if(o.domain)params+=";domain\x3d"+o.domain;if(o.secure)params+=";secure";document.cookie=name+"\x3d"+(clear?"":encodeURIComponent(val))+params},clear:function(name){$.ui.cookie.write(name,"",{expires:-1})}};if(!$.cookie)$.cookie=function(k,v,o){var C=$.ui.cookie;if(v===null)C.clear(k);else if(v===undefined)return C.read(k);else C.write(k,
v,o)};$.layout.plugins.stateManagement=true;$.layout.config.optionRootKeys.push("stateManagement");$.layout.defaults.stateManagement={enabled:false,autoSave:true,autoLoad:true,animateLoad:true,includeChildren:true,stateKeys:"north.size,south.size,east.size,west.size,"+"north.isClosed,south.isClosed,east.isClosed,west.isClosed,"+"north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:false}};$.layout.optionsMap.layout.push("stateManagement");
$.layout.state={saveCookie:function(inst,keys,cookieOpts){var o=inst.options,sm=o.stateManagement,oC=$.extend(true,{},sm.cookie,cookieOpts||null),data=inst.state.stateData=inst.readState(keys||sm.stateKeys);$.ui.cookie.write(oC.name||(o.name||"Layout"),$.layout.state.encodeJSON(data),oC);return $.extend(true,{},data)},deleteCookie:function(inst){var o=inst.options;$.ui.cookie.clear(o.stateManagement.cookie.name||(o.name||"Layout"))},readCookie:function(inst){var o=inst.options;var c=$.ui.cookie.read(o.stateManagement.cookie.name||
(o.name||"Layout"));return c?$.layout.state.decodeJSON(c):{}},loadCookie:function(inst){var c=$.layout.state.readCookie(inst);if(c){inst.state.stateData=$.extend(true,{},c);inst.loadState(c)}return c},loadState:function(inst,data,opts){if(!$.isPlainObject(data)||$.isEmptyObject(data))return;data=inst.state.stateData=$.layout.transformData(data);var smo=inst.options.stateManagement;opts=$.extend({animateLoad:false,includeChildren:smo.includeChildren},opts);if(!inst.state.initialized){var o=$.extend(true,
{},data);$.each($.layout.config.allPanes,function(idx,pane){if(o[pane])delete o[pane].children});$.extend(true,inst.options,o)}else{var noAnimate=!opts.animateLoad,o,c,h,state,open;$.each($.layout.config.borderPanes,function(idx,pane){o=data[pane];if(!$.isPlainObject(o))return;s=o.size;c=o.initClosed;h=o.initHidden;ar=o.autoResize;state=inst.state[pane];open=state.isVisible;if(ar)state.autoResize=ar;if(!open)inst._sizePane(pane,s,false,false,false);if(h===true)inst.hide(pane,noAnimate);else if(c===
true)inst.close(pane,false,noAnimate);else if(c===false)inst.open(pane,false,noAnimate);else if(h===false)inst.show(pane,false,noAnimate);if(open)inst._sizePane(pane,s,false,false,noAnimate)});if(opts.includeChildren){var paneStateChildren,childState;$.each(inst.children,function(pane,paneChildren){paneStateChildren=data[pane]?data[pane].children:0;if(paneStateChildren&&paneChildren)$.each(paneChildren,function(stateKey,child){childState=paneStateChildren[stateKey];if(child&&childState)child.loadState(childState)})})}}},
readState:function(inst,opts){if($.type(opts)==="string")opts={keys:opts};if(!opts)opts={};var sm=inst.options.stateManagement,ic=opts.includeChildren,recurse=ic!==undefined?ic:sm.includeChildren,keys=opts.stateKeys||sm.stateKeys,alt={isClosed:"initClosed",isHidden:"initHidden"},state=inst.state,panes=$.layout.config.allPanes,data={},pair,pane,key,val,ps,pC,child,array,count,branch;if($.isArray(keys))keys=keys.join(",");keys=keys.replace(/__/g,".").split(",");for(var i=0,n=keys.length;i<n;i++){pair=
keys[i].split(".");pane=pair[0];key=pair[1];if($.inArray(pane,panes)<0)continue;val=state[pane][key];if(val==undefined)continue;if(key=="isClosed"&&state[pane]["isSliding"])val=true;(data[pane]||(data[pane]={}))[alt[key]?alt[key]:key]=val}if(recurse)$.each(panes,function(idx,pane){pC=inst.children[pane];ps=state.stateData[pane];if($.isPlainObject(pC)&&!$.isEmptyObject(pC)){branch=data[pane]||(data[pane]={});if(!branch.children)branch.children={};$.each(pC,function(key,child){if(child.state.initialized)branch.children[key]=
$.layout.state.readState(child);else if(ps&&(ps.children&&ps.children[key]))branch.children[key]=$.extend(true,{},ps.children[key])})}});return data},encodeJSON:function(JSON){return parse(JSON);function parse(h){var D=[],i=0,k,v,t,a=$.isArray(h);for(k in h){v=h[k];t=typeof v;if(t=="string")v='"'+v+'"';else if(t=="object")v=parse(v);D[i++]=(!a?'"'+k+'":':"")+v}return(a?"[":"{")+D.join(",")+(a?"]":"}")}},decodeJSON:function(str){try{return $.parseJSON?$.parseJSON(str):window["eval"]("("+str+")")||
{}}catch(e){return{}}},_create:function(inst){var _=$.layout.state,o=inst.options,sm=o.stateManagement;$.extend(inst,{readCookie:function(){return _.readCookie(inst)},deleteCookie:function(){_.deleteCookie(inst)},saveCookie:function(keys,cookieOpts){return _.saveCookie(inst,keys,cookieOpts)},loadCookie:function(){return _.loadCookie(inst)},loadState:function(stateData,opts){_.loadState(inst,stateData,opts)},readState:function(keys){return _.readState(inst,keys)},encodeJSON:_.encodeJSON,decodeJSON:_.decodeJSON});
inst.state.stateData={};if(!sm.autoLoad)return;if($.isPlainObject(sm.autoLoad)){if(!$.isEmptyObject(sm.autoLoad))inst.loadState(sm.autoLoad)}else if(sm.enabled)if($.isFunction(sm.autoLoad)){var d={};try{d=sm.autoLoad(inst,inst.state,inst.options,inst.options.name||"")}catch(e){}if(d&&($.isPlainObject(d)&&!$.isEmptyObject(d)))inst.loadState(d)}else inst.loadCookie()},_unload:function(inst){var sm=inst.options.stateManagement;if(sm.enabled&&sm.autoSave)if($.isFunction(sm.autoSave))try{sm.autoSave(inst,
inst.state,inst.options,inst.options.name||"")}catch(e){}else inst.saveCookie()}};$.layout.onCreate.push($.layout.state._create);$.layout.onUnload.push($.layout.state._unload);$.layout.plugins.buttons=true;$.layout.defaults.autoBindCustomButtons=false;$.layout.optionsMap.layout.push("autoBindCustomButtons");$.layout.buttons={init:function(inst){var pre="ui-layout-button-",layout=inst.options.name||"",name;$.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),function(i,action){$.each($.layout.config.borderPanes,
function(ii,pane){$("."+pre+action+"-"+pane).each(function(){name=$(this).data("layoutName")||$(this).attr("layoutName");if(name==undefined||name===layout)inst.bindButton(this,action,pane)})})})},get:function(inst,selector,pane,action){var $E=$(selector),o=inst.options,err=o.errors.addButtonError;if(!$E.length)$.layout.msg(err+" "+o.errors.selector+": "+selector,true);else if($.inArray(pane,$.layout.config.borderPanes)<0){$.layout.msg(err+" "+o.errors.pane+": "+pane,true);$E=$("")}else{var btn=o[pane].buttonClass+
"-"+action;$E.addClass(btn+" "+btn+"-"+pane).data("layoutName",o.name)}return $E},bind:function(inst,selector,action,pane){var _=$.layout.buttons;switch(action.toLowerCase()){case "toggle":_.addToggle(inst,selector,pane);break;case "open":_.addOpen(inst,selector,pane);break;case "close":_.addClose(inst,selector,pane);break;case "pin":_.addPin(inst,selector,pane);break;case "toggle-slide":_.addToggle(inst,selector,pane,true);break;case "open-slide":_.addOpen(inst,selector,pane,true);break}return inst},
addToggle:function(inst,selector,pane,slide){$.layout.buttons.get(inst,selector,pane,"toggle").click(function(evt){inst.toggle(pane,!!slide);evt.stopPropagation()});return inst},addOpen:function(inst,selector,pane,slide){$.layout.buttons.get(inst,selector,pane,"open").attr("title",inst.options[pane].tips.Open).click(function(evt){inst.open(pane,!!slide);evt.stopPropagation()});return inst},addClose:function(inst,selector,pane){$.layout.buttons.get(inst,selector,pane,"close").attr("title",inst.options[pane].tips.Close).click(function(evt){inst.close(pane);
evt.stopPropagation()});return inst},addPin:function(inst,selector,pane){var _=$.layout.buttons,$E=_.get(inst,selector,pane,"pin");if($E.length){var s=inst.state[pane];$E.click(function(evt){_.setPinState(inst,$(this),pane,s.isSliding||s.isClosed);if(s.isSliding||s.isClosed)inst.open(pane);else inst.close(pane);evt.stopPropagation()});_.setPinState(inst,$E,pane,!s.isClosed&&!s.isSliding);s.pins.push(selector)}return inst},setPinState:function(inst,$Pin,pane,doPin){var updown=$Pin.attr("pin");if(updown&&
doPin===(updown=="down"))return;var o=inst.options[pane],pin=o.buttonClass+"-pin",side=pin+"-"+pane,UP=pin+"-up "+side+"-up",DN=pin+"-down "+side+"-down";$Pin.attr("pin",doPin?"down":"up").attr("title",doPin?o.tips.Unpin:o.tips.Pin).removeClass(doPin?UP:DN).addClass(doPin?DN:UP)},syncPinBtns:function(inst,pane,doPin){$.each(inst.state[pane].pins,function(i,selector){$.layout.buttons.setPinState(inst,$(selector),pane,doPin)})},_load:function(inst){var _=$.layout.buttons;$.extend(inst,{bindButton:function(sel,
action,pane){return _.bind(inst,sel,action,pane)},addToggleBtn:function(sel,pane,slide){return _.addToggle(inst,sel,pane,slide)},addOpenBtn:function(sel,pane,slide){return _.addOpen(inst,sel,pane,slide)},addCloseBtn:function(sel,pane){return _.addClose(inst,sel,pane)},addPinBtn:function(sel,pane){return _.addPin(inst,sel,pane)}});for(var i=0;i<4;i++){var pane=$.layout.config.borderPanes[i];inst.state[pane].pins=[]}if(inst.options.autoBindCustomButtons)_.init(inst)},_unload:function(inst){}};$.layout.onLoad.push($.layout.buttons._load);
$.layout.plugins.browserZoom=true;$.layout.defaults.browserZoomCheckInterval=1E3;$.layout.optionsMap.layout.push("browserZoomCheckInterval");$.layout.browserZoom={_init:function(inst){if($.layout.browserZoom.ratio()!==false)$.layout.browserZoom._setTimer(inst)},_setTimer:function(inst){if(inst.destroyed)return;var o=inst.options,s=inst.state,ms=inst.hasParentLayout?5E3:Math.max(o.browserZoomCheckInterval,100);setTimeout(function(){if(inst.destroyed||!o.resizeWithWindow)return;var d=$.layout.browserZoom.ratio();
if(d!==s.browserZoom){s.browserZoom=d;inst.resizeAll()}$.layout.browserZoom._setTimer(inst)},ms)},ratio:function(){var w=window,s=screen,d=document,dE=d.documentElement||d.body,b=$.layout.browser,v=b.version,r,sW,cW;if(b.msie&&v>8||!b.msie)return false;if(s.deviceXDPI&&s.systemXDPI)return calc(s.deviceXDPI,s.systemXDPI);if(b.webkit&&(r=d.body.getBoundingClientRect))return calc(r.left-r.right,d.body.offsetWidth);if(b.webkit&&(sW=w.outerWidth))return calc(sW,w.innerWidth);if((sW=s.width)&&(cW=dE.clientWidth))return calc(sW,
cW);return false;function calc(x,y){return(parseInt(x,10)/parseInt(y,10)*100).toFixed()}}};$.layout.onReady.push($.layout.browserZoom._init)})(jQuery);
jQuery.tableDnD={currentTable:null,dragObject:null,mouseOffset:null,oldY:0,build:function(options){options=options||{};this.each(function(){this.tableDnDConfig={onDragStyle:options.onDragStyle,onDropStyle:options.onDropStyle,onDragClass:options.onDragClass?options.onDragClass:"tDnD_whileDrag",onDrop:options.onDrop,onDragStart:options.onDragStart,scrollAmount:options.scrollAmount?options.scrollAmount:5};jQuery.tableDnD.makeDraggable(this)});jQuery(document).bind("mousemove",jQuery.tableDnD.mousemove).bind("mouseup",
jQuery.tableDnD.mouseup);return this},makeDraggable:function(table){var rows=table.rows;var config=table.tableDnDConfig;for(var i=0;i<rows.length;i++){var nodrag=$(rows[i]).hasClass("nodrag");if(!nodrag)jQuery(rows[i]).mousedown(function(ev){if(ev.target.tagName=="TD"){jQuery.tableDnD.dragObject=this;jQuery.tableDnD.currentTable=table;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,ev);if(config.onDragStart)config.onDragStart(table,this);return false}}).css("cursor","move")}},mouseCoords:function(ev){if(ev.pageX||
ev.pageY)return{x:ev.pageX,y:ev.pageY};return{x:ev.clientX+document.body.scrollLeft-document.body.clientLeft,y:ev.clientY+document.body.scrollTop-document.body.clientTop}},getMouseOffset:function(target,ev){ev=ev||window.event;var docPos=this.getPosition(target);var mousePos=this.mouseCoords(ev);return{x:mousePos.x-docPos.x,y:mousePos.y-docPos.y}},getPosition:function(e){var left=0;var top=0;if(e.offsetHeight==0)e=e.firstChild;while(e.offsetParent){left+=e.offsetLeft;top+=e.offsetTop;e=e.offsetParent}left+=
e.offsetLeft;top+=e.offsetTop;return{x:left,y:top}},mousemove:function(ev){if(jQuery.tableDnD.dragObject==null)return;var dragObj=jQuery(jQuery.tableDnD.dragObject);var config=jQuery.tableDnD.currentTable.tableDnDConfig;var mousePos=jQuery.tableDnD.mouseCoords(ev);var y=mousePos.y-jQuery.tableDnD.mouseOffset.y;var yOffset=window.pageYOffset;if(document.all)if(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat")yOffset=document.documentElement.scrollTop;else if(typeof document.body!=
"undefined")yOffset=document.body.scrollTop;if(mousePos.y-yOffset<config.scrollAmount)window.scrollBy(0,-config.scrollAmount);else{var windowHeight=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;if(windowHeight-(mousePos.y-yOffset)<config.scrollAmount)window.scrollBy(0,config.scrollAmount)}if(y!=jQuery.tableDnD.oldY){var movingDown=y>jQuery.tableDnD.oldY;jQuery.tableDnD.oldY=y;if(config.onDragClass)dragObj.addClass(config.onDragClass);
else dragObj.css(config.onDragStyle);var currentRow=jQuery.tableDnD.findDropTargetRow(dragObj,y);if(currentRow)if(movingDown&&jQuery.tableDnD.dragObject!=currentRow)jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,currentRow.nextSibling);else if(!movingDown&&jQuery.tableDnD.dragObject!=currentRow)jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,currentRow)}return false},findDropTargetRow:function(draggedRow,y){var rows=jQuery.tableDnD.currentTable.rows;
for(var i=0;i<rows.length;i++){var row=rows[i];var rowY=this.getPosition(row).y;var rowHeight=parseInt(row.offsetHeight)/2;if(row.offsetHeight==0){rowY=this.getPosition(row.firstChild).y;rowHeight=parseInt(row.firstChild.offsetHeight)/2}if(y>rowY-rowHeight&&y<rowY+rowHeight){if(row==draggedRow)return null;var config=jQuery.tableDnD.currentTable.tableDnDConfig;if(config.onAllowDrop)if(config.onAllowDrop(draggedRow,row))return row;else return null;else{var nodrop=$(row).hasClass("nodrop");if(!nodrop)return row;
else return null}return row}}return null},mouseup:function(e){if(jQuery.tableDnD.currentTable&&jQuery.tableDnD.dragObject){var droppedRow=jQuery.tableDnD.dragObject;var config=jQuery.tableDnD.currentTable.tableDnDConfig;if(config.onDragClass)jQuery(droppedRow).removeClass(config.onDragClass);else jQuery(droppedRow).css(config.onDropStyle);jQuery.tableDnD.dragObject=null;if(config.onDrop)config.onDrop(jQuery.tableDnD.currentTable,droppedRow);jQuery.tableDnD.currentTable=null}},serialize:function(){if(jQuery.tableDnD.currentTable){var result=
"";var tableId=jQuery.tableDnD.currentTable.id;var rows=jQuery.tableDnD.currentTable.rows;for(var i=0;i<rows.length;i++){if(result.length>0)result+="\x26";result+=tableId+"[]\x3d"+rows[i].id}return result}else return"Error: No Table id set, you need to set an id on your table and every row"}};jQuery.fn.extend({tableDnD:jQuery.tableDnD.build});
CodeMirror.defineMode("less",function(config){var indentUnit=config.indentUnit,type;function ret(style,tp){type=tp;return style}var selectors=/(^\:root$|^\:nth\-child$|^\:nth\-last\-child$|^\:nth\-of\-type$|^\:nth\-last\-of\-type$|^\:first\-child$|^\:last\-child$|^\:first\-of\-type$|^\:last\-of\-type$|^\:only\-child$|^\:only\-of\-type$|^\:empty$|^\:link|^\:visited$|^\:active$|^\:hover$|^\:focus$|^\:target$|^\:lang$|^\:enabled^\:disabled$|^\:checked$|^\:first\-line$|^\:first\-letter$|^\:before$|^\:after$|^\:not$|^\:required$|^\:invalid$)/;function tokenBase(stream,
state){var ch=stream.next();if(ch=="@"){stream.eatWhile(/[\w\-]/);return ret("meta",stream.current())}else if(ch=="/"&&stream.eat("*")){state.tokenize=tokenCComment;return tokenCComment(stream,state)}else if(ch=="\x3c"&&stream.eat("!")){state.tokenize=tokenSGMLComment;return tokenSGMLComment(stream,state)}else if(ch=="\x3d")ret(null,"compare");else if(ch=="|"&&stream.eat("\x3d"))return ret(null,"compare");else if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}else if(ch==
"/")if(stream.eat("/")){state.tokenize=tokenSComment;return tokenSComment(stream,state)}else{if(type=="string"||type=="(")return ret("string","string");if(state.stack[state.stack.length-1]!==undefined)return ret(null,ch);stream.eatWhile(/[\a-zA-Z0-9\-_.\s]/);if(/\/|\)|#/.test(stream.peek()||stream.eatSpace()&&stream.peek()===")")||stream.eol())return ret("string","string")}else if(ch=="!"){stream.match(/^\s*\w*/);return ret("keyword","important")}else if(/\d/.test(ch)){stream.eatWhile(/[\w.%]/);return ret("number",
"unit")}else if(/[,+<>*\/]/.test(ch)){if(stream.peek()=="\x3d"||type=="a")return ret("string","string");if(ch===",")return ret(null,ch);return ret(null,"select-op")}else if(/[;{}:\[\]()~\|]/.test(ch))if(ch==":"){stream.eatWhile(/[a-z\\\-]/);if(selectors.test(stream.current()))return ret("tag","tag");else if(stream.peek()==":"){stream.next();stream.eatWhile(/[a-z\\\-]/);if(stream.current().match(/\:\:\-(o|ms|moz|webkit)\-/))return ret("string","string");if(selectors.test(stream.current().substring(1)))return ret("tag",
"tag");return ret(null,ch)}else return ret(null,ch)}else if(ch=="~"){if(type=="r")return ret("string","string")}else return ret(null,ch);else if(ch=="."){if(type=="(")return ret("string","string");stream.eatWhile(/[\a-zA-Z0-9\-_]/);if(stream.peek()===" ")stream.eatSpace();if(stream.peek()===")"||type===":")return ret("number","unit");else if(state.stack[state.stack.length-1]==="rule"&&stream.peek().match(/{|,|\+|\(/)===null)return ret("number","unit");return ret("tag","tag")}else if(ch=="#"){stream.eatWhile(/[A-Za-z0-9]/);
if(stream.current().length==4||stream.current().length==7)if(stream.current().match(/[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/,false)!=null){if(stream.current().substring(1)!=stream.current().match(/[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/,false))return ret("atom","tag");stream.eatSpace();if(/[\/<>.(){!$%^&*_\-\\?=+\|#'~`]/.test(stream.peek()))if(type==="select-op")return ret("number","unit");else return ret("atom","tag");else if(stream.peek()=="}")return ret("number","unit");else if(/[a-zA-Z\\]/.test(stream.peek()))return ret("atom",
"tag");else if(stream.eol())return ret("atom","tag");else return ret("number","unit")}else{stream.eatWhile(/[\w\\\-]/);return ret("atom",stream.current())}else{stream.eatWhile(/[\w\\\-]/);if(state.stack[state.stack.length-1]==="rule")return ret("atom",stream.current());return ret("atom",stream.current());return ret("atom","tag")}}else if(ch=="\x26"){stream.eatWhile(/[\w\-]/);return ret(null,ch)}else{stream.eatWhile(/[\w\\\-_%.{]/);if(stream.current().match(/\\/)!==null){if(stream.current().charAt(stream.current().length-
1)==="\\"){stream.eat(/\'|\"|\)|\(/);while(stream.eatWhile(/[\w\\\-_%.{]/))stream.eat(/\'|\"|\)|\(/);return ret("string",stream.current())}}else if(type=="string"){if(state.stack[state.stack.length-1]==="{"&&stream.peek()===":")return ret("variable","variable");if(stream.peek()==="/")stream.eatWhile(/[\w\\\-_%.{:\/]/);return ret(type,stream.current())}else if(stream.current().match(/(^http$|^https$)/)!=null){stream.eatWhile(/[\w\\\-_%.{:\/]/);if(stream.peek()==="/")stream.eatWhile(/[\w\\\-_%.{:\/]/);
return ret("string","string")}else if(stream.peek()=="\x3c"||(stream.peek()=="\x3e"||stream.peek()=="+")){if(type==="("&&(stream.current()==="n"||stream.current()==="-n"))return ret("string",stream.current());return ret("tag","tag")}else if(/\(/.test(stream.peek())){if(stream.current()==="when")return ret("variable","variable");else if(state.stack[state.stack.length-1]==="@media"&&stream.current()==="and")return ret("variable",stream.current());return ret(null,ch)}else if(stream.peek()=="/"&&state.stack[state.stack.length-
1]!==undefined){if(stream.peek()==="/")stream.eatWhile(/[\w\\\-_%.{:\/]/);return ret("string",stream.current())}else if(stream.current().match(/\-\d|\-.\d/))return ret("number","unit");else if(/\/|[\s\)]/.test(stream.peek()||(stream.eol()||stream.eatSpace()&&stream.peek()=="/"))&&stream.current().indexOf(".")!==-1){if(stream.current().substring(stream.current().length-1,stream.current().length)=="{"){stream.backUp(1);return ret("tag","tag")}stream.eatSpace();if(/[{<>.a-zA-Z\/]/.test(stream.peek())||
stream.eol())return ret("tag","tag");return ret("string","string")}else if(stream.eol()||(stream.peek()=="["||(stream.peek()=="#"||type=="tag"))){if(stream.current().substring(stream.current().length-1,stream.current().length)=="{")stream.backUp(1);else if(state.stack[state.stack.length-1]==="border-color"||(state.stack[state.stack.length-1]==="background-position"||state.stack[state.stack.length-1]==="font-family"))return ret(null,stream.current());else if(type==="tag")return ret("tag","tag");else if((type===
":"||type==="unit")&&state.stack[state.stack.length-1]==="rule")return ret(null,stream.current());else if(state.stack[state.stack.length-1]==="rule"&&type==="tag")return ret("string",stream.current());else if(state.stack[state.stack.length-1]===";"&&type===":")return ret(null,stream.current());else if(stream.peek()==="#"&&(type!==undefined&&type.match(/\+|,|tag|select\-op|}|{|;/g)===null))return ret("string",stream.current());else if(type==="variable")return ret(null,stream.current());else if(state.stack[state.stack.length-
1]==="{"&&type==="comment")return ret("variable",stream.current());else if(state.stack.length===0&&(type===";"||type==="comment"))return ret("tag",stream.current());else if((state.stack[state.stack.length-1]==="{"||type===";")&&state.stack[state.stack.length-1]!=="@media{")return ret("variable",stream.current());else if(state.stack[state.stack.length-2]==="{"&&state.stack[state.stack.length-1]===";")return ret("variable",stream.current());return ret("tag","tag")}else if(type=="compare"||(type=="a"||
type=="("))return ret("string","string");else if(type=="|"||(stream.current()=="-"||type=="[")){if(type=="|"&&stream.peek().match(/\]|=|\~/)!==null)return ret("number",stream.current());else if(type=="|")return ret("tag","tag");else if(type=="["){stream.eatWhile(/\w\-/);return ret("number",stream.current())}return ret(null,ch)}else if(stream.peek()==":"||stream.eatSpace()&&stream.peek()==":"){stream.next();var t_v=stream.peek()==":"?true:false;if(!t_v){var old_pos=stream.pos;var sc=stream.current().length;
stream.eatWhile(/[a-z\\\-]/);var new_pos=stream.pos;if(stream.current().substring(sc-1).match(selectors)!=null){stream.backUp(new_pos-(old_pos-1));return ret("tag","tag")}else stream.backUp(new_pos-(old_pos-1))}else stream.backUp(1);if(t_v)return ret("tag","tag");else return ret("variable","variable")}else if(state.stack[state.stack.length-1]==="font-family"||(state.stack[state.stack.length-1]==="background-position"||state.stack[state.stack.length-1]==="border-color"))return ret(null,null);else{if(state.stack[state.stack.length-
1]===null&&type===":")return ret(null,stream.current());else if(/\^|\$/.test(stream.current())&&stream.peek().match(/\~|=/)!==null)return ret("string","string");else if(type==="unit"&&state.stack[state.stack.length-1]==="rule")return ret(null,"unit");else if(type==="unit"&&state.stack[state.stack.length-1]===";")return ret(null,"unit");else if(type===")"&&state.stack[state.stack.length-1]==="rule")return ret(null,"unit");else if(type.match("@")!==null&&state.stack[state.stack.length-1]==="rule")return ret(null,
"unit");else if((type===";"||(type==="}"||type===","))&&state.stack[state.stack.length-1]===";")return ret("tag",stream.current());else if(type===";"&&(stream.peek()!==undefined&&stream.peek().match(/{|./)===null)||type===";"&&(stream.eatSpace()&&stream.peek().match(/{|./)===null))return ret("variable",stream.current());else if(type==="@media"&&state.stack[state.stack.length-1]==="@media"||type==="@namespace")return ret("tag",stream.current());else if(type==="{"&&(state.stack[state.stack.length-1]===
";"&&stream.peek()==="{"))return ret("tag","tag");else if((type==="{"||type===":")&&state.stack[state.stack.length-1]===";")return ret(null,stream.current());else if(state.stack[state.stack.length-1]==="{"&&(stream.eatSpace()&&stream.peek().match(/.|#/)===null)||(type==="select-op"||state.stack[state.stack.length-1]==="rule"&&type===","))return ret("tag","tag");else if(type==="variable"&&state.stack[state.stack.length-1]==="rule")return ret("tag","tag");else if(stream.eatSpace()&&stream.peek()===
"{"||(stream.eol()||stream.peek()==="{"))return ret("tag","tag");else if(type===")"&&(stream.current()=="and"||stream.current()=="and "))return ret("variable","variable");else if(type===")"&&(stream.current()=="when"||stream.current()=="when "))return ret("variable","variable");else if(type===")"||(type==="comment"||type==="{"))return ret("tag","tag");else if(stream.sol())return ret("tag","tag");else if(stream.eatSpace()&&stream.peek()==="#"||stream.peek()==="#")return ret("tag","tag");else if(state.stack.length===
0)return ret("tag","tag");else if(type===";"&&(stream.peek()!==undefined&&stream.peek().match(/^[.|\#]/g)!==null))return ret("tag","tag");else if(type===":"){stream.eatSpace();return ret(null,stream.current())}else if(stream.current()==="and "||stream.current()==="and")return ret("variable",stream.current());else if(type===";"&&state.stack[state.stack.length-1]==="{")return ret("variable",stream.current());else if(state.stack[state.stack.length-1]==="rule")return ret(null,stream.current());return ret("tag",
stream.current())}}}function tokenSComment(stream,state){stream.skipToEnd();state.tokenize=tokenBase;return ret("comment","comment")}function tokenCComment(stream,state){var maybeEnd=false,ch;while((ch=stream.next())!=null){if(maybeEnd&&ch=="/"){state.tokenize=tokenBase;break}maybeEnd=ch=="*"}return ret("comment","comment")}function tokenSGMLComment(stream,state){var dashes=0,ch;while((ch=stream.next())!=null){if(dashes>=2&&ch=="\x3e"){state.tokenize=tokenBase;break}dashes=ch=="-"?dashes+1:0}return ret("comment",
"comment")}function tokenString(quote){return function(stream,state){var escaped=false,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped)break;escaped=!escaped&&ch=="\\"}if(!escaped)state.tokenize=tokenBase;return ret("string","string")}}return{startState:function(base){return{tokenize:tokenBase,baseIndent:base||0,stack:[]}},token:function(stream,state){if(stream.eatSpace())return null;var style=state.tokenize(stream,state);var context=state.stack[state.stack.length-1];if(type=="hash"&&context==
"rule")style="atom";else if(style=="variable")if(context=="rule")style=null;else if(!context||context=="@media{")style=stream.current()=="when"?"variable":/[\s,|\s\)|\s]/.test(stream.peek())?"tag":type;if(context=="rule"&&/^[\{\};]$/.test(type))state.stack.pop();if(type=="{")if(context=="@media")state.stack[state.stack.length-1]="@media{";else state.stack.push("{");else if(type=="}")state.stack.pop();else if(type=="@media")state.stack.push("@media");else if(stream.current()==="font-family")state.stack[state.stack.length-
1]="font-family";else if(stream.current()==="background-position")state.stack[state.stack.length-1]="background-position";else if(stream.current()==="border-color")state.stack[state.stack.length-1]="border-color";else if(context=="{"&&(type!="comment"&&type!=="tag"))state.stack.push("rule");else if(stream.peek()===":"&&stream.current().match(/@|#/)===null)style=type;if(type===";"&&(state.stack[state.stack.length-1]=="font-family"||(state.stack[state.stack.length-1]=="background-position"||state.stack[state.stack.length-
1]=="border-color")))state.stack[state.stack.length-1]=stream.current();else if(type==="tag"&&(stream.peek()===")"&&stream.current().match(/\:/)===null)){type=null;style=null}else if(type==="variable"&&stream.peek()===")"||type==="variable"&&(stream.eatSpace()&&stream.peek()===")"))return ret(null,stream.current());return style},indent:function(state,textAfter){var n=state.stack.length;if(/^\}/.test(textAfter))n-=state.stack[state.stack.length-1]==="rule"?2:1;else if(state.stack[state.stack.length-
2]==="{")n-=state.stack[state.stack.length-1]==="rule"?1:0;return state.baseIndent+n*indentUnit},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});CodeMirror.defineMIME("text/x-less","less");if(!CodeMirror.mimeModes.hasOwnProperty("text/css"))CodeMirror.defineMIME("text/css","less");
(function(){var ie_lt8=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var Pos=CodeMirror.Pos;var matching={"(":")\x3e",")":"(\x3c","[":"]\x3e","]":"[\x3c","{":"}\x3e","}":"{\x3c"};function findMatchingBracket(cm,where,strict){var state=cm.state.matchBrackets;var maxScanLen=state&&state.maxScanLineLength||1E4;var cur=where||cm.getCursor(),line=cm.getLineHandle(cur.line),pos=cur.ch-1;var match=pos>=0&&matching[line.text.charAt(pos)]||matching[line.text.charAt(++pos)];
if(!match)return null;var forward=match.charAt(1)=="\x3e",d=forward?1:-1;if(strict&&forward!=(pos==cur.ch))return null;var style=cm.getTokenTypeAt(Pos(cur.line,pos+1));var stack=[line.text.charAt(pos)],re=/[(){}[\]]/;function scan(line,lineNo,start){if(!line.text)return;var pos=forward?0:line.text.length-1,end=forward?line.text.length:-1;if(line.text.length>maxScanLen)return null;if(start!=null)pos=start+d;for(;pos!=end;pos+=d){var ch=line.text.charAt(pos);if(re.test(ch)&&cm.getTokenTypeAt(Pos(lineNo,
pos+1))==style){var match=matching[ch];if(match.charAt(1)=="\x3e"==forward)stack.push(ch);else if(stack.pop()!=match.charAt(0))return{pos:pos,match:false};else if(!stack.length)return{pos:pos,match:true}}}}for(var i=cur.line,found,e=forward?Math.min(i+100,cm.lineCount()):Math.max(-1,i-100);i!=e;i+=d){if(i==cur.line)found=scan(line,i,pos);else found=scan(cm.getLineHandle(i),i);if(found)break}return{from:Pos(cur.line,pos),to:found&&Pos(i,found.pos),match:found&&found.match,forward:forward}}function matchBrackets(cm,
autoclear){var maxHighlightLen=cm.state.matchBrackets.maxHighlightLineLength||1E3;var found=findMatchingBracket(cm);if(!found||(cm.getLine(found.from.line).length>maxHighlightLen||found.to&&cm.getLine(found.to.line).length>maxHighlightLen))return;var style=found.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var one=cm.markText(found.from,Pos(found.from.line,found.from.ch+1),{className:style});var two=found.to&&cm.markText(found.to,Pos(found.to.line,found.to.ch+1),{className:style});
if(ie_lt8&&cm.state.focused)cm.display.input.focus();var clear=function(){cm.operation(function(){one.clear();two&&two.clear()})};if(autoclear)setTimeout(clear,800);else return clear}var currentlyHighlighted=null;function doMatchBrackets(cm){cm.operation(function(){if(currentlyHighlighted){currentlyHighlighted();currentlyHighlighted=null}if(!cm.somethingSelected())currentlyHighlighted=matchBrackets(cm,false)})}CodeMirror.defineOption("matchBrackets",false,function(cm,val,old){if(old&&old!=CodeMirror.Init)cm.off("cursorActivity",
doMatchBrackets);if(val){cm.state.matchBrackets=typeof val=="object"?val:{};cm.on("cursorActivity",doMatchBrackets)}});CodeMirror.defineExtension("matchBrackets",function(){matchBrackets(this,true)});CodeMirror.defineExtension("findMatchingBracket",function(pos,strict){return findMatchingBracket(this,pos,strict)})})();
(function(){function getHints(cm,callback,options){var cur=cm.getCursor(null),token=cm.getTokenAt(cur);var url;if(options.contextClassifierQualifiedName!==undefined&&options.contextClassifierQualifiedName!==null)url="/"+tumlModelName+"/oclCodeInsight?query\x3d"+cm.getValue()+"\x26contextClassifierQualifiedName\x3d"+options.contextClassifierQualifiedName;else url="/"+tumlModelName+"/oclCodeInsight?query\x3d"+cm.getValue();$.ajax({url:url,type:"GET",dataType:"json",contentType:"application/json",success:function(result){var end=
0;if(token.string==="."||(token.string==="-\x3e"||token.string===":"))end=token.string.length;callback({list:result,from:CodeMirror.Pos(cur.line,token.start+end),to:CodeMirror.Pos(cur.line,token.end)})},error:function(jqXHR,textStatus,errorThrown){$("#serverErrorMsg").addClass("server-error-msg").html(jqXHR.responseText)}})}CodeMirror.registerHelper("hint","ocl",getHints)})();
(function(){CodeMirror.showHint=function(cm,getHints,options){if(cm.somethingSelected())return;if(getHints==null)getHints=cm.getHelper(cm.getCursor(),"hint");if(getHints==null)return;if(cm.state.completionActive)cm.state.completionActive.close();var completion=cm.state.completionActive=new Completion(cm,getHints,options||{});CodeMirror.signal(cm,"startCompletion",cm);if(completion.options.async)getHints(cm,function(hints){completion.showHints(hints)},completion.options);else return completion.showHints(getHints(cm,
completion.options))};function Completion(cm,getHints,options){this.cm=cm;this.getHints=getHints;this.options=options;this.widget=this.onClose=null}Completion.prototype={close:function(){if(!this.active())return;this.cm.state.completionActive=null;if(this.widget)this.widget.close();if(this.onClose)this.onClose();CodeMirror.signal(this.cm,"endCompletion",this.cm)},active:function(){return this.cm.state.completionActive==this},pick:function(data,i){var completion=data.list[i];if(completion.hint)completion.hint(this.cm,
data,completion);else this.cm.replaceRange(getText(completion),data.from,data.to);this.close()},showHints:function(data){if(!data||(!data.list.length||!this.active()))return this.close();if(this.options.completeSingle!=false&&data.list.length==1)this.pick(data,0);else this.showWidget(data)},showWidget:function(data){this.widget=new Widget(this,data);CodeMirror.signal(data,"shown");var debounce=null,completion=this,finished;var closeOn=this.options.closeCharacters||/[\s()\[\]{};:>,]/;var startPos=
this.cm.getCursor(),startLen=this.cm.getLine(startPos.line).length;function done(){if(finished)return;finished=true;completion.close();completion.cm.off("cursorActivity",activity);if(data)CodeMirror.signal(data,"close")}function update(){if(finished)return;CodeMirror.signal(data,"update");if(completion.options.async)completion.getHints(completion.cm,finishUpdate,completion.options);else finishUpdate(completion.getHints(completion.cm,completion.options))}function finishUpdate(data_){data=data_;if(finished)return;
if(!data||!data.list.length)return done();completion.widget=new Widget(completion,data)}function activity(){clearTimeout(debounce);var pos=completion.cm.getCursor(),line=completion.cm.getLine(pos.line);if(pos.line!=startPos.line||(line.length-pos.ch!=startLen-startPos.ch||(pos.ch<startPos.ch||(completion.cm.somethingSelected()||pos.ch&&closeOn.test(line.charAt(pos.ch-1))))))completion.close();else{debounce=setTimeout(update,170);if(completion.widget)completion.widget.close()}}this.cm.on("cursorActivity",
activity);this.onClose=done}};function getText(completion){if(typeof completion=="string")return completion;else return completion.text}function buildKeyMap(options,handle){var baseMap={Up:function(){handle.moveFocus(-1)},Down:function(){handle.moveFocus(1)},PageUp:function(){handle.moveFocus(-handle.menuSize()+1,true)},PageDown:function(){handle.moveFocus(handle.menuSize()-1,true)},Home:function(){handle.setFocus(0)},End:function(){handle.setFocus(handle.length-1)},Enter:handle.pick,Tab:handle.pick,
Esc:handle.close};var ourMap=options.customKeys?{}:baseMap;function addBinding(key,val){var bound;if(typeof val!="string")bound=function(cm){return val(cm,handle)};else if(baseMap.hasOwnProperty(val))bound=baseMap[val];else bound=val;ourMap[key]=bound}if(options.customKeys)for(var key in options.customKeys)if(options.customKeys.hasOwnProperty(key))addBinding(key,options.customKeys[key]);if(options.extraKeys)for(var key in options.extraKeys)if(options.extraKeys.hasOwnProperty(key))addBinding(key,options.extraKeys[key]);
return ourMap}function Widget(completion,data){this.completion=completion;this.data=data;var widget=this,cm=completion.cm,options=completion.options;var hints=this.hints=document.createElement("ul");hints.className="CodeMirror-hints";this.selectedHint=0;var completions=data.list;for(var i=0;i<completions.length;++i){var elt=hints.appendChild(document.createElement("li")),cur=completions[i];var className="CodeMirror-hint"+(i?"":" CodeMirror-hint-active");if(cur.className!=null)className=cur.className+
" "+className;elt.className=className;if(cur.render)cur.render(elt,data,cur);else elt.appendChild(document.createTextNode(cur.displayText||getText(cur)));elt.hintId=i}var pos=cm.cursorCoords(options.alignWithWord!==false?data.from:null);var left=pos.left,top=pos.bottom,below=true;hints.style.left=left+"px";hints.style.top=top+"px";var winW=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth);var winH=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);
(options.container||document.body).appendChild(hints);var box=hints.getBoundingClientRect();var overlapX=box.right-winW,overlapY=box.bottom-winH;if(overlapX>0){if(box.right-box.left>winW){hints.style.width=winW-5+"px";overlapX-=box.right-box.left-winW}hints.style.left=(left=pos.left-overlapX)+"px"}if(overlapY>0){var height=box.bottom-box.top;if(box.top-(pos.bottom-pos.top)-height>0){overlapY=height+(pos.bottom-pos.top);below=false}else if(height>winH){hints.style.height=winH-5+"px";overlapY-=height-
winH}hints.style.top=(top=pos.bottom-overlapY)+"px"}cm.addKeyMap(this.keyMap=buildKeyMap(options,{moveFocus:function(n,avoidWrap){widget.changeActive(widget.selectedHint+n,avoidWrap)},setFocus:function(n){widget.changeActive(n)},menuSize:function(){return widget.screenAmount()},length:completions.length,close:function(){completion.close()},pick:function(){widget.pick()}}));if(options.closeOnUnfocus!==false){var closingOnBlur;cm.on("blur",this.onBlur=function(){closingOnBlur=setTimeout(function(){completion.close()},
100)});cm.on("focus",this.onFocus=function(){clearTimeout(closingOnBlur)})}var startScroll=cm.getScrollInfo();cm.on("scroll",this.onScroll=function(){var curScroll=cm.getScrollInfo(),editor=cm.getWrapperElement().getBoundingClientRect();var newTop=top+startScroll.top-curScroll.top;var point=newTop-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(!below)point+=hints.offsetHeight;if(point<=editor.top||point>=editor.bottom)return completion.close();hints.style.top=newTop+
"px";hints.style.left=left+startScroll.left-curScroll.left+"px"});CodeMirror.on(hints,"dblclick",function(e){var t=e.target||e.srcElement;if(t.hintId!=null){widget.changeActive(t.hintId);widget.pick()}});CodeMirror.on(hints,"click",function(e){var t=e.target||e.srcElement;if(t.hintId!=null)widget.changeActive(t.hintId)});CodeMirror.on(hints,"mousedown",function(){setTimeout(function(){cm.focus()},20)});CodeMirror.signal(data,"select",completions[0],hints.firstChild);return true}Widget.prototype={close:function(){if(this.completion.widget!=
this)return;this.completion.widget=null;this.hints.parentNode.removeChild(this.hints);this.completion.cm.removeKeyMap(this.keyMap);var cm=this.completion.cm;if(this.completion.options.closeOnUnfocus!==false){cm.off("blur",this.onBlur);cm.off("focus",this.onFocus)}cm.off("scroll",this.onScroll)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(i,avoidWrap){if(i>=this.data.list.length)i=avoidWrap?this.data.list.length-1:0;else if(i<0)i=avoidWrap?0:this.data.list.length-
1;if(this.selectedHint==i)return;var node=this.hints.childNodes[this.selectedHint];node.className=node.className.replace(" CodeMirror-hint-active","");node=this.hints.childNodes[this.selectedHint=i];node.className+=" CodeMirror-hint-active";if(node.offsetTop<this.hints.scrollTop)this.hints.scrollTop=node.offsetTop-3;else if(node.offsetTop+node.offsetHeight>this.hints.scrollTop+this.hints.clientHeight)this.hints.scrollTop=node.offsetTop+node.offsetHeight-this.hints.clientHeight+3;CodeMirror.signal(this.data,
"select",this.data.list[this.selectedHint],node)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}}})();
(function($){$.extend(true,window,{"Slick":{"CellRangeDecorator":CellRangeDecorator}});function CellRangeDecorator(grid,options){var _elem;var _defaults={selectionCssClass:"slick-range-decorator",selectionCss:{"zIndex":"9999","border":"2px dashed red"}};options=$.extend(true,{},_defaults,options);function show(range){if(!_elem)_elem=$("\x3cdiv\x3e\x3c/div\x3e",{css:options.selectionCss}).addClass(options.selectionCssClass).css("position","absolute").appendTo(grid.getCanvasNode());var from=grid.getCellNodeBox(range.fromRow,
range.fromCell);var to=grid.getCellNodeBox(range.toRow,range.toCell);_elem.css({top:from.top-1,left:from.left-1,height:to.bottom-from.top-2,width:to.right-from.left-2});return _elem}function hide(){if(_elem){_elem.remove();_elem=null}}$.extend(this,{"show":show,"hide":hide})}})(jQuery);
(function($){$.extend(true,window,{"Slick":{"CellRangeSelector":CellRangeSelector}});function CellRangeSelector(options){var _grid;var _canvas;var _dragging;var _decorator;var _self=this;var _handler=new Slick.EventHandler;var _defaults={selectionCss:{"border":"2px dashed blue"}};function init(grid){options=$.extend(true,{},_defaults,options);_decorator=new Slick.CellRangeDecorator(grid,options);_grid=grid;_canvas=_grid.getCanvasNode();_handler.subscribe(_grid.onDragInit,handleDragInit).subscribe(_grid.onDragStart,
handleDragStart).subscribe(_grid.onDrag,handleDrag).subscribe(_grid.onDragEnd,handleDragEnd)}function destroy(){_handler.unsubscribeAll()}function handleDragInit(e,dd){e.stopImmediatePropagation()}function handleDragStart(e,dd){var cell=_grid.getCellFromEvent(e);if(_self.onBeforeCellRangeSelected.notify(cell)!==false)if(_grid.canCellBeSelected(cell.row,cell.cell)){_dragging=true;e.stopImmediatePropagation()}if(!_dragging)return;_grid.focus();var start=_grid.getCellFromPoint(dd.startX-$(_canvas).offset().left,
dd.startY-$(_canvas).offset().top);dd.range={start:start,end:{}};return _decorator.show(new Slick.Range(start.row,start.cell))}function handleDrag(e,dd){if(!_dragging)return;e.stopImmediatePropagation();var end=_grid.getCellFromPoint(e.pageX-$(_canvas).offset().left,e.pageY-$(_canvas).offset().top);if(!_grid.canCellBeSelected(end.row,end.cell))return;dd.range.end=end;_decorator.show(new Slick.Range(dd.range.start.row,dd.range.start.cell,end.row,end.cell))}function handleDragEnd(e,dd){if(!_dragging)return;
_dragging=false;e.stopImmediatePropagation();_decorator.hide();_self.onCellRangeSelected.notify({range:new Slick.Range(dd.range.start.row,dd.range.start.cell,dd.range.end.row,dd.range.end.cell)})}$.extend(this,{"init":init,"destroy":destroy,"onBeforeCellRangeSelected":new Slick.Event,"onCellRangeSelected":new Slick.Event})}})(jQuery);
(function($){$.extend(true,window,{"Slick":{"CellSelectionModel":CellSelectionModel}});function CellSelectionModel(options){var _grid;var _canvas;var _ranges=[];var _self=this;var _selector=new Slick.CellRangeSelector({"selectionCss":{"border":"2px solid black"}});var _options;var _defaults={selectActiveCell:true};function init(grid){_options=$.extend(true,{},_defaults,options);_grid=grid;_canvas=_grid.getCanvasNode();_grid.onActiveCellChanged.subscribe(handleActiveCellChange);_grid.onKeyDown.subscribe(handleKeyDown);
grid.registerPlugin(_selector);_selector.onCellRangeSelected.subscribe(handleCellRangeSelected);_selector.onBeforeCellRangeSelected.subscribe(handleBeforeCellRangeSelected)}function destroy(){_grid.onActiveCellChanged.unsubscribe(handleActiveCellChange);_grid.onKeyDown.unsubscribe(handleKeyDown);_selector.onCellRangeSelected.unsubscribe(handleCellRangeSelected);_selector.onBeforeCellRangeSelected.unsubscribe(handleBeforeCellRangeSelected);_grid.unregisterPlugin(_selector)}function removeInvalidRanges(ranges){var result=
[];for(var i=0;i<ranges.length;i++){var r=ranges[i];if(_grid.canCellBeSelected(r.fromRow,r.fromCell)&&_grid.canCellBeSelected(r.toRow,r.toCell))result.push(r)}return result}function setSelectedRanges(ranges){_ranges=removeInvalidRanges(ranges);_self.onSelectedRangesChanged.notify(_ranges)}function getSelectedRanges(){return _ranges}function handleBeforeCellRangeSelected(e,args){if(_grid.getEditorLock().isActive()){e.stopPropagation();return false}}function handleCellRangeSelected(e,args){setSelectedRanges([args.range])}
function handleActiveCellChange(e,args){if(_options.selectActiveCell&&(args.row!=null&&args.cell!=null))setSelectedRanges([new Slick.Range(args.row,args.cell)])}function handleKeyDown(e){var ranges,last;var active=_grid.getActiveCell();if(active&&(e.shiftKey&&(!e.ctrlKey&&(!e.altKey&&(e.which==37||(e.which==39||(e.which==38||e.which==40))))))){ranges=getSelectedRanges();if(!ranges.length)ranges.push(new Slick.Range(active.row,active.cell));last=ranges.pop();if(!last.contains(active.row,active.cell))last=
new Slick.Range(active.row,active.cell);var dRow=last.toRow-last.fromRow,dCell=last.toCell-last.fromCell,dirRow=active.row==last.fromRow?1:-1,dirCell=active.cell==last.fromCell?1:-1;if(e.which==37)dCell-=dirCell;else if(e.which==39)dCell+=dirCell;else if(e.which==38)dRow-=dirRow;else if(e.which==40)dRow+=dirRow;var new_last=new Slick.Range(active.row,active.cell,active.row+dirRow*dRow,active.cell+dirCell*dCell);if(removeInvalidRanges([new_last]).length){ranges.push(new_last);var viewRow=dirRow>0?
new_last.toRow:new_last.fromRow;var viewCell=dirCell>0?new_last.toCell:new_last.fromCell;_grid.scrollRowIntoView(viewRow);_grid.scrollCellIntoView(viewRow,viewCell)}else ranges.push(last);setSelectedRanges(ranges);e.preventDefault();e.stopPropagation()}}$.extend(this,{"getSelectedRanges":getSelectedRanges,"setSelectedRanges":setSelectedRanges,"init":init,"destroy":destroy,"onSelectedRangesChanged":new Slick.Event})}})(jQuery);
(function($){function SlickColumnPicker(columns,grid,options){var $menu;var columnCheckboxes;var defaults={fadeSpeed:250};function init(){grid.onHeaderContextMenu.subscribe(handleHeaderContextMenu);grid.onColumnsReordered.subscribe(updateColumnOrder);options=$.extend({},defaults,options);$menu=$("\x3cspan class\x3d'slick-columnpicker' style\x3d'display:none;position:absolute;z-index:20;' /\x3e").appendTo(document.body);$menu.bind("mouseleave",function(e){$(this).fadeOut(options.fadeSpeed)});$menu.bind("click",
updateColumn)}function handleHeaderContextMenu(e,args){e.preventDefault();$menu.empty();updateColumnOrder();columnCheckboxes=[];var $li,$input;for(var i=0;i<columns.length;i++){$li=$("\x3cli /\x3e").appendTo($menu);$input=$("\x3cinput type\x3d'checkbox' /\x3e").data("column-id",columns[i].id);columnCheckboxes.push($input);if(grid.getColumnIndex(columns[i].id)!=null)$input.attr("checked","checked");$("\x3clabel /\x3e").text(columns[i].name).prepend($input).appendTo($li)}$("\x3chr/\x3e").appendTo($menu);
$li=$("\x3cli /\x3e").appendTo($menu);$input=$("\x3cinput type\x3d'checkbox' /\x3e").data("option","autoresize");$("\x3clabel /\x3e").text("Force fit columns").prepend($input).appendTo($li);if(grid.getOptions().forceFitColumns)$input.attr("checked","checked");$li=$("\x3cli /\x3e").appendTo($menu);$input=$("\x3cinput type\x3d'checkbox' /\x3e").data("option","syncresize");$("\x3clabel /\x3e").text("Synchronous resize").prepend($input).appendTo($li);if(grid.getOptions().syncColumnCellResize)$input.attr("checked",
"checked");$menu.css("top",e.pageY-10).css("left",e.pageX-10).fadeIn(options.fadeSpeed)}function updateColumnOrder(){var current=grid.getColumns().slice(0);var ordered=new Array(columns.length);for(var i=0;i<ordered.length;i++)if(grid.getColumnIndex(columns[i].id)===undefined)ordered[i]=columns[i];else ordered[i]=current.shift();columns=ordered}function updateColumn(e){if($(e.target).data("option")=="autoresize"){if(e.target.checked){grid.setOptions({forceFitColumns:true});grid.autosizeColumns()}else grid.setOptions({forceFitColumns:false});
return}if($(e.target).data("option")=="syncresize"){if(e.target.checked)grid.setOptions({syncColumnCellResize:true});else grid.setOptions({syncColumnCellResize:false});return}if($(e.target).is(":checkbox")){var visibleColumns=[];$.each(columnCheckboxes,function(i,e){if($(this).is(":checked"))visibleColumns.push(columns[i])});if(!visibleColumns.length){$(e.target).attr("checked","checked");return}grid.setColumns(visibleColumns)}}function getAllColumns(){return columns}init();return{"getAllColumns":getAllColumns}}
$.extend(true,window,{Slick:{Controls:{ColumnPicker:SlickColumnPicker}}})})(jQuery);
(function($){$.extend(true,window,{"Slick":{"Event":Event,"EventData":EventData,"EventHandler":EventHandler,"Range":Range,"NonDataRow":NonDataItem,"Group":Group,"GroupTotals":GroupTotals,"EditorLock":EditorLock,"GlobalEditorLock":new EditorLock}});function EventData(){var isPropagationStopped=false;var isImmediatePropagationStopped=false;this.stopPropagation=function(){isPropagationStopped=true};this.isPropagationStopped=function(){return isPropagationStopped};this.stopImmediatePropagation=function(){isImmediatePropagationStopped=
true};this.isImmediatePropagationStopped=function(){return isImmediatePropagationStopped}}function Event(){var handlers=[];this.subscribe=function(fn){handlers.push(fn)};this.unsubscribe=function(fn){for(var i=handlers.length-1;i>=0;i--)if(handlers[i]===fn)handlers.splice(i,1)};this.notify=function(args,e,scope){e=e||new EventData;scope=scope||this;var returnValue;for(var i=0;i<handlers.length&&!(e.isPropagationStopped()||e.isImmediatePropagationStopped());i++)returnValue=handlers[i].call(scope,e,
args);return returnValue}}function EventHandler(){var handlers=[];this.subscribe=function(event,handler){handlers.push({event:event,handler:handler});event.subscribe(handler);return this};this.unsubscribe=function(event,handler){var i=handlers.length;while(i--)if(handlers[i].event===event&&handlers[i].handler===handler){handlers.splice(i,1);event.unsubscribe(handler);return}return this};this.unsubscribeAll=function(){var i=handlers.length;while(i--)handlers[i].event.unsubscribe(handlers[i].handler);
handlers=[];return this}}function Range(fromRow,fromCell,toRow,toCell){if(toRow===undefined&&toCell===undefined){toRow=fromRow;toCell=fromCell}this.fromRow=Math.min(fromRow,toRow);this.fromCell=Math.min(fromCell,toCell);this.toRow=Math.max(fromRow,toRow);this.toCell=Math.max(fromCell,toCell);this.isSingleRow=function(){return this.fromRow==this.toRow};this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell};this.contains=function(row,cell){return row>=this.fromRow&&
(row<=this.toRow&&(cell>=this.fromCell&&cell<=this.toCell))};this.toString=function(){if(this.isSingleCell())return"("+this.fromRow+":"+this.fromCell+")";else return"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}function NonDataItem(){this.__nonDataRow=true}function Group(){this.__group=true;this.level=0;this.count=0;this.value=null;this.title=null;this.collapsed=false;this.totals=null;this.rows=[];this.groups=null;this.groupingKey=null}Group.prototype=new NonDataItem;Group.prototype.equals=
function(group){return this.value===group.value&&(this.count===group.count&&(this.collapsed===group.collapsed&&this.title===group.title))};function GroupTotals(){this.__groupTotals=true;this.group=null}GroupTotals.prototype=new NonDataItem;function EditorLock(){var activeEditController=null;this.isActive=function(editController){return editController?activeEditController===editController:activeEditController!==null};this.activate=function(editController){if(editController===activeEditController)return;
if(activeEditController!==null)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!editController.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!editController.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";activeEditController=editController};this.deactivate=function(editController){if(activeEditController!==editController)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";
activeEditController=null};this.commitCurrentEdit=function(){return activeEditController?activeEditController.commitCurrentEdit():true};this.cancelCurrentEdit=function cancelCurrentEdit(){return activeEditController?activeEditController.cancelCurrentEdit():true}}})(jQuery);
(function($){$.extend(true,window,{"Slick":{"Editors":{"Text":TextEditor,"Integer":IntegerEditor,"Date":DateEditor,"YesNoSelect":YesNoSelectEditor,"Checkbox":CheckboxEditor,"PercentComplete":PercentCompleteEditor,"LongText":LongTextEditor}}});function TextEditor(args){var $input;var defaultValue;var scope=this;this.init=function(){$input=$("\x3cINPUT type\x3dtext class\x3d'editor-text' /\x3e").appendTo(args.container).bind("keydown.nav",function(e){if(e.keyCode===$.ui.keyCode.LEFT||e.keyCode===$.ui.keyCode.RIGHT)e.stopImmediatePropagation()}).focus().select()};
this.destroy=function(){$input.remove()};this.focus=function(){$input.focus()};this.getValue=function(){return $input.val()};this.setValue=function(val){$input.val(val)};this.loadValue=function(item){defaultValue=item[args.column.field]||"";$input.val(defaultValue);$input[0].defaultValue=defaultValue;$input.select()};this.serializeValue=function(){return $input.val()};this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){return!($input.val()==""&&defaultValue==
null)&&$input.val()!=defaultValue};this.validate=function(){if(args.column.validator){var validationResults=args.column.validator($input.val());if(!validationResults.valid)return validationResults}return{valid:true,msg:null}};this.init()}function IntegerEditor(args){var $input;var defaultValue;this.init=function(){$input=$("\x3cINPUT type\x3dtext class\x3d'editor-text' /\x3e");$input.bind("keydown.nav",function(e){if(e.keyCode===$.ui.keyCode.LEFT||e.keyCode===$.ui.keyCode.RIGHT)e.stopImmediatePropagation()});
$input.appendTo(args.container);$input.focus().select()};this.destroy=function(){$input.remove()};this.focus=function(){$input.focus()};this.loadValue=function(item){defaultValue=item[args.column.field];$input.val(defaultValue);$input[0].defaultValue=defaultValue;$input.select()};this.serializeValue=function(){return parseInt($input.val(),10)||0};this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){return!($input.val()==""&&defaultValue==null)&&$input.val()!=
defaultValue};this.validate=function(){if(isNaN($input.val()))return{valid:false,msg:"Please enter a valid integer"};return{valid:true,msg:null}};this.init()}function DateEditor(args){var $input;var defaultValue;var scope=this;var calendarOpen=false;this.init=function(){$input=$("\x3cINPUT type\x3dtext class\x3d'editor-text' /\x3e");$input.appendTo(args.container);$input.focus().select();$input.datepicker({showOn:"button",buttonImageOnly:true,buttonImage:"../images/calendar.gif",beforeShow:function(){calendarOpen=
true},onClose:function(){calendarOpen=false}});$input.width($input.width()-18)};this.destroy=function(){$.datepicker.dpDiv.stop(true,true);$input.datepicker("hide");$input.datepicker("destroy");$input.remove()};this.show=function(){if(calendarOpen)$.datepicker.dpDiv.stop(true,true).show()};this.hide=function(){if(calendarOpen)$.datepicker.dpDiv.stop(true,true).hide()};this.position=function(position){if(!calendarOpen)return;$.datepicker.dpDiv.css("top",position.top+30).css("left",position.left)};
this.focus=function(){$input.focus()};this.loadValue=function(item){defaultValue=item[args.column.field];$input.val(defaultValue);$input[0].defaultValue=defaultValue;$input.select()};this.serializeValue=function(){return $input.val()};this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){return!($input.val()==""&&defaultValue==null)&&$input.val()!=defaultValue};this.validate=function(){return{valid:true,msg:null}};this.init()}function YesNoSelectEditor(args){var $select;
var defaultValue;var scope=this;this.init=function(){$select=$("\x3cSELECT tabIndex\x3d'0' class\x3d'editor-yesno'\x3e\x3cOPTION value\x3d'yes'\x3eYes\x3c/OPTION\x3e\x3cOPTION value\x3d'no'\x3eNo\x3c/OPTION\x3e\x3c/SELECT\x3e");$select.appendTo(args.container);$select.focus()};this.destroy=function(){$select.remove()};this.focus=function(){$select.focus()};this.loadValue=function(item){$select.val((defaultValue=item[args.column.field])?"yes":"no");$select.select()};this.serializeValue=function(){return $select.val()==
"yes"};this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){return $select.val()!=defaultValue};this.validate=function(){return{valid:true,msg:null}};this.init()}function CheckboxEditor(args){var $select;var defaultValue;var scope=this;this.init=function(){$select=$("\x3cINPUT type\x3dcheckbox value\x3d'true' class\x3d'editor-checkbox' hideFocus\x3e");$select.appendTo(args.container);$select.focus()};this.destroy=function(){$select.remove()};this.focus=
function(){$select.focus()};this.loadValue=function(item){defaultValue=!!item[args.column.field];if(defaultValue)$select.prop("checked",true);else $select.prop("checked",false)};this.serializeValue=function(){return $select.prop("checked")};this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){return this.serializeValue()!==defaultValue};this.validate=function(){return{valid:true,msg:null}};this.init()}function PercentCompleteEditor(args){var $input,$picker;
var defaultValue;var scope=this;this.init=function(){$input=$("\x3cINPUT type\x3dtext class\x3d'editor-percentcomplete' /\x3e");$input.width($(args.container).innerWidth()-25);$input.appendTo(args.container);$picker=$("\x3cdiv class\x3d'editor-percentcomplete-picker' /\x3e").appendTo(args.container);$picker.append("\x3cdiv class\x3d'editor-percentcomplete-helper'\x3e\x3cdiv class\x3d'editor-percentcomplete-wrapper'\x3e\x3cdiv class\x3d'editor-percentcomplete-slider' /\x3e\x3cdiv class\x3d'editor-percentcomplete-buttons' /\x3e\x3c/div\x3e\x3c/div\x3e");
$picker.find(".editor-percentcomplete-buttons").append("\x3cbutton val\x3d0\x3eNot started\x3c/button\x3e\x3cbr/\x3e\x3cbutton val\x3d50\x3eIn Progress\x3c/button\x3e\x3cbr/\x3e\x3cbutton val\x3d100\x3eComplete\x3c/button\x3e");$input.focus().select();$picker.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:defaultValue,slide:function(event,ui){$input.val(ui.value)}});$picker.find(".editor-percentcomplete-buttons button").bind("click",function(e){$input.val($(this).attr("val"));
$picker.find(".editor-percentcomplete-slider").slider("value",$(this).attr("val"))})};this.destroy=function(){$input.remove();$picker.remove()};this.focus=function(){$input.focus()};this.loadValue=function(item){$input.val(defaultValue=item[args.column.field]);$input.select()};this.serializeValue=function(){return parseInt($input.val(),10)||0};this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){return!($input.val()==""&&defaultValue==null)&&(parseInt($input.val(),
10)||0)!=defaultValue};this.validate=function(){if(isNaN(parseInt($input.val(),10)))return{valid:false,msg:"Please enter a valid positive number"};return{valid:true,msg:null}};this.init()}function LongTextEditor(args){var $input,$wrapper;var defaultValue;var scope=this;this.init=function(){var $container=$("body");$wrapper=$("\x3cDIV style\x3d'z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/\x3e").appendTo($container);
$input=$("\x3cTEXTAREA hidefocus rows\x3d5 style\x3d'backround:white;width:250px;height:80px;border:0;outline:0'\x3e").appendTo($wrapper);$("\x3cDIV style\x3d'text-align:right'\x3e\x3cBUTTON\x3eSave\x3c/BUTTON\x3e\x3cBUTTON\x3eCancel\x3c/BUTTON\x3e\x3c/DIV\x3e").appendTo($wrapper);$wrapper.find("button:first").bind("click",this.save);$wrapper.find("button:last").bind("click",this.cancel);$input.bind("keydown",this.handleKeyDown);scope.position(args.position);$input.focus().select()};this.handleKeyDown=
function(e){if(e.which==$.ui.keyCode.ENTER&&e.ctrlKey)scope.save();else if(e.which==$.ui.keyCode.ESCAPE){e.preventDefault();scope.cancel()}else if(e.which==$.ui.keyCode.TAB&&e.shiftKey){e.preventDefault();args.grid.navigatePrev()}else if(e.which==$.ui.keyCode.TAB){e.preventDefault();args.grid.navigateNext()}};this.save=function(){args.commitChanges()};this.cancel=function(){$input.val(defaultValue);args.cancelChanges()};this.hide=function(){$wrapper.hide()};this.show=function(){$wrapper.show()};this.position=
function(position){$wrapper.css("top",position.top-5).css("left",position.left-5)};this.destroy=function(){$wrapper.remove()};this.focus=function(){$input.focus()};this.loadValue=function(item){$input.val(defaultValue=item[args.column.field]);$input.select()};this.serializeValue=function(){return $input.val()};this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){return!($input.val()==""&&defaultValue==null)&&$input.val()!=defaultValue};this.validate=function(){return{valid:true,
msg:null}};this.init()}})(jQuery);
(function($){$.extend(true,window,{"Slick":{"Formatters":{"PercentComplete":PercentCompleteFormatter,"PercentCompleteBar":PercentCompleteBarFormatter,"YesNo":YesNoFormatter,"Checkmark":CheckmarkFormatter}}});function PercentCompleteFormatter(row,cell,value,columnDef,dataContext){if(value==null||value==="")return"-";else if(value<50)return"\x3cspan style\x3d'color:red;font-weight:bold;'\x3e"+value+"%\x3c/span\x3e";else return"\x3cspan style\x3d'color:green'\x3e"+value+"%\x3c/span\x3e"}function PercentCompleteBarFormatter(row,
cell,value,columnDef,dataContext){if(value==null||value==="")return"";var color;if(value<30)color="red";else if(value<70)color="silver";else color="green";return"\x3cspan class\x3d'percent-complete-bar' style\x3d'background:"+color+";width:"+value+"%'\x3e\x3c/span\x3e"}function YesNoFormatter(row,cell,value,columnDef,dataContext){return value?"Yes":"No"}function CheckmarkFormatter(row,cell,value,columnDef,dataContext){return value?"\x3cimg src\x3d'../images/tick.png'\x3e":""}})(jQuery);
if(typeof jQuery==="undefined")throw"SlickGrid requires jquery module to be loaded";if(!jQuery.fn.drag)throw"SlickGrid requires jquery.event.drag module to be loaded";if(typeof Slick==="undefined")throw"slick.core.js not loaded";
(function($){$.extend(true,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions;var maxSupportedCssHeight;function SlickGrid(container,data,columns,options){var defaults={explicitInitialization:false,rowHeight:25,defaultColumnWidth:80,enableAddRow:false,leaveSpaceForNewRows:false,editable:false,autoEdit:true,enableCellNavigation:true,enableColumnReorder:true,asyncEditorLoading:false,asyncEditorLoadDelay:100,forceFitColumns:false,enableAsyncPostRender:false,asyncPostRenderDelay:50,autoHeight:false,
editorLock:Slick.GlobalEditorLock,showHeaderRow:false,headerRowHeight:25,showTopPanel:false,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:true,enableTextSelectionOnCells:false,dataItemColumnValueExtractor:null,fullWidthRows:false,multiColumnSort:false,defaultFormatter:defaultFormatter,forceSyncScrolling:false};var columnDefaults={name:"",resizable:true,sortable:false,minWidth:30,rerenderOnResize:false,headerCssClass:null,
defaultSortAsc:true,focusable:true,selectable:true};var th;var h;var ph;var n;var cj;var page=0;var offset=0;var vScrollDir=1;var initialized=false;var $container;var uid="slickgrid_"+Math.round(1E6*Math.random());var self=this;var $focusSink,$focusSink2;var $headerScroller;var $headers;var $headerRow,$headerRowScroller,$headerRowSpacer;var $topPanelScroller;var $topPanel;var $viewport;var $canvas;var $style;var $boundAncestors;var stylesheet,columnCssRulesL,columnCssRulesR;var viewportH,viewportW;
var canvasWidth;var viewportHasHScroll,viewportHasVScroll;var headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0;var absoluteColumnMinWidth;var numberOfRows=0;var tabbingDirection=1;var activePosX;var activeRow,activeCell;var activeCellNode=null;var currentEditor=null;var serializedEditorValue;var editController;var rowsCache={};var renderedRows=0;var numVisibleRows;var prevScrollTop=0;var scrollTop=0;var lastRenderedScrollTop=0;var lastRenderedScrollLeft=0;var prevScrollLeft=
0;var scrollLeft=0;var selectionModel;var selectedRows=[];var plugins=[];var cellCssClasses={};var columnsById={};var sortColumns=[];var columnPosLeft=[];var columnPosRight=[];var h_editorLoader=null;var h_render=null;var h_postrender=null;var postProcessedRows={};var postProcessToRow=null;var postProcessFromRow=null;var counter_rows_rendered=0;var counter_rows_removed=0;function init(){$container=$(container);if($container.length<1)throw new Error("SlickGrid requires a valid container, "+container+
" does not exist in the DOM.");maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight();scrollbarDimensions=scrollbarDimensions||measureScrollbar();options=$.extend({},defaults,options);validateAndEnforceOptions();columnDefaults.width=options.defaultColumnWidth;columnsById={};for(var i=0;i<columns.length;i++){var m=columns[i]=$.extend({},columnDefaults,columns[i]);columnsById[m.id]=i;if(m.minWidth&&m.width<m.minWidth)m.width=m.minWidth;if(m.maxWidth&&m.width>m.maxWidth)m.width=m.maxWidth}if(options.enableColumnReorder&&
!$.fn.sortable)throw new Error("SlickGrid's 'enableColumnReorder \x3d true' option requires jquery-ui.sortable module to be loaded");editController={"commitCurrentEdit":commitCurrentEdit,"cancelCurrentEdit":cancelCurrentEdit};$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget");if(!/relative|absolute|fixed/.test($container.css("position")))$container.css("position","relative");$focusSink=$("\x3cdiv tabIndex\x3d'0' hideFocus style\x3d'position:fixed;width:0;height:0;top:0;left:0;outline:0;'\x3e\x3c/div\x3e").appendTo($container);
$headerScroller=$("\x3cdiv class\x3d'slick-header ui-state-default' style\x3d'overflow:hidden;position:relative;' /\x3e").appendTo($container);$headers=$("\x3cdiv class\x3d'slick-header-columns' style\x3d'left:-1000px' /\x3e").appendTo($headerScroller);$headers.width(getHeadersWidth());$headerRowScroller=$("\x3cdiv class\x3d'slick-headerrow ui-state-default' style\x3d'overflow:hidden;position:relative;' /\x3e").appendTo($container);$headerRow=$("\x3cdiv class\x3d'slick-headerrow-columns' /\x3e").appendTo($headerRowScroller);
$headerRowSpacer=$("\x3cdiv style\x3d'display:block;height:1px;position:absolute;top:0;left:0;'\x3e\x3c/div\x3e").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($headerRowScroller);$topPanelScroller=$("\x3cdiv class\x3d'slick-top-panel-scroller ui-state-default' style\x3d'overflow:hidden;position:relative;' /\x3e").appendTo($container);$topPanel=$("\x3cdiv class\x3d'slick-top-panel' style\x3d'width:10000px' /\x3e").appendTo($topPanelScroller);if(!options.showTopPanel)$topPanelScroller.hide();
if(!options.showHeaderRow)$headerRowScroller.hide();$viewport=$("\x3cdiv class\x3d'slick-viewport' style\x3d'width:100%;overflow:auto;outline:0;position:relative;;'\x3e").appendTo($container);$viewport.css("overflow-y",options.autoHeight?"hidden":"auto");$canvas=$("\x3cdiv class\x3d'grid-canvas' /\x3e").appendTo($viewport);$focusSink2=$focusSink.clone().appendTo($container);if(!options.explicitInitialization)finishInitialization()}function finishInitialization(){if(!initialized){initialized=true;
viewportW=parseFloat($.css($container[0],"width",true));measureCellPaddingAndBorder();disableSelection($headers);if(!options.enableTextSelectionOnCells)$viewport.bind("selectstart.ui",function(event){return $(event.target).is("input,textarea")});updateColumnCaches();createColumnHeaders();setupColumnSort();createCssRules();resizeCanvas();bindAncestorScrollEvents();$container.bind("resize.slickgrid",resizeCanvas);$viewport.bind("click",handleClick).bind("scroll",handleScroll);$headerScroller.bind("contextmenu",
handleHeaderContextMenu).bind("click",handleHeaderClick).delegate(".slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".slick-header-column","mouseleave",handleHeaderMouseLeave);$headerRowScroller.bind("scroll",handleHeaderRowScroll);$focusSink.add($focusSink2).bind("keydown",handleKeyDown);$canvas.bind("keydown",handleKeyDown).bind("click",handleClick).bind("dblclick",handleDblClick).bind("contextmenu",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",{distance:3},
handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".slick-cell","mouseenter",handleMouseEnter).delegate(".slick-cell","mouseleave",handleMouseLeave)}}function registerPlugin(plugin){plugins.unshift(plugin);plugin.init(self)}function unregisterPlugin(plugin){for(var i=plugins.length;i>=0;i--)if(plugins[i]===plugin){if(plugins[i].destroy)plugins[i].destroy();plugins.splice(i,1);break}}function setSelectionModel(model){if(selectionModel){selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);
if(selectionModel.destroy)selectionModel.destroy()}selectionModel=model;if(selectionModel){selectionModel.init(self);selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged)}}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var $c=$("\x3cdiv style\x3d'position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'\x3e\x3c/div\x3e").appendTo("body");var dim={width:$c.width()-$c[0].clientWidth,
height:$c.height()-$c[0].clientHeight};$c.remove();return dim}function getHeadersWidth(){var headersWidth=0;for(var i=0,ii=columns.length;i<ii;i++){var width=columns[i].width;headersWidth+=width}headersWidth+=scrollbarDimensions.width;return Math.max(headersWidth,viewportW)+1E3}function getCanvasWidth(){var availableWidth=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;var rowWidth=0;var i=columns.length;while(i--)rowWidth+=columns[i].width;return options.fullWidthRows?Math.max(rowWidth,
availableWidth):rowWidth}function updateCanvasWidth(forceColumnWidthsUpdate){var oldCanvasWidth=canvasWidth;canvasWidth=getCanvasWidth();if(canvasWidth!=oldCanvasWidth){$canvas.width(canvasWidth);$headerRow.width(canvasWidth);$headers.width(getHeadersWidth());viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width}$headerRowSpacer.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0));if(canvasWidth!=oldCanvasWidth||forceColumnWidthsUpdate)applyColumnWidths()}function disableSelection($target){if($target&&
$target.jquery)$target.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function getMaxSupportedCssHeight(){var supportedHeight=1E6;var testUpTo=navigator.userAgent.toLowerCase().match(/firefox/)?6E6:1E9;var div=$("\x3cdiv style\x3d'display:none' /\x3e").appendTo(document.body);while(true){var test=supportedHeight*2;div.css("height",test);if(test>testUpTo||div.height()!==test)break;else supportedHeight=test}div.remove();return supportedHeight}function bindAncestorScrollEvents(){var elem=
$canvas[0];while((elem=elem.parentNode)!=document.body&&elem!=null)if(elem==$viewport[0]||(elem.scrollWidth!=elem.clientWidth||elem.scrollHeight!=elem.clientHeight)){var $elem=$(elem);if(!$boundAncestors)$boundAncestors=$elem;else $boundAncestors=$boundAncestors.add($elem);$elem.bind("scroll."+uid,handleActiveCellPositionChange)}}function unbindAncestorScrollEvents(){if(!$boundAncestors)return;$boundAncestors.unbind("scroll."+uid);$boundAncestors=null}function updateColumnHeader(columnId,title,toolTip){if(!initialized)return;
var idx=getColumnIndex(columnId);if(idx==null)return;var columnDef=columns[idx];var $header=$headers.children().eq(idx);if($header){if(title!==undefined)columns[idx].name=title;if(toolTip!==undefined)columns[idx].toolTip=toolTip;trigger(self.onBeforeHeaderCellDestroy,{"node":$header[0],"column":columnDef});$header.attr("title",toolTip||"").children().eq(0).html(title);trigger(self.onHeaderCellRendered,{"node":$header[0],"column":columnDef})}}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(columnId){var idx=
getColumnIndex(columnId);var $header=$headerRow.children().eq(idx);return $header&&$header[0]}function createColumnHeaders(){function onMouseEnter(){$(this).addClass("ui-state-hover")}function onMouseLeave(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var columnDef=$(this).data("column");if(columnDef)trigger(self.onBeforeHeaderCellDestroy,{"node":this,"column":columnDef})});$headers.empty();$headers.width(getHeadersWidth());$headerRow.find(".slick-headerrow-column").each(function(){var columnDef=
$(this).data("column");if(columnDef)trigger(self.onBeforeHeaderRowCellDestroy,{"node":this,"column":columnDef})});$headerRow.empty();for(var i=0;i<columns.length;i++){var m=columns[i];var header=$("\x3cdiv class\x3d'ui-state-default slick-header-column' /\x3e").html("\x3cspan class\x3d'slick-column-name'\x3e"+m.name+"\x3c/span\x3e").width(m.width-headerColumnWidthDiff).attr("id",""+uid+m.id).attr("title",m.toolTip||"").data("column",m).addClass(m.headerCssClass||"").appendTo($headers);if(options.enableColumnReorder||
m.sortable)header.on("mouseenter",onMouseEnter).on("mouseleave",onMouseLeave);if(m.sortable){header.addClass("slick-header-sortable");header.append("\x3cspan class\x3d'slick-sort-indicator' /\x3e")}trigger(self.onHeaderCellRendered,{"node":header[0],"column":m});if(options.showHeaderRow){var headerRowCell=$("\x3cdiv class\x3d'ui-state-default slick-headerrow-column l"+i+" r"+i+"'\x3e\x3c/div\x3e").data("column",m).appendTo($headerRow);trigger(self.onHeaderRowCellRendered,{"node":headerRowCell[0],
"column":m})}}setSortColumns(sortColumns);setupColumnResize();if(options.enableColumnReorder)setupColumnReorder()}function setupColumnSort(){$headers.click(function(e){e.metaKey=e.metaKey||e.ctrlKey;if($(e.target).hasClass("slick-resizable-handle"))return;var $col=$(e.target).closest(".slick-header-column");if(!$col.length)return;var column=$col.data("column");if(column.sortable){if(!getEditorLock().commitCurrentEdit())return;var sortOpts=null;var i=0;for(;i<sortColumns.length;i++)if(sortColumns[i].columnId==
column.id){sortOpts=sortColumns[i];sortOpts.sortAsc=!sortOpts.sortAsc;break}if(e.metaKey&&options.multiColumnSort){if(sortOpts)sortColumns.splice(i,1)}else{if(!e.shiftKey&&!e.metaKey||!options.multiColumnSort)sortColumns=[];if(!sortOpts){sortOpts={columnId:column.id,sortAsc:column.defaultSortAsc};sortColumns.push(sortOpts)}else if(sortColumns.length==0)sortColumns.push(sortOpts)}setSortColumns(sortColumns);if(!options.multiColumnSort)trigger(self.onSort,{multiColumnSort:false,sortCol:column,sortAsc:sortOpts.sortAsc},
e);else trigger(self.onSort,{multiColumnSort:true,sortCols:$.map(sortColumns,function(col){return{sortCol:columns[getColumnIndex(col.columnId)],sortAsc:col.sortAsc}})},e)}})}function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy");$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:true,start:function(e,ui){$(ui.helper).addClass("slick-header-column-active")},
beforeStop:function(e,ui){$(ui.helper).removeClass("slick-header-column-active")},stop:function(e){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var reorderedIds=$headers.sortable("toArray");var reorderedColumns=[];for(var i=0;i<reorderedIds.length;i++)reorderedColumns.push(columns[getColumnIndex(reorderedIds[i].replace(uid,""))]);setColumns(reorderedColumns);trigger(self.onColumnsReordered,{});e.stopPropagation();setupColumnResize()}})}function setupColumnResize(){var $col,
j,c,pageX,columnElements,minPageX,maxPageX,firstResizable,lastResizable;columnElements=$headers.children();columnElements.find(".slick-resizable-handle").remove();columnElements.each(function(i,e){if(columns[i].resizable){if(firstResizable===undefined)firstResizable=i;lastResizable=i}});if(firstResizable===undefined)return;columnElements.each(function(i,e){if(i<firstResizable||options.forceFitColumns&&i>=lastResizable)return;$col=$(e);$("\x3cdiv class\x3d'slick-resizable-handle' /\x3e").appendTo(e).bind("dragstart",
function(e,dd){if(!getEditorLock().commitCurrentEdit())return false;pageX=e.pageX;$(this).parent().addClass("slick-header-column-active");var shrinkLeewayOnRight=null,stretchLeewayOnRight=null;columnElements.each(function(i,e){columns[i].previousWidth=$(e).outerWidth()});if(options.forceFitColumns){shrinkLeewayOnRight=0;stretchLeewayOnRight=0;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnRight!==null)if(c.maxWidth)stretchLeewayOnRight+=c.maxWidth-c.previousWidth;
else stretchLeewayOnRight=null;shrinkLeewayOnRight+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth)}}}var shrinkLeewayOnLeft=0,stretchLeewayOnLeft=0;for(j=0;j<=i;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnLeft!==null)if(c.maxWidth)stretchLeewayOnLeft+=c.maxWidth-c.previousWidth;else stretchLeewayOnLeft=null;shrinkLeewayOnLeft+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth)}}if(shrinkLeewayOnRight===null)shrinkLeewayOnRight=1E5;if(shrinkLeewayOnLeft===null)shrinkLeewayOnLeft=
1E5;if(stretchLeewayOnRight===null)stretchLeewayOnRight=1E5;if(stretchLeewayOnLeft===null)stretchLeewayOnLeft=1E5;maxPageX=pageX+Math.min(shrinkLeewayOnRight,stretchLeewayOnLeft);minPageX=pageX-Math.min(shrinkLeewayOnLeft,stretchLeewayOnRight)}).bind("drag",function(e,dd){var actualMinWidth,d=Math.min(maxPageX,Math.max(minPageX,e.pageX))-pageX,x;if(d<0){x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=
c.previousWidth-actualMinWidth;c.width=actualMinWidth}else{c.width=c.previousWidth+x;x=0}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable)if(x&&(c.maxWidth&&c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth}else{c.width=c.previousWidth+x;x=0}}}}else{x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable)if(x&&(c.maxWidth&&c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth}else{c.width=c.previousWidth+
x;x=0}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth}else{c.width=c.previousWidth+x;x=0}}}}}applyColumnHeaderWidths();if(options.syncColumnCellResize)applyColumnWidths()}).bind("dragend",function(e,dd){var newWidth;$(this).parent().removeClass("slick-header-column-active");for(j=0;j<columnElements.length;j++){c=
columns[j];newWidth=$(columnElements[j]).outerWidth();if(c.previousWidth!==newWidth&&c.rerenderOnResize)invalidateAllRows()}updateCanvasWidth(true);render();trigger(self.onColumnsResized,{})})})}function getVBoxDelta($el){var p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var delta=0;$.each(p,function(n,val){delta+=parseFloat($el.css(val))||0});return delta}function measureCellPaddingAndBorder(){var el;var h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];
var v=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];el=$("\x3cdiv class\x3d'ui-state-default slick-header-column' style\x3d'visibility:hidden'\x3e-\x3c/div\x3e").appendTo($headers);headerColumnWidthDiff=headerColumnHeightDiff=0;$.each(h,function(n,val){headerColumnWidthDiff+=parseFloat(el.css(val))||0});$.each(v,function(n,val){headerColumnHeightDiff+=parseFloat(el.css(val))||0});el.remove();var r=$("\x3cdiv class\x3d'slick-row' /\x3e").appendTo($canvas);el=$("\x3cdiv class\x3d'slick-cell' id\x3d'' style\x3d'visibility:hidden'\x3e-\x3c/div\x3e").appendTo(r);
cellWidthDiff=cellHeightDiff=0;$.each(h,function(n,val){cellWidthDiff+=parseFloat(el.css(val))||0});$.each(v,function(n,val){cellHeightDiff+=parseFloat(el.css(val))||0});r.remove();absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("\x3cstyle type\x3d'text/css' rel\x3d'stylesheet' /\x3e").appendTo($("head"));var rowHeight=options.rowHeight-cellHeightDiff;var rules=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+
options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+rowHeight+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"];for(var i=0;i<columns.length;i++){rules.push("."+uid+" .l"+i+" { }");rules.push("."+uid+" .r"+i+" { }")}if($style[0].styleSheet)$style[0].styleSheet.cssText=rules.join(" ");else $style[0].appendChild(document.createTextNode(rules.join(" ")))}function getColumnCssRules(idx){if(!stylesheet){var sheets=
document.styleSheets;for(var i=0;i<sheets.length;i++)if((sheets[i].ownerNode||sheets[i].owningElement)==$style[0]){stylesheet=sheets[i];break}if(!stylesheet)throw new Error("Cannot find stylesheet.");columnCssRulesL=[];columnCssRulesR=[];var cssRules=stylesheet.cssRules||stylesheet.rules;var matches,columnIdx;for(var i=0;i<cssRules.length;i++){var selector=cssRules[i].selectorText;if(matches=/\.l\d+/.exec(selector)){columnIdx=parseInt(matches[0].substr(2,matches[0].length-2),10);columnCssRulesL[columnIdx]=
cssRules[i]}else if(matches=/\.r\d+/.exec(selector)){columnIdx=parseInt(matches[0].substr(2,matches[0].length-2),10);columnCssRulesR[columnIdx]=cssRules[i]}}}return{"left":columnCssRulesL[idx],"right":columnCssRulesR[idx]}}function removeCssRules(){$style.remove();stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit();trigger(self.onBeforeDestroy,{});var i=plugins.length;while(i--)unregisterPlugin(plugins[i]);if(options.enableColumnReorder)$headers.filter(":ui-sortable").sortable("destroy");
unbindAncestorScrollEvents();$container.unbind(".slickgrid");removeCssRules();$canvas.unbind("draginit dragstart dragend drag");$container.empty().removeClass(uid)}function trigger(evt,args,e){e=e||new Slick.EventData;args=args||{};args.grid=self;return evt.notify(args,e,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(id){return columnsById[id]}function autosizeColumns(){var i,c,widths=[],shrinkLeeway=0,total=0,prevTotal,
availWidth=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(i=0;i<columns.length;i++){c=columns[i];widths.push(c.width);total+=c.width;if(c.resizable)shrinkLeeway+=c.width-Math.max(c.minWidth,absoluteColumnMinWidth)}prevTotal=total;while(total>availWidth&&shrinkLeeway){var shrinkProportion=(total-availWidth)/shrinkLeeway;for(i=0;i<columns.length&&total>availWidth;i++){c=columns[i];var width=widths[i];if(!c.resizable||(width<=c.minWidth||width<=absoluteColumnMinWidth))continue;
var absMinWidth=Math.max(c.minWidth,absoluteColumnMinWidth);var shrinkSize=Math.floor(shrinkProportion*(width-absMinWidth))||1;shrinkSize=Math.min(shrinkSize,width-absMinWidth);total-=shrinkSize;shrinkLeeway-=shrinkSize;widths[i]-=shrinkSize}if(prevTotal==total)break;prevTotal=total}prevTotal=total;while(total<availWidth){var growProportion=availWidth/total;for(i=0;i<columns.length&&total<availWidth;i++){c=columns[i];if(!c.resizable||c.maxWidth<=c.width)continue;var growSize=Math.min(Math.floor(growProportion*
c.width)-c.width,c.maxWidth-c.width||1E6)||1;total+=growSize;widths[i]+=growSize}if(prevTotal==total)break;prevTotal=total}var reRender=false;for(i=0;i<columns.length;i++){if(columns[i].rerenderOnResize&&columns[i].width!=widths[i])reRender=true;columns[i].width=widths[i]}applyColumnHeaderWidths();updateCanvasWidth(true);if(reRender){invalidateAllRows();render()}}function applyColumnHeaderWidths(){if(!initialized)return;var h;for(var i=0,headers=$headers.children(),ii=headers.length;i<ii;i++){h=$(headers[i]);
if(h.width()!==columns[i].width-headerColumnWidthDiff)h.width(columns[i].width-headerColumnWidthDiff)}updateColumnCaches()}function applyColumnWidths(){var x=0,w,rule;for(var i=0;i<columns.length;i++){w=columns[i].width;rule=getColumnCssRules(i);rule.left.style.left=x+"px";rule.right.style.right=canvasWidth-x-w+"px";x+=columns[i].width}}function setSortColumn(columnId,ascending){setSortColumns([{columnId:columnId,sortAsc:ascending}])}function setSortColumns(cols){sortColumns=cols;var headerColumnEls=
$headers.children();headerColumnEls.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");$.each(sortColumns,function(i,col){if(col.sortAsc==null)col.sortAsc=true;var columnIndex=getColumnIndex(col.columnId);if(columnIndex!=null)headerColumnEls.eq(columnIndex).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(col.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")})}function getSortColumns(){return sortColumns}
function handleSelectedRangesChanged(e,ranges){selectedRows=[];var hash={};for(var i=0;i<ranges.length;i++)for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++){if(!hash[j]){selectedRows.push(j);hash[j]={}}for(var k=ranges[i].fromCell;k<=ranges[i].toCell;k++)if(canCellBeSelected(j,k))hash[j][columns[k].id]=options.selectedCellCssClass}setCellCssStyles(options.selectedCellCssClass,hash);trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e)}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=
[];columnPosRight=[];var x=0;for(var i=0,ii=columns.length;i<ii;i++){columnPosLeft[i]=x;columnPosRight[i]=x+columns[i].width;x+=columns[i].width}}function setColumns(columnDefinitions){columns=columnDefinitions;columnsById={};for(var i=0;i<columns.length;i++){var m=columns[i]=$.extend({},columnDefaults,columns[i]);columnsById[m.id]=i;if(m.minWidth&&m.width<m.minWidth)m.width=m.minWidth;if(m.maxWidth&&m.width>m.maxWidth)m.width=m.maxWidth}updateColumnCaches();if(initialized){invalidateAllRows();createColumnHeaders();
removeCssRules();createCssRules();resizeCanvas();applyColumnWidths();handleScroll()}}function getOptions(){return options}function setOptions(args){if(!getEditorLock().commitCurrentEdit())return;makeActiveCellNormal();if(options.enableAddRow!==args.enableAddRow)invalidateRow(getDataLength());options=$.extend(options,args);validateAndEnforceOptions();$viewport.css("overflow-y",options.autoHeight?"hidden":"auto");render()}function validateAndEnforceOptions(){if(options.autoHeight)options.leaveSpaceForNewRows=
false}function setData(newData,scrollToTop){data=newData;invalidateAllRows();updateRowCount();if(scrollToTop)scrollTo(0)}function getData(){return data}function getDataLength(){if(data.getLength)return data.getLength();else return data.length}function getDataLengthIncludingAddNew(){return getDataLength()+(options.enableAddRow?1:0)}function getDataItem(i){if(data.getItem)return data.getItem(i);else return data[i]}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(visible){if(options.showTopPanel!=
visible){options.showTopPanel=visible;if(visible)$topPanelScroller.slideDown("fast",resizeCanvas);else $topPanelScroller.slideUp("fast",resizeCanvas)}}function setHeaderRowVisibility(visible){if(options.showHeaderRow!=visible){options.showHeaderRow=visible;if(visible)$headerRowScroller.slideDown("fast",resizeCanvas);else $headerRowScroller.slideUp("fast",resizeCanvas)}}function getContainerNode(){return $container.get(0)}function getRowTop(row){return options.rowHeight*row-offset}function getRowFromPosition(y){return Math.floor((y+
offset)/options.rowHeight)}function scrollTo(y){y=Math.max(y,0);y=Math.min(y,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var oldOffset=offset;page=Math.min(n-1,Math.floor(y/ph));offset=Math.round(page*cj);var newScrollTop=y-offset;if(offset!=oldOffset){var range=getVisibleRange(newScrollTop);cleanupRows(range);updateRowPositions()}if(prevScrollTop!=newScrollTop){vScrollDir=prevScrollTop+oldOffset<newScrollTop+offset?1:-1;$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=
newScrollTop;trigger(self.onViewportChanged,{})}}function defaultFormatter(row,cell,value,columnDef,dataContext){if(value==null)return"";else return(value+"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")}function getFormatter(row,column){var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnOverrides=rowMetadata&&(rowMetadata.columns&&(rowMetadata.columns[column.id]||rowMetadata.columns[getColumnIndex(column.id)]));return columnOverrides&&columnOverrides.formatter||
(rowMetadata&&rowMetadata.formatter||(column.formatter||(options.formatterFactory&&options.formatterFactory.getFormatter(column)||options.defaultFormatter)))}function getEditor(row,cell){var column=columns[cell];var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&(columnMetadata[column.id]&&columnMetadata[column.id].editor!==undefined))return columnMetadata[column.id].editor;if(columnMetadata&&(columnMetadata[cell]&&
columnMetadata[cell].editor!==undefined))return columnMetadata[cell].editor;return column.editor||options.editorFactory&&options.editorFactory.getEditor(column)}function getDataItemValueForColumn(item,columnDef){if(options.dataItemColumnValueExtractor)return options.dataItemColumnValueExtractor(item,columnDef);return item[columnDef.field]}function appendRowHtml(stringArray,row,range,dataLength){var d=getDataItem(row);var dataLoading=row<dataLength&&!d;var rowCss="slick-row"+(dataLoading?" loading":
"")+(row===activeRow?" active":"")+(row%2==1?" odd":" even");var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(metadata&&metadata.cssClasses)rowCss+=" "+metadata.cssClasses;stringArray.push("\x3cdiv class\x3d'ui-widget-content "+rowCss+"' style\x3d'top:"+getRowTop(row)+"px'\x3e");var colspan,m;for(var i=0,ii=columns.length;i<ii;i++){m=columns[i];colspan=1;if(metadata&&metadata.columns){var columnData=metadata.columns[m.id]||metadata.columns[i];colspan=columnData&&columnData.colspan||
1;if(colspan==="*")colspan=ii-i}if(columnPosRight[Math.min(ii-1,i+colspan-1)]>range.leftPx){if(columnPosLeft[i]>range.rightPx)break;appendCellHtml(stringArray,row,i,colspan,d)}if(colspan>1)i+=colspan-1}stringArray.push("\x3c/div\x3e")}function appendCellHtml(stringArray,row,cell,colspan,item){var m=columns[cell];var cellCss="slick-cell l"+cell+" r"+Math.min(columns.length-1,cell+colspan-1)+(m.cssClass?" "+m.cssClass:"");if(row===activeRow&&cell===activeCell)cellCss+=" active";for(var key in cellCssClasses)if(cellCssClasses[key][row]&&
cellCssClasses[key][row][m.id])cellCss+=" "+cellCssClasses[key][row][m.id];stringArray.push("\x3cdiv class\x3d'"+cellCss+"'\x3e");if(item){var value=getDataItemValueForColumn(item,m);stringArray.push(getFormatter(row,m)(row,cell,value,m,item))}stringArray.push("\x3c/div\x3e");rowsCache[row].cellRenderQueue.push(cell);rowsCache[row].cellColSpans[cell]=colspan}function cleanupRows(rangeToKeep){for(var i in rowsCache)if((i=parseInt(i,10))!==activeRow&&(i<rangeToKeep.top||i>rangeToKeep.bottom))removeRowFromCache(i)}
function invalidate(){updateRowCount();invalidateAllRows();render()}function invalidateAllRows(){if(currentEditor)makeActiveCellNormal();for(var row in rowsCache)removeRowFromCache(row)}function removeRowFromCache(row){var cacheEntry=rowsCache[row];if(!cacheEntry)return;$canvas[0].removeChild(cacheEntry.rowNode);delete rowsCache[row];delete postProcessedRows[row];renderedRows--;counter_rows_removed++}function invalidateRows(rows){var i,rl;if(!rows||!rows.length)return;vScrollDir=0;for(i=0,rl=rows.length;i<
rl;i++){if(currentEditor&&activeRow===rows[i])makeActiveCellNormal();if(rowsCache[rows[i]])removeRowFromCache(rows[i])}}function invalidateRow(row){invalidateRows([row])}function updateCell(row,cell){var cellNode=getCellNode(row,cell);if(!cellNode)return;var m=columns[cell],d=getDataItem(row);if(currentEditor&&(activeRow===row&&activeCell===cell))currentEditor.loadValue(d);else{cellNode.innerHTML=d?getFormatter(row,m)(row,cell,getDataItemValueForColumn(d,m),m,d):"";invalidatePostProcessingResults(row)}}
function updateRow(row){var cacheEntry=rowsCache[row];if(!cacheEntry)return;ensureCellNodesInRowsCache(row);var d=getDataItem(row);for(var columnIdx in cacheEntry.cellNodesByColumnIdx){if(!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx))continue;columnIdx=columnIdx|0;var m=columns[columnIdx],node=cacheEntry.cellNodesByColumnIdx[columnIdx];if(row===activeRow&&(columnIdx===activeCell&&currentEditor))currentEditor.loadValue(d);else if(d)node.innerHTML=getFormatter(row,m)(row,columnIdx,getDataItemValueForColumn(d,
m),m,d);else node.innerHTML=""}invalidatePostProcessingResults(row)}function getViewportHeight(){return parseFloat($.css($container[0],"height",true))-parseFloat($.css($container[0],"paddingTop",true))-parseFloat($.css($container[0],"paddingBottom",true))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){if(!initialized)return;
if(options.autoHeight)viewportH=options.rowHeight*getDataLengthIncludingAddNew();else viewportH=getViewportHeight();numVisibleRows=Math.ceil(viewportH/options.rowHeight);viewportW=parseFloat($.css($container[0],"width",true));if(!options.autoHeight)$viewport.height(viewportH);if(options.forceFitColumns)autosizeColumns();updateRowCount();handleScroll();lastRenderedScrollLeft=-1;render()}function updateRowCount(){var dataLength=getDataLength();if(!initialized)return;numberOfRows=getDataLengthIncludingAddNew()+
(options.leaveSpaceForNewRows?numVisibleRows-1:0);var oldViewportHasVScroll=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&numberOfRows*options.rowHeight>viewportH;var l=getDataLengthIncludingAddNew()-1;for(var i in rowsCache)if(i>=l)removeRowFromCache(i);if(activeCellNode&&activeRow>l)resetActiveCell();var oldH=h;th=Math.max(options.rowHeight*numberOfRows,viewportH-scrollbarDimensions.height);if(th<maxSupportedCssHeight){h=ph=th;n=1;cj=0}else{h=maxSupportedCssHeight;ph=h/100;n=Math.floor(th/
ph);cj=(th-h)/(n-1)}if(h!==oldH){$canvas.css("height",h);scrollTop=$viewport[0].scrollTop}var oldScrollTopInRange=scrollTop+offset<=th-viewportH;if(th==0||scrollTop==0)page=offset=0;else if(oldScrollTopInRange)scrollTo(scrollTop+offset);else scrollTo(th-viewportH);if(h!=oldH&&options.autoHeight)resizeCanvas();if(options.forceFitColumns&&oldViewportHasVScroll!=viewportHasVScroll)autosizeColumns();updateCanvasWidth(false)}function getVisibleRange(viewportTop,viewportLeft){if(viewportTop==null)viewportTop=
scrollTop;if(viewportLeft==null)viewportLeft=scrollLeft;return{top:getRowFromPosition(viewportTop),bottom:getRowFromPosition(viewportTop+viewportH)+1,leftPx:viewportLeft,rightPx:viewportLeft+viewportW}}function getRenderedRange(viewportTop,viewportLeft){var range=getVisibleRange(viewportTop,viewportLeft);var buffer=Math.round(viewportH/options.rowHeight);var minBuffer=3;if(vScrollDir==-1){range.top-=buffer;range.bottom+=minBuffer}else if(vScrollDir==1){range.top-=minBuffer;range.bottom+=buffer}else{range.top-=
minBuffer;range.bottom+=minBuffer}range.top=Math.max(0,range.top);range.bottom=Math.min(getDataLengthIncludingAddNew()-1,range.bottom);range.leftPx-=viewportW;range.rightPx+=viewportW;range.leftPx=Math.max(0,range.leftPx);range.rightPx=Math.min(canvasWidth,range.rightPx);return range}function ensureCellNodesInRowsCache(row){var cacheEntry=rowsCache[row];if(cacheEntry)if(cacheEntry.cellRenderQueue.length){var lastChild=cacheEntry.rowNode.lastChild;while(cacheEntry.cellRenderQueue.length){var columnIdx=
cacheEntry.cellRenderQueue.pop();cacheEntry.cellNodesByColumnIdx[columnIdx]=lastChild;lastChild=lastChild.previousSibling}}}function cleanUpCells(range,row){var totalCellsRemoved=0;var cacheEntry=rowsCache[row];var cellsToRemove=[];for(var i in cacheEntry.cellNodesByColumnIdx){if(!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(i))continue;i=i|0;var colspan=cacheEntry.cellColSpans[i];if(columnPosLeft[i]>range.rightPx||columnPosRight[Math.min(columns.length-1,i+colspan-1)]<range.leftPx)if(!(row==activeRow&&
i==activeCell))cellsToRemove.push(i)}var cellToRemove;while((cellToRemove=cellsToRemove.pop())!=null){cacheEntry.rowNode.removeChild(cacheEntry.cellNodesByColumnIdx[cellToRemove]);delete cacheEntry.cellColSpans[cellToRemove];delete cacheEntry.cellNodesByColumnIdx[cellToRemove];if(postProcessedRows[row])delete postProcessedRows[row][cellToRemove];totalCellsRemoved++}}function cleanUpAndRenderCells(range){var cacheEntry;var stringArray=[];var processedRows=[];var cellsAdded;var totalCellsAdded=0;var colspan;
for(var row=range.top,btm=range.bottom;row<=btm;row++){cacheEntry=rowsCache[row];if(!cacheEntry)continue;ensureCellNodesInRowsCache(row);cleanUpCells(range,row);cellsAdded=0;var metadata=data.getItemMetadata&&data.getItemMetadata(row);metadata=metadata&&metadata.columns;var d=getDataItem(row);for(var i=0,ii=columns.length;i<ii;i++){if(columnPosLeft[i]>range.rightPx)break;if((colspan=cacheEntry.cellColSpans[i])!=null){i+=colspan>1?colspan-1:0;continue}colspan=1;if(metadata){var columnData=metadata[columns[i].id]||
metadata[i];colspan=columnData&&columnData.colspan||1;if(colspan==="*")colspan=ii-i}if(columnPosRight[Math.min(ii-1,i+colspan-1)]>range.leftPx){appendCellHtml(stringArray,row,i,colspan,d);cellsAdded++}i+=colspan>1?colspan-1:0}if(cellsAdded){totalCellsAdded+=cellsAdded;processedRows.push(row)}}if(!stringArray.length)return;var x=document.createElement("div");x.innerHTML=stringArray.join("");var processedRow;var node;while((processedRow=processedRows.pop())!=null){cacheEntry=rowsCache[processedRow];
var columnIdx;while((columnIdx=cacheEntry.cellRenderQueue.pop())!=null){node=x.lastChild;cacheEntry.rowNode.appendChild(node);cacheEntry.cellNodesByColumnIdx[columnIdx]=node}}}function renderRows(range){var parentNode=$canvas[0],stringArray=[],rows=[],needToReselectCell=false,dataLength=getDataLength();for(var i=range.top,ii=range.bottom;i<=ii;i++){if(rowsCache[i])continue;renderedRows++;rows.push(i);rowsCache[i]={"rowNode":null,"cellColSpans":[],"cellNodesByColumnIdx":[],"cellRenderQueue":[]};appendRowHtml(stringArray,
i,range,dataLength);if(activeCellNode&&activeRow===i)needToReselectCell=true;counter_rows_rendered++}if(!rows.length)return;var x=document.createElement("div");x.innerHTML=stringArray.join("");for(var i=0,ii=rows.length;i<ii;i++)rowsCache[rows[i]].rowNode=parentNode.appendChild(x.firstChild);if(needToReselectCell)activeCellNode=getCellNode(activeRow,activeCell)}function startPostProcessing(){if(!options.enableAsyncPostRender)return;clearTimeout(h_postrender);h_postrender=setTimeout(asyncPostProcessRows,
options.asyncPostRenderDelay)}function invalidatePostProcessingResults(row){delete postProcessedRows[row];postProcessFromRow=Math.min(postProcessFromRow,row);postProcessToRow=Math.max(postProcessToRow,row);startPostProcessing()}function updateRowPositions(){for(var row in rowsCache)rowsCache[row].rowNode.style.top=getRowTop(row)+"px"}function render(){if(!initialized)return;var visible=getVisibleRange();var rendered=getRenderedRange();cleanupRows(rendered);if(lastRenderedScrollLeft!=scrollLeft)cleanUpAndRenderCells(rendered);
renderRows(rendered);postProcessFromRow=visible.top;postProcessToRow=Math.min(getDataLengthIncludingAddNew()-1,visible.bottom);startPostProcessing();lastRenderedScrollTop=scrollTop;lastRenderedScrollLeft=scrollLeft;h_render=null}function handleHeaderRowScroll(){var scrollLeft=$headerRowScroller[0].scrollLeft;if(scrollLeft!=$viewport[0].scrollLeft)$viewport[0].scrollLeft=scrollLeft}function handleScroll(){scrollTop=$viewport[0].scrollTop;scrollLeft=$viewport[0].scrollLeft;var vScrollDist=Math.abs(scrollTop-
prevScrollTop);var hScrollDist=Math.abs(scrollLeft-prevScrollLeft);if(hScrollDist){prevScrollLeft=scrollLeft;$headerScroller[0].scrollLeft=scrollLeft;$topPanelScroller[0].scrollLeft=scrollLeft;$headerRowScroller[0].scrollLeft=scrollLeft}if(vScrollDist){vScrollDir=prevScrollTop<scrollTop?1:-1;prevScrollTop=scrollTop;if(vScrollDist<viewportH)scrollTo(scrollTop+offset);else{var oldOffset=offset;if(h==viewportH)page=0;else page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph)));
offset=Math.round(page*cj);if(oldOffset!=offset)invalidateAllRows()}}if(hScrollDist||vScrollDist){if(h_render)clearTimeout(h_render);if(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20){if(options.forceSyncScrolling||Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW)render();else h_render=setTimeout(render,50);trigger(self.onViewportChanged,{})}}trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}
function asyncPostProcessRows(){while(postProcessFromRow<=postProcessToRow){var row=vScrollDir>=0?postProcessFromRow++:postProcessToRow--;var cacheEntry=rowsCache[row];if(!cacheEntry||row>=getDataLength())continue;if(!postProcessedRows[row])postProcessedRows[row]={};ensureCellNodesInRowsCache(row);for(var columnIdx in cacheEntry.cellNodesByColumnIdx){if(!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx))continue;columnIdx=columnIdx|0;var m=columns[columnIdx];if(m.asyncPostRender&&!postProcessedRows[row][columnIdx]){var node=
cacheEntry.cellNodesByColumnIdx[columnIdx];if(node)m.asyncPostRender(node,row,getDataItem(row),m);postProcessedRows[row][columnIdx]=true}}h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}function updateCellCssStylesOnRenderedRows(addedHash,removedHash){var node,columnId,addedRowHash,removedRowHash;for(var row in rowsCache){removedRowHash=removedHash&&removedHash[row];addedRowHash=addedHash&&addedHash[row];if(removedRowHash)for(columnId in removedRowHash)if(!addedRowHash||
removedRowHash[columnId]!=addedRowHash[columnId]){node=getCellNode(row,getColumnIndex(columnId));if(node)$(node).removeClass(removedRowHash[columnId])}if(addedRowHash)for(columnId in addedRowHash)if(!removedRowHash||removedRowHash[columnId]!=addedRowHash[columnId]){node=getCellNode(row,getColumnIndex(columnId));if(node)$(node).addClass(addedRowHash[columnId])}}}function addCellCssStyles(key,hash){if(cellCssClasses[key])throw"addCellCssStyles: cell CSS hash with key '"+key+"' already exists.";cellCssClasses[key]=
hash;updateCellCssStylesOnRenderedRows(hash,null);trigger(self.onCellCssStylesChanged,{"key":key,"hash":hash})}function removeCellCssStyles(key){if(!cellCssClasses[key])return;updateCellCssStylesOnRenderedRows(null,cellCssClasses[key]);delete cellCssClasses[key];trigger(self.onCellCssStylesChanged,{"key":key,"hash":null})}function setCellCssStyles(key,hash){var prevHash=cellCssClasses[key];cellCssClasses[key]=hash;updateCellCssStylesOnRenderedRows(hash,prevHash);trigger(self.onCellCssStylesChanged,
{"key":key,"hash":hash})}function getCellCssStyles(key){return cellCssClasses[key]}function flashCell(row,cell,speed){speed=speed||100;if(rowsCache[row]){var $cell=$(getCellNode(row,cell));function toggleCellClass(times){if(!times)return;setTimeout(function(){$cell.queue(function(){$cell.toggleClass(options.cellFlashingCssClass).dequeue();toggleCellClass(times-1)})},speed)}toggleCellClass(4)}}function handleDragInit(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell))return false;
var retval=trigger(self.onDragInit,dd,e);if(e.isImmediatePropagationStopped())return retval;return false}function handleDragStart(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell))return false;var retval=trigger(self.onDragStart,dd,e);if(e.isImmediatePropagationStopped())return retval;return false}function handleDrag(e,dd){return trigger(self.onDrag,dd,e)}function handleDragEnd(e,dd){trigger(self.onDragEnd,dd,e)}function handleKeyDown(e){trigger(self.onKeyDown,{row:activeRow,
cell:activeCell},e);var handled=e.isImmediatePropagationStopped();if(!handled)if(!e.shiftKey&&(!e.altKey&&!e.ctrlKey))if(e.which==27){if(!getEditorLock().isActive())return;cancelEditAndSetFocus();handled=true}else if(e.which==34){navigatePageDown();handled=true}else if(e.which==33){navigatePageUp();handled=true}else if(e.which==37)handled=navigateLeft();else if(e.which==39)handled=navigateRight();else if(e.which==38)handled=navigateUp();else if(e.which==40)handled=navigateDown();else if(e.which==
9)handled=navigateNext();else{if(e.which==13){if(options.editable)if(currentEditor)if(activeRow===getDataLength())navigateDown();else commitEditAndSetFocus();else if(getEditorLock().commitCurrentEdit())makeActiveCellEditable();handled=true}}else if(e.which==9&&(e.shiftKey&&(!e.ctrlKey&&!e.altKey)))handled=navigatePrev();if(handled){e.stopPropagation();e.preventDefault();try{e.originalEvent.keyCode=0}catch(error){}}}function handleClick(e){if(!currentEditor)if(e.target!=document.activeElement||$(e.target).hasClass("slick-cell"))setFocus();
var cell=getCellFromEvent(e);if(!cell||currentEditor!==null&&(activeRow==cell.row&&activeCell==cell.cell))return;trigger(self.onClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped())return;if((activeCell!=cell.cell||activeRow!=cell.row)&&canCellBeActive(cell.row,cell.cell))if(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()){scrollRowIntoView(cell.row,false);setActiveCellInternal(getCellNode(cell.row,cell.cell))}}function handleContextMenu(e){var $cell=$(e.target).closest(".slick-cell",
$canvas);if($cell.length===0)return;if(activeCellNode===$cell[0]&&currentEditor!==null)return;trigger(self.onContextMenu,{},e)}function handleDblClick(e){var cell=getCellFromEvent(e);if(!cell||currentEditor!==null&&(activeRow==cell.row&&activeCell==cell.cell))return;trigger(self.onDblClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped())return;if(options.editable)gotoCell(cell.row,cell.cell,true)}function handleHeaderMouseEnter(e){trigger(self.onHeaderMouseEnter,{"column":$(this).data("column")},
e)}function handleHeaderMouseLeave(e){trigger(self.onHeaderMouseLeave,{"column":$(this).data("column")},e)}function handleHeaderContextMenu(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&$header.data("column");trigger(self.onHeaderContextMenu,{column:column},e)}function handleHeaderClick(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&$header.data("column");if(column)trigger(self.onHeaderClick,
{column:column},e)}function handleMouseEnter(e){trigger(self.onMouseEnter,{},e)}function handleMouseLeave(e){trigger(self.onMouseLeave,{},e)}function cellExists(row,cell){return!(row<0||(row>=getDataLength()||(cell<0||cell>=columns.length)))}function getCellFromPoint(x,y){var row=getRowFromPosition(y);var cell=0;var w=0;for(var i=0;i<columns.length&&w<x;i++){w+=columns[i].width;cell++}if(cell<0)cell=0;return{row:row,cell:cell-1}}function getCellFromNode(cellNode){var cls=/l\d+/.exec(cellNode.className);
if(!cls)throw"getCellFromNode: cannot get cell - "+cellNode.className;return parseInt(cls[0].substr(1,cls[0].length-1),10)}function getRowFromNode(rowNode){for(var row in rowsCache)if(rowsCache[row].rowNode===rowNode)return row|0;return null}function getCellFromEvent(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if(!$cell.length)return null;var row=getRowFromNode($cell[0].parentNode);var cell=getCellFromNode($cell[0]);if(row==null||cell==null)return null;else return{"row":row,"cell":cell}}
function getCellNodeBox(row,cell){if(!cellExists(row,cell))return null;var y1=getRowTop(row);var y2=y1+options.rowHeight-1;var x1=0;for(var i=0;i<cell;i++)x1+=columns[i].width;var x2=x1+columns[cell].width;return{top:y1,left:x1,bottom:y2,right:x2}}function resetActiveCell(){setActiveCellInternal(null,false)}function setFocus(){if(tabbingDirection==-1)$focusSink[0].focus();else $focusSink2[0].focus()}function scrollCellIntoView(row,cell,doPaging){scrollRowIntoView(row,doPaging);var colspan=getColspan(row,
cell);var left=columnPosLeft[cell],right=columnPosRight[cell+(colspan>1?colspan-1:0)],scrollRight=scrollLeft+viewportW;if(left<scrollLeft){$viewport.scrollLeft(left);handleScroll();render()}else if(right>scrollRight){$viewport.scrollLeft(Math.min(left,right-$viewport[0].clientWidth));handleScroll();render()}}function setActiveCellInternal(newCell,opt_editMode){if(activeCellNode!==null){makeActiveCellNormal();$(activeCellNode).removeClass("active");if(rowsCache[activeRow])$(rowsCache[activeRow].rowNode).removeClass("active")}var activeCellChanged=
activeCellNode!==newCell;activeCellNode=newCell;if(activeCellNode!=null){activeRow=getRowFromNode(activeCellNode.parentNode);activeCell=activePosX=getCellFromNode(activeCellNode);if(opt_editMode==null)opt_editMode=activeRow==getDataLength()||options.autoEdit;$(activeCellNode).addClass("active");$(rowsCache[activeRow].rowNode).addClass("active");if(options.editable&&(opt_editMode&&isCellPotentiallyEditable(activeRow,activeCell))){clearTimeout(h_editorLoader);if(options.asyncEditorLoading)h_editorLoader=
setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay);else makeActiveCellEditable()}}else activeRow=activeCell=null;if(activeCellChanged)trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(e){}else if(window.getSelection){var sel=window.getSelection();if(sel&&sel.removeAllRanges)sel.removeAllRanges()}}function isCellPotentiallyEditable(row,cell){if(row<getDataLength()&&
!getDataItem(row))return false;if(columns[cell].cannotTriggerInsert&&row>=getDataLength())return false;if(!getEditor(row,cell))return false;return true}function makeActiveCellNormal(){if(!currentEditor)return;trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor});currentEditor.destroy();currentEditor=null;if(activeCellNode){var d=getDataItem(activeRow);$(activeCellNode).removeClass("editable invalid");if(d){var column=columns[activeCell];var formatter=getFormatter(activeRow,column);activeCellNode.innerHTML=
formatter(activeRow,activeCell,getDataItemValueForColumn(d,column),column,d);invalidatePostProcessingResults(activeRow)}}if(navigator.userAgent.toLowerCase().match(/msie/))clearTextSelection();getEditorLock().deactivate(editController)}function makeActiveCellEditable(editor){if(!activeCellNode)return;if(!options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";clearTimeout(h_editorLoader);if(!isCellPotentiallyEditable(activeRow,activeCell))return;
var columnDef=columns[activeCell];var item=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:item,column:columnDef})===false){setFocus();return}getEditorLock().activate(editController);$(activeCellNode).addClass("editable");if(!editor)activeCellNode.innerHTML="";currentEditor=new (editor||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:columnDef,item:item||{},commitChanges:commitEditAndSetFocus,
cancelChanges:cancelEditAndSetFocus});if(item)currentEditor.loadValue(item);serializedEditorValue=currentEditor.serializeValue();if(currentEditor.position)handleActiveCellPositionChange()}function commitEditAndSetFocus(){if(getEditorLock().commitCurrentEdit()){setFocus();if(options.autoEdit)navigateDown()}}function cancelEditAndSetFocus(){if(getEditorLock().cancelCurrentEdit())setFocus()}function absBox(elem){var box={top:elem.offsetTop,left:elem.offsetLeft,bottom:0,right:0,width:$(elem).outerWidth(),
height:$(elem).outerHeight(),visible:true};box.bottom=box.top+box.height;box.right=box.left+box.width;var offsetParent=elem.offsetParent;while((elem=elem.parentNode)!=document.body){if(box.visible&&(elem.scrollHeight!=elem.offsetHeight&&$(elem).css("overflowY")!="visible"))box.visible=box.bottom>elem.scrollTop&&box.top<elem.scrollTop+elem.clientHeight;if(box.visible&&(elem.scrollWidth!=elem.offsetWidth&&$(elem).css("overflowX")!="visible"))box.visible=box.right>elem.scrollLeft&&box.left<elem.scrollLeft+
elem.clientWidth;box.left-=elem.scrollLeft;box.top-=elem.scrollTop;if(elem===offsetParent){box.left+=elem.offsetLeft;box.top+=elem.offsetTop;offsetParent=elem.offsetParent}box.bottom=box.top+box.height;box.right=box.left+box.width}return box}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(!activeCellNode)return;trigger(self.onActiveCellPositionChanged,{});if(currentEditor){var cellBox=
getActiveCellPosition();if(currentEditor.show&&currentEditor.hide)if(!cellBox.visible)currentEditor.hide();else currentEditor.show();if(currentEditor.position)currentEditor.position(cellBox)}}function getCellEditor(){return currentEditor}function getActiveCell(){if(!activeCellNode)return null;else return{row:activeRow,cell:activeCell}}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(row,doPaging){var rowAtTop=row*options.rowHeight;var rowAtBottom=(row+1)*options.rowHeight-
viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);if((row+1)*options.rowHeight>scrollTop+viewportH+offset){scrollTo(doPaging?rowAtTop:rowAtBottom);render()}else if(row*options.rowHeight<scrollTop+offset){scrollTo(doPaging?rowAtBottom:rowAtTop);render()}}function scrollRowToTop(row){scrollTo(row*options.rowHeight);render()}function scrollPage(dir){var deltaRows=dir*numVisibleRows;scrollTo((getRowFromPosition(scrollTop)+deltaRows)*options.rowHeight);render();if(options.enableCellNavigation&&
activeRow!=null){var row=activeRow+deltaRows;if(row>=getDataLengthIncludingAddNew())row=getDataLengthIncludingAddNew()-1;if(row<0)row=0;var cell=0,prevCell=null;var prevActivePosX=activePosX;while(cell<=activePosX){if(canCellBeActive(row,cell))prevCell=cell;cell+=getColspan(row,cell)}if(prevCell!==null){setActiveCellInternal(getCellNode(row,prevCell));activePosX=prevActivePosX}else resetActiveCell()}}function navigatePageDown(){scrollPage(1)}function navigatePageUp(){scrollPage(-1)}function getColspan(row,
cell){var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(!metadata||!metadata.columns)return 1;var columnData=metadata.columns[columns[cell].id]||metadata.columns[cell];var colspan=columnData&&columnData.colspan;if(colspan==="*")colspan=columns.length-cell;else colspan=colspan||1;return colspan}function findFirstFocusableCell(row){var cell=0;while(cell<columns.length){if(canCellBeActive(row,cell))return cell;cell+=getColspan(row,cell)}return null}function findLastFocusableCell(row){var cell=
0;var lastFocusableCell=null;while(cell<columns.length){if(canCellBeActive(row,cell))lastFocusableCell=cell;cell+=getColspan(row,cell)}return lastFocusableCell}function gotoRight(row,cell,posX){if(cell>=columns.length)return null;do cell+=getColspan(row,cell);while(cell<columns.length&&!canCellBeActive(row,cell));if(cell<columns.length)return{"row":row,"cell":cell,"posX":cell};return null}function gotoLeft(row,cell,posX){if(cell<=0)return null;var firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell===
null||firstFocusableCell>=cell)return null;var prev={"row":row,"cell":firstFocusableCell,"posX":firstFocusableCell};var pos;while(true){pos=gotoRight(prev.row,prev.cell,prev.posX);if(!pos)return null;if(pos.cell>=cell)return prev;prev=pos}}function gotoDown(row,cell,posX){var prevCell;while(true){if(++row>=getDataLengthIncludingAddNew())return null;prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell)}if(canCellBeActive(row,prevCell))return{"row":row,"cell":prevCell,"posX":posX}}}
function gotoUp(row,cell,posX){var prevCell;while(true){if(--row<0)return null;prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell)}if(canCellBeActive(row,prevCell))return{"row":row,"cell":prevCell,"posX":posX}}}function gotoNext(row,cell,posX){if(row==null&&cell==null){row=cell=posX=0;if(canCellBeActive(row,cell))return{"row":row,"cell":cell,"posX":cell}}var pos=gotoRight(row,cell,posX);if(pos)return pos;var firstFocusableCell=null;while(++row<getDataLengthIncludingAddNew()){firstFocusableCell=
findFirstFocusableCell(row);if(firstFocusableCell!==null)return{"row":row,"cell":firstFocusableCell,"posX":firstFocusableCell}}return null}function gotoPrev(row,cell,posX){if(row==null&&cell==null){row=getDataLengthIncludingAddNew()-1;cell=posX=columns.length-1;if(canCellBeActive(row,cell))return{"row":row,"cell":cell,"posX":cell}}var pos;var lastSelectableCell;while(!pos){pos=gotoLeft(row,cell,posX);if(pos)break;if(--row<0)return null;cell=0;lastSelectableCell=findLastFocusableCell(row);if(lastSelectableCell!==
null)pos={"row":row,"cell":lastSelectableCell,"posX":lastSelectableCell}}return pos}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down")}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigate(dir){if(!options.enableCellNavigation)return false;if(!activeCellNode&&(dir!="prev"&&dir!="next"))return false;if(!getEditorLock().commitCurrentEdit())return true;
setFocus();var tabbingDirections={"up":-1,"down":1,"left":-1,"right":1,"prev":-1,"next":1};tabbingDirection=tabbingDirections[dir];var stepFunctions={"up":gotoUp,"down":gotoDown,"left":gotoLeft,"right":gotoRight,"prev":gotoPrev,"next":gotoNext};var stepFn=stepFunctions[dir];var pos=stepFn(activeRow,activeCell,activePosX);if(pos){var isAddNewRow=pos.row==getDataLength();scrollCellIntoView(pos.row,pos.cell,!isAddNewRow);setActiveCellInternal(getCellNode(pos.row,pos.cell));activePosX=pos.posX;return true}else{setActiveCellInternal(getCellNode(activeRow,
activeCell));return false}}function getCellNode(row,cell){if(rowsCache[row]){ensureCellNodesInRowsCache(row);return rowsCache[row].cellNodesByColumnIdx[cell]}return null}function setActiveCell(row,cell){if(!initialized)return;if(row>getDataLength()||(row<0||(cell>=columns.length||cell<0)))return;if(!options.enableCellNavigation)return;scrollCellIntoView(row,cell,false);setActiveCellInternal(getCellNode(row,cell),false)}function canCellBeActive(row,cell){if(!options.enableCellNavigation||(row>=getDataLengthIncludingAddNew()||
(row<0||(cell>=columns.length||cell<0))))return false;var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.focusable==="boolean")return rowMetadata.focusable;var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&(columnMetadata[columns[cell].id]&&typeof columnMetadata[columns[cell].id].focusable==="boolean"))return columnMetadata[columns[cell].id].focusable;if(columnMetadata&&(columnMetadata[cell]&&typeof columnMetadata[cell].focusable===
"boolean"))return columnMetadata[cell].focusable;return columns[cell].focusable}function canCellBeSelected(row,cell){if(row>=getDataLength()||(row<0||(cell>=columns.length||cell<0)))return false;var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.selectable==="boolean")return rowMetadata.selectable;var columnMetadata=rowMetadata&&(rowMetadata.columns&&(rowMetadata.columns[columns[cell].id]||rowMetadata.columns[cell]));if(columnMetadata&&typeof columnMetadata.selectable===
"boolean")return columnMetadata.selectable;return columns[cell].selectable}function gotoCell(row,cell,forceEdit){if(!initialized)return;if(!canCellBeActive(row,cell))return;if(!getEditorLock().commitCurrentEdit())return;scrollCellIntoView(row,cell,false);var newCell=getCellNode(row,cell);setActiveCellInternal(newCell,forceEdit||(row===getDataLength()||options.autoEdit));if(!currentEditor)setFocus()}function commitCurrentEdit(){var item=getDataItem(activeRow);var column=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var validationResults=
currentEditor.validate();if(validationResults.valid){if(activeRow<getDataLength()){var editCommand={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(item,this.serializedValue);updateRow(this.row)},undo:function(){this.editor.applyValue(item,this.prevSerializedValue);updateRow(this.row)}};if(options.editCommandHandler){makeActiveCellNormal();options.editCommandHandler(item,
column,editCommand)}else{editCommand.execute();makeActiveCellNormal()}trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:item})}else{var newItem={};currentEditor.applyValue(newItem,currentEditor.serializeValue());makeActiveCellNormal();trigger(self.onAddNewRow,{item:newItem,column:column})}return!getEditorLock().isActive()}else{$(activeCellNode).removeClass("invalid");$(activeCellNode).width();$(activeCellNode).addClass("invalid");trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,
validationResults:validationResults,row:activeRow,cell:activeCell,column:column});currentEditor.focus();return false}}makeActiveCellNormal()}return true}function cancelCurrentEdit(){makeActiveCellNormal();return true}function rowsToRanges(rows){var ranges=[];var lastCell=columns.length-1;for(var i=0;i<rows.length;i++)ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell));return ranges}function getSelectedRows(){if(!selectionModel)throw"Selection model is not set";return selectedRows}function setSelectedRows(rows){if(!selectionModel)throw"Selection model is not set";
selectionModel.setSelectedRanges(rowsToRanges(rows))}this.debug=function(){var s="";s+="\n"+"counter_rows_rendered:  "+counter_rows_rendered;s+="\n"+"counter_rows_removed:  "+counter_rows_removed;s+="\n"+"renderedRows:  "+renderedRows;s+="\n"+"numVisibleRows:  "+numVisibleRows;s+="\n"+"maxSupportedCssHeight:  "+maxSupportedCssHeight;s+="\n"+"n(umber of pages):  "+n;s+="\n"+"(current) page:  "+page;s+="\n"+"page height (ph):  "+ph;s+="\n"+"vScrollDir:  "+vScrollDir;alert(s)};this.eval=function(expr){return eval(expr)};
$.extend(this,{"slickGridVersion":"2.1","onScroll":new Slick.Event,"onSort":new Slick.Event,"onHeaderMouseEnter":new Slick.Event,"onHeaderMouseLeave":new Slick.Event,"onHeaderContextMenu":new Slick.Event,"onHeaderClick":new Slick.Event,"onHeaderCellRendered":new Slick.Event,"onBeforeHeaderCellDestroy":new Slick.Event,"onHeaderRowCellRendered":new Slick.Event,"onBeforeHeaderRowCellDestroy":new Slick.Event,"onMouseEnter":new Slick.Event,"onMouseLeave":new Slick.Event,"onClick":new Slick.Event,"onDblClick":new Slick.Event,
"onContextMenu":new Slick.Event,"onKeyDown":new Slick.Event,"onAddNewRow":new Slick.Event,"onValidationError":new Slick.Event,"onViewportChanged":new Slick.Event,"onColumnsReordered":new Slick.Event,"onColumnsResized":new Slick.Event,"onCellChange":new Slick.Event,"onBeforeEditCell":new Slick.Event,"onBeforeCellEditorDestroy":new Slick.Event,"onBeforeDestroy":new Slick.Event,"onActiveCellChanged":new Slick.Event,"onActiveCellPositionChanged":new Slick.Event,"onDragInit":new Slick.Event,"onDragStart":new Slick.Event,
"onDrag":new Slick.Event,"onDragEnd":new Slick.Event,"onSelectedRowsChanged":new Slick.Event,"onCellCssStylesChanged":new Slick.Event,"registerPlugin":registerPlugin,"unregisterPlugin":unregisterPlugin,"getColumns":getColumns,"setColumns":setColumns,"getColumnIndex":getColumnIndex,"updateColumnHeader":updateColumnHeader,"setSortColumn":setSortColumn,"setSortColumns":setSortColumns,"getSortColumns":getSortColumns,"autosizeColumns":autosizeColumns,"getOptions":getOptions,"setOptions":setOptions,"getData":getData,
"getDataLength":getDataLength,"getDataItem":getDataItem,"setData":setData,"getSelectionModel":getSelectionModel,"setSelectionModel":setSelectionModel,"getSelectedRows":getSelectedRows,"setSelectedRows":setSelectedRows,"getContainerNode":getContainerNode,"render":render,"invalidate":invalidate,"invalidateRow":invalidateRow,"invalidateRows":invalidateRows,"invalidateAllRows":invalidateAllRows,"updateCell":updateCell,"updateRow":updateRow,"getViewport":getVisibleRange,"getRenderedRange":getRenderedRange,
"resizeCanvas":resizeCanvas,"updateRowCount":updateRowCount,"scrollRowIntoView":scrollRowIntoView,"scrollRowToTop":scrollRowToTop,"scrollCellIntoView":scrollCellIntoView,"getCanvasNode":getCanvasNode,"focus":setFocus,"getCellFromPoint":getCellFromPoint,"getCellFromEvent":getCellFromEvent,"getActiveCell":getActiveCell,"setActiveCell":setActiveCell,"getActiveCellNode":getActiveCellNode,"getActiveCellPosition":getActiveCellPosition,"resetActiveCell":resetActiveCell,"editActiveCell":makeActiveCellEditable,
"getCellEditor":getCellEditor,"getCellNode":getCellNode,"getCellNodeBox":getCellNodeBox,"canCellBeSelected":canCellBeSelected,"canCellBeActive":canCellBeActive,"navigatePrev":navigatePrev,"navigateNext":navigateNext,"navigateUp":navigateUp,"navigateDown":navigateDown,"navigateLeft":navigateLeft,"navigateRight":navigateRight,"navigatePageUp":navigatePageUp,"navigatePageDown":navigatePageDown,"gotoCell":gotoCell,"getTopPanel":getTopPanel,"setTopPanelVisibility":setTopPanelVisibility,"setHeaderRowVisibility":setHeaderRowVisibility,
"getHeaderRow":getHeaderRow,"getHeaderRowColumn":getHeaderRowColumn,"getGridPosition":getGridPosition,"flashCell":flashCell,"addCellCssStyles":addCellCssStyles,"setCellCssStyles":setCellCssStyles,"removeCellCssStyles":removeCellCssStyles,"getCellCssStyles":getCellCssStyles,"init":finishInitialization,"destroy":destroy,"getEditorLock":getEditorLock,"getEditController":getEditController});init()}})(jQuery);
(function($){function SlickGridPager(dataView,grid,$container){var $status;function init(){dataView.onPagingInfoChanged.subscribe(function(e,pagingInfo){updatePager(pagingInfo)});constructPagerUI();updatePager(dataView.getPagingInfo())}function getNavState(){var cannotLeaveEditMode=!Slick.GlobalEditorLock.commitCurrentEdit();var pagingInfo=dataView.getPagingInfo();var lastPage=pagingInfo.totalPages-1;return{canGotoFirst:!cannotLeaveEditMode&&(pagingInfo.pageSize!=0&&pagingInfo.pageNum>0),canGotoLast:!cannotLeaveEditMode&&
(pagingInfo.pageSize!=0&&pagingInfo.pageNum!=lastPage),canGotoPrev:!cannotLeaveEditMode&&(pagingInfo.pageSize!=0&&pagingInfo.pageNum>0),canGotoNext:!cannotLeaveEditMode&&(pagingInfo.pageSize!=0&&pagingInfo.pageNum<lastPage),pagingInfo:pagingInfo}}function setPageSize(n){dataView.setRefreshHints({isFilterUnchanged:true});dataView.setPagingOptions({pageSize:n})}function gotoFirst(){if(getNavState().canGotoFirst)dataView.setPagingOptions({pageNum:0})}function gotoLast(){var state=getNavState();if(state.canGotoLast)dataView.setPagingOptions({pageNum:state.pagingInfo.totalPages-
1})}function gotoPrev(){var state=getNavState();if(state.canGotoPrev)dataView.setPagingOptions({pageNum:state.pagingInfo.pageNum-1})}function gotoNext(){var state=getNavState();if(state.canGotoNext)dataView.setPagingOptions({pageNum:state.pagingInfo.pageNum+1})}function constructPagerUI(){$container.empty();var $nav=$("\x3cspan class\x3d'slick-pager-nav' /\x3e").appendTo($container);var $settings=$("\x3cspan class\x3d'slick-pager-settings' /\x3e").appendTo($container);$status=$("\x3cspan class\x3d'slick-pager-status' /\x3e").appendTo($container);
$settings.append("\x3cspan class\x3d'slick-pager-settings-expanded' style\x3d'display:none'\x3eShow: \x3ca data\x3d0\x3eAll\x3c/a\x3e\x3ca data\x3d'-1'\x3eAuto\x3c/a\x3e\x3ca data\x3d25\x3e25\x3c/a\x3e\x3ca data\x3d50\x3e50\x3c/a\x3e\x3ca data\x3d100\x3e100\x3c/a\x3e\x3c/span\x3e");$settings.find("a[data]").click(function(e){var pagesize=$(e.target).attr("data");if(pagesize!=undefined)if(pagesize==-1){var vp=grid.getViewport();setPageSize(vp.bottom-vp.top)}else setPageSize(parseInt(pagesize))});var icon_prefix=
"\x3cspan class\x3d'ui-state-default ui-corner-all ui-icon-container'\x3e\x3cspan class\x3d'ui-icon ";var icon_suffix="' /\x3e\x3c/span\x3e";$(icon_prefix+"ui-icon-lightbulb"+icon_suffix).click(function(){$(".slick-pager-settings-expanded").toggle()}).appendTo($settings);$(icon_prefix+"ui-icon-seek-first"+icon_suffix).click(gotoFirst).appendTo($nav);$(icon_prefix+"ui-icon-seek-prev"+icon_suffix).click(gotoPrev).appendTo($nav);$(icon_prefix+"ui-icon-seek-next"+icon_suffix).click(gotoNext).appendTo($nav);
$(icon_prefix+"ui-icon-seek-end"+icon_suffix).click(gotoLast).appendTo($nav);$container.find(".ui-icon-container").hover(function(){$(this).toggleClass("ui-state-hover")});$container.children().wrapAll("\x3cdiv class\x3d'slick-pager' /\x3e")}function updatePager(pagingInfo){var state=getNavState();$container.find(".slick-pager-nav span").removeClass("ui-state-disabled");if(!state.canGotoFirst)$container.find(".ui-icon-seek-first").addClass("ui-state-disabled");if(!state.canGotoLast)$container.find(".ui-icon-seek-end").addClass("ui-state-disabled");
if(!state.canGotoNext)$container.find(".ui-icon-seek-next").addClass("ui-state-disabled");if(!state.canGotoPrev)$container.find(".ui-icon-seek-prev").addClass("ui-state-disabled");if(pagingInfo.pageSize==0)$status.text("Showing all "+pagingInfo.totalRows+" rows");else $status.text("Showing page "+(pagingInfo.pageNum+1)+" of "+pagingInfo.totalPages)}init()}$.extend(true,window,{Slick:{Controls:{Pager:SlickGridPager}}})})(jQuery);
(function($){$.extend(true,window,{"Slick":{"RowMoveManager":RowMoveManager}});function RowMoveManager(options){var _grid;var _canvas;var _dragging;var _self=this;var _handler=new Slick.EventHandler;var _defaults={cancelEditOnDrag:false};function init(grid){options=$.extend(true,{},_defaults,options);_grid=grid;_canvas=_grid.getCanvasNode();_handler.subscribe(_grid.onDragInit,handleDragInit).subscribe(_grid.onDragStart,handleDragStart).subscribe(_grid.onDrag,handleDrag).subscribe(_grid.onDragEnd,
handleDragEnd)}function destroy(){_handler.unsubscribeAll()}function handleDragInit(e,dd){e.stopImmediatePropagation()}function handleDragStart(e,dd){var cell=_grid.getCellFromEvent(e);if(options.cancelEditOnDrag&&_grid.getEditorLock().isActive())_grid.getEditorLock().cancelCurrentEdit();if(_grid.getEditorLock().isActive()||!/move|selectAndMove/.test(_grid.getColumns()[cell.cell].behavior))return false;_dragging=true;e.stopImmediatePropagation();var selectedRows=_grid.getSelectedRows();if(selectedRows.length==
0||$.inArray(cell.row,selectedRows)==-1){selectedRows=[cell.row];_grid.setSelectedRows(selectedRows)}var rowHeight=_grid.getOptions().rowHeight;dd.selectedRows=selectedRows;dd.selectionProxy=$("\x3cdiv class\x3d'slick-reorder-proxy'/\x3e").css("position","absolute").css("zIndex","99999").css("width",$(_canvas).innerWidth()).css("height",rowHeight*selectedRows.length).appendTo(_canvas);dd.guide=$("\x3cdiv class\x3d'slick-reorder-guide'/\x3e").css("position","absolute").css("zIndex","99998").css("width",
$(_canvas).innerWidth()).css("top",-1E3).appendTo(_canvas);dd.insertBefore=-1}function handleDrag(e,dd){if(!_dragging)return;e.stopImmediatePropagation();var top=e.pageY-$(_canvas).offset().top;dd.selectionProxy.css("top",top-5);var insertBefore=Math.max(0,Math.min(Math.round(top/_grid.getOptions().rowHeight),_grid.getDataLength()));if(insertBefore!==dd.insertBefore){var eventData={"rows":dd.selectedRows,"insertBefore":insertBefore};if(_self.onBeforeMoveRows.notify(eventData)===false){dd.guide.css("top",
-1E3);dd.canMove=false}else{dd.guide.css("top",insertBefore*_grid.getOptions().rowHeight);dd.canMove=true}dd.insertBefore=insertBefore}}function handleDragEnd(e,dd){if(!_dragging)return;_dragging=false;e.stopImmediatePropagation();dd.guide.remove();dd.selectionProxy.remove();if(dd.canMove){var eventData={"rows":dd.selectedRows,"insertBefore":dd.insertBefore};_self.onMoveRows.notify(eventData)}}$.extend(this,{"onBeforeMoveRows":new Slick.Event,"onMoveRows":new Slick.Event,"init":init,"destroy":destroy})}
})(jQuery);
(function($){$.extend(true,window,{"Slick":{"RowSelectionModel":RowSelectionModel}});function RowSelectionModel(options){var _grid;var _ranges=[];var _self=this;var _handler=new Slick.EventHandler;var _inHandler;var _options;var _defaults={selectActiveRow:true};function init(grid){_options=$.extend(true,{},_defaults,options);_grid=grid;_handler.subscribe(_grid.onActiveCellChanged,wrapHandler(handleActiveCellChange));_handler.subscribe(_grid.onKeyDown,wrapHandler(handleKeyDown));_handler.subscribe(_grid.onClick,wrapHandler(handleClick))}
function destroy(){_handler.unsubscribeAll()}function wrapHandler(handler){return function(){if(!_inHandler){_inHandler=true;handler.apply(this,arguments);_inHandler=false}}}function rangesToRows(ranges){var rows=[];for(var i=0;i<ranges.length;i++)for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++)rows.push(j);return rows}function rowsToRanges(rows){var ranges=[];var lastCell=_grid.getColumns().length-1;for(var i=0;i<rows.length;i++)ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell));return ranges}
function getRowsRange(from,to){var i,rows=[];for(i=from;i<=to;i++)rows.push(i);for(i=to;i<from;i++)rows.push(i);return rows}function getSelectedRows(){return rangesToRows(_ranges)}function setSelectedRows(rows){setSelectedRanges(rowsToRanges(rows))}function setSelectedRanges(ranges){_ranges=ranges;_self.onSelectedRangesChanged.notify(_ranges)}function getSelectedRanges(){return _ranges}function handleActiveCellChange(e,data){if(_options.selectActiveRow&&data.row!=null)setSelectedRanges([new Slick.Range(data.row,
0,data.row,_grid.getColumns().length-1)])}function handleKeyDown(e){var activeRow=_grid.getActiveCell();if(activeRow&&(e.shiftKey&&(!e.ctrlKey&&(!e.altKey&&(!e.metaKey&&(e.which==38||e.which==40)))))){var selectedRows=getSelectedRows();selectedRows.sort(function(x,y){return x-y});if(!selectedRows.length)selectedRows=[activeRow.row];var top=selectedRows[0];var bottom=selectedRows[selectedRows.length-1];var active;if(e.which==40)active=activeRow.row<bottom||top==bottom?++bottom:++top;else active=activeRow.row<
bottom?--bottom:--top;if(active>=0&&active<_grid.getDataLength()){_grid.scrollRowIntoView(active);_ranges=rowsToRanges(getRowsRange(top,bottom));setSelectedRanges(_ranges)}e.preventDefault();e.stopPropagation()}}function handleClick(e){var cell=_grid.getCellFromEvent(e);if(!cell||!_grid.canCellBeActive(cell.row,cell.cell))return false;var selection=rangesToRows(_ranges);var idx=$.inArray(cell.row,selection);if(!e.ctrlKey&&(!e.shiftKey&&!e.metaKey))return false;else if(_grid.getOptions().multiSelect)if(idx===
-1&&(e.ctrlKey||e.metaKey)){selection.push(cell.row);_grid.setActiveCell(cell.row,cell.cell)}else if(idx!==-1&&(e.ctrlKey||e.metaKey)){selection=$.grep(selection,function(o,i){return o!==cell.row});_grid.setActiveCell(cell.row,cell.cell)}else if(selection.length&&e.shiftKey){var last=selection.pop();var from=Math.min(cell.row,last);var to=Math.max(cell.row,last);selection=[];for(var i=from;i<=to;i++)if(i!==last)selection.push(i);selection.push(last);_grid.setActiveCell(cell.row,cell.cell)}_ranges=
rowsToRanges(selection);setSelectedRanges(_ranges);e.stopImmediatePropagation();return true}$.extend(this,{"getSelectedRows":getSelectedRows,"setSelectedRows":setSelectedRows,"getSelectedRanges":getSelectedRanges,"setSelectedRanges":setSelectedRanges,"init":init,"destroy":destroy,"onSelectedRangesChanged":new Slick.Event})}})(jQuery);
CodeMirror.defineMode("sql",function(config,parserConfig){var client=parserConfig.client||{},atoms=parserConfig.atoms||{"false":true,"true":true,"null":true},builtin=parserConfig.builtin||{},keywords=parserConfig.keywords||{},operatorChars=parserConfig.operatorChars||/^[*+\-%<>!=&|~^]/,support=parserConfig.support||{},hooks=parserConfig.hooks||{},dateSQL=parserConfig.dateSQL||{"date":true,"time":true,"timestamp":true};function tokenBase(stream,state){var ch=stream.next();if(hooks[ch]){var result=
hooks[ch](stream,state);if(result!==false)return result}if(support.hexNumber==true&&(ch=="0"&&stream.match(/^[xX][0-9a-fA-F]+/)||(ch=="x"||ch=="X")&&stream.match(/^'[0-9a-fA-F]+'/)))return"number";else if(support.binaryNumber==true&&((ch=="b"||ch=="B")&&stream.match(/^'[01]+'/)||ch=="0"&&stream.match(/^b[01]+/)))return"number";else if(ch.charCodeAt(0)>47&&ch.charCodeAt(0)<58){stream.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/);support.decimallessFloat==true&&stream.eat(".");return"number"}else if(ch==
"?"&&(stream.eatSpace()||(stream.eol()||stream.eat(";"))))return"variable-3";else if(ch=="'"||ch=='"'&&support.doubleQuote){state.tokenize=tokenLiteral(ch);return state.tokenize(stream,state)}else if((support.nCharCast==true&&(ch=="n"||ch=="N")||support.charsetCast==true&&(ch=="_"&&stream.match(/[a-z][a-z0-9]*/i)))&&(stream.peek()=="'"||stream.peek()=='"'))return"keyword";else if(/^[\(\),\;\[\]]/.test(ch))return null;else if(support.commentSlashSlash&&(ch=="/"&&stream.eat("/"))){stream.skipToEnd();
return"comment"}else if(support.commentHash&&ch=="#"||ch=="-"&&(stream.eat("-")&&(!support.commentSpaceRequired||stream.eat(" ")))){stream.skipToEnd();return"comment"}else if(ch=="/"&&stream.eat("*")){state.tokenize=tokenComment;return state.tokenize(stream,state)}else if(ch=="."){if(support.zerolessFloat==true&&stream.match(/^(?:\d+(?:e[+-]?\d+)?)/i))return"number";if(support.ODBCdotTable==true&&stream.match(/^[a-zA-Z_]+/))return"variable-2"}else if(operatorChars.test(ch)){stream.eatWhile(operatorChars);
return null}else if(ch=="{"&&(stream.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||stream.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";else{stream.eatWhile(/^[_\w\d]/);var word=stream.current().toLowerCase();if(dateSQL.hasOwnProperty(word)&&(stream.match(/^( )+'[^']*'/)||stream.match(/^( )+"[^"]*"/)))return"number";if(atoms.hasOwnProperty(word))return"atom";if(builtin.hasOwnProperty(word))return"builtin";if(keywords.hasOwnProperty(word))return"keyword";if(client.hasOwnProperty(word))return"string-2";
return null}}function tokenLiteral(quote){return function(stream,state){var escaped=false,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped){state.tokenize=tokenBase;break}escaped=!escaped&&ch=="\\"}return"string"}}function tokenComment(stream,state){while(true)if(stream.skipTo("*")){stream.next();if(stream.eat("/")){state.tokenize=tokenBase;break}}else{stream.skipToEnd();break}return"comment"}function pushContext(stream,state,type){state.context={prev:state.context,indent:stream.indentation(),
col:stream.column(),type:type}}function popContext(state){state.indent=state.context.indent;state.context=state.context.prev}return{startState:function(){return{tokenize:tokenBase,context:null}},token:function(stream,state){if(stream.sol())if(state.context&&state.context.align==null)state.context.align=false;if(stream.eatSpace())return null;var style=state.tokenize(stream,state);if(style=="comment")return style;if(state.context&&state.context.align==null)state.context.align=true;var tok=stream.current();
if(tok=="(")pushContext(stream,state,")");else if(tok=="[")pushContext(stream,state,"]");else if(state.context&&state.context.type==tok)popContext(state);return style},indent:function(state,textAfter){var cx=state.context;if(!cx)return CodeMirror.Pass;if(cx.align)return cx.col+(textAfter.charAt(0)==cx.type?0:1);else return cx.indent+config.indentUnit},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:support.commentSlashSlash?"//":support.commentHash?"#":null}});
(function(){function hookIdentifier(stream){var ch;while((ch=stream.next())!=null)if(ch=="`"&&!stream.eat("`"))return"variable-2";return null}function hookVar(stream){if(stream.eat("@")){stream.match(/^session\./);stream.match(/^local\./);stream.match(/^global\./)}if(stream.eat("'")){stream.match(/^.*'/);return"variable-2"}else if(stream.eat('"')){stream.match(/^.*"/);return"variable-2"}else if(stream.eat("`")){stream.match(/^.*`/);return"variable-2"}else if(stream.match(/^[0-9a-zA-Z$\.\_]+/))return"variable-2";
return null}function hookClient(stream){if(stream.eat("N"))return"atom";return stream.match(/^[a-zA-Z.#!?]/)?"variable-2":null}var sqlKeywords="alter and as asc between by count create delete desc distinct drop from having in insert into is join like not on or order select set table union update values where ";function set(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=true;return obj}CodeMirror.defineMIME("text/x-sql",{name:"sql",keywords:set(sqlKeywords+"begin"),
builtin:set("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable doubleQuote binaryNumber hexNumber")});CodeMirror.defineMIME("text/x-mssql",
{name:"sql",client:set("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:set(sqlKeywords+"begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered"),builtin:set("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:set("false true null unknown"),
operatorChars:/^[*+\-%<>!=]/,dateSQL:set("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":hookVar}});CodeMirror.defineMIME("text/x-mysql",{name:"sql",client:set("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:set(sqlKeywords+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group groupby_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:set("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":hookVar,"`":hookIdentifier,"\\":hookClient}});CodeMirror.defineMIME("text/x-mariadb",{name:"sql",client:set("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:set(sqlKeywords+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:set("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":hookVar,"`":hookIdentifier,"\\":hookClient}});CodeMirror.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:set("use select from using consistency where limit first reversed first and in insert into values using consistency ttl update set delete truncate begin batch apply create keyspace with columnfamily primary key index on drop alter type add any one quorum all local_quorum each_quorum"),builtin:set("ascii bigint blob boolean counter decimal double float int text timestamp uuid varchar varint"),
atoms:set("false true"),operatorChars:/^[<>=]/,dateSQL:{},support:set("commentSlashSlash decimallessFloat"),hooks:{}});CodeMirror.defineMIME("text/x-plsql",{name:"sql",client:set("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),
keywords:set("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),
builtin:set("bfile blob character clob dec float int integer mlslabel natural naturaln nchar nclob number numeric nvarchar2 real rowtype signtype smallint string varchar varchar2 abs acos add_months ascii asin atan atan2 average bfilename ceil chartorowid chr concat convert cos cosh count decode deref dual dump dup_val_on_index empty error exp false floor found glb greatest hextoraw initcap instr instrb isopen last_day least lenght lenghtb ln lower lpad ltrim lub make_ref max min mod months_between new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null nvl others power rawtohex reftohex round rowcount rowidtochar rpad rtrim sign sin sinh soundex sqlcode sqlerrm sqrt stddev substr substrb sum sysdate tan tanh to_char to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid upper user userenv variance vsize"),
operatorChars:/^[*+\-%<>!=~]/,dateSQL:set("date time timestamp"),support:set("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")})})();
(function(){var $,BorderDropHint,DragAndDropHandler,DragElement,FolderElement,GhostDropHint,HitAreasGenerator,JqTreeWidget,KeyHandler,MouseWidget,Node,NodeElement,Position,SaveStateHandler,ScrollHandler,SelectNodeHandler,SimpleWidget,VisibleNodeIterator,html_escape,indexOf,json_escapable,json_meta,json_quote,json_str,_indexOf,_ref,_ref1,_ref2,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent)if(__hasProp.call(parent,key))child[key]=parent[key];function ctor(){this.constructor=
child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};$=this.jQuery;SimpleWidget=function(){SimpleWidget.prototype.defaults={};function SimpleWidget(el,options){this.$el=$(el);this.options=$.extend({},this.defaults,options)}SimpleWidget.prototype.destroy=function(){return this._deinit()};SimpleWidget.prototype._init=function(){return null};SimpleWidget.prototype._deinit=function(){return null};SimpleWidget.register=function(widget_class,widget_name){var callFunction,
createWidget,destroyWidget,getDataKey;getDataKey=function(){return"simple_widget_"+widget_name};createWidget=function($el,options){var data_key,el,widget,_i,_len;data_key=getDataKey();for(_i=0,_len=$el.length;_i<_len;_i++){el=$el[_i];widget=new widget_class(el,options);if(!$.data(el,data_key))$.data(el,data_key,widget);widget._init()}return $el};destroyWidget=function($el){var data_key,el,widget,_i,_len,_results;data_key=getDataKey();_results=[];for(_i=0,_len=$el.length;_i<_len;_i++){el=$el[_i];widget=
$.data(el,data_key);if(widget&&widget instanceof SimpleWidget)widget.destroy();_results.push($.removeData(el,data_key))}return _results};callFunction=function($el,function_name,args){var el,result,widget,widget_function,_i,_len;result=null;for(_i=0,_len=$el.length;_i<_len;_i++){el=$el[_i];widget=$.data(el,getDataKey());if(widget&&widget instanceof SimpleWidget){widget_function=widget[function_name];if(widget_function&&typeof widget_function==="function")result=widget_function.apply(widget,args)}}return result};
return $.fn[widget_name]=function(){var $el,args,argument1,function_name,options;argument1=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];$el=this;if(argument1===void 0||typeof argument1==="object"){options=argument1;return createWidget($el,options)}else if(typeof argument1==="string"&&argument1[0]!=="_"){function_name=argument1;if(function_name==="destroy")return destroyWidget($el);else return callFunction($el,function_name,args)}}};return SimpleWidget}();this.SimpleWidget=SimpleWidget;
MouseWidget=function(_super){__extends(MouseWidget,_super);function MouseWidget(){_ref=MouseWidget.__super__.constructor.apply(this,arguments);return _ref}MouseWidget.is_mouse_handled=false;MouseWidget.prototype._init=function(){this.$el.bind("mousedown.mousewidget",$.proxy(this._mouseDown,this));this.$el.bind("touchstart.mousewidget",$.proxy(this._touchStart,this));this.is_mouse_started=false;this.mouse_delay=0;this._mouse_delay_timer=null;this._is_mouse_delay_met=true;return this.mouse_down_info=
null};MouseWidget.prototype._deinit=function(){var $document;this.$el.unbind("mousedown.mousewidget");this.$el.unbind("touchstart.mousewidget");$document=$(document);$document.unbind("mousemove.mousewidget");return $document.unbind("mouseup.mousewidget")};MouseWidget.prototype._mouseDown=function(e){var result;if(e.which!==1)return;result=this._handleMouseDown(e,this._getPositionInfo(e));if(result)e.preventDefault();return result};MouseWidget.prototype._handleMouseDown=function(e,position_info){if(MouseWidget.is_mouse_handled)return;
if(this.is_mouse_started)this._handleMouseUp(position_info);this.mouse_down_info=position_info;if(!this._mouseCapture(position_info))return;this._handleStartMouse();this.is_mouse_handled=true;return true};MouseWidget.prototype._handleStartMouse=function(){var $document;$document=$(document);$document.bind("mousemove.mousewidget",$.proxy(this._mouseMove,this));$document.bind("touchmove.mousewidget",$.proxy(this._touchMove,this));$document.bind("mouseup.mousewidget",$.proxy(this._mouseUp,this));$document.bind("touchend.mousewidget",
$.proxy(this._touchEnd,this));if(this.mouse_delay)return this._startMouseDelayTimer()};MouseWidget.prototype._startMouseDelayTimer=function(){var _this=this;if(this._mouse_delay_timer)clearTimeout(this._mouse_delay_timer);this._mouse_delay_timer=setTimeout(function(){return _this._is_mouse_delay_met=true},this.mouse_delay);return this._is_mouse_delay_met=false};MouseWidget.prototype._mouseMove=function(e){return this._handleMouseMove(e,this._getPositionInfo(e))};MouseWidget.prototype._handleMouseMove=
function(e,position_info){if(this.is_mouse_started){this._mouseDrag(position_info);return e.preventDefault()}if(this.mouse_delay&&!this._is_mouse_delay_met)return true;this.is_mouse_started=this._mouseStart(this.mouse_down_info)!==false;if(this.is_mouse_started)this._mouseDrag(position_info);else this._handleMouseUp(position_info);return!this.is_mouse_started};MouseWidget.prototype._getPositionInfo=function(e){return{page_x:e.pageX,page_y:e.pageY,target:e.target,original_event:e}};MouseWidget.prototype._mouseUp=
function(e){return this._handleMouseUp(this._getPositionInfo(e))};MouseWidget.prototype._handleMouseUp=function(position_info){var $document;$document=$(document);$document.unbind("mousemove.mousewidget");$document.unbind("touchmove.mousewidget");$document.unbind("mouseup.mousewidget");$document.unbind("touchend.mousewidget");if(this.is_mouse_started){this.is_mouse_started=false;this._mouseStop(position_info)}};MouseWidget.prototype._mouseCapture=function(position_info){return true};MouseWidget.prototype._mouseStart=
function(position_info){return null};MouseWidget.prototype._mouseDrag=function(position_info){return null};MouseWidget.prototype._mouseStop=function(position_info){return null};MouseWidget.prototype.setMouseDelay=function(mouse_delay){return this.mouse_delay=mouse_delay};MouseWidget.prototype._touchStart=function(e){var touch;if(e.originalEvent.touches.length>1)return;touch=e.originalEvent.changedTouches[0];return this._handleMouseDown(e,this._getPositionInfo(touch))};MouseWidget.prototype._touchMove=
function(e){var touch;if(e.originalEvent.touches.length>1)return;touch=e.originalEvent.changedTouches[0];return this._handleMouseMove(e,this._getPositionInfo(touch))};MouseWidget.prototype._touchEnd=function(e){var touch;if(e.originalEvent.touches.length>1)return;touch=e.originalEvent.changedTouches[0];return this._handleMouseUp(this._getPositionInfo(touch))};return MouseWidget}(SimpleWidget);this.Tree={};$=this.jQuery;Position={getName:function(position){return Position.strings[position-1]},nameToIndex:function(name){var i,
_i,_ref1;for(i=_i=1,_ref1=Position.strings.length;1<=_ref1?_i<=_ref1:_i>=_ref1;i=1<=_ref1?++_i:--_i)if(Position.strings[i-1]===name)return i;return 0}};Position.BEFORE=1;Position.AFTER=2;Position.INSIDE=3;Position.NONE=4;Position.strings=["before","after","inside","none"];this.Tree.Position=Position;Node=function(){function Node(o,is_root,node_class){if(is_root==null)is_root=false;if(node_class==null)node_class=Node;this.setData(o);this.children=[];this.parent=null;if(is_root){this.id_mapping={};
this.tree=this;this.node_class=node_class}}Node.prototype.setData=function(o){var key,value,_results;if(typeof o!=="object")return this.name=o;else{_results=[];for(key in o){value=o[key];if(key==="label")_results.push(this.name=value);else _results.push(this[key]=value)}return _results}};Node.prototype.initFromData=function(data){var addChildren,addNode,_this=this;addNode=function(node_data){_this.setData(node_data);if(node_data.children)return addChildren(node_data.children)};addChildren=function(children_data){var child,
node,_i,_len;for(_i=0,_len=children_data.length;_i<_len;_i++){child=children_data[_i];node=new _this.tree.node_class("");node.initFromData(child);_this.addChild(node)}return null};addNode(data);return null};Node.prototype.loadFromData=function(data){var node,o,_i,_len;this.removeChildren();for(_i=0,_len=data.length;_i<_len;_i++){o=data[_i];node=new this.tree.node_class(o);this.addChild(node);if(typeof o==="object"&&o.children)node.loadFromData(o.children)}return null};Node.prototype.addChild=function(node){this.children.push(node);
return node._setParent(this)};Node.prototype.addChildAtPosition=function(node,index){this.children.splice(index,0,node);return node._setParent(this)};Node.prototype._setParent=function(parent){this.parent=parent;this.tree=parent.tree;return this.tree.addNodeToIndex(this)};Node.prototype.removeChild=function(node){node.removeChildren();return this._removeChild(node)};Node.prototype._removeChild=function(node){this.children.splice(this.getChildIndex(node),1);return this.tree.removeNodeFromIndex(node)};
Node.prototype.getChildIndex=function(node){return $.inArray(node,this.children)};Node.prototype.hasChildren=function(){return this.children.length!==0};Node.prototype.isFolder=function(){return this.hasChildren()||this.load_on_demand};Node.prototype.iterate=function(callback){var _iterate,_this=this;_iterate=function(node,level){var child,result,_i,_len,_ref1;if(node.children){_ref1=node.children;for(_i=0,_len=_ref1.length;_i<_len;_i++){child=_ref1[_i];result=callback(child,level);if(_this.hasChildren()&&
result)_iterate(child,level+1)}return null}};_iterate(this,0);return null};Node.prototype.moveNode=function(moved_node,target_node,position){if(moved_node.isParentOf(target_node))return;moved_node.parent._removeChild(moved_node);if(position===Position.AFTER)return target_node.parent.addChildAtPosition(moved_node,target_node.parent.getChildIndex(target_node)+1);else if(position===Position.BEFORE)return target_node.parent.addChildAtPosition(moved_node,target_node.parent.getChildIndex(target_node));
else if(position===Position.INSIDE)return target_node.addChildAtPosition(moved_node,0)};Node.prototype.getData=function(){var getDataFromNodes,_this=this;getDataFromNodes=function(nodes){var data,k,node,tmp_node,v,_i,_len;data=[];for(_i=0,_len=nodes.length;_i<_len;_i++){node=nodes[_i];tmp_node={};for(k in node){v=node[k];if(k!=="parent"&&(k!=="children"&&(k!=="element"&&k!=="tree"))&&Object.prototype.hasOwnProperty.call(node,k))tmp_node[k]=v}if(node.hasChildren())tmp_node.children=getDataFromNodes(node.children);
data.push(tmp_node)}return data};return getDataFromNodes(this.children)};Node.prototype.getNodeByName=function(name){var result;result=null;this.iterate(function(node){if(node.name===name){result=node;return false}else return true});return result};Node.prototype.addAfter=function(node_info){var child_index,node;if(!this.parent)return null;else{node=new this.tree.node_class(node_info);child_index=this.parent.getChildIndex(this);this.parent.addChildAtPosition(node,child_index+1);return node}};Node.prototype.addBefore=
function(node_info){var child_index,node;if(!this.parent)return null;else{node=new this.tree.node_class(node_info);child_index=this.parent.getChildIndex(this);this.parent.addChildAtPosition(node,child_index);return node}};Node.prototype.addParent=function(node_info){var child,new_parent,original_parent,_i,_len,_ref1;if(!this.parent)return null;else{new_parent=new this.tree.node_class(node_info);new_parent._setParent(this.tree);original_parent=this.parent;_ref1=original_parent.children;for(_i=0,_len=
_ref1.length;_i<_len;_i++){child=_ref1[_i];new_parent.addChild(child)}original_parent.children=[];original_parent.addChild(new_parent);return new_parent}};Node.prototype.remove=function(){if(this.parent){this.parent.removeChild(this);return this.parent=null}};Node.prototype.append=function(node_info){var node;node=new this.tree.node_class(node_info);this.addChild(node);return node};Node.prototype.prepend=function(node_info){var node;node=new this.tree.node_class(node_info);this.addChildAtPosition(node,
0);return node};Node.prototype.isParentOf=function(node){var parent;parent=node.parent;while(parent){if(parent===this)return true;parent=parent.parent}return false};Node.prototype.getLevel=function(){var level,node;level=0;node=this;while(node.parent){level+=1;node=node.parent}return level};Node.prototype.getNodeById=function(node_id){return this.id_mapping[node_id]};Node.prototype.addNodeToIndex=function(node){if(node.id!=null)return this.id_mapping[node.id]=node};Node.prototype.removeNodeFromIndex=
function(node){if(node.id!=null)return delete this.id_mapping[node.id]};Node.prototype.removeChildren=function(){var _this=this;this.iterate(function(child){_this.tree.removeNodeFromIndex(child);return true});return this.children=[]};Node.prototype.getPreviousSibling=function(){var previous_index;if(!this.parent)return null;else{previous_index=this.parent.getChildIndex(this)-1;if(previous_index>=0)return this.parent.children[previous_index];else return null}};Node.prototype.getNextSibling=function(){var next_index;
if(!this.parent)return null;else{next_index=this.parent.getChildIndex(this)+1;if(next_index<this.parent.children.length)return this.parent.children[next_index];else return null}};return Node}();this.Tree.Node=Node;JqTreeWidget=function(_super){__extends(JqTreeWidget,_super);function JqTreeWidget(){_ref1=JqTreeWidget.__super__.constructor.apply(this,arguments);return _ref1}JqTreeWidget.prototype.defaults={autoOpen:false,saveState:false,dragAndDrop:false,selectable:true,useContextMenu:true,onCanSelectNode:null,
onSetStateFromStorage:null,onGetStateFromStorage:null,onCreateLi:null,onIsMoveHandle:null,onCanMove:null,onCanMoveTo:null,onLoadFailed:null,autoEscape:true,dataUrl:null,closedIcon:"\x26#x25ba;",openedIcon:"\x26#x25bc;",slide:true,nodeClass:Node,dataFilter:null,keyboardSupport:true,openFolderDelay:500};JqTreeWidget.prototype.toggle=function(node,slide){if(slide==null)slide=true;if(node.is_open)return this.closeNode(node,slide);else return this.openNode(node,slide)};JqTreeWidget.prototype.getTree=function(){return this.tree};
JqTreeWidget.prototype.selectNode=function(node){return this._selectNode(node,false)};JqTreeWidget.prototype._selectNode=function(node,must_toggle){var canSelect,deselected_node,openParents,saveState,_this=this;if(must_toggle==null)must_toggle=false;if(!this.select_node_handler)return;canSelect=function(){if(_this.options.onCanSelectNode)return _this.options.selectable&&_this.options.onCanSelectNode(node);else return _this.options.selectable};openParents=function(){var parent;parent=node.parent;if(parent&&
(parent.parent&&!parent.is_open))return _this.openNode(parent,false)};saveState=function(){if(_this.options.saveState)return _this.save_state_handler.saveState()};if(!node){this._deselectCurrentNode();saveState();return}if(!canSelect())return;if(this.select_node_handler.isNodeSelected(node)){if(must_toggle){this._deselectCurrentNode();this._triggerEvent("tree.select",{node:null,previous_node:node})}}else{deselected_node=this.getSelectedNode();this._deselectCurrentNode();this.addToSelection(node);
this._triggerEvent("tree.select",{node:node,deselected_node:deselected_node});openParents()}return saveState()};JqTreeWidget.prototype.getSelectedNode=function(){return this.select_node_handler.getSelectedNode()};JqTreeWidget.prototype.toJson=function(){return JSON.stringify(this.tree.getData())};JqTreeWidget.prototype.loadData=function(data,parent_node){return this._loadData(data,parent_node)};JqTreeWidget.prototype.loadDataFromUrl=function(url,parent_node,on_finished){if($.type(url)!=="string"){on_finished=
parent_node;parent_node=url;url=null}return this._loadDataFromUrl(url,parent_node,on_finished)};JqTreeWidget.prototype._loadDataFromUrl=function(url_info,parent_node,on_finished){var $el,addLoadingClass,parseUrlInfo,removeLoadingClass,_this=this;$el=null;addLoadingClass=function(){var folder_element;if(!parent_node)$el=_this.element;else{folder_element=new FolderElement(parent_node,_this);$el=folder_element.getLi()}return $el.addClass("jqtree-loading")};removeLoadingClass=function(){if($el)return $el.removeClass("jqtree-loading")};
parseUrlInfo=function(){if($.type(url_info)==="string")url_info={url:url_info};if(!url_info.method)return url_info.method="get"};addLoadingClass();if(!url_info)url_info=this._getDataUrlInfo(parent_node);parseUrlInfo();return $.ajax({url:url_info.url,data:url_info.data,type:url_info.method.toUpperCase(),cache:false,dataType:"json",success:function(response){var data;if($.isArray(response)||typeof response==="object")data=response;else data=$.parseJSON(response);if(_this.options.dataFilter)data=_this.options.dataFilter(data);
removeLoadingClass();_this._loadData(data,parent_node);if(on_finished&&$.isFunction(on_finished))return on_finished()},error:function(response){removeLoadingClass();if(_this.options.onLoadFailed)return _this.options.onLoadFailed(response)}})};JqTreeWidget.prototype._loadData=function(data,parent_node){var n,selected_nodes_under_parent,_i,_len;if(!data)return;this._triggerEvent("tree.load_data",{tree_data:data});if(!parent_node)this._initTree(data);else{selected_nodes_under_parent=this.select_node_handler.getSelectedNodes(parent_node);
for(_i=0,_len=selected_nodes_under_parent.length;_i<_len;_i++){n=selected_nodes_under_parent[_i];this.select_node_handler.removeFromSelection(n)}parent_node.loadFromData(data);parent_node.load_on_demand=false;this._refreshElements(parent_node.parent)}if(this.is_dragging)return this.dnd_handler.refreshHitAreas()};JqTreeWidget.prototype.getNodeById=function(node_id){return this.tree.getNodeById(node_id)};JqTreeWidget.prototype.getNodeByName=function(name){return this.tree.getNodeByName(name)};JqTreeWidget.prototype.openNode=
function(node,slide){if(slide==null)slide=true;return this._openNode(node,slide)};JqTreeWidget.prototype._openNode=function(node,slide,on_finished){var doOpenNode,parent,_this=this;if(slide==null)slide=true;doOpenNode=function(_node,_slide,_on_finished){var folder_element;folder_element=new FolderElement(_node,_this);return folder_element.open(_on_finished,_slide)};if(node.isFolder())if(node.load_on_demand)return this._loadFolderOnDemand(node,slide,on_finished);else{parent=node.parent;while(parent&&
!parent.is_open){if(parent.parent)doOpenNode(parent,false,null);parent=parent.parent}doOpenNode(node,slide,on_finished);return this._saveState()}};JqTreeWidget.prototype._loadFolderOnDemand=function(node,slide,on_finished){var _this=this;if(slide==null)slide=true;return this._loadDataFromUrl(null,node,function(){return _this._openNode(node,slide,on_finished)})};JqTreeWidget.prototype.closeNode=function(node,slide){if(slide==null)slide=true;if(node.isFolder()){(new FolderElement(node,this)).close(slide);
return this._saveState()}};JqTreeWidget.prototype.isDragging=function(){return this.is_dragging};JqTreeWidget.prototype.refreshHitAreas=function(){return this.dnd_handler.refreshHitAreas()};JqTreeWidget.prototype.addNodeAfter=function(new_node_info,existing_node){var new_node;new_node=existing_node.addAfter(new_node_info);this._refreshElements(existing_node.parent);return new_node};JqTreeWidget.prototype.addNodeBefore=function(new_node_info,existing_node){var new_node;new_node=existing_node.addBefore(new_node_info);
this._refreshElements(existing_node.parent);return new_node};JqTreeWidget.prototype.addParentNode=function(new_node_info,existing_node){var new_node;new_node=existing_node.addParent(new_node_info);this._refreshElements(new_node.parent);return new_node};JqTreeWidget.prototype.removeNode=function(node){var parent;parent=node.parent;if(parent){this.select_node_handler.removeFromSelection(node,true);node.remove();return this._refreshElements(parent.parent)}};JqTreeWidget.prototype.appendNode=function(new_node_info,
parent_node){var is_already_folder_node,node;if(!parent_node)parent_node=this.tree;is_already_folder_node=parent_node.isFolder();node=parent_node.append(new_node_info);if(is_already_folder_node)this._refreshElements(parent_node);else this._refreshElements(parent_node.parent);return node};JqTreeWidget.prototype.prependNode=function(new_node_info,parent_node){var node;if(!parent_node)parent_node=this.tree;node=parent_node.prepend(new_node_info);this._refreshElements(parent_node);return node};JqTreeWidget.prototype.updateNode=
function(node,data){var id_is_changed;id_is_changed=data.id&&data.id!==node.id;if(id_is_changed)this.tree.removeNodeFromIndex(node);node.setData(data);if(id_is_changed)this.tree.addNodeToIndex(node);this._refreshElements(node.parent);return this._selectCurrentNode()};JqTreeWidget.prototype.moveNode=function(node,target_node,position){var position_index;position_index=Position.nameToIndex(position);this.tree.moveNode(node,target_node,position_index);return this._refreshElements()};JqTreeWidget.prototype.getStateFromStorage=
function(){return this.save_state_handler.getStateFromStorage()};JqTreeWidget.prototype.addToSelection=function(node){this.select_node_handler.addToSelection(node);return this._getNodeElementForNode(node).select()};JqTreeWidget.prototype.getSelectedNodes=function(){return this.select_node_handler.getSelectedNodes()};JqTreeWidget.prototype.isNodeSelected=function(node){return this.select_node_handler.isNodeSelected(node)};JqTreeWidget.prototype.removeFromSelection=function(node){this.select_node_handler.removeFromSelection(node);
return this._getNodeElementForNode(node).deselect()};JqTreeWidget.prototype.scrollToNode=function(node){var $element,top;$element=$(node.element);top=$element.offset().top-this.$el.offset().top;return this.scroll_handler.scrollTo(top)};JqTreeWidget.prototype.getState=function(){return this.save_state_handler.getState()};JqTreeWidget.prototype.setState=function(state){this.save_state_handler.setState(state);return this._refreshElements()};JqTreeWidget.prototype._init=function(){JqTreeWidget.__super__._init.call(this);
this.element=this.$el;this.mouse_delay=300;this.is_initialized=false;if(typeof SaveStateHandler!=="undefined"&&SaveStateHandler!==null)this.save_state_handler=new SaveStateHandler(this);else this.options.saveState=false;if(typeof SelectNodeHandler!=="undefined"&&SelectNodeHandler!==null)this.select_node_handler=new SelectNodeHandler(this);if(typeof DragAndDropHandler!=="undefined"&&DragAndDropHandler!==null)this.dnd_handler=new DragAndDropHandler(this);else this.options.dragAndDrop=false;if(typeof ScrollHandler!==
"undefined"&&ScrollHandler!==null)this.scroll_handler=new ScrollHandler(this);if(typeof KeyHandler!=="undefined"&&KeyHandler!==null&&(typeof SelectNodeHandler!=="undefined"&&SelectNodeHandler!==null))this.key_handler=new KeyHandler(this);this._initData();this.element.click($.proxy(this._click,this));this.element.dblclick($.proxy(this._dblclick,this));if(this.options.useContextMenu)return this.element.bind("contextmenu",$.proxy(this._contextmenu,this))};JqTreeWidget.prototype._deinit=function(){this.element.empty();
this.element.unbind();this.key_handler.deinit();this.tree=null;return JqTreeWidget.__super__._deinit.call(this)};JqTreeWidget.prototype._initData=function(){if(this.options.data)return this._loadData(this.options.data);else return this._loadDataFromUrl(this._getDataUrlInfo())};JqTreeWidget.prototype._getDataUrlInfo=function(node){var data_url,getUrlFromString,_this=this;data_url=this.options.dataUrl||this.element.data("url");getUrlFromString=function(){var data,selected_node_id,url_info;url_info=
{url:data_url};if(node&&node.id){data={node:node.id};url_info["data"]=data}else{selected_node_id=_this._getNodeIdToBeSelected();if(selected_node_id){data={selected_node:selected_node_id};url_info["data"]=data}}return url_info};if($.isFunction(data_url))return data_url(node);else if($.type(data_url)==="string")return getUrlFromString();else return data_url};JqTreeWidget.prototype._getNodeIdToBeSelected=function(){if(this.options.saveState)return this.save_state_handler.getNodeIdToBeSelected();else return null};
JqTreeWidget.prototype._initTree=function(data){this.tree=new this.options.nodeClass(null,true,this.options.nodeClass);if(this.select_node_handler)this.select_node_handler.clear();this.tree.loadFromData(data);this._openNodes();this._refreshElements();if(!this.is_initialized){this.is_initialized=true;return this._triggerEvent("tree.init")}};JqTreeWidget.prototype._openNodes=function(){var max_level;if(this.options.saveState)if(this.save_state_handler.restoreState())return;if(this.options.autoOpen===
false)return;else if(this.options.autoOpen===true)max_level=-1;else max_level=parseInt(this.options.autoOpen);return this.tree.iterate(function(node,level){if(node.hasChildren())node.is_open=true;return level!==max_level})};JqTreeWidget.prototype._refreshElements=function(from_node){var $element,createFolderLi,createLi,createNodeLi,createUl,doCreateDomElements,escapeIfNecessary,is_root_node,node_element,_this=this;if(from_node==null)from_node=null;escapeIfNecessary=function(value){if(_this.options.autoEscape)return html_escape(value);
else return value};createUl=function(is_root_node){var class_string;if(is_root_node)class_string="jqtree-tree";else class_string="";return $('\x3cul class\x3d"jqtree_common '+class_string+'"\x3e\x3c/ul\x3e')};createLi=function(node){var $li;if(node.isFolder())$li=createFolderLi(node);else $li=createNodeLi(node);if(_this.options.onCreateLi)_this.options.onCreateLi(node,$li);return $li};createNodeLi=function(node){var class_string,escaped_name,li_classes;li_classes=["jqtree_common"];if(_this.select_node_handler&&
_this.select_node_handler.isNodeSelected(node))li_classes.push("jqtree-selected");class_string=li_classes.join(" ");escaped_name=escapeIfNecessary(node.name);return $('\x3cli class\x3d"'+class_string+'"\x3e\x3cdiv class\x3d"jqtree-element jqtree_common"\x3e\x3cspan class\x3d"jqtree-title jqtree_common"\x3e'+escaped_name+"\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e")};createFolderLi=function(node){var button_char,button_classes,escaped_name,folder_classes,getButtonClasses,getFolderClasses;getButtonClasses=
function(){var classes;classes=["jqtree-toggler"];if(!node.is_open)classes.push("jqtree-closed");return classes.join(" ")};getFolderClasses=function(){var classes;classes=["jqtree-folder"];if(!node.is_open)classes.push("jqtree-closed");if(_this.select_node_handler&&_this.select_node_handler.isNodeSelected(node))classes.push("jqtree-selected");return classes.join(" ")};button_classes=getButtonClasses();folder_classes=getFolderClasses();escaped_name=escapeIfNecessary(node.name);if(node.is_open)button_char=
_this.options.openedIcon;else button_char=_this.options.closedIcon;return $('\x3cli class\x3d"jqtree_common '+folder_classes+'"\x3e\x3cdiv class\x3d"jqtree-element jqtree_common"\x3e\x3ca class\x3d"jqtree_common '+button_classes+'"\x3e'+button_char+'\x3c/a\x3e\x3cspan class\x3d"jqtree_common jqtree-title"\x3e'+escaped_name+"\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e")};doCreateDomElements=function($element,children,is_root_node,is_open){var $li,$ul,child,_i,_len;$ul=createUl(is_root_node);$element.append($ul);
for(_i=0,_len=children.length;_i<_len;_i++){child=children[_i];$li=createLi(child);$ul.append($li);child.element=$li[0];$li.data("node",child);if(child.hasChildren())doCreateDomElements($li,child.children,false,child.is_open)}return null};if(from_node&&from_node.parent){is_root_node=false;node_element=this._getNodeElementForNode(from_node);node_element.getUl().remove();$element=node_element.$element}else{from_node=this.tree;$element=this.element;$element.empty();is_root_node=true}doCreateDomElements($element,
from_node.children,is_root_node,is_root_node);return this._triggerEvent("tree.refresh")};JqTreeWidget.prototype._click=function(e){var click_target,event,node;click_target=this._getClickTarget(e.target);if(click_target)if(click_target.type==="button"){this.toggle(click_target.node,this.options.slide);e.preventDefault();return e.stopPropagation()}else if(click_target.type==="label"){node=click_target.node;event=this._triggerEvent("tree.click",{node:node,click_event:e});if(!event.isDefaultPrevented())return this._selectNode(node,
true)}};JqTreeWidget.prototype._dblclick=function(e){var click_target;click_target=this._getClickTarget(e.target);if(click_target&&click_target.type==="label")return this._triggerEvent("tree.dblclick",{node:click_target.node,click_event:e})};JqTreeWidget.prototype._getClickTarget=function(element){var $button,$el,$target,node;$target=$(element);$button=$target.closest(".jqtree-toggler");if($button.length){node=this._getNode($button);if(node)return{type:"button",node:node}}else{$el=$target.closest(".jqtree-element");
if($el.length){node=this._getNode($el);if(node)return{type:"label",node:node}}}return null};JqTreeWidget.prototype._getNode=function($element){var $li;$li=$element.closest("li");if($li.length===0)return null;else return $li.data("node")};JqTreeWidget.prototype._getNodeElementForNode=function(node){if(node.isFolder())return new FolderElement(node,this);else return new NodeElement(node,this)};JqTreeWidget.prototype._getNodeElement=function($element){var node;node=this._getNode($element);if(node)return this._getNodeElementForNode(node);
else return null};JqTreeWidget.prototype._contextmenu=function(e){var $div,node;$div=$(e.target).closest("ul.jqtree-tree .jqtree-element");if($div.length){node=this._getNode($div);if(node){e.preventDefault();e.stopPropagation();this._triggerEvent("tree.contextmenu",{node:node,click_event:e});return false}}};JqTreeWidget.prototype._saveState=function(){if(this.options.saveState)return this.save_state_handler.saveState()};JqTreeWidget.prototype._mouseCapture=function(position_info){if(this.options.dragAndDrop)return this.dnd_handler.mouseCapture(position_info);
else return false};JqTreeWidget.prototype._mouseStart=function(position_info){if(this.options.dragAndDrop)return this.dnd_handler.mouseStart(position_info);else return false};JqTreeWidget.prototype._mouseDrag=function(position_info){var result;if(this.options.dragAndDrop){result=this.dnd_handler.mouseDrag(position_info);if(this.scroll_handler)this.scroll_handler.checkScrolling();return result}else return false};JqTreeWidget.prototype._mouseStop=function(position_info){if(this.options.dragAndDrop)return this.dnd_handler.mouseStop(position_info);
else return false};JqTreeWidget.prototype._triggerEvent=function(event_name,values){var event;event=$.Event(event_name);$.extend(event,values);this.element.trigger(event);return event};JqTreeWidget.prototype.testGenerateHitAreas=function(moving_node){this.dnd_handler.current_item=this._getNodeElementForNode(moving_node);this.dnd_handler.generateHitAreas();return this.dnd_handler.hit_areas};JqTreeWidget.prototype._selectCurrentNode=function(){var node,node_element;node=this.getSelectedNode();if(node){node_element=
this._getNodeElementForNode(node);if(node_element)return node_element.select()}};JqTreeWidget.prototype._deselectCurrentNode=function(){var node;node=this.getSelectedNode();if(node)return this.removeFromSelection(node)};return JqTreeWidget}(MouseWidget);SimpleWidget.register(JqTreeWidget,"tree");NodeElement=function(){function NodeElement(node,tree_widget){this.init(node,tree_widget)}NodeElement.prototype.init=function(node,tree_widget){this.node=node;this.tree_widget=tree_widget;return this.$element=
$(node.element)};NodeElement.prototype.getUl=function(){return this.$element.children("ul:first")};NodeElement.prototype.getSpan=function(){return this.$element.children(".jqtree-element").find("span.jqtree-title")};NodeElement.prototype.getLi=function(){return this.$element};NodeElement.prototype.addDropHint=function(position){if(position===Position.INSIDE)return new BorderDropHint(this.$element);else return new GhostDropHint(this.node,this.$element,position)};NodeElement.prototype.select=function(){return this.getLi().addClass("jqtree-selected")};
NodeElement.prototype.deselect=function(){return this.getLi().removeClass("jqtree-selected")};return NodeElement}();FolderElement=function(_super){__extends(FolderElement,_super);function FolderElement(){_ref2=FolderElement.__super__.constructor.apply(this,arguments);return _ref2}FolderElement.prototype.open=function(on_finished,slide){var $button,doOpen,_this=this;if(slide==null)slide=true;if(!this.node.is_open){this.node.is_open=true;$button=this.getButton();$button.removeClass("jqtree-closed");
$button.html(this.tree_widget.options.openedIcon);doOpen=function(){_this.getLi().removeClass("jqtree-closed");if(on_finished)on_finished();return _this.tree_widget._triggerEvent("tree.open",{node:_this.node})};if(slide)return this.getUl().slideDown("fast",doOpen);else{this.getUl().show();return doOpen()}}};FolderElement.prototype.close=function(slide){var $button,doClose,_this=this;if(slide==null)slide=true;if(this.node.is_open){this.node.is_open=false;$button=this.getButton();$button.addClass("jqtree-closed");
$button.html(this.tree_widget.options.closedIcon);doClose=function(){_this.getLi().addClass("jqtree-closed");return _this.tree_widget._triggerEvent("tree.close",{node:_this.node})};if(slide)return this.getUl().slideUp("fast",doClose);else{this.getUl().hide();return doClose()}}};FolderElement.prototype.getButton=function(){return this.$element.children(".jqtree-element").find("a.jqtree-toggler")};FolderElement.prototype.addDropHint=function(position){if(!this.node.is_open&&position===Position.INSIDE)return new BorderDropHint(this.$element);
else return new GhostDropHint(this.node,this.$element,position)};return FolderElement}(NodeElement);html_escape=function(string){return(""+string).replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26#x27;").replace(/\//g,"\x26#x2F;")};_indexOf=function(array,item){var i,value,_i,_len;for(i=_i=0,_len=array.length;_i<_len;i=++_i){value=array[i];if(value===item)return i}return-1};indexOf=function(array,item){if(array.indexOf)return array.indexOf(item);
else return _indexOf(array,item)};this.Tree.indexOf=indexOf;this.Tree._indexOf=_indexOf;if(!(this.JSON!=null&&(this.JSON.stringify!=null&&typeof this.JSON.stringify==="function"))){json_escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;json_meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};json_quote=function(string){json_escapable.lastIndex=0;if(json_escapable.test(string))return'"'+
string.replace(json_escapable,function(a){var c;c=json_meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"';else return'"'+string+'"'};json_str=function(key,holder){var i,k,partial,v,value,_i,_len;value=holder[key];switch(typeof value){case "string":return json_quote(value);case "number":if(isFinite(value))return String(value);else return"null";case "boolean":case "null":return String(value);case "object":if(!value)return"null";partial=[];if(Object.prototype.toString.apply(value)===
"[object Array]"){for(i=_i=0,_len=value.length;_i<_len;i=++_i){v=value[i];partial[i]=json_str(i,value)||"null"}return partial.length===0?"[]":"["+partial.join(",")+"]"}for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=json_str(k,value);if(v)partial.push(json_quote(k)+":"+v)}return partial.length===0?"{}":"{"+partial.join(",")+"}"}};if(this.JSON==null)this.JSON={};this.JSON.stringify=function(value){return json_str("",{"":value})}}SaveStateHandler=function(){function SaveStateHandler(tree_widget){this.tree_widget=
tree_widget}SaveStateHandler.prototype.saveState=function(){var state;state=JSON.stringify(this.getState());if(this.tree_widget.options.onSetStateFromStorage)return this.tree_widget.options.onSetStateFromStorage(state);else if(this.supportsLocalStorage())return localStorage.setItem(this.getCookieName(),state);else if($.cookie){$.cookie.raw=true;return $.cookie(this.getCookieName(),state,{path:"/"})}};SaveStateHandler.prototype.restoreState=function(){var state;state=this.getStateFromStorage();if(state){this.setState($.parseJSON(state));
return true}else return false};SaveStateHandler.prototype.getStateFromStorage=function(){if(this.tree_widget.options.onGetStateFromStorage)return this.tree_widget.options.onGetStateFromStorage();else if(this.supportsLocalStorage())return localStorage.getItem(this.getCookieName());else if($.cookie){$.cookie.raw=true;return $.cookie(this.getCookieName())}else return null};SaveStateHandler.prototype.getState=function(){var open_nodes,selected_node,selected_node_id,_this=this;open_nodes=[];this.tree_widget.tree.iterate(function(node){if(node.is_open&&
(node.id&&node.hasChildren()))open_nodes.push(node.id);return true});selected_node=this.tree_widget.getSelectedNode();if(selected_node)selected_node_id=selected_node.id;else selected_node_id="";return{open_nodes:open_nodes,selected_node:selected_node_id}};SaveStateHandler.prototype.setState=function(state){var open_nodes,selected_node,selected_node_id,_this=this;if(state){open_nodes=state.open_nodes;selected_node_id=state.selected_node;this.tree_widget.tree.iterate(function(node){node.is_open=node.id&&
(node.hasChildren()&&indexOf(open_nodes,node.id)>=0);return true});if(selected_node_id&&this.tree_widget.select_node_handler){this.tree_widget.select_node_handler.clear();selected_node=this.tree_widget.getNodeById(selected_node_id);if(selected_node)return this.tree_widget.select_node_handler.addToSelection(selected_node)}}};SaveStateHandler.prototype.getCookieName=function(){if(typeof this.tree_widget.options.saveState==="string")return this.tree_widget.options.saveState;else return"tree"};SaveStateHandler.prototype.supportsLocalStorage=
function(){var testSupport;testSupport=function(){var error,key;if(typeof localStorage==="undefined"||localStorage===null)return false;else{try{key="_storage_test";sessionStorage.setItem(key,true);sessionStorage.removeItem(key)}catch(_error){error=_error;return false}return true}};if(this._supportsLocalStorage==null)this._supportsLocalStorage=testSupport();return this._supportsLocalStorage};SaveStateHandler.prototype.getNodeIdToBeSelected=function(){var state,state_json;state_json=this.getStateFromStorage();
if(state_json){state=$.parseJSON(state_json);return state.selected_node}else return null};return SaveStateHandler}();SelectNodeHandler=function(){function SelectNodeHandler(tree_widget){this.tree_widget=tree_widget;this.clear()}SelectNodeHandler.prototype.getSelectedNode=function(){var selected_nodes;selected_nodes=this.getSelectedNodes();if(selected_nodes.length)return selected_nodes[0];else return false};SelectNodeHandler.prototype.getSelectedNodes=function(){var id,node,selected_nodes;if(this.selected_single_node)return[this.selected_single_node];
else{selected_nodes=[];for(id in this.selected_nodes){node=this.tree_widget.getNodeById(id);if(node)selected_nodes.push(node)}return selected_nodes}};SelectNodeHandler.prototype.isNodeSelected=function(node){if(node.id)return this.selected_nodes[node.id];else if(this.selected_single_node)return this.selected_single_node.element===node.element;else return false};SelectNodeHandler.prototype.clear=function(){this.selected_nodes={};return this.selected_single_node=null};SelectNodeHandler.prototype.removeFromSelection=
function(node,include_children){var _this=this;if(include_children==null)include_children=false;if(!node.id){if(this.selected_single_node&&node.element===this.selected_single_node.element)return this.selected_single_node=null}else{delete this.selected_nodes[node.id];if(include_children)return node.iterate(function(n){delete _this.selected_nodes[node.id];return true})}};SelectNodeHandler.prototype.addToSelection=function(node){if(node.id)return this.selected_nodes[node.id]=true;else return this.selected_single_node=
node};return SelectNodeHandler}();DragAndDropHandler=function(){function DragAndDropHandler(tree_widget){this.tree_widget=tree_widget;this.hovered_area=null;this.$ghost=null;this.hit_areas=[];this.is_dragging=false}DragAndDropHandler.prototype.mouseCapture=function(position_info){var $element,node_element;$element=$(position_info.target);if(this.tree_widget.options.onIsMoveHandle&&!this.tree_widget.options.onIsMoveHandle($element))return null;node_element=this.tree_widget._getNodeElement($element);
if(node_element&&this.tree_widget.options.onCanMove)if(!this.tree_widget.options.onCanMove(node_element.node))node_element=null;this.current_item=node_element;return this.current_item!==null};DragAndDropHandler.prototype.mouseStart=function(position_info){var offset;this.refreshHitAreas();offset=$(position_info.target).offset();this.drag_element=new DragElement(this.current_item.node,position_info.page_x-offset.left,position_info.page_y-offset.top,this.tree_widget.element);this.is_dragging=true;this.current_item.$element.addClass("jqtree-moving");
return true};DragAndDropHandler.prototype.mouseDrag=function(position_info){var area,can_move_to;this.drag_element.move(position_info.page_x,position_info.page_y);area=this.findHoveredArea(position_info.page_x,position_info.page_y);can_move_to=this.canMoveToArea(area);if(area){if(this.hovered_area!==area){this.hovered_area=area;if(this.mustOpenFolderTimer(area))this.startOpenFolderTimer(area.node);if(can_move_to)this.updateDropHint()}}else{this.removeHover();this.removeDropHint();this.stopOpenFolderTimer()}return true};
DragAndDropHandler.prototype.canMoveToArea=function(area){var position_name;if(!area)return false;else if(this.tree_widget.options.onCanMoveTo){position_name=Position.getName(area.position);return this.tree_widget.options.onCanMoveTo(this.current_item.node,area.node,position_name)}else return true};DragAndDropHandler.prototype.mouseStop=function(position_info){this.moveItem(position_info);this.clear();this.removeHover();this.removeDropHint();this.removeHitAreas();if(this.current_item)this.current_item.$element.removeClass("jqtree-moving");
this.is_dragging=false;return false};DragAndDropHandler.prototype.refreshHitAreas=function(){this.removeHitAreas();return this.generateHitAreas()};DragAndDropHandler.prototype.removeHitAreas=function(){return this.hit_areas=[]};DragAndDropHandler.prototype.clear=function(){this.drag_element.remove();return this.drag_element=null};DragAndDropHandler.prototype.removeDropHint=function(){if(this.previous_ghost)return this.previous_ghost.remove()};DragAndDropHandler.prototype.removeHover=function(){return this.hovered_area=
null};DragAndDropHandler.prototype.generateHitAreas=function(){var hit_areas_generator;hit_areas_generator=new HitAreasGenerator(this.tree_widget.tree,this.current_item.node,this.getTreeDimensions().bottom);return this.hit_areas=hit_areas_generator.generate()};DragAndDropHandler.prototype.findHoveredArea=function(x,y){var area,dimensions,high,low,mid;dimensions=this.getTreeDimensions();if(x<dimensions.left||(y<dimensions.top||(x>dimensions.right||y>dimensions.bottom)))return null;low=0;high=this.hit_areas.length;
while(low<high){mid=low+high>>1;area=this.hit_areas[mid];if(y<area.top)high=mid;else if(y>area.bottom)low=mid+1;else return area}return null};DragAndDropHandler.prototype.mustOpenFolderTimer=function(area){var node;node=area.node;return node.isFolder()&&(!node.is_open&&area.position===Position.INSIDE)};DragAndDropHandler.prototype.updateDropHint=function(){var node_element;if(!this.hovered_area)return;this.removeDropHint();node_element=this.tree_widget._getNodeElementForNode(this.hovered_area.node);
return this.previous_ghost=node_element.addDropHint(this.hovered_area.position)};DragAndDropHandler.prototype.startOpenFolderTimer=function(folder){var openFolder,_this=this;openFolder=function(){return _this.tree_widget._openNode(folder,_this.tree_widget.options.slide,function(){_this.refreshHitAreas();return _this.updateDropHint()})};this.stopOpenFolderTimer();return this.open_folder_timer=setTimeout(openFolder,this.tree_widget.options.openFolderDelay)};DragAndDropHandler.prototype.stopOpenFolderTimer=
function(){if(this.open_folder_timer){clearTimeout(this.open_folder_timer);return this.open_folder_timer=null}};DragAndDropHandler.prototype.moveItem=function(position_info){var doMove,event,moved_node,position,previous_parent,target_node,_this=this;if(this.hovered_area&&(this.hovered_area.position!==Position.NONE&&this.canMoveToArea(this.hovered_area))){moved_node=this.current_item.node;target_node=this.hovered_area.node;position=this.hovered_area.position;previous_parent=moved_node.parent;if(position===
Position.INSIDE)this.hovered_area.node.is_open=true;doMove=function(){_this.tree_widget.tree.moveNode(moved_node,target_node,position);_this.tree_widget.element.empty();return _this.tree_widget._refreshElements()};event=this.tree_widget._triggerEvent("tree.move",{move_info:{moved_node:moved_node,target_node:target_node,position:Position.getName(position),previous_parent:previous_parent,do_move:doMove,original_event:position_info.original_event}});if(!event.isDefaultPrevented())return doMove()}};DragAndDropHandler.prototype.getTreeDimensions=
function(){var offset;offset=this.tree_widget.element.offset();return{left:offset.left,top:offset.top,right:offset.left+this.tree_widget.element.width(),bottom:offset.top+this.tree_widget.element.height()+16}};return DragAndDropHandler}();VisibleNodeIterator=function(){function VisibleNodeIterator(tree){this.tree=tree}VisibleNodeIterator.prototype.iterate=function(){var is_first_node,_iterateNode,_this=this;is_first_node=true;_iterateNode=function(node,next_node){var $element,child,children_length,
i,must_iterate_inside,_i,_len,_ref3,_results;must_iterate_inside=(node.is_open||!node.element)&&node.hasChildren();if(node.element){$element=$(node.element);if(!$element.is(":visible"))return;if(is_first_node){_this.handleFirstNode(node,$element);is_first_node=false}if(!node.hasChildren())_this.handleNode(node,next_node,$element);else if(node.is_open){if(!_this.handleOpenFolder(node,$element))must_iterate_inside=false}else _this.handleClosedFolder(node,next_node,$element)}if(must_iterate_inside){children_length=
node.children.length;_ref3=node.children;_results=[];for(i=_i=0,_len=_ref3.length;_i<_len;i=++_i){child=_ref3[i];if(i===children_length-1)_results.push(_iterateNode(node.children[i],null));else _results.push(_iterateNode(node.children[i],node.children[i+1]))}return _results}};return _iterateNode(this.tree,null)};VisibleNodeIterator.prototype.handleNode=function(node,next_node,$element){};VisibleNodeIterator.prototype.handleOpenFolder=function(node,$element){};VisibleNodeIterator.prototype.handleClosedFolder=
function(node,next_node,$element){};VisibleNodeIterator.prototype.handleFirstNode=function(node,$element){};return VisibleNodeIterator}();HitAreasGenerator=function(_super){__extends(HitAreasGenerator,_super);function HitAreasGenerator(tree,current_node,tree_bottom){HitAreasGenerator.__super__.constructor.call(this,tree);this.current_node=current_node;this.tree_bottom=tree_bottom}HitAreasGenerator.prototype.generate=function(){this.positions=[];this.last_top=0;this.iterate();return this.generateHitAreas(this.positions)};
HitAreasGenerator.prototype.getTop=function($element){return $element.offset().top};HitAreasGenerator.prototype.addPosition=function(node,position,top){this.positions.push({top:top,node:node,position:position});return this.last_top=top};HitAreasGenerator.prototype.handleNode=function(node,next_node,$element){var top;top=this.getTop($element);if(node===this.current_node)this.addPosition(node,Position.NONE,top);else this.addPosition(node,Position.INSIDE,top);if(next_node===this.current_node||node===
this.current_node)return this.addPosition(node,Position.NONE,top);else return this.addPosition(node,Position.AFTER,top)};HitAreasGenerator.prototype.handleOpenFolder=function(node,$element){if(node===this.current_node)return false;if(node.children[0]!==this.current_node)this.addPosition(node,Position.INSIDE,this.getTop($element));return true};HitAreasGenerator.prototype.handleClosedFolder=function(node,next_node,$element){var top;top=this.getTop($element);if(node===this.current_node)return this.addPosition(node,
Position.NONE,top);else{this.addPosition(node,Position.INSIDE,top);if(next_node!==this.current_node)return this.addPosition(node,Position.AFTER,top)}};HitAreasGenerator.prototype.handleFirstNode=function(node,$element){if(node!==this.current_node)return this.addPosition(node,Position.BEFORE,this.getTop($(node.element)))};HitAreasGenerator.prototype.generateHitAreas=function(positions){var group,hit_areas,position,previous_top,_i,_len;previous_top=-1;group=[];hit_areas=[];for(_i=0,_len=positions.length;_i<
_len;_i++){position=positions[_i];if(position.top!==previous_top&&group.length){if(group.length)this.generateHitAreasForGroup(hit_areas,group,previous_top,position.top);previous_top=position.top;group=[]}group.push(position)}this.generateHitAreasForGroup(hit_areas,group,previous_top,this.tree_bottom);return hit_areas};HitAreasGenerator.prototype.generateHitAreasForGroup=function(hit_areas,positions_in_group,top,bottom){var area_height,area_top,position,_i,_len;area_height=(bottom-top)/positions_in_group.length;
area_top=top;for(_i=0,_len=positions_in_group.length;_i<_len;_i++){position=positions_in_group[_i];hit_areas.push({top:area_top,bottom:area_top+area_height,node:position.node,position:position.position});area_top+=area_height}return null};return HitAreasGenerator}(VisibleNodeIterator);DragElement=function(){function DragElement(node,offset_x,offset_y,$tree){this.offset_x=offset_x;this.offset_y=offset_y;this.$element=$('\x3cspan class\x3d"jqtree-title jqtree-dragging"\x3e'+node.name+"\x3c/span\x3e");
this.$element.css("position","absolute");$tree.append(this.$element)}DragElement.prototype.move=function(page_x,page_y){return this.$element.offset({left:page_x-this.offset_x,top:page_y-this.offset_y})};DragElement.prototype.remove=function(){return this.$element.remove()};return DragElement}();GhostDropHint=function(){function GhostDropHint(node,$element,position){this.$element=$element;this.node=node;this.$ghost=$('\x3cli class\x3d"jqtree_common jqtree-ghost"\x3e\x3cspan class\x3d"jqtree_common jqtree-circle"\x3e\x3c/span\x3e\x3cspan class\x3d"jqtree_common jqtree-line"\x3e\x3c/span\x3e\x3c/li\x3e');
if(position===Position.AFTER)this.moveAfter();else if(position===Position.BEFORE)this.moveBefore();else if(position===Position.INSIDE)if(node.isFolder()&&node.is_open)this.moveInsideOpenFolder();else this.moveInside()}GhostDropHint.prototype.remove=function(){return this.$ghost.remove()};GhostDropHint.prototype.moveAfter=function(){return this.$element.after(this.$ghost)};GhostDropHint.prototype.moveBefore=function(){return this.$element.before(this.$ghost)};GhostDropHint.prototype.moveInsideOpenFolder=
function(){return $(this.node.children[0].element).before(this.$ghost)};GhostDropHint.prototype.moveInside=function(){this.$element.after(this.$ghost);return this.$ghost.addClass("jqtree-inside")};return GhostDropHint}();BorderDropHint=function(){function BorderDropHint($element){var $div,width;$div=$element.children(".jqtree-element");width=$element.width()-4;this.$hint=$('\x3cspan class\x3d"jqtree-border"\x3e\x3c/span\x3e');$div.append(this.$hint);this.$hint.css({width:width,height:$div.height()-
4})}BorderDropHint.prototype.remove=function(){return this.$hint.remove()};return BorderDropHint}();ScrollHandler=function(){function ScrollHandler(tree_widget){this.tree_widget=tree_widget;this.previous_top=-1;this._initScrollParent()}ScrollHandler.prototype._initScrollParent=function(){var $scroll_parent,getParentWithOverflow,setDocumentAsScrollParent,_this=this;getParentWithOverflow=function(){var css_values,el,hasOverFlow,_i,_len,_ref3;css_values=["overflow","overflow-y"];hasOverFlow=function(el){var css_value,
_i,_len,_ref3;for(_i=0,_len=css_values.length;_i<_len;_i++){css_value=css_values[_i];if((_ref3=$.css(el,css_value))==="auto"||_ref3==="scroll")return true}return false};if(hasOverFlow(_this.tree_widget.$el[0]))return _this.tree_widget.$el;_ref3=_this.tree_widget.$el.parents();for(_i=0,_len=_ref3.length;_i<_len;_i++){el=_ref3[_i];if(hasOverFlow(el))return $(el)}return null};setDocumentAsScrollParent=function(){_this.scroll_parent_top=0;return _this.$scroll_parent=null};if(this.tree_widget.$el.css("position")===
"fixed")setDocumentAsScrollParent();$scroll_parent=getParentWithOverflow();if($scroll_parent&&($scroll_parent.length&&$scroll_parent[0].tagName!=="HTML")){this.$scroll_parent=$scroll_parent;return this.scroll_parent_top=this.$scroll_parent.offset().top}else return setDocumentAsScrollParent()};ScrollHandler.prototype.checkScrolling=function(){var hovered_area;hovered_area=this.tree_widget.dnd_handler.hovered_area;if(hovered_area&&hovered_area.top!==this.previous_top){this.previous_top=hovered_area.top;
if(this.$scroll_parent)return this._handleScrollingWithScrollParent(hovered_area);else return this._handleScrollingWithDocument(hovered_area)}};ScrollHandler.prototype._handleScrollingWithScrollParent=function(area){var distance_bottom;distance_bottom=this.scroll_parent_top+this.$scroll_parent[0].offsetHeight-area.bottom;if(distance_bottom<20){this.$scroll_parent[0].scrollTop+=20;this.tree_widget.refreshHitAreas();return this.previous_top=-1}else if(area.top-this.scroll_parent_top<20){this.$scroll_parent[0].scrollTop-=
20;this.tree_widget.refreshHitAreas();return this.previous_top=-1}};ScrollHandler.prototype._handleScrollingWithDocument=function(area){var distance_top;distance_top=area.top-$(document).scrollTop();if(distance_top<20)return $(document).scrollTop($(document).scrollTop()-20);else if($(window).height()-(area.bottom-$(document).scrollTop())<20)return $(document).scrollTop($(document).scrollTop()+20)};ScrollHandler.prototype.scrollTo=function(top){var tree_top;if(this.$scroll_parent)return this.$scroll_parent[0].scrollTop=
top;else{tree_top=this.tree_widget.$el.offset().top;return $(document).scrollTop(top+tree_top)}};ScrollHandler.prototype.isScrolledIntoView=function(element){var $element,element_bottom,element_top,view_bottom,view_top;$element=$(element);if(this.$scroll_parent){view_top=0;view_bottom=this.$scroll_parent.height();element_top=$element.offset().top-this.scroll_parent_top;element_bottom=element_top+$element.height()}else{view_top=$(window).scrollTop();view_bottom=view_top+$(window).height();element_top=
$element.offset().top;element_bottom=element_top+$element.height()}return element_bottom<=view_bottom&&element_top>=view_top};return ScrollHandler}();KeyHandler=function(){var DOWN,LEFT,RIGHT,UP;LEFT=37;UP=38;RIGHT=39;DOWN=40;function KeyHandler(tree_widget){this.tree_widget=tree_widget;if(tree_widget.options.keyboardSupport)$(document).bind("keydown.jqtree",$.proxy(this.handleKeyDown,this))}KeyHandler.prototype.deinit=function(){return $(document).unbind("keydown.jqtree")};KeyHandler.prototype.handleKeyDown=
function(e){var current_node,key,moveDown,moveLeft,moveRight,moveUp,selectNode,_this=this;if($(document.activeElement).is("textarea,input"))return true;current_node=this.tree_widget.getSelectedNode();selectNode=function(node){if(node){_this.tree_widget.selectNode(node);if(_this.tree_widget.scroll_handler&&!_this.tree_widget.scroll_handler.isScrolledIntoView($(node.element).find(".jqtree-element")))_this.tree_widget.scrollToNode(node);return false}else return true};moveDown=function(){return selectNode(_this.getNextNode(current_node))};
moveUp=function(){return selectNode(_this.getPreviousNode(current_node))};moveRight=function(){if(current_node.hasChildren()&&!current_node.is_open){_this.tree_widget.openNode(current_node);return false}else return true};moveLeft=function(){if(current_node.hasChildren()&&current_node.is_open){_this.tree_widget.closeNode(current_node);return false}else return true};if(!current_node)return true;else{key=e.which;switch(key){case DOWN:return moveDown();case UP:return moveUp();case RIGHT:return moveRight();
case LEFT:return moveLeft()}}};KeyHandler.prototype.getNextNode=function(node,include_children){var next_sibling;if(include_children==null)include_children=true;if(include_children&&(node.hasChildren()&&node.is_open))return node.children[0];else if(!node.parent)return null;else{next_sibling=node.getNextSibling();if(next_sibling)return next_sibling;else return this.getNextNode(node.parent,false)}};KeyHandler.prototype.getPreviousNode=function(node){var previous_sibling;if(!node.parent)return null;
else{previous_sibling=node.getPreviousSibling();if(previous_sibling)if(!previous_sibling.hasChildren()||!previous_sibling.is_open)return previous_sibling;else return this.getLastChild(previous_sibling);else if(node.parent.parent)return node.parent;else return null}};KeyHandler.prototype.getLastChild=function(node){var last_child;if(!node.hasChildren())return null;else{last_child=node.children[node.children.length-1];if(!last_child.hasChildren()||!last_child.is_open)return last_child;else return this.getLastChild(last_child)}};
return KeyHandler}()}).call(this);
(function($){$.extend(true,window,{Tuml:{ContextManager:ContextManager}});function ContextManager(){var self=this;var previousUri;this.goBackOne=function(){if(previousUri!==undefined)previousUri.click()};this.setFocus=function(){var contextRootlink=$("#contextRootUl li");$(contextRootlink[0]).addClass("ui-state-focus");contextRootlink.find("a")[0].focus()};this.refresh=function(name,uri,contextVertexId){if(name===tumlModelName)createContextPath([{name:name,uri:uri}]);else{var replacedUri=uri.replace(new RegExp("{(s*?.*?)*?}",
"gi"),encodeURIComponent(contextVertexId));var pathToCompositeRootUri=replacedUri.replace(new RegExp("{(s*?.*?)*?}","gi"),encodeURIComponent(contextVertexId))+"/compositePathToRoot";$.ajax({url:pathToCompositeRootUri,type:"GET",dataType:"json",contentType:"application/json",success:function(response){createContextPath(response.data)},error:function(jqXHR,textStatus,errorThrown){alert("Error creating context path. textStatus: "+textStatus+" errorThrown: "+errorThrown)}})}};function createContextPath(data){$("#contextRoot").remove();
var contextRoot=$("\x3col /\x3e",{id:"contextRoot",class:"breadcrumb uml-breadcrumb"}).appendTo("#umlgnavbar .collapse.navbar-collapse");data.reverse();for(var i=0;i<data.length;i++){var property=data[i];var li=$("\x3cli data\x3d"+property.uri+"/\x3e").appendTo(contextRoot);if(i==0)$("\x3cspan /\x3e",{class:"glyphicon glyphicon-home"}).appendTo(li);var adjustedUri=addUiToUrl(property.uri);var a=$("\x3ca /\x3e",{href:adjustedUri,text:(i==0?" ":"")+property.name,title:property.name,tabindex:i,click:function(e){var url=
$.data(e.target).data;self.onClickContextMenu.notify({uri:removeUiFromUrl(url),name:"unused"},null,self);e.preventDefault();return false}});a.appendTo(li);a.data("data",property.uri);if(i==data.length-2)previousUri=a}}$.extend(this,{"TumlContextManagerVersion":"1.0.0","onClickContextMenu":new Tuml.Event})}})(jQuery);
(function($){$.extend(true,window,{Tuml:{LeftMenuManager:LeftMenuManager,AccordionEnum:{PROPERTIES:{index:0,label:"Properties",id:"propertiesAccordion"},OPERATIONS:{index:1,label:"Operations",id:"operationAccordion"},INSTANCE_QUERIES:{index:2,label:"Instance Queries",id:"instanceQueriesAccordion"},CLASS_QUERIES:{index:3,label:"Class Queries",id:"classQueriesAccordion"},ROOT_QUERIES:{index:4,label:"Root Queries",id:"rootQueriesAccordion"},INSTANCE_GROOVY:{index:5,label:"Instance Groovy",id:"instanceQueriesAccordion"},
CLASS_GROOVY:{index:6,label:"Class Groovy",id:"classGroovy"},DIAGRAMS:{index:7,label:"Diagrams",id:"diagrams"}}}});function LeftMenuManager(){var self=this;this.accordionDiv=null;this.umlPropertiesDiv=null;this.umlOperationsDiv=null;this.umlInstanceQueriesDiv=null;this.umlClassQueriesDiv=null;this.umlRootQueriesDiv=null;this.umlInstanceGroovyDiv=null;this.umlClassGroovyDiv=null;this.contextMetaDataFrom=null;this.contextMetaDataTo=null;this.contextVertexId=null;this.tabContainer=null;this.queryToHighlightId=
-1;this.clickedProperty=null;function init(){}this.refresh=function(_contextMetaDataFrom,_contextMetaDataTo,_contextVertexId,propertyNavigatingTo){this.contextMetaDataFrom=_contextMetaDataFrom;this.contextMetaDataTo=_contextMetaDataTo;if(_contextVertexId!==undefined&&_contextVertexId!==null)this.contextVertexId=decodeURIComponent(_contextVertexId);else this.contextVertexId=null;var leftMenuPaneH3l=$("#leftMenuPaneH3l");leftMenuPaneH3l.empty();$("#diagramTreeView").tree("destroy");var leftMenuPaneBody=
$("#leftMenuPaneBody");leftMenuPaneBody.empty();leftMenuPaneH3l.text(this.contextMetaDataFrom.name);this.tabContainer=leftMenuPaneBody;this.setupTabsAndAccordion();this.createPropertiesMenu(propertyNavigatingTo);this.createDiagramsTreeView();if(isUmlgLib&&(this.contextVertexId!==undefined&&this.contextVertexId!==null)){this.createInstanceQueryMenu(-1);this.createClassQueryMenu(-1);this.createRootQueryMenu(-1)}var windowHeight=calculateBodyHeight(this)+45;leftMenuPaneBody.height(windowHeight)};this.setupTabsAndAccordion=
function(){var leftPanelTabUl=$("\x3cul /\x3e",{id:"tabContainer-menu-container",class:"nav nav-tabs"}).appendTo(this.tabContainer);var tabDiv=$("\x3cdiv /\x3e",{class:"tab-content"}).appendTo(this.tabContainer);var standardTabTemplate="\x3cli class\x3d'active'\x3e\x3ca href\x3d'#Standard' data-toggle\x3d'tab'\x3eStandard\x3c/a\x3e\x3c/li\x3e";var standardLi=$(standardTabTemplate);leftPanelTabUl.append(standardLi);var treeTabTemplate="\x3cli\x3e\x3ca href\x3d'#Tree' data-toggle\x3d'tab'\x3eTree\x3c/a\x3e\x3c/li\x3e";
var treeLi=$(treeTabTemplate);leftPanelTabUl.append(treeLi);var standardMenuDiv=$("\x3cdiv /\x3e",{id:"Standard",class:"tab-pane active"});tabDiv.append(standardMenuDiv);var treeMenuDiv=$("\x3cdiv /\x3e",{id:"Tree",class:"tab-pane"});tabDiv.append(treeMenuDiv);leftPanelTabUl.find("a").click(function(e){e.preventDefault();$(this).tab("show")});leftPanelTabUl.find("a:first").tab("show");this.accordionDiv=$("\x3cdiv /\x3e",{id:"accordion",class:"panel-group"}).appendTo(standardMenuDiv);this.umlPropertiesDiv=
addAccordionMenu(this.accordionDiv,true,Tuml.AccordionEnum.PROPERTIES.label,Tuml.AccordionEnum.PROPERTIES.id);this.umlOperationsDiv=addAccordionMenu(this.accordionDiv,false,Tuml.AccordionEnum.OPERATIONS.label,Tuml.AccordionEnum.OPERATIONS.id);this.umlDiagramDiv=addAccordionMenu(this.accordionDiv,false,Tuml.AccordionEnum.DIAGRAMS.label,Tuml.AccordionEnum.DIAGRAMS.id);if(isUmlgLib&&(this.contextVertexId!==undefined&&this.contextVertexId!==null)){this.umlInstanceQueriesDiv=addAccordionMenu(this.accordionDiv,
false,Tuml.AccordionEnum.INSTANCE_QUERIES.label,Tuml.AccordionEnum.INSTANCE_QUERIES.id);this.umlClassQueriesDiv=addAccordionMenu(this.accordionDiv,false,Tuml.AccordionEnum.CLASS_QUERIES.label,Tuml.AccordionEnum.CLASS_QUERIES.id);this.umlInstanceGroovyDiv=addAccordionMenu(this.accordionDiv,false,Tuml.AccordionEnum.INSTANCE_GROOVY.label,Tuml.AccordionEnum.INSTANCE_GROOVY.id);this.umlClassGroovyDiv=addAccordionMenu(this.accordionDiv,false,Tuml.AccordionEnum.CLASS_GROOVY.label,Tuml.AccordionEnum.CLASS_GROOVY.id)}this.umlRootQueriesDiv=
addAccordionMenu(this.accordionDiv,false,Tuml.AccordionEnum.ROOT_QUERIES.label,Tuml.AccordionEnum.ROOT_QUERIES.id)};function addAccordionMenu(accordionDiv,open,label,id){var propertiesAccordion=$("\x3cdiv /\x3e",{class:"panel panel-default"}).appendTo(accordionDiv);var propertiesAccordionHeading=$("\x3cdiv /\x3e",{class:"panel-heading"}).appendTo(propertiesAccordion);var propertiesH4=$("\x3ch4 /\x3e",{class:"panel-title"}).appendTo(propertiesAccordionHeading);$('\x3ca data-toggle\x3d"collapse" data-parent\x3d"#accordion" class\x3d"accordion-toggle" href\x3d"#'+
id+'" /\x3e').text(label).appendTo(propertiesH4);var propertiesDiv=$("\x3cdiv /\x3e",{id:id,class:"panel-collapse collapse "+(open?"in":"")}).appendTo(propertiesAccordion);var divClassBody=$("\x3cdiv /\x3e",{class:"umlg-leftmenu-panel-body panel-body"}).appendTo(propertiesDiv);return divClassBody}this.setFocus=function(){var active=this.accordionDiv.accordion("option","active");switch(active){case Tuml.AccordionEnum.PROPERTIES.index:var propertiesMenu=$("#propertiesMenu");propertiesMenu.focus();break;
case Tuml.AccordionEnum.OPERATIONS.index:break;case Tuml.AccordionEnum.INSTANCE_QUERIES.index:var propertiesMenu=$("#instanceQueryMenu");propertiesMenu.focus();break;case Tuml.AccordionEnum.CLASS_QUERIES.index:var propertiesMenu=$("#classQueryMenu");propertiesMenu.focus();break;case Tuml.AccordionEnum.INSTANCE_GROOVY.index:break;case Tuml.AccordionEnum.CLASS_GROOVY.index:break;case Tuml.AccordionEnum.DIAGRAMS.index:break;default:throw"Unknown active accordion!";break}};this.createDiagramsTreeView=
function(){var self=this;this.diagramsTreeViewDiv=$("\x3cdiv /\x3e",{id:"diagramTreeView"}).appendTo(this.umlDiagramDiv);var url="/"+tumlModelName+"/diagramPackages";$.ajax({url:url,type:"GET",dataType:"json",contentType:"application/json",success:function(result){$(function(){self.diagramsTreeViewDiv.tree({data:result,selectable:true});self.diagramsTreeViewDiv.bind("tree.dblclick",function(e){event.preventDefault();event.stopImmediatePropagation();if(e.node.children.length==0)self.onDiagramClick.notify(e.node,
null,self)})})},error:function(jqXHR,textStatus,errorThrown){console.log(jqXHR)}})};this.createPropertiesMenu=function(propertyNavigatingTo){var self=this;var dropDownDiv=$("\x3cdiv /\x3e",{class:"dropdown"}).appendTo(this.umlPropertiesDiv);$('\x3ca href\x3d"#" class\x3d"sr-only dropdown-toggle" data-toggle\x3d"dropdown"\x3eUsers \x3cb class\x3d"caret"\x3e\x3c/b\x3e\x3c/a\x3e').appendTo(dropDownDiv);var ulMenu=$('\x3cul id\x3d"propertiesMenu" class\x3d"dropdown-menu" role\x3d"menu" aria-labelledby\x3d"dropdownMenu1" /\x3e').appendTo(dropDownDiv);
var menuArray=this.createLeftMenuDataArray(this.contextMetaDataFrom,this.contextMetaDataTo,propertyNavigatingTo);for(var i=0;i<menuArray.length;i++){var value=menuArray[i];var adjustedUri=value.tumlUri.replace(new RegExp("{(s*?.*?)*?}","gi"),encodeURIComponent(this.contextVertexId));adjustedUri=addUiToUrl(adjustedUri);var li=$("\x3cli /\x3e",{role:"presentation"}).appendTo(ulMenu);li.data("contextData",{name:value.name,uri:adjustedUri,property:value.property});if(value.active)li.addClass("active");
var a=$("\x3ca /\x3e",{title:value.name,role:"menuitem",tabindex:-1,href:adjustedUri}).appendTo(li);a.on("click",function(e){var link=$(e.target);link.parent().addClass("active");var contextData=link.parent().data("contextData");if(contextData.property!=undefined)self.clickedProperty=contextData.property;else self.clickedProperty=null;self.onMenuClick.notify({name:contextData.name,uri:removeUiFromUrl(contextData.uri)},null,self);e.preventDefault();e.stopImmediatePropagation()});$('\x3ci class\x3d"umlg-icon '+
value.menuIconClass+'"\x3e\x3c/i\x3e').appendTo(a);if(value.multiplicityDisplay!==undefined)a.append(" "+value.name+" "+value.multiplicityDisplay);else a.append(" "+value.name);if(value.derived)a.append(" {derived}");if(value.qualified!==undefined&&value.qualified)a.append(" [qualified]")}return ulMenu};this.createQueryMenu=function(queryDiv,queryTypeEnum,queryData){var queryArray=[];for(var i=0;i<queryData[0].data.length;i++){var query=queryData[0].data[i];var queryUri=query.uri.replace(new RegExp("{(s*?.*?)*?}",
"gi"),encodeURIComponent(query.id));var oclExecuteUri=queryData[0].meta.oclExecuteUri.replace(new RegExp("{(s*?.*?)*?}","gi"),this.contextVertexId);var queryType;var menuCssClass="querymenuinactive ";if(queryTypeEnum==tuml.tab.Enum.InstanceQueries){queryType="instanceQuery";menuCssClass+="instance-query"}else if(queryTypeEnum==tuml.tab.Enum.ClassQueries){queryType="classQuery";menuCssClass+="class-query"}else if(queryTypeEnum==tuml.tab.Enum.RootQueries){queryType="rootQuery";menuCssClass+="root-query"}else throw"Unexpected query enum!";
queryArray.push({label:query.name,tumlUri:queryUri,oclExecuteUri:oclExecuteUri,name:query.name,_name:query.name,queryEnum:query.queryEnum,queryString:query.queryString,queryId:query.id,queryType:queryType,menuCssClass:menuCssClass})}var dropDownDiv=$("\x3cdiv /\x3e",{class:"dropdown"}).appendTo(queryDiv);$('\x3ca href\x3d"#" class\x3d"sr-only dropdown-toggle" data-toggle\x3d"dropdown"\x3eUsers \x3cb class\x3d"caret"\x3e\x3c/b\x3e\x3c/a\x3e').appendTo(dropDownDiv);var ulMenu;if(queryTypeEnum==tuml.tab.Enum.InstanceQueries)ulMenu=
$('\x3cul id\x3d"instanceQueryMenu" class\x3d"dropdown-menu" role\x3d"menu" aria-labelledby\x3d"dropdownQueryMenu1" /\x3e').appendTo(dropDownDiv);else if(queryTypeEnum==tuml.tab.Enum.ClassQueries)ulMenu=$('\x3cul id\x3d"classQueryMenu" class\x3d"dropdown-menu" role\x3d"menu" aria-labelledby\x3d"dropdownQueryMenu1" /\x3e').appendTo(dropDownDiv);else if(queryTypeEnum==tuml.tab.Enum.RootQueries)ulMenu=$('\x3cul id\x3d"rootQueryMenu" class\x3d"dropdown-menu" role\x3d"menu" aria-labelledby\x3d"dropdownQueryMenu1" /\x3e').appendTo(dropDownDiv);
else throw"Unexpected query enum!";for(var i=0;i<queryArray.length;i++){var value=queryArray[i];var adjustedUri=value.tumlUri.replace(new RegExp("{(s*?.*?)*?}","gi"),this.contextVertexId);var li=$("\x3cli /\x3e",{id:value.queryId,role:"presentation"}).appendTo(ulMenu);li.data("contextData",value);var a=$("\x3ca /\x3e",{title:value.name,href:adjustedUri}).appendTo(li);a.on("click",function(e){var a=$(e.target);var contextData=$(e.target).parent().data("contextData");var query={post:false,tumlUri:contextData.tumlUri,
oclExecuteUri:contextData.oclExecuteUri,qualifiedName:contextData.qualifiedName,name:contextData._name,queryEnum:contextData.queryEnum,queryString:contextData.queryString,queryType:contextData.queryType,id:contextData.queryId};a.parent().parent().children("li.active").removeClass("active");a.parent().addClass("active");self.onQueryClick.notify(query,null,self);a.focus();e.preventDefault();e.stopImmediatePropagation()});$("\x3ci /\x3e",{class:"fa fa-bolt"}).appendTo(a);a.append(" "+value.name)}};this.createInstanceQueryMenu=
function(queryId){var self=this;this.queryToHighlightId=queryId;var queryProperty=this.findQueryUrl("instanceQuery");if(queryProperty!=null){var queryUri=queryProperty.tumlUri.replace(new RegExp("{(s*?.*?)*?}","gi"),encodeURIComponent(this.contextVertexId));$.ajax({url:queryUri,type:"GET",dataType:"json",contentType:"json",success:function(response){retrieveMetaDataIfNotInCache(queryUri,this.contextVertexId,response,self.continueCreateInstanceQueryMenu)},error:function(jqXHR,textStatus,errorThrown){alert("Error getting instance query data. textStatus: "+
textStatus+" errorThrown: "+errorThrown)}})}};this.continueCreateInstanceQueryMenu=function(tumlUri,result){self.createQueryMenu(self.umlInstanceQueriesDiv,tuml.tab.Enum.InstanceQueries,result);if(self.queryToHighlightId!==undefined&&self.queryToHighlightId!=-1)self.refreshQueryMenuCss(self.queryToHighlightId,Tuml.AccordionEnum.INSTANCE_QUERIES.index)};this.createClassQueryMenu=function(queryToHighLightId){var self=this;this.queryToHighlightId=queryToHighLightId;if(this.contextVertexId!==null){var classQueryUri=
"/"+tumlModelName+"/classquery/"+encodeURIComponent(this.contextVertexId)+"/query";$.ajax({url:classQueryUri,type:"GET",dataType:"json",contentType:"json",success:function(response){retrieveMetaDataIfNotInCache(classQueryUri,this.contextVertexId,response,self.continueCreateClassQueryMenu)},error:function(jqXHR,textStatus,errorThrown){alert("Error getting class query data. textStatus: "+textStatus+" errorThrown: "+errorThrown)}})}};this.continueCreateClassQueryMenu=function(tumlUri,result){self.createQueryMenu(self.umlClassQueriesDiv,
tuml.tab.Enum.ClassQueries,result);if(self.queryToHighlightId!==-1)self.refreshQueryMenuCss(self.queryToHighlightId,Tuml.AccordionEnum.CLASS_QUERIES.index)};this.createRootQueryMenu=function(queryToHighLightId){var self=this;this.queryToHighlightId=queryToHighLightId;var rootQueryUri="/"+tumlModelName+"/rootquerys";$.ajax({url:rootQueryUri,type:"GET",dataType:"json",contentType:"json",success:function(response){retrieveMetaDataIfNotInCache(rootQueryUri,null,response,self.continueCreateRootQueryMenu)},
error:function(jqXHR,textStatus,errorThrown){alert("Error getting root query data. textStatus: "+textStatus+" errorThrown: "+errorThrown)}})};this.continueCreateRootQueryMenu=function(tumlUri,result){self.createQueryMenu(self.umlRootQueriesDiv,tuml.tab.Enum.RootQueries,result);if(self.queryToHighlightId!==-1)self.refreshQueryMenuCss(self.queryToHighlightId,Tuml.AccordionEnum.ROOT_QUERIES.index)};this.deleteInstanceQuery=function(queryId){this.umlInstanceQueriesDiv.find("#"+queryId).remove()};this.deleteClassQuery=
function(queryId){this.umlClassQueriesDiv.find("#"+queryId).remove()};this.deleteRootQuery=function(queryId){this.umlRootQueriesDiv.find("#"+queryId).remove()};this.refreshInstanceQuery=function(queryId){this.umlInstanceQueriesDiv.children().remove();this.createInstanceQueryMenu(queryId)};this.refreshClassQuery=function(queryId){this.umlClassQueriesDiv.children().remove();this.createClassQueryMenu(queryId)};this.refreshRootQuery=function(queryId){this.umlRootQueriesDiv.children().remove();this.createRootQueryMenu(queryId)};
this.refreshQueryMenuCss=function(queryToHighlightId,leftAccordionIndex){if(this.umlInstanceQueriesDiv!==null){this.umlInstanceQueriesDiv.find("li.active").removeClass("active");this.umlInstanceQueriesDiv.find("#"+queryToHighlightId).addClass("active")}if(this.umlClassQueriesDiv!==null){this.umlClassQueriesDiv.find("li.active").removeClass("active");this.umlClassQueriesDiv.find("#"+queryToHighlightId).addClass("active")}if(this.umlRootQueriesDiv!==null){this.umlRootQueriesDiv.find("li.active").removeClass("active");
this.umlRootQueriesDiv.find("#"+queryToHighlightId).addClass("active")}if(leftAccordionIndex!=-1){$("#accordion").on("show.bs.collapse",function(){$("#accordion .in").collapse("hide")});if(leftAccordionIndex==Tuml.AccordionEnum.PROPERTIES.index){var propertiesAccordion=this.umlPropertiesDiv.parent();if(!propertiesAccordion.hasClass("in"))propertiesAccordion.collapse("show")}else if(leftAccordionIndex==Tuml.AccordionEnum.OPERATIONS.index){var operationsAccordion=this.umlOperationsDiv.parent();if(!operationsAccordion.hasClass("in"))operationsAccordion.collapse("show")}else if(leftAccordionIndex==
Tuml.AccordionEnum.INSTANCE_QUERIES.index){var instanceQueriesAccordion=this.umlInstanceQueriesDiv.parent();if(!instanceQueriesAccordion.hasClass("in"))instanceQueriesAccordion.collapse("show")}else if(leftAccordionIndex==Tuml.AccordionEnum.CLASS_QUERIES.index){var classQueriesAccordion=this.umlClassQueriesDiv.parent();if(!classQueriesAccordion.hasClass("in"))classQueriesAccordion.collapse("show")}else if(leftAccordionIndex==Tuml.AccordionEnum.ROOT_QUERIES.index){var rootQueriesAccordion=this.umlRootQueriesDiv.parent();
if(!rootQueriesAccordion.hasClass("in"))rootQueriesAccordion.collapse("show")}else if(leftAccordionIndex==Tuml.AccordionEnum.CLASS_GROOVY.index){var classGroovyAccordion=this.umlClassGroovyDiv.parent();if(!classGroovyAccordion.hasClass("in"))classGroovyAccordion.collapse("show")}else if(leftAccordionIndex==Tuml.AccordionEnum.INSTANCE_GROOVY.index){var instanceGroovyAccordion=this.umlInstanceGroovyDiv.parent();if(!instanceGroovyAccordion.hasClass("in"))instanceGroovyAccordion.collapse("show")}else throw"Unknown accordion index!";
}};this.refreshDiagramCss=function(diagramNameHighlightId,leftAccordionIndex){if(leftAccordionIndex!=-1){$("#accordion").on("show.bs.collapse",function(){$("#accordion .in").collapse("hide")});if(leftAccordionIndex==Tuml.AccordionEnum.PROPERTIES.index){var propertiesAccordion=this.umlPropertiesDiv.parent();if(!propertiesAccordion.hasClass("in"))propertiesAccordion.collapse("show")}else if(leftAccordionIndex==Tuml.AccordionEnum.OPERATIONS.index){var operationsAccordion=this.umlOperationsDiv.parent();
if(!operationsAccordion.hasClass("in"))operationsAccordion.collapse("show")}else if(leftAccordionIndex==Tuml.AccordionEnum.INSTANCE_QUERIES.index){var instanceQueriesAccordion=this.umlInstanceQueriesDiv.parent();if(!instanceQueriesAccordion.hasClass("in"))instanceQueriesAccordion.collapse("show")}else if(leftAccordionIndex==Tuml.AccordionEnum.CLASS_QUERIES.index){var classQueriesAccordion=this.umlClassQueriesDiv.parent();if(!classQueriesAccordion.hasClass("in"))classQueriesAccordion.collapse("show")}else if(leftAccordionIndex==
Tuml.AccordionEnum.ROOT_QUERIES.index){var rootQueriesAccordion=this.umlRootQueriesDiv.parent();if(!rootQueriesAccordion.hasClass("in"))rootQueriesAccordion.collapse("show")}else if(leftAccordionIndex==Tuml.AccordionEnum.CLASS_GROOVY.index){var classGroovyAccordion=this.umlClassGroovyDiv.parent();if(!classGroovyAccordion.hasClass("in"))classGroovyAccordion.collapse("show")}else if(leftAccordionIndex==Tuml.AccordionEnum.INSTANCE_GROOVY.index){var instanceGroovyAccordion=this.umlInstanceGroovyDiv.parent();
if(!instanceGroovyAccordion.hasClass("in"))instanceGroovyAccordion.collapse("show")}else if(leftAccordionIndex==Tuml.AccordionEnum.DIAGRAMS.index){var instanceDiagramAccordion=this.umlDiagramDiv.parent();if(!instanceDiagramAccordion.hasClass("in"))instanceDiagramAccordion.collapse("show");var node=this.diagramsTreeViewDiv.tree("getNodeById",diagramNameHighlightId);this.diagramsTreeViewDiv.tree("selectNode",node)}else throw"Unknown accordion index!";}};this.createLeftMenuDataArray=function(contextMetaDataFrom,
contextMetaDataTo,propertyNavigatingTo){var menuArray=[];for(var i=0;i<contextMetaDataFrom.properties.length;i++){var metaProperty=contextMetaDataFrom.properties[i];if(metaProperty.inverseComposite||!(metaProperty.dataTypeEnum!==undefined&&metaProperty.dataTypeEnum!==null||(metaProperty.onePrimitive||(metaProperty.oneEnumeration||(metaProperty.manyEnumeration||(metaProperty.manyPrimitive||(metaProperty.name=="id"||metaProperty.name=="uri"))))))){var menuMetaProperty={active:false};if(this.clickedProperty!==
null&&this.clickedProperty.qualifiedName===metaProperty.qualifiedName)menuMetaProperty.active=true;var menuIconClass="ui-icon";if(metaProperty.composite)menuIconClass=menuIconClass+" ui-icon-umlcomposition";else if(metaProperty.associationClassOne&&!metaProperty.memberEndOfAssociationClass)menuIconClass=menuIconClass+" ui-icon-umlassociationclass";else menuIconClass=menuIconClass+" ui-icon-umlassociation";menuMetaProperty["tumlUri"]=metaProperty.tumlUri;if(metaProperty.associationClassOne&&!metaProperty.memberEndOfAssociationClass){var propertyNameParts=
metaProperty.name.split("_");if(propertyNameParts.length===1)menuMetaProperty["name"]=propertyNameParts[0];else menuMetaProperty["name"]=propertyNameParts[0]+"["+propertyNameParts[1]+"]"}else menuMetaProperty["name"]=metaProperty.name;menuMetaProperty["menuIconClass"]=menuIconClass;if(metaProperty.upper==-1)menuMetaProperty["multiplicityDisplay"]="["+metaProperty.lower+"..*]";else menuMetaProperty["multiplicityDisplay"]="["+metaProperty.lower+".."+metaProperty.upper+"]";menuMetaProperty["property"]=
metaProperty;menuMetaProperty["derived"]=metaProperty.derived;menuMetaProperty["qualified"]=metaProperty.qualified;menuArray.push(menuMetaProperty)}}function compare(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;return 0}menuArray.sort(compare);if(contextMetaDataFrom.name!==tumlModelName)menuArray.splice(0,0,{tumlUri:contextMetaDataFrom.uri,name:contextMetaDataFrom.name,menuIconClass:"ui-icon ui-icon-umlactivity-final-node",aCssClass:""});return menuArray};this.findQueryUrl=function(queryPropertyName){var result=
null;for(var i=0;i<this.contextMetaDataFrom.properties.length;i++){var metaProperty=this.contextMetaDataFrom.properties[i];if(metaProperty.name==queryPropertyName){result=metaProperty;break}}return result};$.extend(this,{"TumlLeftMenuManagerVersion":"1.0.0","onMenuClick":new Tuml.Event,"onQueryClick":new Tuml.Event,"onDiagramClick":new Tuml.Event});init()}})(jQuery);
(function($){$.extend(true,window,{Tuml:{TumlMainViewManager:TumlMainViewManager,TumlFakeIndex:0,GlobalOneToOneIndex:GlobalOneToOneIndex}});function GlobalOneToOneIndex(){var index={};this.addToOneToOneIndex=function(fakeId,item){index[fakeId]=item};this.getIndex=function(fakeId){if(index[fakeId]!==undefined&&index[fakeId]!==null)return index[fakeId];return null}}function TumlMainViewManager(uiManager,leftMenuManager){this.TumlMainViewManager="1.0.0";var self=this;this.uiManager=uiManager;var oclExecuteUri;
var instanceQueryTumlUri;var classQueryTumlUri;var rootQueryTumlUri;this.contextVertexId=-1;var contextChanged=true;this.globalOneToOneIndex=new GlobalOneToOneIndex;this.qualifiedName=null;this.tumlActiveTabViewManager=null;this.setFocus=function(focusTo){if(focusTo==Tuml.FocusEnum.LEFT_MENU)leftMenuManager.setFocus();else if(focusTo==Tuml.FocusEnum.TOP_CONTEXT)this.tumlTabViewManagers[0].setFocus(focusTo);else this.tumlTabViewManagers[0].setFocus(focusTo)};this.refreshQueryMenuCss=function(queryToHighlightId,
accordionIndex){leftMenuManager.refreshQueryMenuCss(queryToHighlightId,accordionIndex)};this.refreshDiagramCss=function(diagramNameHighlightId,accordionIndex){leftMenuManager.refreshDiagramCss(diagramNameHighlightId,accordionIndex)};this.refresh=function(tumlUri,result){var metaDataNavigatingTo=result[0].meta.to;var metaDataNavigatingFrom=result[0].meta.from;this.propertyNavigatingTo=metaDataNavigatingFrom==undefined?null:findPropertyNavigatingTo(result[0].meta.qualifiedName,metaDataNavigatingFrom);
if(this.propertyNavigatingTo!=null&&(this.propertyNavigatingTo.oneToMany||this.propertyNavigatingTo.manyToMany)){this.qualifiedName=result[0].meta.qualifiedName;this.tumlUri=tumlUri;this.tabContainerProperty=this.propertyNavigatingTo;this.handleMany(metaDataNavigatingFrom,metaDataNavigatingTo,result)}else{var hasData=false;for(var i=0;i<result.length;i++)if(result[i].data!==null){hasData=true;break}var isForCreation=hasData===false;if(!isForCreation){this.qualifiedName=result[0].meta.qualifiedName;
this.tumlUri=tumlUri;this.tabContainerProperty=this.propertyNavigatingTo;metaDataNavigatingTo=this.handleOneNotForCreation(result)}else if(this.propertyNavigatingTo.composite){this.qualifiedName=result[0].meta.qualifiedName;this.tumlUri=tumlUri;this.tabContainerProperty=this.propertyNavigatingTo;this.handleOneForCreation(metaDataNavigatingFrom,metaDataNavigatingTo,result)}else{alert("Property "+this.propertyNavigatingTo.name+" has no data and can not be created as it is not composite!");return false}}if(this.contextVertexId==
null)oclExecuteUri="/"+tumlModelName+"/oclExecuteQuery";else oclExecuteUri="/"+tumlModelName+"/"+this.contextVertexId+"/oclExecuteQuery";if(hasInstanceQuery(metaDataNavigatingTo,metaDataNavigatingFrom))instanceQueryTumlUri="/"+tumlModelName+"/baseumlgwithquerys/"+this.contextVertexId+"/instanceQuery";else instanceQueryTumlUri="";classQueryTumlUri="/"+tumlModelName+"/classquery/"+this.contextVertexId+"/query";rootQueryTumlUri="/"+tumlModelName+"/rootquerys";if(this.contextVertexId!=undefined&&(this.contextVertexId!==
-1&&contextChanged))this.addDefaultQueryTab();else this.addRootQueryTab();if(!this.tumlTabViewManagers[0].activated){this.tumlTabViewManagers[0].activated=true;this.tumlTabViewManagers[0].activeOpenTabsGrid();this.tumlTabViewManagers[0].addOrRemoveSelectButton()}this.tumlTabViewManagers[0].open=true;this.tabContainer.find("a:first").tab("show");this.updateNavigationHeader(this.qualifiedName);$("body").layout().resizeAll();return true};this.handleMany=function(metaDataNavigatingFrom,metaDataNavigatingTo,
result){var newContextVertexId=retrieveVertexId(this.tumlUri);var savedTumlTabViewManagers=this.clearTabsOnAddOneOrMany(newContextVertexId);leftMenuManager.refresh(metaDataNavigatingFrom,metaDataNavigatingTo,this.contextVertexId,this.propertyNavigatingTo);refreshInternal(this.tumlUri,result,false);reorderTabsAfterAddOneOrMany(savedTumlTabViewManagers);this.tabContainer.find('a[data-toggle\x3d"tab"]').on("shown.bs.tab",function(e){$("#tabs-layoutpanelPanelDefault").children(".umlg-panel-footer.panel-footer").show()})};
this.handleOneNotForCreation=function(result){var self=this;var metaDataNavigatingTo;for(var i=0;i<result.length;i++)if(result[i].data!==null){metaDataNavigatingTo=result[i].meta.to;this.qualifiedName=result[i].meta.qualifiedName;var newContextVertexId=result[i].data.id;var savedTumlTabViewManagers=this.clearTabsOnAddOneOrMany(newContextVertexId);leftMenuManager.refresh(metaDataNavigatingTo,metaDataNavigatingTo,this.contextVertexId);var tumlTabViewManager=this.createTabContainer(tuml.tab.Enum.Properties,
result[i],this.tumlUri,{forLookup:false,forManyComponent:false,isOne:true,forCreation:false},this.propertyNavigatingTo);this.addToTumlTabViewManagers(tumlTabViewManager);tumlTabViewManager.createTab(result[i],false);reorderTabsAfterAddOneOrMany(savedTumlTabViewManagers);break}return metaDataNavigatingTo};this.handleTabActivate=function(e){var activatedTab=e.target.offsetParent;var activatedTabContentDiv=this.tabContainer.find("#"+activatedTab.id.substring(2));if(self instanceof Tuml.TumlMainViewManager){var tabEnum=
$.data(activatedTabContentDiv[0],"tabEnum");if(tabEnum!=tuml.tab.Enum.Diagrams){var queryId=$.data(activatedTabContentDiv[0],"queryId");if(queryId===undefined||queryId===null)queryId=-1;self.refreshQueryMenuCss(queryId,tabEnum)}else{var name=$.data(activatedTabContentDiv[0],"diagramName");self.refreshDiagramCss(name,tabEnum)}}self.deactivateGrids();if(e.relatedTarget!==undefined){var previousTab=e.relatedTarget.offsetParent;var previousTabContentDiv=this.tabContainer.find("#"+previousTab.id.substring(2));
for(var i=0;i<self.tumlTabViewManagers.length;i++){var tumlTabViewManager=self.tumlTabViewManagers[i];if(previousTabContentDiv[0]!==undefined&&previousTabContentDiv[0].id==tumlTabViewManager.getTabId()){tumlTabViewManager.isOpen=false;if(tumlTabViewManager.tumlTabGridManager!==undefined||tumlTabViewManager.tumlTabOneManager!==undefined){tumlTabViewManager.open=false;break}}}}var tumlTabViewManagerClickedOn=null;for(var i=0;i<self.tumlTabViewManagers.length;i++){var tumlTabViewManager=self.tumlTabViewManagers[i];
if(activatedTabContentDiv[0].id==tumlTabViewManager.getTabId()){tumlTabViewManagerClickedOn=tumlTabViewManager;if(tumlTabViewManager.tumlTabViewManagers.length===0)tumlTabViewManager.open=true;break}}tumlTabViewManagerClickedOn.isOpen=true;if(!tumlTabViewManagerClickedOn.activated){tumlTabViewManagerClickedOn.activeOpenTabsGrid();tumlTabViewManagerClickedOn.addOrRemoveSelectButton()}tumlTabViewManagerClickedOn.activated=false;if(this.tumlActiveTabViewManager!==null)this.tumlActiveTabViewManager.isOpen=
false;this.tumlActiveTabViewManager=tumlTabViewManagerClickedOn;this.tumlActiveTabViewManager.isOpen=true};this.handleOneForCreation=function(metaDataNavigatingFrom,metaDataNavigatingTo,result){var newContextVertexId=retrieveVertexId(this.tumlUri);var savedTumlTabViewManagers=this.clearTabsOnAddOneOrMany(newContextVertexId);leftMenuManager.refresh(metaDataNavigatingFrom,metaDataNavigatingTo,this.contextVertexId);refreshInternal(this.tumlUri,result,true,true);reorderTabsAfterAddOneOrMany(savedTumlTabViewManagers)};
this.saveViaKeyPress=function(){for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];if(tumlTabViewManager.saveViaKeyPress())return}};this.doSave=function(commit){var startTime=(new Date).getTime();var tumlTabViewManagers=this.getTumlTabManyOrOneViewManagers(commit);var validationResults=[];var overloadedPostData={insert:[],update:[],delete:[]};var many=true;for(var i=0;i<tumlTabViewManagers.length;i++){var tumlTabViewManager=tumlTabViewManagers[i];
if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager){var multiplicityValidationResult=this.validateMultiplicity(tumlTabViewManagers);if(multiplicityValidationResult!==null)validationResults.push(multiplicityValidationResult);var dataView=tumlTabViewManager.tumlTabGridManager.dataView;if(commit){validationResults.push.apply(validationResults,tumlTabViewManager.validateInsert());validationResults.push.apply(validationResults,tumlTabViewManager.validateUpdate())}overloadedPostData.insert.push.apply(overloadedPostData.insert,
dataView.getNewItems());overloadedPostData.update.push.apply(overloadedPostData.update,dataView.getUpdatedItems());overloadedPostData.delete.push.apply(overloadedPostData.delete,dataView.getDeletedItems())}else{many=false;if(tumlTabViewManager.oneManyOrQuery.forCreation){if(tumlTabViewManager.open){overloadedPostData.insert.push(tumlTabViewManager.tumlTabOneManager.data);if(commit)validationResults.push.apply(validationResults,tumlTabViewManager.validateInsert());break}}else{if(this.propertyNavigatingTo==
null){overloadedPostData=tumlTabViewManager.tumlTabOneManager.data;if(commit)validationResults.push.apply(validationResults,tumlTabViewManager.validateUpdate())}else{overloadedPostData.update.push(tumlTabViewManager.tumlTabOneManager.data);if(commit)validationResults.push.apply(validationResults,tumlTabViewManager.validateUpdate())}break}}}if(commit&&validationResults.length>0){var message="";for(var i=0;i<validationResults.length;i++){var validationResult=validationResults[i];message+=validationResult.toString()}alert(message);
return}var postUri;if(!commit)postUri=self.tumlUri+"?rollback\x3dtrue";else postUri=self.tumlUri;var AJAX_TYPE;if(this.propertyNavigatingTo==null)AJAX_TYPE="PUT";else AJAX_TYPE="POST";$.ajax({url:postUri,type:AJAX_TYPE,dataType:"json",contentType:"application/json",data:JSON.stringify(overloadedPostData),success:function(result){if(commit)self.updateTabsForResultAfterCommit(result);else self.updateTabsForResultAfterRollback(result)},error:function(jqXHR,textStatus,errorThrown){$("#serverErrorMsg").addClass("server-error-msg").html(jqXHR.responseText);
$(".top-center").notify({message:{text:"Failure"}}).show()}})};this.updateTabsForResultAfterCommit=function(result){for(var i=0;i<result.length;i++){var resultForTab=result[i];var metaForData=resultForTab.meta.to;var indexesToRemove=[];for(var j=0;j<this.tumlTabViewManagers.length;j++){var tumlTabViewManager=this.tumlTabViewManagers[j];if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager){tumlTabViewManager.beginUpdate();if(tumlTabViewManager.tabId==metaForData.name)for(var k=0;k<resultForTab.data.length;k++){this.clearComponentAndAssociationClassTmpId(resultForTab.data[k],
metaForData,true);tumlTabViewManager.updateGridAfterCommit(resultForTab.data[k])}tumlTabViewManager.endUpdate(false)}else if(tumlTabViewManager instanceof Tuml.TumlTabOneViewManager){if(result.length>1)throw"result array from server can not be bigger than one for a one!";if(tumlTabViewManager.tabId==metaForData.name){tumlTabViewManager.beginUpdate();this.clearComponentAndAssociationClassTmpId(resultForTab.data,metaForData,true);tumlTabViewManager.updateGridAfterCommit(resultForTab.data);tumlTabViewManager.endUpdate(true)}else indexesToRemove.push(j)}}for(var j=
0;j<indexesToRemove.length>0;j++){var index=indexesToRemove[j];this.tumlTabViewManagers[index].closeTab()}}for(var j=0;j<this.tumlTabViewManagers.length;j++){var tumlTabViewManager=this.tumlTabViewManagers[j];if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager)tumlTabViewManager.clearArraysAfterCommit()}};this.updateTabsForResultAfterRollback=function(result){for(var i=0;i<result.length;i++){var resultForTab=result[i];var metaForDataTo=resultForTab.meta.to;for(var j=0;j<this.tumlTabViewManagers.length;j++){var tumlTabViewManager=
this.tumlTabViewManagers[j];if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager){tumlTabViewManager.beginUpdate();if(tumlTabViewManager.tabId==metaForDataTo.name)for(var k=0;k<resultForTab.data.length;k++){this.setComponentIdToTmpId(resultForTab.data[k],metaForDataTo);tumlTabViewManager.updateGridAfterRollback(resultForTab.data[k])}tumlTabViewManager.endUpdate(true)}else if(tumlTabViewManager.tabId==metaForDataTo.name){tumlTabViewManager.beginUpdate();this.setComponentIdToTmpId(resultForTab.data,
metaForDataTo);tumlTabViewManager.updateGridAfterRollback(resultForTab.data);tumlTabViewManager.endUpdate(true)}}}};this.validateMultiplicity=function(tumlTabViewManagers){var rowCount=0;for(var i=0;i<tumlTabViewManagers.length;i++){var tumlTabViewManager=tumlTabViewManagers[i];if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager){var dataView=tumlTabViewManager.tumlTabGridManager.dataView;rowCount+=dataView.getItems().length}else{rowCount=1;break}}if(rowCount<this.tabContainerProperty.lower||
this.tabContainerProperty.upper!==-1&&rowCount>this.tabContainerProperty.upper){var validationResult=new Tuml.ValidationResult(-1,this.tabContainerProperty.name);validationResult.property=this.tabContainerProperty;validationResult.qualifiedName=this.tabContainerProperty.qualifiedName;validationResult.message="multiplicity falls outside the valid range ["+this.tabContainerProperty.lower+".."+(this.tabContainerProperty.upper!==-1?this.tabContainerProperty.upper:"*")+"]";return validationResult}else return null};
this.clearTabsOnAddOneOrMany=function(newContextVertexId){if(newContextVertexId===undefined&&this.contextVertexId===-1)contextChanged=true;else if(this.contextVertexId===-1&&newContextVertexId===null)contextChanged=true;else if(this.contextVertexId===-1&&newContextVertexId===undefined)contextChanged=true;else contextChanged=newContextVertexId!==this.contextVertexId;this.contextVertexId=newContextVertexId;if(contextChanged){this.destroyTabContainer();this.maybeCreateTabContainer()}else{this.removeMultiplicityWarningHeader();
var tumlTabViewManagersToClose=[];for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];if(tumlTabViewManager instanceof Tuml.TumlTabOneViewManager||tumlTabViewManager instanceof Tuml.TumlTabManyViewManager)tumlTabViewManagersToClose.push(tumlTabViewManager)}for(var i=0;i<tumlTabViewManagersToClose.length;i++){tumlTabViewManagersToClose[i].closeTab();this.tabLayoutTabFooterDiv.empty()}}this.addButtons();var savedTumlTabViewManagers=[];for(var i=0;i<
this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];savedTumlTabViewManagers.push(tumlTabViewManager)}return savedTumlTabViewManagers};this.addQueryTab=function(post,query){var tumlTabViewManagerQuery;var tabIndex=0;for(var j=0;j<this.tumlTabViewManagers.length;j++)if(this.tumlTabViewManagers[j].tabId==query.getDivName()){tumlTabViewManagerQuery=this.tumlTabViewManagers[j];tabIndex=j;break}if(tumlTabViewManagerQuery===undefined){if(query.queryType===undefined||
query.queryType===null)tumlTabViewManagerQuery=new Tuml.TumlTabQueryViewManager(tuml.tab.Enum.Properties,this.tabContainer,instanceQueryTumlUri,classQueryTumlUri,rootQueryTumlUri,query.getDivName(),query.name,query.id);else if(query.queryType==="instanceQuery")tumlTabViewManagerQuery=new Tuml.TumlTabQueryViewManager(tuml.tab.Enum.InstanceQueries,this.tabContainer,instanceQueryTumlUri,"","",query.getDivName(),query.name,query.id);else if(query.queryType==="classQuery")tumlTabViewManagerQuery=new Tuml.TumlTabQueryViewManager(tuml.tab.Enum.ClassQueries,
this.tabContainer,"",classQueryTumlUri,"",query.getDivName(),query.name,query.id);else tumlTabViewManagerQuery=new Tuml.TumlTabQueryViewManager(tuml.tab.Enum.RootQueries,this.tabContainer,"","",rootQueryTumlUri,query.getDivName(),query.name,query.id);tumlTabViewManagerQuery.createTab(post);tumlTabViewManagerQuery.parentTabContainerManager=this;if(query.id===-1){this.tumlTabViewManagers.push(tumlTabViewManagerQuery);reorderTabs()}else{this.tumlTabViewManagers.splice(this.tumlTabViewManagers.length-
1,0,tumlTabViewManagerQuery);reorderTabs()}tumlTabViewManagerQuery.createQuery(oclExecuteUri,query,post);tumlTabViewManagerQuery.showInlineForm();if(this.tumlActiveTabViewManager!==null)this.tumlActiveTabViewManager.isOpen=false;this.tumlActiveTabViewManager=tumlTabViewManagerQuery;this.tumlActiveTabViewManager.isOpen=true}else;return tumlTabViewManagerQuery};this.addDiagramTab=function(treeNode){var tumlTabDiagramViewManager;var tabIndex=0;for(var j=0;j<this.tumlTabViewManagers.length;j++)if(this.tumlTabViewManagers[j].tabId==
treeNode.name){tumlTabDiagramViewManager=this.tumlTabViewManagers[j];tabIndex=j;break}if(tumlTabDiagramViewManager===undefined){tumlTabDiagramViewManager=new Tuml.TumlTabDiagramViewManager(tuml.tab.Enum.Diagrams,this.tabContainer,treeNode.name,treeNode.name);tumlTabDiagramViewManager.createTab();tumlTabDiagramViewManager.parentTabContainerManager=this;this.tumlTabViewManagers.splice(this.tumlTabViewManagers.length-1,0,tumlTabDiagramViewManager);reorderTabs()}else this.tabContainer.children("ul").find("li:eq("+
self.tumlTabViewManagers.indexOf(tumlTabDiagramViewManager)+") a").tab("show");tumlTabDiagramViewManager.createDiagram(treeNode.path,treeNode.type);return tumlTabDiagramViewManager};this.afterSaveInstance=function(args,previousIndex){this.addDefaultQueryTab(false);var newTumlTabViewManager=this.addQueryTab(false,new Tuml.Query(args.query.id,args.query.name,args.query.name,args.query.queryString,args.query.queryEnum,args.gridData,args.queryType));var currentIndex=self.tumlTabViewManagers.indexOf(newTumlTabViewManager);
this.tumlTabViewManagers.splice(currentIndex,1);this.tumlTabViewManagers.splice(previousIndex,0,newTumlTabViewManager);leftMenuManager.refreshInstanceQuery(args.query.id)};this.afterUpdateInstance=function(args){this.addQueryTab(false,new Tuml.Query(args.query.id,args.query.name,args.query.name,args.query.queryString,args.query.queryEnum,args.gridData,args.queryType));leftMenuManager.refreshInstanceQuery(args.query.id)};this.afterDeleteInstance=function(args){leftMenuManager.deleteInstanceQuery(args.query.id)};
this.afterSaveClassQuery=function(args,previousIndex){this.addDefaultQueryTab(false);var newTumlTabViewManager=this.addQueryTab(false,new Tuml.Query(args.query.id,args.query.name,args.query.name,args.query.queryString,args.query.queryEnum,args.gridData,args.queryType));var currentIndex=self.tumlTabViewManagers.indexOf(newTumlTabViewManager);this.tumlTabViewManagers.splice(currentIndex,1);this.tumlTabViewManagers.splice(previousIndex,0,newTumlTabViewManager);leftMenuManager.refreshClassQuery(args.query.id)};
this.afterUpdateClassQuery=function(args){this.addQueryTab(false,new Tuml.Query(args.query.id,args.query.name,args.query.name,args.query.queryString,args.query.queryEnum,args.gridData,args.queryType));leftMenuManager.refreshClassQuery(args.query.id)};this.afterDeleteClassQuery=function(args){leftMenuManager.deleteClassQuery(args.query.id)};this.afterSaveRootQuery=function(args,previousIndex){this.addDefaultQueryTab(false);var newTumlTabViewManager=this.addQueryTab(false,new Tuml.Query(args.query.id,
args.query.name,args.query.name,args.query.queryString,args.query.queryEnum,args.gridData,args.queryType));var currentIndex=self.tumlTabViewManagers.indexOf(newTumlTabViewManager);this.tumlTabViewManagers.splice(currentIndex,1);this.tumlTabViewManagers.splice(previousIndex,0,newTumlTabViewManager);leftMenuManager.refreshRootQuery(args.query.id)};this.afterUpdateRootQuery=function(args){this.addQueryTab(false,new Tuml.Query(args.query.id,args.query.name,args.query.name,args.query.queryString,args.query.queryEnum,
args.gridData,args.queryType));leftMenuManager.refreshRootQuery(args.query.id)};this.afterDeleteRootQuery=function(args){leftMenuManager.deleteRootQuery(args.query.id)};function reorderTabsAfterAddOneOrMany(savedTumlTabViewManagers){for(var i=0;i<savedTumlTabViewManagers.length;i++){var tumlTabViewManager=savedTumlTabViewManagers[i];var index=self.tumlTabViewManagers.indexOf(tumlTabViewManager);self.tumlTabViewManagers.splice(index,1)}for(var i=0;i<savedTumlTabViewManagers.length;i++)self.tumlTabViewManagers.push(savedTumlTabViewManagers[i]);
reorderTabs()}function hasInstanceQuery(metaDataNavigatingTo,metaDataNavigatingFrom){var properties;if(metaDataNavigatingFrom!==undefined)properties=metaDataNavigatingFrom.properties;else properties=metaDataNavigatingTo.properties;for(var i=0;i<properties.length;i++){var property=properties[i];if(property.name!=="instanceQuery")return true}return false}this.addDefaultQueryTab=function(){this.addQueryTab(true,new Tuml.Query(-1,"New Query","New Query Description","self.name","ocl",null,null))};this.addRootQueryTab=
function(){if(this.contextVertexId!==null&&this.contextVertexId!==undefined||this.propertyNavigatingTo!==null&&this.propertyNavigatingTo!==undefined)this.addQueryTab(true,new Tuml.Query(-1,"New Query","New Query Description","self.name","ocl",null,"rootQuery"));else this.addQueryTab(true,new Tuml.Query(-1,"New Query","New Query Description","self.name","groovy",null,"rootQuery"))};function refreshInternal(tumlUri,result,isOne,forCreation){var previousTumlTabViewManager=null;for(var i=0;i<result.length;i++){if(previousTumlTabViewManager!==
null)previousTumlTabViewManager.open=false;var tumlTabViewManager=self.createTabContainer(tuml.tab.Enum.Properties,result[i],tumlUri,{forLookup:false,forManyComponent:false,isOne:isOne,forCreation:forCreation},self.propertyNavigatingTo);self.addToTumlTabViewManagers(tumlTabViewManager);if(forCreation){var data={id:"fake::"+Tuml.TumlFakeIndex++};data.tmpId=data.id;result[i].data=data}tumlTabViewManager.createTab(result[i],forCreation);if(forCreation)self.saveNewRow();previousTumlTabViewManager=tumlTabViewManager}}
function reorderTabs(){var tabsNav=self.tabContainer.find(".nav.nav-tabs");var first=true;for(var j=0;j<self.tumlTabViewManagers.length;j++){var li=$("#li"+self.tumlTabViewManagers[j].tabId);if(first)tabsNav.append(li);else li.insertAfter(tabsNav);tabsNav=li;first=false}}function findPropertyNavigatingTo(qualifiedName,metaDataNavigatingFrom){if(metaDataNavigatingFrom==undefined)return null;else{for(var i=0;i<metaDataNavigatingFrom.properties.length;i++){var property=metaDataNavigatingFrom.properties[i];
if(property.qualifiedName==qualifiedName)return property}alert("Property navigatingTo not found!!!");return null}}Tuml.TumlTabContainerManager.call(this,this.tabContainer)}TumlMainViewManager.prototype=new Tuml.TumlTabContainerManager;TumlMainViewManager.prototype.nestedCount=function(count){return count};TumlMainViewManager.prototype.refreshContext=function(tumlUri){this.uiManager.refresh(tumlUri)};TumlMainViewManager.prototype.addToOneToOneIndex=function(fakeId,item){this.globalOneToOneIndex.addToOneToOneIndex(fakeId,
item)};TumlMainViewManager.prototype.updateDataModelForOneToOne=function(fakeId,fieldName,one){var indexForFakeId=this.globalOneToOneIndex.getIndex(fakeId);if(indexForFakeId!==null)for(var j=0;j<this.tumlTabViewManagers.length;j++){var tumlTabViewManager=this.tumlTabViewManagers[j];if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager)tumlTabViewManager.updateOne(fakeId,fieldName,one,indexForFakeId)}};TumlMainViewManager.prototype.updateDataModelForOneToOneForUpdatedItem=function(qualifiedName,
id,displayName,fieldName,one){for(var j=0;j<this.tumlTabViewManagers.length;j++){var tumlTabViewManager=this.tumlTabViewManagers[j];if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager)if(tumlTabViewManager.tumlTabGridManager.localMetaForData.qualifiedName!==qualifiedName)tumlTabViewManager.updateOneForUpdate(id,displayName,fieldName,one)}};TumlMainViewManager.prototype.doCancel=function(){this.enableButtons();Slick.GlobalEditorLock.cancelCurrentEdit();this.uiManager.refresh(this.tumlUri)};
TumlMainViewManager.prototype.saveTabs=function(){this.doSave(true)};TumlMainViewManager.prototype.getTabId=function(){return"tabs-layout"};TumlMainViewManager.prototype.saveNewRow=function(){this.doSave(false)};TumlMainViewManager.prototype.handleLookup=function(lookupUri,qualifiedName,loadDataCallback){var startTime=(new Date).getTime();var tumlTabViewManagers=this.getTumlTabManyOrOneViewManagers(false);var overloadedPostData={insert:[],update:[],delete:[]};var AJAX_TYPE;for(var i=0;i<tumlTabViewManagers.length;i++){var tumlTabViewManager=
tumlTabViewManagers[i];if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager&&!tumlTabViewManager.oneManyOrQuery.forManyComponent){AJAX_TYPE="POST";if(!tumlTabViewManager.oneManyOrQuery.forManyComponent){var dataView=tumlTabViewManager.tumlTabGridManager.dataView;overloadedPostData.insert.push.apply(overloadedPostData.insert,dataView.getNewItems());overloadedPostData.update.push.apply(overloadedPostData.update,dataView.getUpdatedItems());overloadedPostData.delete.push.apply(overloadedPostData.delete,
dataView.getDeletedItems())}}else{if(this.propertyNavigatingTo==null)AJAX_TYPE="PUT";else AJAX_TYPE="POST";overloadedPostData=tumlTabViewManager.tumlTabOneManager.data;break}}var postUri;if(AJAX_TYPE==="POST")postUri=this.tumlUri+"_forwardToLookup?lookupUri\x3d"+lookupUri+"\x26qualifiedName\x3d"+qualifiedName;else postUri=this.tumlUri+"/forwardToLookup?lookupUri\x3d"+lookupUri+"\x26qualifiedName\x3d"+qualifiedName;$.ajax({url:postUri,type:AJAX_TYPE,dataType:"json",contentType:"application/json",data:JSON.stringify(overloadedPostData),
success:function(result){if(Array.isArray(result)){var dataForTabOnly=[];for(var j=0;j<result.length;j++){var r=result[j];if(r.meta.to.qualifiedName===qualifiedName){for(var i=0;i<r.data.length;i++){var item=r.data[i];if(item.tmpId!==undefined&&item.tmpId!==null)item.id=item.tmpId}dataForTabOnly.push(r)}}loadDataCallback(dataForTabOnly)}else{for(var i=0;i<result.data.length;i++){var item=result.data[i];if(item.tmpId!==undefined&&item.tmpId!==null)item.id=item.tmpId}loadDataCallback(result.data)}},
error:function(jqXHR,textStatus,errorThrown){$("#serverErrorMsg").addClass("server-error-msg").html(jqXHR.responseText)}})}})(jQuery);
(function($){$.extend(true,window,{Tuml:{MenuManager:MenuManager}});function MenuManager(){function init(){var ulClassNavbarRight=$("\x3cul /\x3e",{class:"nav navbar-nav navbar-right"}).appendTo(".collapse.navbar-collapse");var liUMLGMenu=$("\x3cli /\x3e",{class:"dropdown"}).appendTo(ulClassNavbarRight);$('\x3ca href\x3d"#" class\x3d"dropdown-toggle" data-toggle\x3d"dropdown"\x3eUMLG \x3cb class\x3d"caret"\x3e\x3c/b\x3e\x3c/a\x3e').appendTo(liUMLGMenu);var ulUMLGMenuHolder=$("\x3cul /\x3e",{class:"dropdown-menu"}).appendTo(liUMLGMenu);
var liDocumentationMenu=$("\x3cli /\x3e").appendTo(ulUMLGMenuHolder);$("\x3ca/\x3e",{href:"http://www.umlg.org/documentation.html",target:"_blank"}).text("Documentation").appendTo(liDocumentationMenu);var liSourceMenu=$("\x3cli /\x3e").appendTo(ulUMLGMenuHolder);$("\x3ca/\x3e",{href:"https://github.com/pietermartin/umlg",target:"_blank"}).text("Source").appendTo(liSourceMenu)}init()}})(jQuery);
(function($){$.extend(true,window,{Tuml:{Metadata:{Cache:new Cache}}});function Cache(){var metaDataIdx={};this.add=function(url,metaData){metaDataIdx[url]=metaData};this.getFromCache=function(url){return metaDataIdx[url]};this.get=function(qualifiedName,property,callback){var self=this;var metaData=metaDataIdx[qualifiedName];if(metaData===undefined)$.ajax({url:property.tumlMetaDataUri,type:"OPTIONS",dataType:"json",contentType:"application/json",success:function(result){self.add(qualifiedName,result);
callback.call(this,result)},error:function(jqXHR,textStatus,errorThrown){alert("error getting meta data "+property.tumlMetaDataUri+"\n textStatus: "+textStatus+"\n errorThrown: "+errorThrown)}});else callback.call(this,metaData)}}})(jQuery);Array.prototype.remove=function(){var what,a=arguments,L=a.length,ax;while(L&&this.length){what=a[--L];while((ax=this.indexOf(what))!==-1)this.splice(ax,1)}return this};
(function($){$.extend(true,window,{Tuml:{Query:Query}});function Query(id,name,description,queryString,type,data,queryType){this.id=id;this.name=name;this.description=description;this.queryString=queryString;this.type=type;this.data=data;this.queryType=queryType}Query.prototype=new Query;Query.prototype.getDivName=function(){if(this.id!==undefined||(this.id!==null||this.id!==-1))return"queryDivName"+this.id;else return"newQueryDivName"}})(jQuery);
(function($){$.extend(true,window,{Tuml:{Slick:{Data:{DataView:DataView,Aggregators:{Avg:AvgAggregator,Min:MinAggregator,Max:MaxAggregator,Sum:SumAggregator}}}}});function DataView(options){var self=this;var defaults={groupItemMetadataProvider:null,inlineFilters:false};var idProperty="id";var items=[];var rows=[];var idxById={};var rowsById=null;var filter=null;var updated=null;var suspend=false;var sortAsc=true;var fastSortField;var sortComparer;var refreshHints={};var prevRefreshHints={};var filterArgs;
var filteredItems=[];var compiledFilter;var compiledFilterWithCaching;var filterCache=[];var groupingInfoDefaults={getter:null,formatter:null,comparer:function(a,b){return a.value-b.value},predefinedValues:[],aggregators:[],aggregateEmpty:false,aggregateCollapsed:false,aggregateChildGroups:false,collapsed:false,displayTotalsRow:true};var groupingInfos=[];var groups=[];var toggledGroupsByLevel=[];var groupingDelimiter=":|:";var pagesize=0;var pagenum=0;var totalRows=0;var onRowCountChanged=new Slick.Event;
var onRowsChanged=new Slick.Event;var onPagingInfoChanged=new Slick.Event;var updatedItems=[];var newItems=[];var deletedItems=[];var postUpdatedIdxById={};var postNewIdxById={};var updatedIdxById={};var newIdxById={};options=$.extend(true,{},defaults,options);function beginUpdate(){suspend=true}function endUpdate(){suspend=false;refresh()}function setRefreshHints(hints){refreshHints=hints}function setFilterArgs(args){filterArgs=args}function updateIdxById(startingIndex){startingIndex=startingIndex||
0;var id;for(var i=startingIndex,l=items.length;i<l;i++){var item=items[i];id=item[idProperty];if(id===undefined)throw"Each data element must implement a unique 'id' property";idxById[id]=i}}function updateNewIdxById(startingIndex){startingIndex=startingIndex||0;var id;for(var i=startingIndex,l=newItems.length;i<l;i++){var newItem=newItems[i];id=newItem[idProperty];if(id===undefined)throw"Each data element must implement a unique 'id' property";newItem["_index"]=i;newIdxById[id]=i}}function updateUpdatedIdxById(startingIndex){startingIndex=
startingIndex||0;var id;for(var i=startingIndex,l=updatedItems.length;i<l;i++){var updatedItem=updatedItems[i];id=updatedItem[idProperty];if(id===undefined)throw"Each data element must implement a unique 'id' property";updatedItem["_index"]=i;updatedIdxById[id]=i}}function ensureIdUniqueness(){var id;for(var i=0,l=items.length;i<l;i++){id=items[i][idProperty];if(id===undefined||idxById[id]!==i)throw"Each data element must implement a unique 'id' property";}}function getItems(){return items}function getUpdatedItems(){return updatedItems}
function getNewItems(){return newItems}function getDeletedItems(){return deletedItems}function setNewItems(items){for(var i=0;i<items.length;i++)addItem(items[i])}function setItems(data,objectIdProperty){if(objectIdProperty!==undefined)idProperty=objectIdProperty;items=filteredItems=data;idxById={};updateIdxById();ensureIdUniqueness();refresh()}function setPagingOptions(args){if(args.pageSize!=undefined){pagesize=args.pageSize;pagenum=pagesize?Math.min(pagenum,Math.max(0,Math.ceil(totalRows/pagesize)-
1)):0}if(args.pageNum!=undefined)pagenum=Math.min(args.pageNum,Math.max(0,Math.ceil(totalRows/pagesize)-1));onPagingInfoChanged.notify(getPagingInfo(),null,self);refresh()}function getPagingInfo(){var totalPages=pagesize?Math.max(1,Math.ceil(totalRows/pagesize)):1;return{pageSize:pagesize,pageNum:pagenum,totalRows:totalRows,totalPages:totalPages}}function sort(comparer,ascending){sortAsc=ascending;sortComparer=comparer;fastSortField=null;if(ascending===false)items.reverse();items.sort(comparer);if(ascending===
false)items.reverse();idxById={};updateIdxById();refresh()}function fastSort(field,ascending){sortAsc=ascending;fastSortField=field;sortComparer=null;var oldToString=Object.prototype.toString;Object.prototype.toString=typeof field=="function"?field:function(){return this[field]};if(ascending===false)items.reverse();items.sort();Object.prototype.toString=oldToString;if(ascending===false)items.reverse();idxById={};updateIdxById();refresh()}function reSort(){if(sortComparer)sort(sortComparer,sortAsc);
else if(fastSortField)fastSort(fastSortField,sortAsc)}function setFilter(filterFn){filter=filterFn;if(options.inlineFilters){compiledFilter=compileFilter();compiledFilterWithCaching=compileFilterWithCaching()}refresh()}function getGrouping(){return groupingInfos}function setGrouping(groupingInfo){if(!options.groupItemMetadataProvider)options.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider;groups=[];toggledGroupsByLevel=[];groupingInfo=groupingInfo||[];groupingInfos=groupingInfo instanceof
Array?groupingInfo:[groupingInfo];for(var i=0;i<groupingInfos.length;i++){var gi=groupingInfos[i]=$.extend(true,{},groupingInfoDefaults,groupingInfos[i]);gi.getterIsAFn=typeof gi.getter==="function";gi.compiledAccumulators=[];var idx=gi.aggregators.length;while(idx--)gi.compiledAccumulators[idx]=compileAccumulatorLoop(gi.aggregators[idx]);toggledGroupsByLevel[i]={}}refresh()}function groupBy(valueGetter,valueFormatter,sortComparer){if(valueGetter==null){setGrouping([]);return}setGrouping({getter:valueGetter,
formatter:valueFormatter,comparer:sortComparer})}function setAggregators(groupAggregators,includeCollapsed){if(!groupingInfos.length)throw new Error("At least one grouping must be specified before calling setAggregators().");groupingInfos[0].aggregators=groupAggregators;groupingInfos[0].aggregateCollapsed=includeCollapsed;setGrouping(groupingInfos)}function getItemByIdx(i){return items[i]}function getIdxById(id){return idxById[id]}function ensureRowsByIdCache(){if(!rowsById){rowsById={};for(var i=
0,l=rows.length;i<l;i++)rowsById[rows[i][idProperty]]=i}}function getRowById(id){ensureRowsByIdCache();return rowsById[id]}function getItemById(id){return items[idxById[id]]}function mapIdsToRows(idArray){var rows=[];ensureRowsByIdCache();for(var i=0;i<idArray.length;i++){var row=rowsById[idArray[i]];if(row!=null)rows[rows.length]=row}return rows}function mapRowsToIds(rowArray){var ids=[];for(var i=0;i<rowArray.length;i++)if(rowArray[i]<rows.length)ids[ids.length]=rows[rowArray[i]][idProperty];return ids}
function updateItem(id,item,columnName){if(idxById[id]===undefined||id!==item[idProperty])throw"Invalid or non-matching id";items[idxById[id]]=item;if(!updated)updated={};updated[id]=true;refresh();if(newIdxById[id]!=undefined){if(newItems[newIdxById[id]].id!==id)throw"Non matching new id";var newField={};newField[columnName]=item[columnName];newItems[newIdxById[id]]=$.extend(newItems[newIdxById[id]],newField)}else{if(updatedIdxById[id]==undefined){updatedIdxById[id]=updatedItems.length;updatedItems[updatedItems.length]=
{id:id}}else if(updatedItems[updatedIdxById[id]].id!==id)throw"Non matching updated id";var updatedField={};updatedField[columnName]=item[columnName];updatedItems[updatedIdxById[id]]=$.extend(updatedItems[updatedIdxById[id]],updatedField)}}function insertItem(insertBefore,item){items.splice(insertBefore,0,item);updateIdxById(insertBefore);refresh()}function clearArraysAfterCommit(){updatedItems=[];updatedIdxById={};newItems=[];newIdxById={};deletedItems=[];postUpdatedIdxById={};postNewIdxById={}}
function refreshItemAfterRollback(itemToRefresh,composite){if(itemToRefresh.tmpId!==undefined){if(!composite)throw"After a rollback only composite properties can have a tmpId";if(itemToRefresh.id.indexOf("fake")!==-1){if(idxById[itemToRefresh.id]==undefined)throw"Invalid id";var index=idxById[itemToRefresh.id];items[index]=itemToRefresh;var newItemIndex=newIdxById[itemToRefresh.id];newItems[newItemIndex]=itemToRefresh}else{if(idxById[itemToRefresh.tmpId]==undefined)throw"Invalid id";var index=idxById[itemToRefresh.tmpId];
items[index]=itemToRefresh;delete idxById[itemToRefresh.tmpId];idxById[itemToRefresh.id]=index;var newItemIndex=newIdxById[itemToRefresh.tmpId];newItems[newItemIndex]=itemToRefresh;delete newIdxById[itemToRefresh.tmpId];newIdxById[itemToRefresh.id]=newItemIndex;postNewIdxById[index]=itemToRefresh.id}}else{if(idxById[itemToRefresh.id]==undefined)throw"Invalid id";var index=idxById[itemToRefresh.id];items[index]=itemToRefresh;if(updatedIdxById[itemToRefresh.id]!==undefined){var updatedItemIndex=updatedIdxById[itemToRefresh.id];
updatedItems[updatedItemIndex]=itemToRefresh}else if(newIdxById[itemToRefresh.id]!==undefined){var newItemIndex=newIdxById[itemToRefresh.id];newItems[newItemIndex]=itemToRefresh}else throw"updatedIdxById and newIdxById can not both be undefined!!!!";}refresh()}function refreshItemAfterCommit(itemToRefresh,composite){if(itemToRefresh.tmpId!==undefined){if(!composite)throw"After a commit only composite properties can have a tmpId";if(itemToRefresh.id.indexOf("fake")!==-1)throw"Item must have an id after a commit!";
else{if(idxById[itemToRefresh.tmpId]==undefined)throw"Invalid id";var index=idxById[itemToRefresh.tmpId];items[index]=itemToRefresh;delete idxById[itemToRefresh.tmpId];idxById[itemToRefresh.id]=index;var newItemIndex=newIdxById[itemToRefresh.tmpId];newItems[newItemIndex]=itemToRefresh;delete newIdxById[itemToRefresh.tmpId];newIdxById[itemToRefresh.id]=newItemIndex;postNewIdxById[index]=itemToRefresh.id}}else{if(idxById[itemToRefresh.id]==undefined)throw"Invalid id";var index=idxById[itemToRefresh.id];
items[index]=itemToRefresh;if(updatedIdxById[itemToRefresh.id]!==undefined){var updatedItemIndex=updatedIdxById[itemToRefresh.id];updatedItems[updatedItemIndex]=itemToRefresh;postUpdatedIdxById[index]=itemToRefresh.id}else if(newIdxById[itemToRefresh.id]!==undefined){var newItemIndex=newIdxById[itemToRefresh.id];newItems[newItemIndex]=itemToRefresh;postNewIdxById[index]=itemToRefresh.id}else throw"updatedIdxById and newIdxById can not both be undefined!!!!";}refresh()}function isRowSaved(index){return postNewIdxById[index]!==
undefined&&postNewIdxById[index]!==null}function isRowUpdated(index){return postUpdatedIdxById[index]!==undefined&&postUpdatedIdxById[index]!==null}function isNewRow(id){return newIdxById[id]!==undefined&&newIdxById[id]!==null}function isUpdatedRow(id){return updatedIdxById[id]!==undefined&&updatedIdxById[id]!==null}function addItem(item){items.push(item);newItems.push(item);newIdxById[item[idProperty]]=newItems.length-1;updateIdxById(items.length-1);refresh()}function deleteItem(id){var idx=idxById[id];
if(idx===undefined)throw"Invalid id";if(newIdxById[id]===undefined||newIdxById[id]===null){var item=items[idx];deletedItems.push(item);if(updatedIdxById[id]!==undefined||updatedIdxById[id]!==null){var updatedIdx=updatedIdxById[id];delete updatedIdxById[id];updatedItems.splice(updatedIdx,1);updateUpdatedIdxById(updatedIdx)}}else{var newIdx=newIdxById[id];delete newIdxById[id];newItems.splice(newIdx,1);updateNewIdxById(newIdx)}delete idxById[id];items.splice(idx,1);updateIdxById(idx);refresh()}function getLength(){return rows.length}
function getItem(i){return rows[i]}function getItemMetadata(i){var item=rows[i];if(item===undefined)return null;if(item.__group)return options.groupItemMetadataProvider.getGroupRowMetadata(item);if(item.__groupTotals)return options.groupItemMetadataProvider.getTotalsRowMetadata(item);return null}function expandCollapseAllGroups(level,collapse){if(level==null)for(var i=0;i<groupingInfos.length;i++){toggledGroupsByLevel[i]={};groupingInfos[i].collapsed=collapse}else{toggledGroupsByLevel[level]={};groupingInfos[level].collapsed=
collapse}refresh()}function collapseAllGroups(level){expandCollapseAllGroups(level,true)}function expandAllGroups(level){expandCollapseAllGroups(level,false)}function expandCollapseGroup(level,groupingKey,collapse){toggledGroupsByLevel[level][groupingKey]=groupingInfos[level].collapsed^collapse;refresh()}function collapseGroup(varArgs){var args=Array.prototype.slice.call(arguments);var arg0=args[0];if(args.length==1&&arg0.indexOf(groupingDelimiter)!=-1)expandCollapseGroup(arg0.split(groupingDelimiter).length-
1,arg0,true);else expandCollapseGroup(args.length-1,args.join(groupingDelimiter),true)}function expandGroup(varArgs){var args=Array.prototype.slice.call(arguments);var arg0=args[0];if(args.length==1&&arg0.indexOf(groupingDelimiter)!=-1)expandCollapseGroup(arg0.split(groupingDelimiter).length-1,arg0,false);else expandCollapseGroup(args.length-1,args.join(groupingDelimiter),false)}function getGroups(){return groups}function extractGroups(rows,parentGroup){var group;var val;var groups=[];var groupsByVal=
[];var r;var level=parentGroup?parentGroup.level+1:0;var gi=groupingInfos[level];for(var i=0,l=gi.predefinedValues.length;i<l;i++){val=gi.predefinedValues[i];group=groupsByVal[val];if(!group){group=new Slick.Group;group.value=val;group.level=level;group.groupingKey=(parentGroup?parentGroup.groupingKey+groupingDelimiter:"")+val;groups[groups.length]=group;groupsByVal[val]=group}}for(var i=0,l=rows.length;i<l;i++){r=rows[i];val=gi.getterIsAFn?gi.getter(r):r[gi.getter];group=groupsByVal[val];if(!group){group=
new Slick.Group;group.value=val;group.level=level;group.groupingKey=(parentGroup?parentGroup.groupingKey+groupingDelimiter:"")+val;groups[groups.length]=group;groupsByVal[val]=group}group.rows[group.count++]=r}if(level<groupingInfos.length-1)for(var i=0;i<groups.length;i++){group=groups[i];group.groups=extractGroups(group.rows,group)}groups.sort(groupingInfos[level].comparer);return groups}function calculateGroupTotals(group){var gi=groupingInfos[group.level];var isLeafLevel=group.level==groupingInfos.length;
var totals=new Slick.GroupTotals;var agg,idx=gi.aggregators.length;while(idx--){agg=gi.aggregators[idx];agg.init();gi.compiledAccumulators[idx].call(agg,!isLeafLevel&&gi.aggregateChildGroups?group.groups:group.rows);agg.storeResult(totals)}totals.group=group;group.totals=totals}function calculateTotals(groups,level){level=level||0;var gi=groupingInfos[level];var idx=groups.length,g;while(idx--){g=groups[idx];if(g.collapsed&&!gi.aggregateCollapsed)continue;if(g.groups)calculateTotals(g.groups,level+
1);if(gi.aggregators.length&&(gi.aggregateEmpty||(g.rows.length||g.groups&&g.groups.length)))calculateGroupTotals(g)}}function finalizeGroups(groups,level){level=level||0;var gi=groupingInfos[level];var groupCollapsed=gi.collapsed;var toggledGroups=toggledGroupsByLevel[level];var idx=groups.length,g;while(idx--){g=groups[idx];g.collapsed=groupCollapsed^toggledGroups[g.groupingKey];g.title=gi.formatter?gi.formatter(g):g.value;if(g.groups){finalizeGroups(g.groups,level+1);g.rows=[]}}}function flattenGroupedRows(groups,
level){level=level||0;var gi=groupingInfos[level];var groupedRows=[],rows,gl=0,g;for(var i=0,l=groups.length;i<l;i++){g=groups[i];groupedRows[gl++]=g;if(!g.collapsed){rows=g.groups?flattenGroupedRows(g.groups,level+1):g.rows;for(var j=0,jj=rows.length;j<jj;j++)groupedRows[gl++]=rows[j]}if(g.totals&&(gi.displayTotalsRow&&(!g.collapsed||gi.aggregateCollapsed)))groupedRows[gl++]=g.totals}return groupedRows}function getFunctionInfo(fn){var fnRegex=/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/;var matches=
fn.toString().match(fnRegex);return{params:matches[1].split(","),body:matches[2]}}function compileAccumulatorLoop(aggregator){var accumulatorInfo=getFunctionInfo(aggregator.accumulate);var fn=new Function("_items","for (var "+accumulatorInfo.params[0]+", _i\x3d0, _il\x3d_items.length; _i\x3c_il; _i++) {"+accumulatorInfo.params[0]+" \x3d _items[_i]; "+accumulatorInfo.body+"}");fn.displayName=fn.name="compiledAccumulatorLoop";return fn}function compileFilter(){var filterInfo=getFunctionInfo(filter);
var filterBody=filterInfo.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _retval[_idx++] \x3d $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] \x3d $item$; }; continue _coreloop; }$2");var tpl=["var _retval \x3d [], _idx \x3d 0; ","var $item$, $args$ \x3d _args; ","_coreloop: ","for (var _i \x3d 0, _il \x3d _items.length; _i \x3c _il; _i++) { ","$item$ \x3d _items[_i]; ","$filter$; ",
"} ","return _retval; "].join("");tpl=tpl.replace(/\$filter\$/gi,filterBody);tpl=tpl.replace(/\$item\$/gi,filterInfo.params[0]);tpl=tpl.replace(/\$args\$/gi,filterInfo.params[1]);var fn=new Function("_items,_args",tpl);fn.displayName=fn.name="compiledFilter";return fn}function compileFilterWithCaching(){var filterInfo=getFunctionInfo(filter);var filterBody=filterInfo.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _cache[_i] \x3d true;_retval[_idx++] \x3d $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,
"{ if ((_cache[_i] \x3d $1)) { _retval[_idx++] \x3d $item$; }; continue _coreloop; }$2");var tpl=["var _retval \x3d [], _idx \x3d 0; ","var $item$, $args$ \x3d _args; ","_coreloop: ","for (var _i \x3d 0, _il \x3d _items.length; _i \x3c _il; _i++) { ","$item$ \x3d _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] \x3d $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");tpl=tpl.replace(/\$filter\$/gi,filterBody);tpl=tpl.replace(/\$item\$/gi,filterInfo.params[0]);tpl=
tpl.replace(/\$args\$/gi,filterInfo.params[1]);var fn=new Function("_items,_args,_cache",tpl);fn.displayName=fn.name="compiledFilterWithCaching";return fn}function uncompiledFilter(items,args){var retval=[],idx=0;for(var i=0,ii=items.length;i<ii;i++)if(filter(items[i],args))retval[idx++]=items[i];return retval}function uncompiledFilterWithCaching(items,args,cache){var retval=[],idx=0,item;for(var i=0,ii=items.length;i<ii;i++){item=items[i];if(cache[i])retval[idx++]=item;else if(filter(item,args)){retval[idx++]=
item;cache[i]=true}}return retval}function getFilteredAndPagedItems(items){if(filter){var batchFilter=options.inlineFilters?compiledFilter:uncompiledFilter;var batchFilterWithCaching=options.inlineFilters?compiledFilterWithCaching:uncompiledFilterWithCaching;if(refreshHints.isFilterNarrowing)filteredItems=batchFilter(filteredItems,filterArgs);else if(refreshHints.isFilterExpanding)filteredItems=batchFilterWithCaching(items,filterArgs,filterCache);else if(!refreshHints.isFilterUnchanged)filteredItems=
batchFilter(items,filterArgs)}else filteredItems=pagesize?items:items.concat();var paged;if(pagesize){if(filteredItems.length<pagenum*pagesize)pagenum=Math.floor(filteredItems.length/pagesize);paged=filteredItems.slice(pagesize*pagenum,pagesize*pagenum+pagesize)}else paged=filteredItems;return{totalRows:filteredItems.length,rows:paged}}function getRowDiffs(rows,newRows){var item,r,eitherIsNonData,diff=[];var from=0,to=newRows.length;if(refreshHints&&refreshHints.ignoreDiffsBefore)from=Math.max(0,
Math.min(newRows.length,refreshHints.ignoreDiffsBefore));if(refreshHints&&refreshHints.ignoreDiffsAfter)to=Math.min(newRows.length,Math.max(0,refreshHints.ignoreDiffsAfter));for(var i=from,rl=rows.length;i<to;i++)if(i>=rl)diff[diff.length]=i;else{item=newRows[i];r=rows[i];if(groupingInfos.length&&((eitherIsNonData=item.__nonDataRow||r.__nonDataRow)&&item.__group!==r.__group)||item.__group&&!item.equals(r)||(eitherIsNonData&&(item.__groupTotals||r.__groupTotals)||(item[idProperty]!=r[idProperty]||
updated&&updated[item[idProperty]])))diff[diff.length]=i}return diff}function recalc(_items){rowsById=null;if(refreshHints.isFilterNarrowing!=prevRefreshHints.isFilterNarrowing||refreshHints.isFilterExpanding!=prevRefreshHints.isFilterExpanding)filterCache=[];var filteredItems=getFilteredAndPagedItems(_items);totalRows=filteredItems.totalRows;var newRows=filteredItems.rows;groups=[];if(groupingInfos.length){groups=extractGroups(newRows);if(groups.length){calculateTotals(groups);finalizeGroups(groups);
newRows=flattenGroupedRows(groups)}}var diff=getRowDiffs(rows,newRows);rows=newRows;return diff}function refresh(){if(suspend)return;var countBefore=rows.length;var totalRowsBefore=totalRows;var diff=recalc(items,filter);if(pagesize&&totalRows<pagenum*pagesize){pagenum=Math.max(0,Math.ceil(totalRows/pagesize)-1);diff=recalc(items,filter)}updated=null;prevRefreshHints=refreshHints;refreshHints={};if(totalRowsBefore!=totalRows)onPagingInfoChanged.notify(getPagingInfo(),null,self);if(countBefore!=rows.length)onRowCountChanged.notify({previous:countBefore,
current:rows.length},null,self);if(diff.length>0)onRowsChanged.notify({rows:diff},null,self)}function syncGridSelection(grid,preserveHidden){var self=this;var selectedRowIds=self.mapRowsToIds(grid.getSelectedRows());var inHandler;function update(){if(selectedRowIds.length>0){inHandler=true;var selectedRows=self.mapIdsToRows(selectedRowIds);if(!preserveHidden)selectedRowIds=self.mapRowsToIds(selectedRows);grid.setSelectedRows(selectedRows);inHandler=false}}grid.onSelectedRowsChanged.subscribe(function(e,
args){if(inHandler)return;selectedRowIds=self.mapRowsToIds(grid.getSelectedRows())});this.onRowsChanged.subscribe(update);this.onRowCountChanged.subscribe(update)}function syncGridCellCssStyles(grid,key){var hashById;var inHandler;storeCellCssStyles(grid.getCellCssStyles(key));function storeCellCssStyles(hash){hashById={};for(var row in hash){var id=rows[row][idProperty];hashById[id]=hash[row]}}function update(){if(hashById){inHandler=true;ensureRowsByIdCache();var newHash={};for(var id in hashById){var row=
rowsById[id];if(row!=undefined)newHash[row]=hashById[id]}grid.setCellCssStyles(key,newHash);inHandler=false}}grid.onCellCssStylesChanged.subscribe(function(e,args){if(inHandler)return;if(key!=args.key)return;if(args.hash)storeCellCssStyles(args.hash)});this.onRowsChanged.subscribe(update);this.onRowCountChanged.subscribe(update)}$.extend(this,{"beginUpdate":beginUpdate,"endUpdate":endUpdate,"setPagingOptions":setPagingOptions,"getPagingInfo":getPagingInfo,"getItems":getItems,"setItems":setItems,"setFilter":setFilter,
"sort":sort,"fastSort":fastSort,"reSort":reSort,"setGrouping":setGrouping,"getGrouping":getGrouping,"groupBy":groupBy,"setAggregators":setAggregators,"collapseAllGroups":collapseAllGroups,"expandAllGroups":expandAllGroups,"collapseGroup":collapseGroup,"expandGroup":expandGroup,"getGroups":getGroups,"getIdxById":getIdxById,"getRowById":getRowById,"getItemById":getItemById,"getItemByIdx":getItemByIdx,"mapRowsToIds":mapRowsToIds,"mapIdsToRows":mapIdsToRows,"setRefreshHints":setRefreshHints,"setFilterArgs":setFilterArgs,
"refresh":refresh,"updateItem":updateItem,"insertItem":insertItem,"addItem":addItem,"deleteItem":deleteItem,"syncGridSelection":syncGridSelection,"syncGridCellCssStyles":syncGridCellCssStyles,"getLength":getLength,"getItem":getItem,"getItemMetadata":getItemMetadata,"onRowCountChanged":onRowCountChanged,"onRowsChanged":onRowsChanged,"onPagingInfoChanged":onPagingInfoChanged,"getUpdatedItems":getUpdatedItems,"getNewItems":getNewItems,"getDeletedItems":getDeletedItems,"setNewItems":setNewItems,"isRowSaved":isRowSaved,
"isNewRow":isNewRow,"isUpdatedRow":isUpdatedRow,"isRowUpdated":isRowUpdated,"refreshItemAfterCommit":refreshItemAfterCommit,"refreshItemAfterRollback":refreshItemAfterRollback,"clearArraysAfterCommit":clearArraysAfterCommit,"updateNewIdxById":updateNewIdxById,"updateUpdatedIdxById":updateUpdatedIdxById})}function AvgAggregator(field){this.field_=field;this.init=function(){this.count_=0;this.nonNullCount_=0;this.sum_=0};this.accumulate=function(item){var val=item[this.field_];this.count_++;if(val!=
null&&(val!==""&&val!==NaN)){this.nonNullCount_++;this.sum_+=parseFloat(val)}};this.storeResult=function(groupTotals){if(!groupTotals.avg)groupTotals.avg={};if(this.nonNullCount_!=0)groupTotals.avg[this.field_]=this.sum_/this.nonNullCount_}}function MinAggregator(field){this.field_=field;this.init=function(){this.min_=null};this.accumulate=function(item){var val=item[this.field_];if(val!=null&&(val!==""&&val!==NaN))if(this.min_==null||val<this.min_)this.min_=val};this.storeResult=function(groupTotals){if(!groupTotals.min)groupTotals.min=
{};groupTotals.min[this.field_]=this.min_}}function MaxAggregator(field){this.field_=field;this.init=function(){this.max_=null};this.accumulate=function(item){var val=item[this.field_];if(val!=null&&(val!==""&&val!==NaN))if(this.max_==null||val>this.max_)this.max_=val};this.storeResult=function(groupTotals){if(!groupTotals.max)groupTotals.max={};groupTotals.max[this.field_]=this.max_}}function SumAggregator(field){this.field_=field;this.init=function(){this.sum_=null};this.accumulate=function(item){var val=
item[this.field_];if(val!=null&&(val!==""&&val!==NaN))this.sum_+=parseFloat(val)};this.storeResult=function(groupTotals){if(!groupTotals.sum)groupTotals.sum={};groupTotals.sum[this.field_]=this.sum_}}})(jQuery);
(function($){$.extend(true,window,{"Tuml":{"Slick":{"Editors":{"Integer":IntegerEditor,"Double":DoubleEditor,"Text":TextEditor,"SelectOneToOneCellEditor":SelectOneToOneCellEditor,"SelectToOneAssociationClassCellEditor":SelectToOneAssociationClassCellEditor,"SelectEnumerationCellEditor":SelectEnumerationCellEditor,"ManyPrimitiveEditor":ManyPrimitiveEditor,"ManyStringPrimitiveEditor":ManyStringPrimitiveEditor,"ManyEnumerationEditor":ManyEnumerationEditor,"ManyIntegerPrimitiveEditor":ManyIntegerPrimitiveEditor,
"ManyBooleanPrimitiveEditor":ManyBooleanPrimitiveEditor,"Checkbox":CheckboxEditor,"ManyDateEditor":ManyDateEditor,"ManyTime":ManyTimeEditor,"ManyDateTime":ManyDateTimeEditor,"Date":DateEditor,"DateTime":DateTimeEditor,"Time":TimeEditor}}}});function TextEditor(args){$.extend(this,{"TumlTextEditor":"1.0.0","serializeValueWithValue":serializeValueWithValue});var $input;var defaultValue;this.init=function(){$input=$("\x3cINPUT type\x3d'text' class\x3d'slick-grid-umlg-editor-text' /\x3e").appendTo(args.container).bind("keydown.nav",
function(e){if(e.keyCode===$.ui.keyCode.LEFT||e.keyCode===$.ui.keyCode.RIGHT)e.stopImmediatePropagation()}).focus().select()};this.destroy=function(){$input.remove()};this.focus=function(){$input.focus()};this.getValue=function(){return $input.val()};this.setValue=function(val){$input.val(val)};this.loadValue=function(item){defaultValue=item[args.column.field]||null;$input.val(defaultValue);$input[0].defaultValue=defaultValue;$input.select()};this.serializeValue=function(){return serializeValueWithValue($input)};
function serializeValueWithValue(input){var value=input.val();if(value=="")return null;else return value}this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){return $input.val()!=defaultValue};this.validate=function(){if(args.column.validator){var validationResults=args.column.validator($input.val());if(!validationResults.valid)return validationResults}return{valid:true,msg:null}};if(args!==undefined)this.init()}function ManyPrimitiveEditor(args){this.args=
args;this.$input;this.$table;var defaultValue;this.handleKeyPress=function(e){if(e.target==this.$input[0])if(e.which==13){this.addButton.click();e.stopImmediatePropagation()}};this.destroy=function(){this.args.grid["manyPrimitiveEditorOpen"]=false;this.panel.remove()};this.focus=function(){this.$input.focus()};this.loadValue=function(item){defaultValue=item[this.args.column.field];if(defaultValue!==undefined&&defaultValue!==null){for(var i=0;i<defaultValue.length;i++)this.addTr(defaultValue[i]);if(this.args.column.options.ordered)this.$table.tableDnD()}};
this.addTr=function(value){var row=$("\x3ctr /\x3e").addClass("many-primitive-editor-row");var rowValue=$('\x3ctd class\x3d"many-primitive-editor-cell" /\x3e').text(value);row.append(rowValue);row.data("value",value);var img=$('\x3cimg class\x3d"umlg-many-select-img" src\x3d"/'+tumlModelName+'/javascript/images/delete.png"\x3e').click(function(){var liClicked=$(this).parent().parent();liClicked.remove()});var imgValue=$('\x3ctd class\x3d"many-primitive-editor-cell many-primitive-editor-cell-img" /\x3e');
imgValue.append(img);row.append(imgValue);this.$table.append(row)};this.applyValue=function(item,state){item[this.args.column.field]=state};this.isValueChanged=function(){var rowArray=this.$table.find(".many-primitive-editor-row");var arrayToSerialize=[];for(var i=0;i<rowArray.length;i++){var row=rowArray[i];arrayToSerialize.push($(row).data("value"))}var result=false;if(defaultValue!==undefined&&(defaultValue!==null&&defaultValue.length==arrayToSerialize.length))for(var i=0;i<arrayToSerialize.length;i++){if(defaultValue[i]!=
arrayToSerialize[i]){result=true;break}}else result=true;return result};this.validate=function(){if(this.args.column.validator){var rowArray=this.$table.find(".many-primitive-editor-row");if(rowArray.length>0){var arrayToSerialize=[];for(var i=0;i<rowArray.length;i++){var row=rowArray[i];arrayToSerialize.push($(row).data("value"))}var validationResults=this.args.column.validator(arrayToSerialize);if(!validationResults.valid)return validationResults}}return{valid:true,msg:null}};if(this.args!==undefined)this.init()}
ManyPrimitiveEditor.prototype.serializeEditorValue=function(value){alert("serializeEditorValue must be overriden")};ManyPrimitiveEditor.prototype.serializeValue=function(){alert("this must be overriden")};ManyPrimitiveEditor.prototype.createInput=function(div){var input=$('\x3cinput type\x3dtext class\x3d"many-primitive-editor-input"\x3e');div.append(input);return input};ManyPrimitiveEditor.prototype.resetInput=function(input){input.val("")};ManyPrimitiveEditor.prototype.init=function(){if(this.args!==
undefined){this.args.grid["manyPrimitiveEditorOpen"]=true;this.args.grid["manyPrimitiveEditor"]=this}this.panel=$("\x3cdiv class\x3d'umlg-panel-many-editor panel panel-default many-primitive-editor' /\x3e");var panelHeading=$('\x3cdiv class\x3d"panel-heading umlg-panel-heading-popup" /\x3e').appendTo(this.panel);var topNavBar=$('\x3cdiv class\x3d"collapse navbar-collapse" /\x3e').appendTo(panelHeading);var panelBody=$('\x3cdiv class\x3d"panel-body" /\x3e').appendTo(this.panel);var self=this;this.addButton=
$('\x3cbutton type\x3d"button" id\x3d"many-primitive-editor-input-add-button" class\x3d"btn btn-default pull-left" /\x3e').text("Add").click(function(){var valueToAdd=self.$input.val();var currentValues=self.serializeValue();var testArray=[];testArray.push(valueToAdd);var validationResults=self.args.column.validator(testArray);if(currentValues.length!==0&&(validationResults.valid&&self.args.column.options.unique)){var serializedValueToAdd=self.serializeEditorValue(valueToAdd);validationResults=self.args.column.validator(currentValues,
serializedValueToAdd)}if(!validationResults.valid)alert(validationResults.msg);else{self.addTr(valueToAdd);if(self.args.column.options.ordered)self.$table.tableDnD();self.resetInput(self.$input)}}).appendTo(topNavBar);var formGroup=$('\x3cdiv class\x3d"form-group pull-left" /\x3e');this.$input=this.createInput(formGroup);this.$input.addClass("form-control");formGroup.appendTo(topNavBar);var resultDiv=$('\x3cdiv class\x3d"many-primitive-editor-result" /\x3e').appendTo(panelBody);this.$table=$('\x3ctable class\x3d"table table-bordered many-primitive-editor-result-table" /\x3e').appendTo(resultDiv);
this.panel.bind("keydown.nav",function(e){if(e.keyCode===$.ui.keyCode.LEFT||e.keyCode===$.ui.keyCode.RIGHT)e.stopImmediatePropagation()});this.panel.appendTo(this.args.container);this.$input.focus().select()};function ManyStringPrimitiveEditor(args){this.args=args;if(this.args!==undefined)this.init()}ManyStringPrimitiveEditor.prototype=new Tuml.Slick.Editors.ManyPrimitiveEditor;ManyStringPrimitiveEditor.prototype.serializeEditorValue=function(value){return value};ManyStringPrimitiveEditor.prototype.serializeValueForOne=
function(table){var rowArray=table.find(".many-primitive-editor-row");var arrayToSerialize=[];for(var i=0;i<rowArray.length;i++){var row=rowArray[i];arrayToSerialize.push($(row).data("value"))}return arrayToSerialize};ManyStringPrimitiveEditor.prototype.serializeValue=function(){var rowArray=this.$table.find(".many-primitive-editor-row");var arrayToSerialize=[];for(var i=0;i<rowArray.length;i++){var row=rowArray[i];arrayToSerialize.push($(row).data("value"))}return arrayToSerialize};ManyStringPrimitiveEditor.prototype.serializeValueWithValue=
function(){alert("ManyStringPrimitiveEditor.prototype.serializeValueWithValue must be overriden!")};function ManyEnumerationEditor(args){this.args=args;if(this.args!==undefined){this.$item=args.item;this.init()}}ManyEnumerationEditor.prototype=new Tuml.Slick.Editors.ManyStringPrimitiveEditor;ManyEnumerationEditor.prototype.createInput=function(parentDiv){var $select=$("\x3cSELECT id\x3d'aaaaaaaaaId' tabIndex\x3d'0' class\x3d'editor-select many-primitive-editor-input'\x3e\x3c/SELECT\x3e");$select.appendTo(parentDiv);
var $self=this;this.args.column.options.rowEnumerationLookupMap.getOrLoadMap(function(data){if(!$self.args.column.options.required)$select.append($("\x3coption /\x3e)").val("").html(""));$.each(data,function(index,obj){$select.append($("\x3coption /\x3e)").val(obj).html(obj))});var currentValue=$self.$item[$self.args.column.field];$select.val(currentValue);if(!$self.args.column.options.required)$select.chosen({allow_single_deselect:true});else $select.chosen();$select.focus()});return $select};ManyEnumerationEditor.prototype.resetInput=
function(input){input.val("").trigger("liszt:updated")};function ManyDateEditor(args){this.args=args;if(this.args!==undefined){this.$item=args.item;this.init()}}ManyDateEditor.prototype=new Tuml.Slick.Editors.ManyStringPrimitiveEditor;ManyDateEditor.prototype.createInput=function(div){var input=$("\x3cINPUT type\x3dtext /\x3e");input.appendTo(div);input.focus().select();input.datepicker({showOn:"button",buttonImageOnly:true,buttonImage:"../javascript/slickgrid/images/calendar.gif",dateFormat:"yy-mm-dd",
beforeShow:function(){calendarOpen=true},onClose:function(){calendarOpen=false}});return input};function ManyTimeEditor(args){this.args=args;if(this.args!==undefined){this.$item=args.item;this.init()}}ManyTimeEditor.prototype=new Tuml.Slick.Editors.ManyStringPrimitiveEditor;ManyTimeEditor.prototype.createInput=function(div){var input=$("\x3cINPUT type\x3dtext /\x3e");input.appendTo(div);input.focus().select();input.timepicker({showOn:"button",buttonImageOnly:true,buttonImage:"../javascript/slickgrid/images/calendar.gif",
beforeShow:function(){calendarOpen=true},onClose:function(){calendarOpen=false}});return input};function ManyDateTimeEditor(args){this.args=args;if(this.args!==undefined){this.$item=args.item;this.init()}}ManyDateTimeEditor.prototype=new Tuml.Slick.Editors.ManyStringPrimitiveEditor;ManyDateTimeEditor.prototype.createInput=function(div){var input=$("\x3cINPUT type\x3dtext /\x3e");input.appendTo(div);input.focus().select();input.datetimepicker({showOn:"button",buttonImageOnly:true,buttonImage:"../javascript/slickgrid/images/calendar.gif",
dateFormat:"yy-mm-dd",timeFormat:"hh:mm:ss",beforeShow:function(){calendarOpen=true},onClose:function(){calendarOpen=false}});return input};function ManyIntegerPrimitiveEditor(args){this.args=args;if(this.args!==undefined)this.init()}ManyIntegerPrimitiveEditor.prototype=new Tuml.Slick.Editors.ManyPrimitiveEditor;ManyIntegerPrimitiveEditor.prototype.serializeEditorValue=function(value){return parseInt(value,10)};ManyIntegerPrimitiveEditor.prototype.serializeValueForOne=function(table){var rowArray=
table.find(".many-primitive-editor-row");var arrayToSerialize=[];for(var i=0;i<rowArray.length;i++){var row=rowArray[i];arrayToSerialize.push(parseInt($(row).data("value"),10))}return arrayToSerialize};ManyIntegerPrimitiveEditor.prototype.serializeValue=function(){var rowArray=this.$table.find(".many-primitive-editor-row");var arrayToSerialize=[];for(var i=0;i<rowArray.length;i++){var row=rowArray[i];arrayToSerialize.push(parseInt($(row).data("value"),10))}return arrayToSerialize};function ManyBooleanPrimitiveEditor(args){this.args=
args;if(this.args!==undefined)this.init()}ManyBooleanPrimitiveEditor.prototype=new Tuml.Slick.Editors.ManyPrimitiveEditor;ManyBooleanPrimitiveEditor.prototype.serializeEditorValue=function(value){var valueTrue=value==="true"||(value==="t"||value==="1");var valueFalse=value==="false"||(value==="f"||value==="0");if(valueTrue)return true;else if(valueFalse)return false;else throw"Incorrect value for ManyBooleanPrimitiveEditor.prototype.serializeEditorValue: "+value;};ManyBooleanPrimitiveEditor.prototype.serializeValueForOne=
function(table){var rowArray=table.find(".many-primitive-editor-row");var arrayToSerialize=[];for(var i=0;i<rowArray.length;i++){var row=rowArray[i];var value=$(row).data("value");var isTrueSet=value==="true"||(value==="t"||value==="1");arrayToSerialize.push(isTrueSet)}return arrayToSerialize};ManyBooleanPrimitiveEditor.prototype.serializeValue=function(){var rowArray=this.$table.find(".many-primitive-editor-row");var arrayToSerialize=[];for(var i=0;i<rowArray.length;i++){var row=rowArray[i];var value=
$(row).data("value");var isTrueSet=value==="true"||(value==="t"||(value==="1"||value));arrayToSerialize.push(isTrueSet)}return arrayToSerialize};function IntegerEditor(args){$.extend(this,{"TumlIntegerEditor":"1.0.0","serializeValueWithValue":serializeValueWithValue});var $input;var defaultValue;var scope=this;this.init=function(){$input=$("\x3cINPUT type\x3dtext class\x3d'slick-grid-umlg-editor-text' /\x3e");$input.bind("keydown.nav",function(e){if(e.keyCode===$.ui.keyCode.LEFT||e.keyCode===$.ui.keyCode.RIGHT)e.stopImmediatePropagation()});
$input.appendTo(args.container);$input.focus().select()};this.destroy=function(){$input.remove()};this.focus=function(){$input.focus()};this.loadValue=function(item){defaultValue=item[args.column.field];$input.val(defaultValue);$input[0].defaultValue=defaultValue;$input.select()};this.serializeValue=function(){return serializeValueWithValue($input)};function serializeValueWithValue(input){return parseInt(input.val(),10)||0}this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=
function(){return!($input.val()==""&&defaultValue==null)&&$input.val()!=defaultValue};this.validate=function(){if(args.column.validator){var validationResults=args.column.validator($input.val());if(!validationResults.valid)return validationResults}return{valid:true,msg:null}};if(args!==undefined)this.init()}function DoubleEditor(args){$.extend(this,{"TumlDoubleEditor":"1.0.0","serializeValueWithValue":serializeValueWithValue});var $input;var defaultValue;this.init=function(){$input=$("\x3cINPUT type\x3dtext class\x3d'slick-grid-umlg-editor-text' /\x3e");
$input.bind("keydown.nav",function(e){if(e.keyCode===$.ui.keyCode.LEFT||e.keyCode===$.ui.keyCode.RIGHT)e.stopImmediatePropagation()});$input.appendTo(args.container);$input.focus().select()};this.destroy=function(){$input.remove()};this.focus=function(){$input.focus()};this.loadValue=function(item){defaultValue=item[args.column.field];$input.val(defaultValue);$input[0].defaultValue=defaultValue;$input.select()};this.serializeValue=function(){return serializeValueWithValue($input)};function serializeValueWithValue(input){return parseFloat(input.val())||
0}this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){return!($input.val()==""&&defaultValue==null)&&$input.val()!=defaultValue};this.validate=function(){if(args.column.validator){var validationResults=args.column.validator($input.val());if(!validationResults.valid)return validationResults}return{valid:true,msg:null}};if(args!==undefined)this.init()}function DateEditor(args){$.extend(this,{"TumlDateEditor":"1.0.0","serializeValueWithValue":serializeValueWithValue});
var $input;var defaultValue;var calendarOpen=false;this.init=function(){$input=$("\x3cINPUT type\x3d'text' class\x3d'slick-grid-umlg-editor-text' /\x3e");$input.appendTo(args.container);$input.focus().select();$input.datepicker({showOn:"button",buttonImageOnly:true,buttonImage:"/"+tumlModelName+"/javascript/slickgrid/images/calendar.gif",dateFormat:"yy-mm-dd",beforeShow:function(){calendarOpen=true},onClose:function(){calendarOpen=false}});$input.width($input.width()-18)};this.destroy=function(){$.datepicker.dpDiv.stop(true,
true);$input.datepicker("hide");$input.datepicker("destroy");$input.remove()};this.show=function(){if(calendarOpen)$.datepicker.dpDiv.stop(true,true).show()};this.hide=function(){if(calendarOpen)$.datepicker.dpDiv.stop(true,true).hide()};this.focus=function(){if(!$input.is(":hidden"))$input.focus()};this.loadValue=function(item){defaultValue=item[args.column.field];if(defaultValue!==undefined&&defaultValue!==null)$input.datepicker("setDate",new Date(defaultValue));$input.select()};this.serializeValue=
function(){return serializeValueWithValue($input)};function serializeValueWithValue(input){return input.val()}this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){return!($input.val()==""&&defaultValue==null)&&$input.val()!=defaultValue};this.validate=function(){if(args.column.validator){var validationResults=args.column.validator($input.val());if(!validationResults.valid)return validationResults}return{valid:true,msg:null}};if(args!==undefined)this.init()}
function DateTimeEditor(args){$.extend(this,{"TumlDateTimeEditor":"1.0.0","serializeValueWithValue":serializeValueWithValue});var $input;var defaultValue;var calendarOpen=false;this.init=function(){$input=$("\x3cINPUT type\x3d'text' class\x3d'slick-grid-umlg-editor-text' /\x3e");$input.appendTo(args.container);$input.focus().select();$input.datetimepicker({showOn:"button",buttonImageOnly:true,buttonImage:"/"+tumlModelName+"/javascript/slickgrid/images/calendar.gif",dateFormat:"yy-mm-dd",timeFormat:"hh:mm:ss",
beforeShow:function(){calendarOpen=true},onClose:function(){calendarOpen=false}});$input.width($input.width()-18)};this.destroy=function(){$.datepicker.dpDiv.stop(true,true);$input.datepicker("hide");$input.datepicker("destroy");$input.remove()};this.show=function(){if(calendarOpen)$.datepicker.dpDiv.stop(true,true).show()};this.hide=function(){if(calendarOpen)$.datepicker.dpDiv.stop(true,true).hide()};this.focus=function(){$input.focus()};this.loadValue=function(item){defaultValue=item[args.column.field];
if(defaultValue!==null)$input.datetimepicker("setDate",new Date(defaultValue));$input.select()};this.serializeValue=function(){return serializeValueWithValue($input)};function serializeValueWithValue(input){return input.val()}this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){return!($input.val()==""&&defaultValue==null)&&$input.val()!=defaultValue};this.validate=function(){if(args.column.validator){var validationResults=args.column.validator($input.val());
if(!validationResults.valid)return validationResults}return{valid:true,msg:null}};if(args!==undefined)this.init()}function TimeEditor(args){$.extend(this,{"TumlTimeEditor":"1.0.0","serializeValueWithValue":serializeValueWithValue});var $input;var defaultValue;var calendarOpen=false;this.init=function(){$input=$("\x3cINPUT type\x3d'text' class\x3d'slick-grid-umlg-editor-text' /\x3e");$input.appendTo(args.container);$input.focus().select();$input.timepicker({showOn:"button",buttonImageOnly:true,buttonImage:"/"+
tumlModelName+"/javascript/slickgrid/images/calendar.gif",beforeShow:function(){calendarOpen=true},onClose:function(){calendarOpen=false}});$input.width($input.width()-18)};this.destroy=function(){$.datepicker.dpDiv.stop(true,true);$input.datepicker("hide");$input.datepicker("destroy");$input.remove()};this.show=function(){if(calendarOpen)$.datepicker.dpDiv.stop(true,true).show()};this.hide=function(){if(calendarOpen)$.datepicker.dpDiv.stop(true,true).hide()};this.focus=function(){$input.focus()};
this.loadValue=function(item){defaultValue=item[args.column.field];if(defaultValue!==null){var indexOfFirstColon=defaultValue.indexOf(":");var indexOfSecondColon=defaultValue.indexOf(":",indexOfFirstColon+1);var hour=defaultValue.substring(0,indexOfFirstColon);var minute=defaultValue.substring(indexOfFirstColon+1,indexOfSecondColon);$input.datetimepicker("setDate",new Date(0,0,0,parseInt(hour),parseInt(minute),0))}$input.select()};this.serializeValue=function(){return serializeValueWithValue($input)};
function serializeValueWithValue(input){return input.val()}this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){return!($input.val()==""&&defaultValue==null)&&$input.val()!=defaultValue};this.validate=function(){if(args.column.validator){var validationResults=args.column.validator($input.val());if(!validationResults.valid)return validationResults}return{valid:true,msg:null}};if(args!==undefined)this.init()}function CheckboxEditor(args){$.extend(this,{"TumlCheckBoxEditor":"1.0.0",
"serializeValueWithValue":serializeValueWithValue});var $select;var defaultValue;this.init=function(){$select=$("\x3cINPUT type\x3dcheckbox value\x3d'true' class\x3d'editor-checkbox' hideFocus\x3e");$select.appendTo(args.container);$select.focus()};this.destroy=function(){$select.remove()};this.focus=function(){$select.focus()};this.loadValue=function(item){defaultValue=item[args.column.field];if(defaultValue)$select.attr("checked","checked");else $select.removeAttr("checked")};this.serializeValue=
function(){return serializeValueWithValue($select)};function serializeValueWithValue(select){return select.attr("checked")=="checked"}this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){if($select.attr("checked")=="checked"&&defaultValue!=true)return true;else if($select.attr("checked")!=="checked"&&defaultValue!=false)return true;else return false};this.validate=function(){return{valid:true,msg:null}};if(args!==undefined)this.init()}function SelectEnumerationCellEditor(args){$.extend(this,
{"TumlSelectEnumerationCellEditor":"1.0.0","serializeValueWithValue":serializeValueWithValue});var $select;var currentValue;this.init=function(item){$select=$("\x3cSELECT tabIndex\x3d'0' class\x3d'editor-select' style\x3d'width:115px;'\x3e\x3c/SELECT\x3e");$select.appendTo(args.container);args.column.options.rowEnumerationLookupMap.getOrLoadMap(function(data){if(!args.column.options.required)$select.append($("\x3coption /\x3e)").val("").html(""));$.each(data,function(index,obj){$select.append($("\x3coption /\x3e)").val(obj).html(obj))});
currentValue=item[args.column.field];$select.val(currentValue);if(!args.column.options.required)$select.chosen({allow_single_deselect:true});else $select.chosen();$select.focus()})};this.destroy=function(){$select.remove()};this.focus=function(){$select.focus()};this.loadValue=function(item){};this.serializeValue=function(){if(args.column.options)return serializeValueWithValue($select);else alert("why is this happening?")};function serializeValueWithValue(select){return select.val()}this.applyValue=
function(item,state){item[args.column.field]=state};this.isValueChanged=function(){if(currentValue===null||currentValue===undefined)return true;else return $select.val()!=currentValue};this.validate=function(){if(args.column.validator){var validationResults=args.column.validator($select.val());if(!validationResults.valid)return validationResults}return{valid:true,msg:null}};if(args!==undefined)this.init(args.item)}function SelectOneToOneCellEditor(args){$.extend(this,{"TumlSelectOneToOneEditor":"1.0.0",
"serializeValueWithValue":serializeValueWithValue});var $select;var currentValue;this.init=function(item){$select=$("\x3cSELECT tabIndex\x3d'0' class\x3d'editor-select' style\x3d'width:115px;'\x3e\x3c/SELECT\x3e");$select.appendTo(args.container);var lookupUri=args.column.options.property.tumlLookupUri;var id=item.id;var adjustedUri=lookupUri.replace(new RegExp("{(s*?.*?)*?}","gi"),id);var tumlBaseGridManager=args.column.options.tumlBaseGridManager;var row=args.grid.getActiveCell().row;if(row>=args.grid.getDataLength())tumlBaseGridManager.handleAddNewRow();
else tumlBaseGridManager.handleLookup(adjustedUri,item.qualifiedName,function(data){if(!args.column.options.required)$select.append($("\x3coption /\x3e)").val("").html(""));for(var i=0;i<data.length;i++){var obj=data[i];$select.append($("\x3coption /\x3e)").val(obj.id).html(obj.name))}currentValue=item[args.column.field];if(currentValue!==undefined&&currentValue!==null)$select.append($('\x3coption selected\x3d"selected"/\x3e)').val(currentValue.id).html(currentValue.displayName));if(!args.column.options.required)$select.chosen({allow_single_deselect:true});
else $select.chosen();$select.focus()})};this.destroy=function(){$select.remove()};this.focus=function(){$select.focus()};this.loadValue=function(item){};this.serializeValue=function(){if(args.column.options)return serializeValueWithValue($select);else alert("why is this happening? 2")};function serializeValueWithValue(select){var options=select.children();for(var i=0;i<options.length;i++)if(options[i].selected){var value=select.val();if(value==="")return{id:null,displayName:null,previousId:currentValue.id};
else return{id:select.val(),displayName:options[i].label,previousId:currentValue.id};break}}this.applyValue=function(item,state){item[args.column.field]=state};this.isValueChanged=function(){if(currentValue===null||currentValue===undefined)return true;else return $select.val()!=currentValue.id};this.validate=function(){if(args.column.validator){var validationResults=args.column.validator($select.val());if(!validationResults.valid)return validationResults}return{valid:true,msg:null}};if(args!==undefined)this.init(args.item)}
function SelectToOneAssociationClassCellEditor(args){$.extend(this,{"SelectToOneAssociationClassCellEditor":"1.0.0","serializeValueWithValue":serializeValueWithValue});var $select;var currentValue;this.init=function(item){$select=$("\x3cSELECT tabIndex\x3d'0' class\x3d'editor-select' style\x3d'width:115px;'\x3e\x3c/SELECT\x3e");$select.appendTo(args.container);var lookupUri=args.column.options.property.tumlLookupUri;var id=item.id;var adjustedUri=lookupUri.replace(new RegExp("{(s*?.*?)*?}","gi"),
id);var tumlBaseGridManager=args.column.options.tumlBaseGridManager;var row=args.grid.getActiveCell().row;if(row>=args.grid.getDataLength())tumlBaseGridManager.handleAddNewRow();else tumlBaseGridManager.handleLookup(adjustedUri,item.qualifiedName,function(data){if(!args.column.options.required)$select.append($("\x3coption /\x3e)").val("").html(""));for(var i=0;i<data.length;i++){var obj=data[i];$select.append($("\x3coption /\x3e)").val(obj.id).html(obj.name))}currentValue=item[args.column.field];
if(currentValue!==undefined&&currentValue!==null)$select.append($('\x3coption selected\x3d"selected"/\x3e)').val(currentValue.id).html(currentValue.displayName));if(!args.column.options.required)$select.chosen({allow_single_deselect:true});else $select.chosen();$select.focus()})};this.destroy=function(){$select.remove()};this.focus=function(){$select.focus()};this.loadValue=function(item){};this.serializeValue=function(){if(args.column.options)return serializeValueWithValue($select);else alert("why is this happening? 2")};
function serializeValueWithValue(select){var options=select.children();for(var i=0;i<options.length;i++)if(options[i].selected){var value=select.val();if(value==="")return{id:null,displayName:null,previousId:currentValue.id};else return{id:select.val(),displayName:options[i].label,previousId:currentValue.id};break}}this.applyValue=function(item,state){item[args.column.field]=state;if(item[args.column.field].id!==null){var fakeId="fake::"+Tuml.TumlFakeIndex++;item[args.column.options.property.associationClassPropertyName]=
{id:fakeId,tmpId:fakeId,displayName:null,refreshFromDb:true}}else item[args.column.options.property.associationClassPropertyName]={id:null,tmpId:null,displayName:null,refreshFromDb:false}};this.isValueChanged=function(){if(currentValue===null||currentValue===undefined)return true;else if((currentValue.id===undefined||currentValue.id===null)&&$select.val()=="")return false;else return $select.val()!=currentValue.id};this.validate=function(){if(args.column.validator){var validationResults=args.column.validator($select.val());
if(!validationResults.valid)return validationResults}return{valid:true,msg:null}};if(args!==undefined)this.init(args.item)}})(jQuery);
(function($){$.extend(true,window,{"TumlSlick":{"Formatters":{"TumlRequired":TumlRequiredFormatter,"TumlDerivedPropertyFormatter":TumlDerivedPropertyFormatter,"TumlToOneRequiredFormatter":TumlToOneRequiredFormatter,"TumlToAssociationClassRequiredFormatter":TumlToAssociationClassRequiredFormatter,"TumlToAssociationClassFormatter":TumlToAssociationClassFormatter,"TumlValidationFailedFormatter":TumlValidationFailedFormatter,"TumlDelete":TumlDeleteFormatter,"TumlBoolean":TumlBooleanFormatter,"TumlManyBoolean":TumlManyBooleanFormatter,
"Link":LinkFormatter,"TumlRegularFormatter":TumlRegularFormatter,"TumlIdNewFormatter":TumlIdNewFormatter,"TumlIdUpdatedFormatter":TumlIdUpdatedFormatter,"TumlAssociationComponentFormatter":TumlAssociationComponentFormatter,"TumlComponentFormatter":TumlComponentFormatter}}});function TumlComponentFormatter(row,cell,value,columnDef,dataContext){return"component"}function TumlAssociationComponentFormatter(row,cell,value,columnDef,dataContext){return"association class"}function TumlRegularFormatter(row,
cell,value,columnDef,dataContext){return value}function TumlIdNewFormatter(row,cell,value,columnDef,dataContext){return'\x3cspan class\x3d"umlg-new-id"\x3e'+value+"\x3c/span\x3e"}function TumlIdUpdatedFormatter(row,cell,value,columnDef,dataContext){return'\x3cspan class\x3d"umlg-updated-id"\x3e'+value+"\x3c/span\x3e"}function TumlValidationFailedFormatter(row,cell,value,columnDef,dataContext){if(value==null||(value===""||value.length===0))return"\x3cdiv style\x3d'color:red;'\x3erequired\x3c/div\x3e";
else return"\x3cdiv style\x3d'color:red;'\x3e"+value+"\x3c/div\x3e"}function TumlToOneRequiredFormatter(row,cell,value,columnDef,dataContext){if(value==null||value===undefined)return"\x3cdiv style\x3d'color:red;'\x3erequired\x3c/div\x3e";else if(value.id==null)return"\x3cdiv style\x3d'color:red;'\x3erequired\x3c/div\x3e";else return value.displayName}function TumlToAssociationClassRequiredFormatter(row,cell,value,columnDef,dataContext){if(value==null||value===undefined)return"\x3cdiv style\x3d'color:red;'\x3erequired\x3c/div\x3e";
else if(value.id==null)return"\x3cdiv style\x3d'color:red;'\x3erequired\x3c/div\x3e";else if(value.displayName!==undefined&&value.displayName!=="null")return value.id+" | "+value.displayName;else if(value.name!==undefined)return value.id+" | "+value.name;else return value.id}function TumlToAssociationClassFormatter(row,cell,value,columnDef,dataContext){if(value==null||value===undefined)return"";else if(value.id==null)return"";else if(value.displayName!==undefined&&value.displayName!=="null")return value.id+
" | "+value.displayName;else if(value.name!==undefined)return value.id+" | "+value.name;else return value.id}function TumlRequiredFormatter(row,cell,value,columnDef,dataContext){if(value==null||(value===""||value.length===0))return"\x3cdiv style\x3d'color:red;'\x3erequired\x3c/div\x3e";else return value}function TumlDerivedPropertyFormatter(row,cell,value,columnDef,dataContext){if(value==null||(value===""||value.length===0))return"\x3cdiv style\x3d'color:red;'\x3ederived\x3c/div\x3e";else return value}
function TumlDeleteFormatter(row,cell,value,columnDef,dataContext){return"\x3cimg class\x3d'umlg-delete-img' src\x3d'/"+tumlModelName+"/javascript/images/uml2/Pseudostate_terminate.gif'\x3e"}function TumlBooleanFormatter(row,cell,value,columnDef,dataContext){return value?"\x3cimg src\x3d'/"+tumlModelName+"/javascript/images/tick.png'\x3e":"\x3cimg src\x3d'/"+tumlModelName+"/javascript/images/cross.png'\x3e"}function LinkFormatter(row,cell,value,columnDef,dataContext){if(value==null||value==="")return"\x3cb class\x3d'selfUrlNewRow'\x3e-\x3c/b\x3e";
var url=value.replace(new RegExp("{(s*?.*?)*?}","gi"),dataContext.id);return"\x3cb class\x3d'selfUrl' tumlUriData\x3d'"+url+"'\x3eself\x3c/b\x3e"}function TumlManyBooleanFormatter(row,cell,value,columnDef,dataContext){var result="";if(value==null||value=="")return"";for(var i=0;i<value.length;i++){var booleanValue=value[i];if(booleanValue)result+="\x3cimg src\x3d'/"+tumlModelName+"/javascript/slickgrid/images/tick.png'\x3e";else result+="\x3cimg src\x3d'/"+tumlModelName+"/javascript/images/delete.png'\x3e"}return result}
})(jQuery);function RowLookupMap(contextVertexId,uriToCompositeParent,uriToCompositeParentOnCompositeParent){}function CompositeParentLookupMap(contextVertexId,lookupUri,lookupUriOnCompositeParent){}
function RowEnumerationLookupMap(enumClassName,enumLookupUri){var rowEnumerationLookupMap={};this.getOrLoadMap=function(callBack){if(rowEnumerationLookupMap[enumClassName]===undefined)$.ajax({type:"GET",url:enumLookupUri+"?enumQualifiedName\x3d"+enumClassName,dataType:"json",contentType:"application/json; charset\x3dutf-8",success:function(response){rowEnumerationLookupMap[enumClassName]=response.data;callBack(response.data)},error:function(jqXHR,textStatus,errorThrown){alert("error getting enumeration lookup data: "+
textStatus)}});else callBack(rowEnumerationLookupMap[enumClassName])}}
(function($){$.extend(true,window,{"TumlSlick":{"Validators":{"TumlObject":TumlObjectValidator,"TumlString":TumlStringValidator,"TumlDateTime":TumlDateTimeValidator,"RangeLength":RangeLengthValidator,"MaxLength":MaxLengthValidator,"MinLength":MinLengthValidator,"Url":UrlValidator,"Email":EmailValidator,"DateTime":DateTimeValidator,"Date":DateValidator,"Time":TimeValidator,"TumlManyEnumerationValidator":TumlManyEnumerationValidator,"TumlNumber":TumlNumberValidator,"TumlBoolean":TumlBooleanValidator,
"TumlManyNumber":TumlManyNumberValidator,"TumlManyString":TumlManyStringValidator,"TumlManyBoolean":TumlManyBooleanValidator,"Range":RangeValidator,"Max":MaxValidator,"Min":MinValidator,"Required":RequiredValidator,"Number":NumberValidator,"TumlManyDateValidator":TumlManyDateValidator,"TumlManyTimeValidator":TumlManyTimeValidator,"TumlManyDateTimeValidator":TumlManyDateTimeValidator}}});function TumlObjectValidator(property){$.extend(this,{"TumlObjectValidator":"1.0.0","validate":validate});function validate(value){var result=
TumlSlick.Validators.Required(property,value);if(!result.valid)return result;return{valid:true,msg:null}}}function TumlDateTimeValidator(property){$.extend(this,{"TumlDateTimeValidator":"1.0.0","validate":validate});function validate(value){var result=TumlSlick.Validators.Required(property,value);if(!result.valid)return result;if(value!==undefined&&(value!==null&&value!==""))if(property.validations!==null){if(property.validations.date!==undefined)result=TumlSlick.Validators.Date(property,value).validate();
if(!result.valid)return result;if(property.validations.time!==undefined)result=TumlSlick.Validators.Time(property,value);if(!result.valid)return result;if(property.validations.dateTime!==undefined)result=TumlSlick.Validators.DateTime(property,value);if(!result.valid)return result}return{valid:true,msg:null}}}function TumlStringValidator(property){$.extend(this,{"TumlStringValidator":"1.0.0","validate":validate});function validate(value){var result=TumlSlick.Validators.Required(property,value);if(!result.valid)return result;
if(value!==undefined&&(value!==null&&value!==""))if(property.validations!==null){if(property.validations.rangeLength!==undefined)result=TumlSlick.Validators.RangeLength(property,value);if(!result.valid)return result;if(property.validations.maxLength!==undefined)result=TumlSlick.Validators.MaxLength(property,value);if(!result.valid)return result;if(property.validations.minLength!==undefined)result=TumlSlick.Validators.MinLength(property,value);if(!result.valid)return result;if(property.validations.url!==
undefined)result=TumlSlick.Validators.Url(property,value);if(!result.valid)return result;if(property.validations.email!==undefined)result=TumlSlick.Validators.Email(property,value);if(!result.valid)return result}return{valid:true,msg:null}}}function TumlManyStringValidator(property){$.extend(this,{"TumlManyStringValidator":"1.0.0","validate":validate});function validateSingleProperty(tmp){return(new TumlSlick.Validators.TumlString(property)).validate(tmp)}function validate(currentValues,valueToAdd){return manyValidate(property,
validateSingleProperty,currentValues,valueToAdd)}}function TumlManyEnumerationValidator(property){$.extend(this,{"TumlManyEnumerationValidator":"1.0.0","validate":validate});function validateSingleProperty(tmp){return(new TumlSlick.Validators.TumlString(property)).validate(tmp)}function validate(currentValues,valueToAdd){return manyValidate(property,validateSingleProperty,currentValues,valueToAdd)}}function TumlManyDateValidator(property){$.extend(this,{"TumlManyDateValidator":"1.0.0","validate":validate});
function validateSingleProperty(tmp){return(new TumlSlick.Validators.Date(property)).validate(tmp)}function validate(currentValues,valueToAdd){return manyValidate(property,validateSingleProperty,currentValues,valueToAdd)}}function TumlManyTimeValidator(property){$.extend(this,{"TumlManyTimeValidator":"1.0.0","validate":validate});function validateSingleProperty(tmp){return(new TumlSlick.Validators.Time(property)).validate(tmp)}function validate(currentValues,valueToAdd){return manyValidate(property,
validateSingleProperty,currentValues,valueToAdd)}}function TumlManyDateTimeValidator(property){$.extend(this,{"TumlManyDateTimeValidator":"1.0.0","validate":validate});function validateSingleProperty(tmp){return(new TumlSlick.Validators.DateTime(property)).validate(tmp)}function validate(currentValues,valueToAdd){return manyValidate(property,validateSingleProperty,currentValues,valueToAdd)}}function TumlManyBooleanValidator(property){$.extend(this,{"TumlManyBooleanValidator":"1.0.0","validate":validate});
function validateSingleProperty(tmp){return(new TumlSlick.Validators.TumlBoolean(property)).validate(tmp)}function validate(currentValues,valueToAdd){if(valueToAdd!==undefined){var result=validateSingleProperty(valueToAdd);if(!result.valid)throw'Value must be "true" or "t" or "1" or "false" or "f" or "0"';if(valueToAdd==="true"||(valueToAdd==="t"||(valueToAdd==="1"||valueToAdd)))return manyValidate(property,validateSingleProperty,currentValues,true);else return manyValidate(property,validateSingleProperty,
currentValues,false)}else return manyValidate(property,validateSingleProperty,currentValues,valueToAdd)}}function TumlManyNumberValidator(property){$.extend(this,{"TumlManyNumberValidator":"1.0.0","validate":validate});function validateSingleProperty(tmp){return(new TumlSlick.Validators.TumlNumber(property)).validate(tmp)}function validate(currentValues,valueToAdd){return manyValidate(property,validateSingleProperty,currentValues,valueToAdd)}}function manyValidate(property,validateSingleProperty,
currentValues,valueToAdd){if(currentValues instanceof Array&&(valueToAdd!==undefined&&property.unique)){for(var i=0;i<currentValues.length;i++){var tmp=currentValues[i];if(tmp==valueToAdd)return{valid:false,msg:"The list must be unique, "+valueToAdd+" is already present."}}return{valid:true,msg:null}}else{var result={valid:false,msg:null};if(property.lower>0&&(currentValues==undefined||(currentValues==null||currentValues.length==0)))return{valid:false,msg:property.name+" is a required field!"};if(property.lower==
0&&(currentValues==undefined||(currentValues==null||currentValues.length==0)))return{valid:true,msg:null};for(var i=0;i<currentValues.length;i++){var tmp=currentValues[i];result=validateSingleProperty(tmp);if(!result.valid)return result}return result}return{valid:false,msg:null}}function TumlBooleanValidator(property){$.extend(this,{"TumlBooleanValidator":"1.0.0","validate":validate});function validate(value){var result=TumlSlick.Validators.Required(property,value);if(!result.valid)return result;
if(value!==undefined&&(value!==null&&(value!==""&&(value!==true&&value!==false))))if(!(value==="true"||(value==="t"||(value==="1"||(value==="false"||(value==="f"||value==="0"))))))return{valid:false,msg:'Value must be "true" or "t" or "1" or "false" or "f" or "0"'};return{valid:true,msg:null}}}function TumlNumberValidator(property){$.extend(this,{"TumlNumberValidator":"1.0.0","validate":validate});function validate(value){var result=TumlSlick.Validators.Required(property,value);if(!result.valid)return result;
if(value!==undefined&&(value!==null&&value!=="")){result=TumlSlick.Validators.Number(property,value);if(!result.valid)return result;if(property.validations!==null){if(property.validations.range!==undefined)result=TumlSlick.Validators.Range(property,value);if(!result.valid)return result;if(property.validations.max!==undefined)result=TumlSlick.Validators.Max(property,value);if(!result.valid)return result;if(property.validations.min!==undefined)result=TumlSlick.Validators.Min(property,value);if(!result.valid)return result}}return{valid:true,
msg:null}}}function NumberValidator(property,value){if(value===undefined||(value===null||(value===""||isNaN(value))))return{valid:false,msg:"Please enter a number!"};else return{valid:true}}function RangeLengthValidator(property,value){if(value!==undefined&&(value.length<property.validations.rangeLength.min||value.length>property.validations.rangeLength.max))return{valid:false,msg:"Value's length needs to be between "+property.validations.rangeLength.min+" and "+property.validations.rangeLength.max};
else return{valid:true}}function MaxLengthValidator(property,value){if(value!==undefined&&value.length>property.validations.maxLength)return{valid:false,msg:"Value's length needs to be smaller than or equal to "+property.validations.maxLength};else return{valid:true}}function MinLengthValidator(property,value){if(value!==undefined&&value.length<property.validations.minLength)return{valid:false,msg:"Value's length needs to be greater than or equal to "+property.validations.minLength};else return{valid:true}}
function RangeValidator(property,value){var intValue=parseInt(value,10);if(intValue<property.validations.range.min||intValue>property.validations.range.max)return{valid:false,msg:"Value need to be between "+property.validations.range.min+" and "+property.validations.range.max+" (including)"};else return{valid:true}}function MaxValidator(property,value){if(isNaN(value))return{valid:false,msg:"Value must be anumber"};else{var intValue=parseInt(value,10);if(intValue>property.validations.max)return{valid:false,
msg:"Value needs to be smaller than or equal to "+property.validations.max};else return{valid:true}}}function MinValidator(property,value){if(isNaN(value))return{valid:false,msg:"Value must be a number"};else{var intValue=parseInt(value,10);if(intValue<property.validations.min)return{valid:false,msg:"Value needs to be greater than or equal to "+property.validations.min};else return{valid:true}}}function UrlValidator(property,value){return{valid:true}}function EmailValidator(property,value){var re=
/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!re.test(value))return{valid:false,msg:"Value is not a valid email address!"};else return{valid:true}}function DateTimeValidator(property,value){$.extend(this,{"DateTimeValidator":"1.0.0","validate":validate});function validate(value){var result=TumlSlick.Validators.Required(property,value);if(!result.valid)return result;try{var result=$.datepicker.parseDateTime("yy-mm-dd",
"HH:mm:ss",value);return{valid:true}}catch(error){return{valid:false,msg:value+"'s format is incorrect, the format is 'yy-mm-dd HH:mm:ss'"}}}}function DateValidator(property,value){$.extend(this,{"DateValidator":"1.0.0","validate":validate});function validate(value){var result=TumlSlick.Validators.Required(property,value);if(!result.valid)return result;value=value+" 00:00:00";try{var result=$.datepicker.parseDate("yy-mm-dd",value);return{valid:true}}catch(error){return{valid:false,msg:value+"'s format is incorrect, the format is 'yy-mm-dd'"}}}
}function TimeValidator(property,value){$.extend(this,{"TimeValidator":"1.0.0","validate":validate});function validate(value){var result=TumlSlick.Validators.Required(property,value);if(!result.valid)return result;var result=$.datepicker.parseTime("HH:mm",value,{});if(result)return{valid:true};else return{valid:false,msg:value+"'s format is incorrect, the format is 'HH:mm'"}}}function RequiredValidator(property,value){if(property.lower>0&&(value!==false&&(value!==true&&(value===""||(value===undefined||
value===null)))))return{valid:false,msg:property.name+" is a required field!",present:false};else return{valid:true,present:true}}})(jQuery);
(function($){$.extend(true,window,{Tuml:{TumlTabContainerManager:TumlTabContainerManager}});function TumlTabContainerManager(tabContainer,propertyNavigatingTo){this.TumlTabContainerManager="1.0.0";this.propertyNavigatingTo=propertyNavigatingTo;this.tabContainerProperty=null;this.validationResults=null;this.tumlTabViewManagers=[];this.tabContainer=null;this.parentTabContainer=tabContainer;this.parentTabContainerManager=null;this.queryExecuteButtonFormGroupDiv=null;this.queryQueryNameFormGroupDiv=null;
this.querySaveInstanceFormGroupDiv=null;this.querySaveClassFormGroupDiv=null;this.querySaveRootFormGroupDiv=null;this.queryCancelButtonFormGroupDiv=null;this.queryDeleteButtonFormGroupDiv=null;this.executeButton=null;this.destroyTabContainer=function(){this.clearAllTabs();if(this.tabContainer!==null)this.tabContainer.remove();$("#"+this.getTabId()+"panelPanelDefault").remove()};this.showInlineForm=function(){this.tabLayoutTabFooterDiv.find(".btn-toolbar").hide();this.tabLayoutTabFooterDiv.find(".form-inline").show()};
this.hideInlineForm=function(){this.tabLayoutTabFooterDiv.find(".form-inline").hide();this.tabLayoutTabFooterDiv.find(".btn-toolbar").show()};this.maybeCreateTabContainer=function(){var tabContainer=$("#"+this.getTabId()+"Tabs");if(tabContainer.length==0){var tabsLayout=$("#tabs-layout");var tabLayoutPanelDiv=$("\x3cdiv /\x3e",{id:this.getTabId()+"panelPanelDefault",class:"umlg-panel panel panel-default"}).appendTo(tabsLayout);var tabLayoutTabHeaderDiv=$("\x3cdiv /\x3e",{class:"umlg-panel-heading panel-heading"}).appendTo(tabLayoutPanelDiv);
var tabLayoutTabHeaderH3InfoDiv=$("\x3ch3 /\x3e",{class:"panel-title"}).appendTo(tabLayoutTabHeaderDiv);var windowHeight=calculateBodyHeight(this);var tabLayoutTabBodyDiv=$("\x3cdiv /\x3e",{class:"umlg-panel-body panel-body",style:"height:"+windowHeight+"px"}).appendTo(tabLayoutPanelDiv);this.tabLayoutTabFooterDiv=$("\x3cdiv /\x3e",{class:"umlg-panel-footer panel-footer",role:"navigation"}).appendTo(tabLayoutPanelDiv);if(!(this instanceof Tuml.TumlMainViewManager))this.parentTabContainerManager.disableButtons();
this.tumlTabViewManagers=[];$("\x3cspan /\x3e",{id:this.getTabId()+"navigation-qualified-name",class:"navigation-qualified-name"}).appendTo(tabLayoutTabHeaderH3InfoDiv);$("\x3cspan /\x3e",{id:this.getTabId()+"multiplicity-warning",class:"multiplicity-warning pull-right text-danger"}).appendTo(tabLayoutTabHeaderH3InfoDiv);$("\x3cspan /\x3e",{id:this.getTabId()+"validation-warning",class:"validation-warning pull-right text-danger"}).appendTo(tabLayoutTabHeaderH3InfoDiv);this.tabContainer=$("\x3cdiv /\x3e",
{id:this.getTabId()+"Tabs",class:"umlg-tabs"}).appendTo(tabLayoutTabBodyDiv);this.tabContainer.append('\x3cul class\x3d"nav nav-tabs" /\x3e');this.tabContainer.append('\x3cdiv class\x3d"tab-content" /\x3e')}};this.createPropertyDescriptionHeading=function(){var multiplicity;if(this.tabContainerProperty.upper==-1)multiplicity="multiplicity: ["+this.tabContainerProperty.lower+"..*]";else multiplicity="multiplicity: ["+this.tabContainerProperty.lower+".."+this.tabContainerProperty.upper+"]";var unique=
"unique: "+this.tabContainerProperty.unique;var ordered="ordered: "+this.tabContainerProperty.ordered;var association="association: "+(this.tabContainerProperty.composite?"composite":"non composite");return multiplicity+", "+unique+", "+ordered+", "+association}}TumlTabContainerManager.prototype.nestedCount=function(count){return this.parentTabContainerManager.nestedCount(++count)};TumlTabContainerManager.prototype.disableButtons=function(){var tabsNav=this.tabContainer.find(".ui-tabs-nav");tabsNav.find("#"+
this.getTabId()+"save").attr("disabled","disabled")};TumlTabContainerManager.prototype.enableButtons=function(){var tabsNav=this.tabContainer.find(".ui-tabs-nav");tabsNav.find("#"+this.getTabId()+"save").removeAttr("disabled")};TumlTabContainerManager.prototype.removeSelectButton=function(){var buttonPullRightDiv=this.tabLayoutTabFooterDiv.find(".pull-right");var buttons=buttonPullRightDiv.find("#"+this.getTabId()+"OpenMany");for(var i=0;i<buttons.length;i++){var button=buttons[i];if(button.id.indexOf("OpenMany",
this.length-"OpenMany".length)!==-1)$("#"+button.id).remove()}};TumlTabContainerManager.prototype.addSelectButton=function(tabTitleName,tabContext){this.removeSelectButton();var buttonPullRightDiv=this.tabLayoutTabFooterDiv.find(".pull-right");var chooseOpenMany=$("\x3cbutton /\x3e",{type:"button",id:this.getTabId()+"OpenMany",class:"btn btn-primary umlg-button"}).prependTo(buttonPullRightDiv);$('\x3cspan class\x3d"glyphicon glyphicon-ok"\x3e\x3c/span\x3e').appendTo(chooseOpenMany);$("\x3cspan /\x3e").text(" Select "+
tabTitleName).appendTo(chooseOpenMany);chooseOpenMany.button().click(function(event){if(Slick.GlobalEditorLock.commitCurrentEdit())tabContext.openNonCompositeMany(tabContext.propertyNavigatingTo,tabContext.metaForData.to.qualifiedName);event.preventDefault()})};TumlTabContainerManager.prototype.addButtons=function(){var self=this;var buttonDiv=$("\x3cdiv /\x3e",{class:"btn-toolbar"}).appendTo(this.tabLayoutTabFooterDiv);var buttonPullRightDiv=$("\x3cdiv /\x3e",{class:"pull-right"}).appendTo(buttonDiv);
var saveButton=$("\x3cbutton /\x3e",{type:"button",id:this.getTabId()+"save",class:"btn btn-primary umlg-button"}).appendTo(buttonPullRightDiv);$('\x3cspan class\x3d"glyphicon glyphicon-save"\x3e\x3c/span\x3e').appendTo(saveButton);$("\x3cspan /\x3e").text(" Save").appendTo(saveButton);saveButton.click(function(event){if(Slick.GlobalEditorLock.commitCurrentEdit())self.saveTabs();event.preventDefault()});var cancelButton=$("\x3cbutton /\x3e",{type:"button",id:this.getTabId()+"cancel",class:"btn btn-primary umlg-button"}).appendTo(buttonPullRightDiv);
$('\x3cspan class\x3d"glyphicon glyphicon-ban-circle"\x3e\x3c/span\x3e').appendTo(cancelButton);$("\x3cspan /\x3e").text(" Cancel").appendTo(cancelButton);cancelButton.click(function(event){self.doCancel();event.preventDefault()})};TumlTabContainerManager.prototype.addQueryButtons=function(query){var self=this;var tabFooter=this.tabLayoutTabFooterDiv;var queryFormDiv=$("\x3cdiv /\x3e",{class:"form-inline",role:"form"}).appendTo(tabFooter);this.queryExecuteButtonFormGroupDiv=$("\x3cdiv /\x3e",{id:"queryExecuteButtonFormGroupDiv",
class:"form-group"}).appendTo(queryFormDiv);var btnGroup=$("\x3cdiv /\x3e",{class:"btn-group dropup"}).appendTo(this.queryExecuteButtonFormGroupDiv);this.executeButton=$('\x3cbutton type\x3d"button" id\x3d"executeButton" class\x3d"btn btn-success umlg-button" /\x3e').appendTo(btnGroup);$('\x3cspan class\x3d"glyphicon glyphicon-play-circle"\x3e\x3c/span\x3e').appendTo(this.executeButton);$("\x3cspan /\x3e").text(" Execute "+query.type.toUpperCase()).appendTo(this.executeButton);this.executeButton.val(query.type.toUpperCase());
var splitButton=$('\x3cbutton type\x3d"button" class\x3d"btn btn-success dropdown-toggle" data-toggle\x3d"dropdown"\x3e').appendTo(btnGroup);$('\x3cspan class\x3d"caret"\x3e\x3c/span\x3e').appendTo(splitButton);var ul=$('\x3cul class\x3d"dropdown-menu" role\x3d"menu"\x3e').appendTo(btnGroup);var oclLink=$('\x3cli\x3e\x3ca href\x3d"#"\x3eOCL\x3c/a\x3e\x3c/li\x3e').appendTo(ul);if(this.contextVertexId!==null&&this.contextVertexId!==undefined||this.propertyNavigatingTo!==null&&this.propertyNavigatingTo!==
undefined);else oclLink.addClass("disabled");$('\x3cli\x3e\x3ca href\x3d"#"\x3eGROOVY\x3c/a\x3e\x3c/li\x3e').appendTo(ul);$('\x3cli\x3e\x3ca href\x3d"#"\x3eNATIVE\x3c/a\x3e\x3c/li\x3e').appendTo(ul);ul.find("li a").click(function(e){if(self.contextVertexId!==null&&self.contextVertexId!==undefined||self.propertyNavigatingTo!==null&&self.propertyNavigatingTo!==undefined){self.executeButton.text("Execute "+$(this).text());self.executeButton.val($(this).text())}else if($(this).text()==="OCL"){alert("OCL can only be be executed from a context!");
e.preventDefault();e.stopImmediatePropagation()}else{self.executeButton.text("Execute "+$(this).text());self.executeButton.val($(this).text())}});var querySelectTypeFormGroupDiv=$("\x3cdiv /\x3e",{class:"form-group"}).appendTo(queryFormDiv);$("\x3clabel /\x3e",{class:"sr-only",for:this.queryTabDivName+"_"+"ExecuteButton"}).text("this is hidden").appendTo(querySelectTypeFormGroupDiv);var elementOnTheRight=$("\x3cdiv /\x3e",{class:"pull-right"}).appendTo(queryFormDiv);if(isUmlgLib){this.queryQueryNameFormGroupDiv=
$("\x3cdiv /\x3e",{id:"queryNameFormDiv",class:"form-group"}).appendTo(elementOnTheRight);var queryNameInput=$("\x3cinput \x3e",{id:"queryName",type:"text",class:"form-control"});queryNameInput.val(query.name).appendTo(this.queryQueryNameFormGroupDiv);this.querySaveInstanceFormGroupDiv=$("\x3cdiv /\x3e",{id:"saveInstanceFormGroup",class:"form-group"}).appendTo(elementOnTheRight);var saveInstanceButton=$("\x3cbutton /\x3e",{id:"saveInstanceQueryButton",class:"form-control btn btn-primary umlg-button"}).appendTo(this.querySaveInstanceFormGroupDiv);
$('\x3cspan class\x3d"glyphicon glyphicon-save"\x3e\x3c/span\x3e').appendTo(saveInstanceButton);$("\x3cspan /\x3e").text(" save to instance").appendTo(saveInstanceButton);this.querySaveClassFormGroupDiv=$("\x3cdiv /\x3e",{id:"saveClassFormGroup",class:"form-group"}).appendTo(elementOnTheRight);var saveClassButton=$("\x3cbutton /\x3e",{id:"saveClassQueryButton",class:"form-control btn btn-primary umlg-button"}).appendTo(this.querySaveClassFormGroupDiv);$('\x3cspan class\x3d"glyphicon glyphicon-save"\x3e\x3c/span\x3e').appendTo(saveClassButton);
$("\x3cspan /\x3e").text(" save to class").appendTo(saveClassButton);this.querySaveRootFormGroupDiv=$("\x3cdiv /\x3e",{id:"saveRootFormGroup",class:"form-group"}).appendTo(elementOnTheRight);var saveRootButton=$("\x3cbutton /\x3e",{id:"saveRootQueryButton",class:"form-control btn btn-primary umlg-button"}).appendTo(this.querySaveRootFormGroupDiv);$('\x3cspan class\x3d"glyphicon glyphicon-save"\x3e\x3c/span\x3e').appendTo(saveRootButton);$("\x3cspan /\x3e").text(" save to root").appendTo(saveRootButton);
this.queryCancelButtonFormGroupDiv=$("\x3cdiv /\x3e",{id:"cancelButtonFormGroup",class:"form-group"}).appendTo(elementOnTheRight);var cancelButton=$("\x3cbutton /\x3e",{id:"cancelQueryButton",class:"form-control btn btn-primary umlg-button"}).appendTo(this.queryCancelButtonFormGroupDiv);$('\x3cspan class\x3d"glyphicon glyphicon-ban-circle"\x3e\x3c/span\x3e').appendTo(cancelButton);$("\x3cspan /\x3e").text(" cancel").appendTo(cancelButton);this.queryDeleteButtonFormGroupDiv=$("\x3cdiv /\x3e",{id:"deleteButtonFormGroup",
class:"form-group"}).appendTo(elementOnTheRight);var deleteButton=$("\x3cbutton /\x3e",{id:"deleteQueryButton",class:"form-control btn btn-primary umlg-button"}).appendTo(this.queryDeleteButtonFormGroupDiv);$('\x3cspan class\x3d"glyphicon glyphicon-remove"\x3e\x3c/span\x3e').appendTo(deleteButton);$("\x3cspan /\x3e").text(" delete").appendTo(deleteButton)}};TumlTabContainerManager.prototype.showCorrectQueryButtons=function(query){var self=this;if(this.tabLayoutTabFooterDiv.find(".form-inline").length===
0)this.addQueryButtons(query);if(isUmlgLib)if(query.queryType===undefined||query.queryType===null){this.querySaveInstanceFormGroupDiv.show();this.querySaveClassFormGroupDiv.show();this.querySaveRootFormGroupDiv.show();this.queryCancelButtonFormGroupDiv.hide();this.queryDeleteButtonFormGroupDiv.hide()}else if(query.queryType==="instanceQuery"){this.querySaveInstanceFormGroupDiv.show();this.querySaveClassFormGroupDiv.hide();this.querySaveRootFormGroupDiv.hide();this.queryCancelButtonFormGroupDiv.show();
this.queryDeleteButtonFormGroupDiv.show()}else if(query.queryType==="classQuery"){this.querySaveClassFormGroupDiv.show();this.querySaveInstanceFormGroupDiv.hide();this.querySaveRootFormGroupDiv.hide();this.queryCancelButtonFormGroupDiv.show();this.queryDeleteButtonFormGroupDiv.show()}else if(query.queryType==="rootQuery"){this.querySaveInstanceFormGroupDiv.hide();this.querySaveClassFormGroupDiv.hide();this.querySaveRootFormGroupDiv.show();this.queryCancelButtonFormGroupDiv.show();this.queryDeleteButtonFormGroupDiv.show()}else{this.querySaveInstanceFormGroupDiv.show();
this.querySaveClassFormGroupDiv.show();this.queryCancelButtonFormGroupDiv.show();this.queryDeleteButtonFormGroupDiv.show()}this.executeButton.text("Execute "+query.type.toUpperCase());this.executeButton.val(query.type.toUpperCase());this.executeButton.button().unbind("click");this.executeButton.button().click(function(){self.executeQuery()});if(isUmlgLib){var queryNameInput=this.queryQueryNameFormGroupDiv.find("#queryName");queryNameInput.val(query.name);var saveInstanceButton=this.querySaveInstanceFormGroupDiv.find("#saveInstanceQueryButton");
saveInstanceButton.button().unbind("click");saveInstanceButton.button().click(function(){self.saveToInstance()});var saveClassButton=this.querySaveClassFormGroupDiv.find("#saveClassQueryButton");saveClassButton.button().unbind("click");saveClassButton.button().click(function(){self.saveToClass()});var saveRootButton=this.querySaveRootFormGroupDiv.find("#saveRootQueryButton");saveRootButton.button().unbind("click");saveRootButton.button().click(function(){self.saveToRoot()});var cancelButton=this.queryCancelButtonFormGroupDiv.find("#cancelQueryButton");
cancelButton.button().unbind("click");cancelButton.button().click(function(){self.cancelQuery()});var deleteButton=this.queryDeleteButtonFormGroupDiv.find("#deleteQueryButton");deleteButton.button().unbind("click");deleteButton.button().click(function(){self.deleteQuery()})}};TumlTabContainerManager.prototype.executeQuery=function(){this.getOpenQueryTabViewManager().tumlTabQueryManager.executeQuery()};TumlTabContainerManager.prototype.saveToInstance=function(){this.getOpenQueryTabViewManager().tumlTabQueryManager.saveToInstance()};
TumlTabContainerManager.prototype.saveToClass=function(){this.getOpenQueryTabViewManager().tumlTabQueryManager.saveToClass()};TumlTabContainerManager.prototype.saveToRoot=function(){this.getOpenQueryTabViewManager().tumlTabQueryManager.saveToRoot()};TumlTabContainerManager.prototype.cancelQuery=function(){this.getOpenQueryTabViewManager().tumlTabQueryManager.cancelQuery()};TumlTabContainerManager.prototype.deleteQuery=function(){this.getOpenQueryTabViewManager().tumlTabQueryManager.deleteQuery()};
TumlTabContainerManager.prototype.getOpenQueryTabViewManager=function(){var tumlQueryTabViewManager=null;for(var i=0;i<this.tumlTabViewManagers.length;i++)if(this.tumlTabViewManagers[i].isOpen){tumlQueryTabViewManager=this.tumlTabViewManagers[i];break}if(!(tumlQueryTabViewManager instanceof Tuml.TumlTabQueryViewManager))throw"Expecting Tuml.TumlTabQueryViewManager";return tumlQueryTabViewManager};TumlTabContainerManager.prototype.updateDataModelForOneToOne=function(fakeId,fieldName,one){this.parentTabContainerManager.updateDataModelForOneToOne(fakeId,
fieldName,one)};TumlTabContainerManager.prototype.updateDataModelForOneToOneForUpdatedItem=function(qualifiedName,id,displayName,fieldName,one){this.parentTabContainerManager.updateDataModelForOneToOneForUpdatedItem(qualifiedName,id,displayName,fieldName,one)};TumlTabContainerManager.prototype.doInternalCancel=function(){if(this.tumlTabViewManagers.length>0)if(this.tabContainerProperty==undefined)for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];
if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager&&!tumlTabViewManager.oneManyOrQuery.forLookup)throw"A non lookup must have the tabContainerProperty set!";}else if(this.tabContainerProperty.upper==-1||this.tabContainerProperty.upper>1){var data=[];for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager&&tumlTabViewManager.tumlTabGridManager.dataView.getItems().length>0)data.push.apply(data,
tumlTabViewManager.backupData)}this.setCellValue(data)}else{if(this.tabContainerProperty.upper!==1)alert("upper suppose to be a one");var firstTumlTabViewManager=null;for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];if(tumlTabViewManager instanceof Tuml.TumlTabOneViewManager){if(firstTumlTabViewManager!==null)alert("tabs gone wrong!");firstTumlTabViewManager=tumlTabViewManager}}this.setCellValue(tumlTabViewManager.backupData)}this.destroyTabContainer();
if(this instanceof Tuml.TumlTabManyViewManager||this instanceof Tuml.TumlTabOneViewManager){var parentPanelPanelDefault=$("#"+this.parentTabContainerManager.getTabId()+"panelPanelDefault");var parentTabContent=parentPanelPanelDefault.find(".tab-content");parentTabContent.show();var height=calculateBodyHeight(this.parentTabContainerManager);var parentTabFooter=parentPanelPanelDefault.find(".umlg-panel-footer.panel-footer");parentTabFooter.show();parentPanelPanelDefault.children(".umlg-panel-body.panel-body").height(height-
10);if(this instanceof Tuml.TumlTabManyViewManager)if(this.tumlTabGridManager!=undefined)this.tumlTabGridManager.active=true;else throw"Illegal state, Tuml.TumlTabManyViewManager but this.tumlTabGridManager is undefined.";}this.parentTabContainerManager.enableButtons()};TumlTabContainerManager.prototype.saveTabs=function(){if(this.tumlTabViewManagers.length>0){if(this.tabContainerProperty==undefined||this.tabContainerProperty==null){if(this.tumlTabViewManagers.length>1)throw"TumlTabContainerManager.prototype.saveTabs for lookup can only have one tab!";
var tumlTabViewManager=this.tumlTabViewManagers[0];var selectedRows=tumlTabViewManager.tumlTabGridManager.grid.getSelectedRows();var selectedItems=[];for(var i=0;i<selectedRows.length;i++){var row=selectedRows[i];var item=tumlTabViewManager.tumlTabGridManager.dataView.getItem(row);if(tumlTabViewManager.propertyNavigatingTo.memberEndOfAssociationClass){var associationClassProperty;for(var l=0;l<this.metaForData.to.properties.length;l++){associationClassProperty=this.metaForData.to.properties[l];if(associationClassProperty.name===
tumlTabViewManager.propertyNavigatingTo.inverseAssociationClassPropertyName)break;associationClassProperty=null}Tuml.Metadata.Cache.get(associationClassProperty.qualifiedName,associationClassProperty,function(){});var fakeId="fake::"+Tuml.TumlFakeIndex++;item[tumlTabViewManager.propertyNavigatingTo.inverseAssociationClassPropertyName]={id:fakeId,tmpId:fakeId,displayName:null,refreshFromDb:true}}selectedItems.push(item)}this.tumlTabGridManager.addItems(selectedItems)}else if(!this.tabContainerProperty.associationClassOne&&
(this.tabContainerProperty.upper==-1||this.tabContainerProperty.upper>1)){var data=[];for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager&&tumlTabViewManager.tumlTabGridManager.dataView.getItems().length>0){var validationResult=tumlTabViewManager.validateInsert();if(validationResult.length>0)this.setValidationResults(tumlTabViewManager.metaForData.qualifiedName,validationResult);data.push.apply(data,
tumlTabViewManager.getTabData())}}var validationResults=[];var multiplicity=data.length;if(multiplicity<this.tabContainerProperty.lower||this.tabContainerProperty.upper!==-1&&multiplicity>this.tabContainerProperty.upper){var validationMultiplicityResult=new Tuml.ValidationResult(this instanceof Tuml.TumlTabManyViewManager?this.componentCell.row:"-1",this.tabContainerProperty);validationMultiplicityResult.property=this.tabContainerProperty;validationMultiplicityResult.message="multiplicity falls outside the valid range ["+
this.tabContainerProperty.lower+".."+(this.tabContainerProperty.upper!==-1?this.tabContainerProperty.upper:"*")+"]";validationResults.push(validationMultiplicityResult);this.setValidationResults(this.tabContainerProperty.qualifiedName,validationResults)}this.setCellValue(data)}else{if(!this.tabContainerProperty.associationClassOne&&this.tabContainerProperty.upper!==1)alert("upper suppose to be a one");var tumlTabViewManager;for(var i=0;i<this.tumlTabViewManagers.length;i++){tumlTabViewManager=this.tumlTabViewManagers[i];
if(tumlTabViewManager instanceof Tuml.TumlTabOneViewManager&&tumlTabViewManager.open)break}tumlTabViewManager.commitCurrentEdit();var validationResult=tumlTabViewManager.validateInsert();if(validationResult.length>0)this.setValidationResults(tumlTabViewManager.metaForData.qualifiedName,validationResult);var data=tumlTabViewManager.getTabData();this.setCellValue(data);tumlTabViewManager.tumlTabOneManager.updateDataModelForOneToOne(data)}this.tabContainerProperty=null}this.destroyTabContainer();this.parentTabContainerManager.enableButtons();
this.parentTabContainerManager.updateValidationWarningHeader()};TumlTabContainerManager.prototype.internalSetComponentIdToTmpId=function(object,property){var self=this;Tuml.Metadata.Cache.get(property.qualifiedName,property,function(result){for(var k=0;k<result.length;k++)self.setComponentIdToTmpId(object,result[k].meta.to)})};TumlTabContainerManager.prototype.setComponentIdToTmpId=function(item,metaDataTo){if(item.tmpId!==undefined)item.id=item.tmpId;for(var i=0;i<metaDataTo.properties.length;i++){var property=
metaDataTo.properties[i];if(!property.onePrimitive&&!property.manyPrimitive){var object=item[property.name];if(object!==undefined&&object!==null)if(Array.isArray(object))for(var j=0;j<object.length;j++)this.internalSetComponentIdToTmpId(object[j],property);else if(!property.primitive&&typeof object==="object")this.internalSetComponentIdToTmpId(object,property)}}};TumlTabContainerManager.prototype.internalClearComponentAndAssociationClassTmpId=function(object,property){var self=this;Tuml.Metadata.Cache.get(property.qualifiedName,
property,function(result){for(var k=0;k<result.length;k++)self.clearComponentAndAssociationClassTmpId(object,result[k].meta.to,false)})};TumlTabContainerManager.prototype.clearComponentAndAssociationClassTmpId=function(item,metaDataTo,skip){if(!skip&&item.tmpId!==undefined)item.tmpId=undefined;for(var i=0;i<metaDataTo.properties.length;i++){var property=metaDataTo.properties[i];var object=item[property.name];if(object!==undefined&&object!==null)if(Array.isArray(object))for(var j=0;j<object.length;j++){if(property.associationClassOne&&
!property.memberEndOfAssociationClass)this.internalClearComponentAndAssociationClassTmpId(object[j],property)}else if(typeof object==="object")if(property.associationClassOne&&!property.memberEndOfAssociationClass)this.internalClearComponentAndAssociationClassTmpId(object,property)}};TumlTabContainerManager.prototype.deactivateGrids=function(){for(var i=0;i<this.tumlTabViewManagers.length;i++)this.tumlTabViewManagers[i].deactivateGrids()};TumlTabContainerManager.prototype.save=function(){for(var i=
0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];tumlTabViewManager.save()}};TumlTabContainerManager.prototype.saveViaKeyPress=function(){for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];if(tumlTabViewManager.saveViaKeyPress())return true}return false};TumlTabContainerManager.prototype.cancelViaKeyPress=function(){for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];
if(tumlTabViewManager.cancelViaKeyPress())return true}return false};TumlTabContainerManager.prototype.activeOpenTabsGrid=function(){for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];tumlTabViewManager.activeOpenTabsGrid()}};TumlTabContainerManager.prototype.addOrRemoveSelectButton=function(){if(this.propertyNavigatingTo!==undefined&&(this.propertyNavigatingTo!==null&&(!this.propertyNavigatingTo.associationClassOne&&(!this.propertyNavigatingTo.derived&&
(!this.propertyNavigatingTo.composite&&((this.propertyNavigatingTo.upper===-1||this.propertyNavigatingTo.upper>1)&&!this.oneManyOrQuery.forLookup))))))this.parentTabContainerManager.addSelectButton(this.tabTitleName,this);else if(this.tabLayoutTabFooterDiv!==undefined)this.removeSelectButton()};TumlTabContainerManager.prototype.getTabId=function(){alert("this must be overridden!")};TumlTabContainerManager.prototype.removeMultiplicityWarningHeader=function(){$("#"+this.getTabId()+"multiplicity-warning").empty()};
TumlTabContainerManager.prototype.updateNavigationHeader=function(qualifiedName){$("#"+this.getTabId()+"navigation-qualified-name").empty();var propertyDescription=qualifiedName;if(this.tabContainerProperty!==undefined&&this.tabContainerProperty!==null)propertyDescription+="  -  "+this.createPropertyDescriptionHeading();$("#"+this.getTabId()+"navigation-qualified-name").append(propertyDescription)};TumlTabContainerManager.prototype.updateMultiplicityWarningHeader=function(){var multiplicityWarning=
$("#"+this.getTabId()+"multiplicity-warning");multiplicityWarning.empty();var tumlTabManyViewManagers=this.getTumlTabManyOrOneViewManagers(false);var rowCount=0;for(var i=0;i<tumlTabManyViewManagers.length;i++){var tumlTabViewManager=tumlTabManyViewManagers[i];if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager)rowCount+=tumlTabViewManager.getTabData().length;else rowCount++}if(rowCount<this.tabContainerProperty.lower||this.tabContainerProperty.upper!==-1&&rowCount>this.tabContainerProperty.upper)multiplicityWarning.append("multiplicity falls outside the valid range ["+
this.tabContainerProperty.lower+".."+(this.tabContainerProperty.upper!==-1?this.tabContainerProperty.upper:"*")+"]")};TumlTabContainerManager.prototype.updateValidationWarningHeader=function(){var validationWarning=$("#"+this.getTabId()+"validation-warning");validationWarning.children().remove();var tumlTabManyViewManagers=this.getTumlTabManyOrOneViewManagers(false);var fail=false;for(var i=0;i<tumlTabManyViewManagers.length;i++){var tumlTabViewManager=tumlTabManyViewManagers[i];if(tumlTabViewManager.validationResults!==
null&&tumlTabViewManager.validationResults.length>0){fail=true;break}}if(fail)validationWarning.append($("\x3cspan /\x3e").text("there are validation errors"))};TumlTabContainerManager.prototype.getTumlTabManyOrOneViewManagers=function(commitCurrentEdit){var tumlTabManyViewManagers=[];for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];if(tumlTabViewManager instanceof Tuml.TumlTabManyViewManager||tumlTabViewManager instanceof Tuml.TumlTabOneViewManager){if(commitCurrentEdit)Slick.GlobalEditorLock.commitCurrentEdit();
tumlTabManyViewManagers.push(tumlTabViewManager)}}return tumlTabManyViewManagers};TumlTabContainerManager.prototype.refreshContext=function(tumlUri){this.parentTabContainerManager.refreshContext(tumlUri)};TumlTabContainerManager.prototype.saveAndClearAllTabs=function(){var tabLength=this.tumlTabViewManagers.length;while(tabLength--)this.tumlTabViewManagers[tabLength].saveAndCloseTab();this.tumlTabViewManagers=null};TumlTabContainerManager.prototype.clearAllTabs=function(){var tabLength=this.tumlTabViewManagers.length;
while(tabLength-- >0)this.tumlTabViewManagers[tabLength].closeTab();this.tumlTabViewManagers=[]};TumlTabContainerManager.prototype.addToTumlTabViewManagers=function(tumlChildTabViewManager){this.tumlTabViewManagers.push(tumlChildTabViewManager)};TumlTabContainerManager.prototype.saveNewRow=function(){alert("TumlTabContainerManager.prototype.saveNewRow must be overriden")};TumlTabContainerManager.prototype.handleDeleteRow=function(){};TumlTabContainerManager.prototype.createTabContainer=function(tabEnum,
result,tumlUri,options,propertyNavigatingTo){var tumlTabViewManager;if(options.isOne){tumlTabViewManager=new Tuml.TumlTabOneViewManager(tabEnum,this.tabContainer,{many:!options.isOne,one:options.isOne,query:false,forLookup:options.forLookup,forManyComponent:options.forManyComponent,forOneComponent:options.forOneComponent,forCreation:options.forCreation},tumlUri,result,propertyNavigatingTo);tumlTabViewManager.parentTabContainerManager=this}else if(options.forManyComponent){tumlTabViewManager=new Tuml.TumlTabManyComponentViewManager(tabEnum,
this.tabContainer,{many:!options.isOne,one:options.isOne,query:false,forLookup:options.forLookup,forManyComponent:options.forManyComponent},tumlUri,result,propertyNavigatingTo);tumlTabViewManager.parentTabContainerManager=this}else{tumlTabViewManager=new Tuml.TumlTabManyViewManager(tabEnum,this.tabContainer,{many:!options.isOne,one:options.isOne,query:false,forLookup:options.forLookup,forManyComponent:options.forManyComponent},tumlUri,result,propertyNavigatingTo);tumlTabViewManager.parentTabContainerManager=
this}return tumlTabViewManager}})(jQuery);
(function($){$.extend(true,window,{Tuml:{TumlTabDiagramManager:TumlTabDiagramManager}});function TumlTabDiagramManager(parentTumlTabViewManager){this.tumlTabViewManager=parentTumlTabViewManager;$.extend(this,{"TumlTabDiagramManagerVersion":"1.0.0"});this.createDiagram=function(diagramTabDivName,url,type){var diagramTab=$("#"+diagramTabDivName);var diagramPanel=$("\x3cdiv /\x3e",{class:"umlg-diagram-panel panel panel-default"}).appendTo(diagramTab);url="/"+tumlModelName+"/diagram?path\x3d"+url;if(type==
"SVG"||type=="svg")diagramPanel.load(url);else var image=$("\x3cimg /\x3e",{src:url}).appendTo(diagramPanel)}}})(jQuery);var tuml={tab:{Enum:{Properties:0,Operations:1,InstanceQueries:2,ClassQueries:3,RootQueries:4,InstanceGroovy:5,ClassGroovy:6,Diagrams:7}}};
(function($){$.extend(true,window,{Tuml:{TumlBaseGridManager:TumlBaseGridManager,TumlManyComponentGridManager:TumlManyComponentGridManager,TumlForManyLookupGridManager:TumlForManyLookupGridManager,TumlQueryGridManager:TumlQueryGridManager,TumlTabGridManager:TumlTabGridManager,UmlgListItemMovedOrder:0}});function TumlQueryGridManager(tumlTabViewManager,propertyNavigatingTo){this.TumlQueryGridManager="1.0.0";var self=this;this.tumlTabViewManager=tumlTabViewManager;this.setupColumns=function(){TumlBaseGridManager.prototype.setupColumns.call(this,
this.localMetaForData);this.columns.push({id:"uri",name:"uri",field:"uri",sortable:false,formatter:TumlSlick.Formatters.Link});self.columns.splice(0,0,{id:"row",name:"row",field:"row",sortable:true})};this.refresh=function(result,gridDivName){this.result=result;this.metaForDataTo=result.meta.to;this.gridDivName=gridDivName;var outerDivForResults=$("#"+this.gridDivName);outerDivForResults.children().remove();$("\x3cdiv /\x3e",{id:"queryResultsDiv"});$('\x3cdiv id\x3d"serverErrorMsg'+this.gridDivName+
'" /\x3e').appendTo(outerDivForResults);var windowHeight=$(".query-center").height()-40;$("\x3cdiv /\x3e",{id:"queryResultsDiv"+this.gridDivName,style:"width:auto;height:"+windowHeight+"px;"}).appendTo(outerDivForResults);$("\x3cdiv /\x3e",{id:"pagerQueryResultsDiv"+this.gridDivName,style:"width:auto;height:20px;"}).appendTo(outerDivForResults);$("#contextMenu"+this.gridDivName).remove();this.createGrid(result.data,-1)};this.instantiateGrid=function(){this.grid=new Slick.Grid("#queryResultsDiv"+this.gridDivName,
this.dataView,this.columns,this.options);this.pager=new Slick.Controls.Pager(this.dataView,this.grid,$("#pagerQueryResultsDiv"+this.gridDivName));$("\x3cdiv id\x3d'grid-buttonQueryComponent"+this.localMetaForData.name+"' class\x3d'grid-button'/\x3e").appendTo("#pagerQueryResultsDiv"+this.gridDivName+" .slick-pager-settings");this.grid["manyEditorOpen"]=false;this.grid.setSelectionModel(new Slick.RowSelectionModel);new Slick.Controls.ColumnPicker(this.columns,this.grid,this.options)}}TumlQueryGridManager.prototype=
new TumlBaseGridManager;TumlQueryGridManager.prototype.setupOptions=function(){this.options={showHeaderRow:true,headerRowHeight:30,editable:false,enableAddRow:false,enableCellNavigation:true,asyncEditorLoading:false,enableAsyncPostRender:true,forceFitColumns:false,topPanelHeight:25}};TumlQueryGridManager.prototype.setData=function(data){this.dataView.setItems(data,"row")};function TumlManyComponentGridManager(tumlTabViewManager,tumlUri,propertyNavigatingTo){this.TumlManyComponentGridManager="1.0.0";
TumlBaseGridManager.call(this,tumlTabViewManager,tumlUri,propertyNavigatingTo);this.setupColumns=function(){TumlBaseGridManager.prototype.setupColumns.call(this,this.localMetaForData);this.columns.push({id:"uri",name:"uri",field:"uri",sortable:false,formatter:TumlSlick.Formatters.Link});this.columns.push({id:"delete",name:"delete",field:"delete",sortable:false,formatter:TumlSlick.Formatters.TumlDelete})}}TumlManyComponentGridManager.prototype=new TumlBaseGridManager;TumlManyComponentGridManager.prototype.initializeDataModel=
function(data,filter){this.dataView.beginUpdate();this.dataView.setNewItems(data);this.dataView.setFilterArgs({metaForData:this.localMetaForData});this.dataView.setFilter(filter);this.dataView.endUpdate()};TumlManyComponentGridManager.prototype.createContextMenu=function(){};function TumlForManyLookupGridManager(tumlTabViewManager,tumlUri,propertyNavigatingTo){this.TumlForManyLookupGridManager="1.0.0";TumlBaseGridManager.call(this,tumlTabViewManager,tumlUri,propertyNavigatingTo);this.setupOptions=
function(){TumlBaseGridManager.prototype.setupOptions.call(this);this.options["editable"]=false};this.refresh=function(result,gridDiv){this.metaForDataTo=result.meta.to;var tabDiv=gridDiv;var windowHeight;if(this instanceof Tuml.TumlManyComponentGridManager)windowHeight=600;else windowHeight=$(".ui-layout-center").height()-188;$('\x3cdiv id\x3d"serverErrorMsg" /\x3e').appendTo(tabDiv);$("\x3cdiv /\x3e",{id:"myGridLookup"+this.metaForDataTo.name,style:"width:auto;height:"+windowHeight+"px;"}).appendTo(tabDiv);
$("\x3cdiv /\x3e",{id:"pagerLookup"+this.metaForDataTo.name,style:"width:auto;height:20px;"}).appendTo(tabDiv);if(!(this instanceof TumlForManyLookupGridManager))$("#contextMenu"+this.metaForDataTo.name).remove();this.createGrid(result.data,tumlUri)};this.instantiateGrid=function(){this.grid=new Slick.Grid("#myGridLookup"+this.localMetaForData.name,this.dataView,this.columns,this.options);this.pager=new Slick.Controls.Pager(this.dataView,this.grid,$("#pagerLookup"+this.localMetaForData.name));$("\x3cdiv id\x3d'grid-buttonLookup"+
this.localMetaForData.name+"' class\x3d'grid-button'/\x3e").appendTo("#pagerLookup"+this.localMetaForData.name+" .slick-pager-settings");this.grid["manyEditorOpen"]=false;this.grid.setSelectionModel(new Slick.RowSelectionModel);new Slick.Controls.ColumnPicker(this.columns,this.grid,this.options)}}TumlForManyLookupGridManager.prototype=new TumlBaseGridManager;TumlForManyLookupGridManager.prototype.isPropertyForGrid=function(property){if(property.composite&&property.lower>0)return true;else if(property.inverseQualifiedName===
this.propertyNavigatingTo.qualifiedName)return false;else if(!property.composite&&!property.inverseComposite)if(property.associationClassOne&&!property.memberEndOfAssociationClass)return false;else if(property.oneToOne||(property.manyToOne||(property.manyPrimitive||property.manyEnumeration)))return true;else return false;else return false};TumlForManyLookupGridManager.prototype.createContextMenu=function(){};function TumlTabGridManager(tumlTabViewManager,tumlUri,propertyNavigatingTo){this.TumlTabGridManager=
"1.0.0";TumlBaseGridManager.call(this,tumlTabViewManager,tumlUri,propertyNavigatingTo);this.setFocus=function(){this.grid.focus();var activeCell=this.grid.getActiveCell();if(activeCell===null)this.grid.setActiveCell(0,0)};this.setupColumns=function(){TumlBaseGridManager.prototype.setupColumns.call(this,this.localMetaForData);this.columns.push({id:"uri",name:"uri",field:"uri",sortable:false,formatter:TumlSlick.Formatters.Link});if(!(this.propertyNavigatingTo.associationClassOne&&!this.propertyNavigatingTo.memberEndOfAssociationClass))this.columns.push({id:"delete",
name:"delete",field:"delete",sortable:false,formatter:TumlSlick.Formatters.TumlDelete})}}TumlTabGridManager.prototype=new TumlBaseGridManager;TumlTabGridManager.prototype.createContextMenu=function(){var self=this;var contextMenuUl=TumlBaseGridManager.prototype.createContextMenu.call(this);var li=$("\x3cli /\x3e").appendTo(contextMenuUl);li.data("contextData",{name:"delete"});var a=$("\x3ca /\x3e",{title:"delete",tabindex:-1,href:"#"}).appendTo(li);$('\x3ci class\x3d"umlg-icon ui-icon ui-icon-umlpseudostate-terminate" /\x3e').appendTo(a);
a.append(" delete");a.on("click",function(e){var link=$(e.target);var row=contextMenuUl.parent().data("row");self.handleContextMenuSelection(link,row);contextMenuUl.parent().hide();e.preventDefault();e.stopImmediatePropagation();return false});return contextMenuUl};function TumlBaseGridManager(tumlTabViewManager,tumlUri,propertyNavigatingTo){this.TumlBaseGridManager="1.0.0";this.tumlTabViewManager=tumlTabViewManager;this.tumlUri=tumlUri;this.propertyNavigatingTo=propertyNavigatingTo;this.active=false;
var self=this;this.columns=[];this.containsOneToOne=false;this.calculateContainsOne=function(){for(var i=0;i<this.metaForDataTo.properties.length;i++){var property=this.metaForDataTo.properties[i];if(property.oneToOne&&(!property.composite&&(!property.inverseComposite&&!property.onePrimitive))){this.containsOneToOne=true;break}}};this.cancel=function(data){if(Slick.GlobalEditorLock.commitCurrentEdit()){this.grid.resetActiveCell();this.setData(data);this.grid.invalidateAllRows();this.grid.updateRowCount();
this.grid.render()}};this.clearArraysAfterCommit=function(){this.dataView.clearArraysAfterCommit()};this.beginUpdate=function(){this.dataView.beginUpdate()};this.endUpdate=function(editActiveCell){this.dataView.endUpdate();this.grid.invalidateAllRows();this.grid.render();if(editActiveCell&&this.active)this.grid.editActiveCell()};this.updateGridAfterRollback=function(item){this.dataView.refreshItemAfterRollback(item,this.propertyNavigatingTo.composite)};this.updateGridAfterCommit=function(item){this.dataView.refreshItemAfterCommit(item,
this.propertyNavigatingTo.composite)};this.handleContextMenuClickLink=function(tumlUri){this.tumlTabViewManager.refreshContext(tumlUri)};this.handleLookup=function(lookupUri,qualifiedName,loadDataCallback){this.tumlTabViewManager.handleLookup(lookupUri,qualifiedName,loadDataCallback)};this.handleAddNewRow=function(){if(Slick.GlobalEditorLock.cancelCurrentEdit()){var nextId=Tuml.TumlFakeIndex++;var newItem;if(this.propertyNavigatingTo.memberEndOfAssociationClass){newItem={id:"fake::"+nextId,tmpId:"fake::"+
nextId};var associationClassFakeId="fake::"+Tuml.TumlFakeIndex++;newItem[this.propertyNavigatingTo.inverseAssociationClassPropertyName]={id:associationClassFakeId,tmpId:associationClassFakeId,displayName:null,refreshFromDb:true}}else newItem={id:"fake::"+nextId,tmpId:"fake::"+nextId};newItem.qualifiedName=this.localMetaForData.qualifiedName;this.dataView.addItem(newItem);this.tumlTabViewManager.saveNewRow();if(this.containsOneToOne)this.tumlTabViewManager.parentTabContainerManager.addToOneToOneIndex(newItem.id,
{id:newItem.id,qualifiedName:newItem.qualifiedName})}};this.updateDataModelForOneToOne=function(){if(this.containsOneToOne){var newItems=this.dataView.getNewItems();for(var i=0;i<newItems.length;i++){var data=newItems[i];for(var j=0;j<this.metaForDataTo.properties.length;j++){var property=this.metaForDataTo.properties[j];if(property.oneToOne&&(!property.composite&&(!property.inverseComposite&&(!property.onePrimitive&&(data[property.name]!==undefined&&(data[property.name]!==null&&data[property.name].id!==
undefined)))))){this.tumlTabViewManager.updateDataModelForOneToOne(data[property.name].previousId,property.inverseName,{});this.tumlTabViewManager.updateDataModelForOneToOne(data[property.name].id,property.inverseName,data)}}}}};this.updateDataModelForOneToOneForUpdate=function(){var updatedItems=this.dataView.getUpdatedItems();for(var i=0;i<updatedItems.length;i++){var data=updatedItems[i];for(var j=0;j<this.metaForDataTo.properties.length;j++){var property=this.metaForDataTo.properties[j];if(property.oneToOne&&
(!property.composite&&(!property.inverseComposite&&(!property.onePrimitive&&(data[property.name]!==undefined&&(data[property.name]!==null&&data[property.name].id!==undefined))))))if(!isNaN(data[property.name].id))this.tumlTabViewManager.updateDataModelForOneToOneForUpdatedItem(this.metaForDataTo.qualifiedName,data[property.name].id,data[property.name].displayName,property.inverseName,data)}}};this.handleDeleteRow=function(row,data){if(Slick.GlobalEditorLock.commitCurrentEdit()){var moveCell=this.grid.getActiveCell()!=
null&&this.grid.getActiveCell().row>=row;var item=this.dataView.getItem(row);this.dataView.deleteItem(item.id);this.tumlTabViewManager.handleDeleteRow();if(moveCell)if(this.dataView.getItems().length>0)this.grid.setActiveCell(this.grid.getActiveCell().row-1,this.grid.getActiveCell().cell);else this.grid.resetActiveCell()}};this.removeGrid=function(){for(var i=0;i<this.columns.length;i++)if(this.columns[i].id!=="selector"&&(this.columns[i].id!=="uri"&&this.columns[i].id!=="delete")){var header=this.grid.getHeaderRowColumn(this.columns[i].id);
$(header).empty()}this.grid.destroy()};this.createGrid=function(data,tumlUri){var columnFilters={};var self=this;this.data=data;if(tumlUri!==-1)this.contextVertexId=retrieveVertexId(tumlUri);else this.contextVertexId=-1;this.localMetaForData=this.metaForDataTo;this.setupColumns();this.setupOptions();var sortcol="name";var sortdir=1;this.dataView=new Tuml.Slick.Data.DataView;this.instantiateGrid();if(this.propertyNavigatingTo!==undefined&&(!this.propertyNavigatingTo.associationClassOne&&this.propertyNavigatingTo.ordered))this.setupRowDrag();
this.createContextMenu();this.grid.onContextMenu.subscribe(function(e,args){e.preventDefault();var cell=args.grid.getCellFromEvent(e);if(!self.dataView.isNewRow(self.dataView.getItemByIdx(cell.row).id))self.showContextMenu(cell,e.pageX,e.pageY)});this.grid.onClick.subscribe(function(e,args){if(Slick.GlobalEditorLock.commitCurrentEdit()){var column=self.grid.getColumns()[args.cell];if(isClickOnNewRow(args.row));else if(column.name=="id")e.stopImmediatePropagation();else if(column.name=="delete"){self.handleDeleteRow(args.row,
self.data);e.stopImmediatePropagation()}else if(column.name=="uri"){var item=self.dataView.getItem(args.row);var uri=item.uri.replace(new RegExp("{(s*?.*?)*?}","gi"),encodeURIComponent(item.id));self.tumlTabViewManager.refreshContext(uri)}else if(isComponentMany(column)){doComponentMany(column,args);e.stopImmediatePropagation()}else if(isComponentOne(column)){doComponentOne(column,args);e.stopImmediatePropagation()}else if(column.options.property.associationClassOne){var data=null;if(isCellEditableWithColumn(column,
args.row,self.dataView.getItem(args.row))){if(self.dataView.getItem(args.row)!==undefined&&(self.dataView.getItem(args.row)!==null&&(self.dataView.getItem(args.row)[column.name]!==undefined&&self.dataView.getItem(args.row)[column.name]!==null)))data=self.dataView.getItem(args.row)[column.name];else if(self.dataView.getItem(args.row)[column.name]!==null&&self.dataView.getItem(args.row)[column.name].tmpId!==undefined)data=self.dataView.getItem(args.row)[column.name];else data={};self.tumlTabViewManager.openAssociationClass(data,
args,column.options.property.tumlUri,column.options.property)}e.stopImmediatePropagation()}self.grid["clicked"]=true}else e.stopImmediatePropagation()});function isComponentMany(column){return!column.options.property.manyPrimitive&&(!column.options.property.manyEnumeration&&(column.options.property.composite&&(column.options.property.lower>0&&(column.options.property.upper>1||column.options.property.upper===-1))))}function doComponentMany(column,args){var data=[];if(isCellEditableWithColumn(column,
args.row,self.dataView.getItem(args.row))){if(self.dataView.getItem(args.row)!==undefined&&(self.dataView.getItem(args.row)!==null&&(self.dataView.getItem(args.row)[column.name]!==undefined&&self.dataView.getItem(args.row)[column.name]!==null)))data=self.dataView.getItem(args.row)[column.name];var id=self.dataView.getItem(args.row)["id"];self.tumlTabViewManager.openManyComponent(data,args,column.options.property.tumlUri,column.options.property)}}function isComponentOne(column){return!column.options.property.manyPrimitive&&
(!column.options.property.manyEnumeration&&(column.options.property.composite&&(column.options.property.lower===1&&column.options.property.upper===1)))}function doComponentOne(column,args){var data=null;if(isCellEditableWithColumn(column,args.row,self.dataView.getItem(args.row))){if(self.dataView.getItem(args.row)!==undefined&&(self.dataView.getItem(args.row)!==null&&(self.dataView.getItem(args.row)[column.name]!==undefined&&self.dataView.getItem(args.row)[column.name]!==null)))data=self.dataView.getItem(args.row)[column.name];
else data={};self.tumlTabViewManager.openOneComponent(data,args,column.options.property.tumlUri,column.options.property)}}this.grid.onCellChange.subscribe(function(e,args){var column=self.grid.getColumns()[args.cell];self.dataView.updateItem(args.item.id,args.item,column.name);var property=column.options.property;if(!property.associationClassOne&&property.memberEndOfAssociationClass)self.dataView.updateItem(args.item.id,args.item,property.associationClassPropertyName);if(!property.composite&&(!property.inverseComposite&&
(!property.onePrimitive&&(!property.oneEnumeration&&property.upper===1))))if(self.tumlTabViewManager instanceof Tuml.TumlTabManyComponentViewManager)self.updateDataModelForOneToOne();else self.updateDataModelForOneToOneForUpdate()});this.grid.onKeyDown.subscribe(function(e){if(self.grid["manyPrimitiveEditorOpen"])self.grid["manyPrimitiveEditor"].handleKeyPress(e);if(e.which==39&&e.ctrlKey){e.preventDefault();var cell=self.grid.getActiveCell();var activeCellPosition=self.grid.getActiveCellPosition();
self.showContextMenu(cell,activeCellPosition.left+activeCellPosition.width,activeCellPosition.top);e.stopImmediatePropagation()}else if(e.which===13){var cell=self.grid.getActiveCell();var column=self.grid.getColumns()[cell.cell];if(isComponentMany(column))doComponentMany(column,{row:cell.row,cell:cell.cell,grid:self.grid});else if(isComponentOne(column))doComponentOne(column,{row:cell.row,cell:cell.cell,grid:self.grid})}else{if(e.which!=65||!e.ctrlKey)return false;var rows=[];for(var i=0;i<self.dataView.getLength();i++)rows.push(i);
self.grid.setSelectedRows(rows);e.preventDefault();e.stopImmediatePropagation()}});this.grid.onSort.subscribe(function(e,args){sortdir=args.sortAsc?1:-1;sortcol=args.sortCol.field;if($.browser!==undefined&&($.browser.msie&&$.browser.version<=8)){var percentCompleteValueFn=function(){var val=this["percentComplete"];if(val<10)return"00"+val;else if(val<100)return"0"+val;else return val};self.dataView.fastSort(sortcol=="percentComplete"?percentCompleteValueFn:sortcol,args.sortAsc)}else self.dataView.sort(function comparer(a,
b){var x=a[sortcol],y=b[sortcol];return x==y?0:x>y?1:-1},args.sortAsc)});this.dataView.onRowCountChanged.subscribe(function(e,args){self.grid.updateRowCount();self.grid.render()});this.dataView.onRowsChanged.subscribe(function(e,args){self.grid.invalidateRows(args.rows);self.grid.render()});this.dataView.onPagingInfoChanged.subscribe(function(e,pagingInfo){var isLastPage=pagingInfo.pageNum==pagingInfo.totalPages-1;var options=self.grid.getOptions();var enableAddRow=options.enableAddRow&&(isLastPage||
pagingInfo.pageSize==0);if(options.enableAddRow!=enableAddRow)self.grid.setOptions({enableAddRow:enableAddRow})});$(this.grid.getHeaderRow()).delegate(":input","change keyup",function(e){columnFilters[$(this).data("columnId")]=$.trim($(this).val());self.dataView.refresh()});this.grid.onColumnsReordered.subscribe(function(e,args){self.updateHeaderRow(self.localMetaForData)});this.grid.onColumnsResized.subscribe(function(e,args){self.updateHeaderRow(self.localMetaForData)});this.grid.onViewportChanged.subscribe(function(e,
args){var vp=self.grid.getViewport()});this.grid.onViewportChanged.notify();this.grid.onBeforeEditCell.subscribe(function(e,args){if(!isCellEditable(args.row,args.cell,args.item))return false});this.grid.onActiveCellChanged.subscribe(function(e,args){if(isClickOnNewRow(args.row)){var column=self.grid.getColumns()[args.cell];if(column.options!==undefined){var editor=selectEditor(column.options.property);if(editor!==Tuml.Slick.Editors.SelectOneToOneCellEditor)self.handleAddNewRow()}else self.handleAddNewRow()}});
function isCellEditableWithColumn(column,row,item){if(column.name!=="id"&&(column.name!=="uri"&&(column.name!=="delete"&&!column.options.property.readOnly))){var property=column.options.property;if(property.composite&&property.lower>=1||property.associationClassOne)if(row>=self.dataView.getItems().length||self.dataView.getNewItems().indexOf(item)!==-1)if(property.associationClassOne&&(!property.memberEndOfAssociationClass&&(!property.composite&&(property.oneToOne||property.manyToOne))))if(self.dataView.getItem(row)[column.name]!==
undefined&&(self.dataView.getItem(row)[column.name]!==null&&self.dataView.getItem(row)[column.name].tmpId!==undefined))return true;else{if(!(self instanceof Tuml.TumlForManyLookupGridManager))alert("Select an association before setting the association class!");return false}else return true;else if(property.associationClassOne&&(!property.memberEndOfAssociationClass&&(!property.composite&&(property.oneToOne||property.manyToOne))))if(self.dataView.getItem(row)[column.name]!==undefined&&(self.dataView.getItem(row)[column.name]!==
null&&self.dataView.getItem(row)[column.name].tmpId!==undefined))return true;else{if(!(self instanceof Tuml.TumlForManyLookupGridManager)&&property.inverseQualifiedName!==this.propertyNavigatingTo.qualifiedName)alert("Select an association before setting the association class!");return false}else return false}return true}function isCellEditable(row,cell,item){for(var j=0;j<self.grid.getColumns().length;j++){var column=self.grid.getColumns()[j];if(cell===j)return isCellEditableWithColumn(column,row,
item);if(j>cell)break}return true}function isClickOnNewRow(row){if(row>=self.dataView.getItems().length)return true;else return false}this.updateHeaderRow=function(metaForData){for(var i=0;i<this.columns.length;i++)if(this.columns[i].id!=="selector"&&(this.columns[i].id!=="uri"&&this.columns[i].id!=="delete")){var header=this.grid.getHeaderRowColumn(this.columns[i].id);$(header).empty();$(constructHeaderRowBox(this.columns[i].id,metaForData)).data("columnId",this.columns[i].id).val(columnFilters[this.columns[i].id]).appendTo(header)}};
function constructHeaderRowBox(columnId,metaForData){for(var i=0;i<metaForData.properties.length;i++){var property=metaForData.properties[i];if(property.name==columnId&&property.fieldType=="String")return"\x3cinput type\x3d'text'\x3e";else if(property.name==columnId&&(property.fieldType=="Integer"||(property.fieldType=="Long"||property.fieldType=="Real")))return"\x3cinput type\x3d'text'\x3e";else if(property.name==columnId&&property.fieldType=="Boolean")return"\x3cselect\x3e\x3coption value\x3d'None'\x3eNone\x3c/option\x3e\x3coption value\x3d'true'\x3eTrue\x3c/option\x3e\x3coption value\x3d'false'\x3eFalse\x3c/option\x3e\x3c/select\x3e"}return"\x3cinput type\x3d'text'\x3e"}
function filter(item,metaForData){for(var columnId in columnFilters)if(columnId!==undefined&&columnFilters[columnId]!==""){var c=self.grid.getColumns()[self.grid.getColumnIndex(columnId)];for(var i=0;i<metaForData.metaForData.properties.length;i++){var property=metaForData.metaForData.properties[i];if(property.name==columnId)if(property.dataTypeEnum!=null&&property.dataTypeEnum!==undefined)if(property.dataTypeEnum=="Date"){if(item[c.field]==null||item[c.field].indexOf(columnFilters[columnId])==-1)return false}else if(property.dataTypeEnum==
"Time"){if(item[c.field]==undefined||item[c.field].indexOf(columnFilters[columnId])==-1)return false}else if(property.dataTypeEnum=="DateTime"){if(item[c.field]==undefined||item[c.field].indexOf(columnFilters[columnId])==-1)return false}else if(property.dataTypeEnum=="InternationalPhoneNumber"){if(item[c.field]==undefined||item[c.field].indexOf(columnFilters[columnId])==-1)return false}else if(property.dataTypeEnum=="LocalPhoneNumber"){if(item[c.field]==undefined||item[c.field].indexOf(columnFilters[columnId])==
-1)return false}else if(property.dataTypeEnum=="Email"){if(item[c.field]==undefined||item[c.field].indexOf(columnFilters[columnId])==-1)return false}else alert("Unsupported dataType "+property.dataTypeEnum);else if(!property.onePrimitive&&(!property.manyPrimitive&&!property.composite)){if(item[c.field].displayName==undefined&&item[c.field]!=columnFilters[columnId])return false;if(item[c.field].displayName!==undefined&&item[c.field].displayName.indexOf(columnFilters[columnId])==-1)return false}else if(property.fieldType==
"String"){if(item[c.field]!==undefined&&item[c.field].indexOf(columnFilters[columnId])==-1)return false}else if(property.fieldType=="Integer"||(property.fieldType=="Long"||property.fieldType=="Real")){if(item[c.field]!=columnFilters[columnId])return false}else if(property.fieldType=="Boolean"){var isNone=columnFilters[columnId]==="None";if(!isNone){var isTrueSet=columnFilters[columnId]==="true";if(item[c.field]!=isTrueSet)return false}}}}return true}this.grid.onValidationError.subscribe(function(e,
args){e.stopImmediatePropagation();alert(args.validationResults.msg);return true});this.setupColumnFormatter();this.initializeDataModel(data,filter);this.updateHeaderRow(this.localMetaForData);this.dataView.syncGridSelection(this.grid,true)};this.addItems=function(items){for(var i=0;i<items.length;i++){this.dataView.addItem(items[i]);this.dataView.getDeletedItems().remove(items[i])}this.grid.invalidateAllRows();this.grid.updateRowCount();this.grid.render()};this.setupRowDrag=function(){var moveRowsPlugin=
new Slick.RowMoveManager({cancelEditOnDrag:true});moveRowsPlugin.onBeforeMoveRows.subscribe(function(e,data){for(var i=0;i<data.rows.length;i++)if(data.rows[i]==data.insertBefore||data.rows[i]==data.insertBefore-1){e.stopPropagation();return false}return true});moveRowsPlugin.onMoveRows.subscribe(function(e,args){var extractedRows=[],left,right;var rows=args.rows;var insertBefore=args.insertBefore;left=self.dataView.getItems().slice(0,insertBefore);right=self.dataView.getItems().slice(insertBefore,
self.dataView.getItems().length);rows.sort(function(a,b){return a-b});for(var i=0;i<rows.length;i++){var movedItem=self.dataView.getItems()[rows[i]];extractedRows.push(movedItem)}rows.reverse();for(var i=0;i<rows.length;i++){var row=rows[i];if(row<insertBefore)left.splice(row,1);else right.splice(row-insertBefore,1)}if(rows[0]>insertBefore-1)for(var i=0;i<extractedRows.length;i++){var movedItem=extractedRows[i];movedItem["_index"]=left.length+i;self.dataView.updateItem(movedItem.id,movedItem,"_index");
movedItem["_movedOrder"]=Tuml.UmlgListItemMovedOrder++;self.dataView.updateItem(movedItem.id,movedItem,"_movedOrder")}else for(var i=extractedRows.length-1;i>=0;i--){var movedItem=extractedRows[i];movedItem["_index"]=left.length+i;self.dataView.updateItem(movedItem.id,movedItem,"_index");movedItem["_movedOrder"]=Tuml.UmlgListItemMovedOrder++;self.dataView.updateItem(movedItem.id,movedItem,"_movedOrder")}self.dataView.setItems(left.concat(extractedRows.concat(right)));var selectedRows=[];for(var i=
0;i<rows.length;i++)selectedRows.push(left.length+i);self.grid.resetActiveCell();self.grid.setSelectedRows(selectedRows);self.grid.render()});self.grid.registerPlugin(moveRowsPlugin);self.grid.onDragInit.subscribe(function(e,dd){e.stopImmediatePropagation()})};this.setCellValue=function(cell,value){var item=self.dataView.getItemByIdx(cell.row);if(item===undefined)throw"item not found for given row in TumlBaseGridManager.setCellValue";item[self.grid.getColumns()[cell.cell].name]=value;self.grid.invalidateRows([cell.row]);
self.grid.updateRowCount();self.grid.render()}}TumlBaseGridManager.prototype.refresh=function(result,gridDiv){this.metaForDataTo=result.meta.to;this.calculateContainsOne();var tabDiv=gridDiv;tabDiv.children().remove();$('\x3cdiv id\x3d"serverErrorMsg" /\x3e').appendTo(tabDiv);var windowHeight;if(this instanceof Tuml.TumlManyComponentGridManager)windowHeight=600;else windowHeight=$(".ui-layout-center").height()-188;$("\x3cdiv /\x3e",{id:"myGrid"+this.metaForDataTo.name,style:"width:auto;height:"+windowHeight+
"px;",class:"umlg-slick-grid"}).appendTo(tabDiv);$("\x3cdiv /\x3e",{id:"pager"+this.metaForDataTo.name,style:"width:auto;height:20px;"}).appendTo(tabDiv);$("#contextMenu"+this.metaForDataTo.name).remove();this.createGrid(result.data,this.tumlUri)};TumlBaseGridManager.prototype.setupColumnFormatter=function(){var self=this;this.dataView.getItemMetadata=function(row){var item=this.getItem(row);var result={cssClasses:null,columns:null};var column={};var isNew=self.dataView.isRowSaved(row);var isUpdated=
self.dataView.isRowUpdated(row);for(var i=0;i<self.localMetaForData.properties.length;i++){var property=self.localMetaForData.properties[i];if(!property.onePrimitive&&(!property.manyPrimitive&&(!property.oneEnumeration&&(!property.manyEnumeration&&property.dataTypeEnum===null))))if(property.associationClassOne||property.composite&&property.lower>0)if(item===undefined||this.getNewItems().indexOf(item)!==-1)if(self.tumlTabViewManager.validationResults!==null&&self.tumlTabViewManager.validationResults.length>
0){var found=false;for(var j=0;j<self.tumlTabViewManager.validationResults.length;j++){var validationResult=self.tumlTabViewManager.validationResults[j];if(validationResult.property===property.name){found=true;column[property.name]={"formatter":TumlSlick.Formatters.TumlValidationFailedFormatter};break}}if(!found)column[property.name]={"formatter":TumlSlick.Formatters.TumlRequired}}else if(property.associationClassOne)if(property.lower>0)column[property.name]={"formatter":TumlSlick.Formatters.TumlToAssociationClassRequiredFormatter};
else column[property.name]={"formatter":TumlSlick.Formatters.TumlToAssociationClassFormatter};else column[property.name]={"formatter":TumlSlick.Formatters.TumlRequired};else if(property.associationClassOne&&!property.memberEndOfAssociationClass)if(property.manyToOne||property.oneToOne)if(property.inverseComposite)column[property.name]={"formatter":TumlSlick.Formatters.TumlAssociationComponentFormatter};else if(property.lower>0)column[property.name]={"formatter":TumlSlick.Formatters.TumlToAssociationClassRequiredFormatter};
else column[property.name]={"formatter":TumlSlick.Formatters.TumlToAssociationClassFormatter};else column[property.name]={"formatter":TumlSlick.Formatters.TumlAssociationComponentFormatter};else column[property.name]={"formatter":TumlSlick.Formatters.TumlComponentFormatter};else column[property.name]={"formatter":selectFormatter(property,isNew,isUpdated)};else column[property.name]={"formatter":selectFormatter(property,isNew,isUpdated)}}result["columns"]=column;return result}};TumlBaseGridManager.prototype.initializeDataModel=
function(data,filter){this.dataView.beginUpdate();this.setData(data);this.dataView.setFilterArgs({metaForData:this.localMetaForData});this.dataView.setFilter(filter);this.dataView.endUpdate()};TumlBaseGridManager.prototype.isPropertyForGrid=function(property){if(this.contextVertexId!==null&&(property.associationClassOne&&property.memberEndOfAssociationClass))return true;else if(this.contextVertexId!=null&&(property.associationClassOne&&!property.associationClassProperty))if(this.propertyNavigatingTo!==
undefined&&this.propertyNavigatingTo.associationClassPropertyName===property.inverseAssociationClassPropertyName)return true;else return false;else if(!property.composite&&(!property.inverseComposite&&(property.lower>0&&!property.associationClassOne)))return true;else if(property.associationClassProperty)return false;else if(property.composite&&property.lower>0)return true;else if(this.propertyNavigatingTo!==undefined&&property.inverseQualifiedName===this.propertyNavigatingTo.qualifiedName)return false;
else if(!property.composite&&(!property.inverseComposite&&(property.oneToOne||property.manyToOne||(property.manyPrimitive||(property.manyEnumeration||property.dataTypeEnum!==null&&(property.upper>1||property.upper===-1))))))return true;else return false};TumlBaseGridManager.prototype.setupColumns=function(){this.columns=[];for(var i=0;i<this.localMetaForData.properties.length;i++){var property=this.localMetaForData.properties[i];if(this.isPropertyForGrid(property))if(property.name=="id"){var options=
{id:property.name,name:property.name,field:property.name,sortable:true};if(this.propertyNavigatingTo!==undefined&&(!this.propertyNavigatingTo.associationClassOne&&this.propertyNavigatingTo.ordered)){options.behavior="selectAndMove";options.cssClass="cell-reorder"}this.columns.push(options)}else this.columns.push({id:property.name,name:property.derived?"/ "+property.name:property.name,field:property.name,sortable:true,editor:selectEditor(property),validator:selectFieldValidator(property),options:{required:property.lower>
0,tumlLookupUri:property.tumlLookupUri,rowEnumerationLookupMap:new RowEnumerationLookupMap(property.qualifiedName,"/"+tumlModelName+"/tumlEnumLookup"),ordered:property.ordered,unique:property.unique,property:property,tumlBaseGridManager:this},width:120})}this.columns.sort(function(a,b){if(a.name==="id")return-1;if(b.name==="id")return 1;if((a.editor===undefined||a.editor===null)&&(b.editor!==undefined&&b.editor!==null))return 1;else if((b.editor===undefined||b.editor===null)&&(a.editor!==undefined&&
a.editor!==null))return-1;else if((a.editor===undefined||a.editor===null)&&(b.editor===undefined||b.editor===null))return-1;return a.name.localeCompare(b.name)})};TumlBaseGridManager.prototype.instantiateGrid=function(){this.grid=new Slick.Grid("#myGrid"+this.localMetaForData.name,this.dataView,this.columns,this.options);this.pager=new Slick.Controls.Pager(this.dataView,this.grid,$("#pager"+this.localMetaForData.name));$("\x3cdiv id\x3d'grid-button"+this.localMetaForData.name+"' class\x3d'grid-button'/\x3e").appendTo("#pager"+
this.localMetaForData.name+" .slick-pager-settings");this.grid["manyEditorOpen"]=false;this.grid.setSelectionModel(new Slick.RowSelectionModel);new Slick.Controls.ColumnPicker(this.columns,this.grid,this.options)};TumlBaseGridManager.prototype.showContextMenu=function(cell,x,y){var self=this;var contextMenu=$("#contextMenu"+this.localMetaForData.name);var links=contextMenu.find("a");for(var i=0;i<links.length;i++){var link=$(links[i]);var adjustedUri=link.attr("href").replace(new RegExp("{(s*?.*?)*?}",
"gi"),encodeURIComponent(this.data[cell.row].id));link.attr("href",adjustedUri)}contextMenu.data("row",cell.row).css({display:"block",left:x,top:y});contextMenu.focus();$("body").one("click",function(){contextMenu.hide();resetLinks(cell)});contextMenu.mouseleave(contextMenu_timer);function contextMenu_close(){contextMenu.hide();resetLinks(cell)}function contextMenu_timer(){window.setTimeout(contextMenu_close,200)}function resetLinks(cell){var links=contextMenu.find("a");for(var i=0;i<links.length;i++){var link=
$(links[i]);var adjustedUri=link.attr("href").replace(self.data[cell.row].id,"{property}");link.attr("href",adjustedUri)}}};TumlBaseGridManager.prototype.createContextMenu=function(){var self=this;var contextMenu=$('\x3cdiv id\x3d"contextMenu'+this.localMetaForData.name+'" class\x3d"umlg-context-menu dropdown clearfix" /\x3e').appendTo("body");var contextMenuUl=$('\x3cul id\x3d"contextMenuUl" class\x3d"dropdown-menu" role\x3d"menu" aria-labelledby\x3d"dropdownMenu1" style\x3d"display:block;position:static;margin-bottom:5px;" /\x3e').appendTo(contextMenu);
var li=$("\x3cli /\x3e").appendTo(contextMenuUl);var a=$("\x3ca /\x3e",{title:"self",tabindex:-1,href:"#"}).appendTo(li);a.data("contextData",{name:"self",uri:this.localMetaForData.uri});$('\x3ci class\x3d"umlg-icon ui-icon ui-icon-umlactivity-final-node" /\x3e').appendTo(a);a.append(" self");a.on("click",function(e){var link=$(e.target);var row=contextMenu.data("row");self.handleContextMenuSelection(link,row);contextMenu.hide();e.preventDefault();e.stopImmediatePropagation()});var sortedProperties=
this.localMetaForData.properties;function compare(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;return 0}sortedProperties.sort(compare);for(var i=0;i<sortedProperties.length;i++){var property=sortedProperties[i];if(property.inverseComposite||!(property.dataTypeEnum!==undefined&&property.dataTypeEnum!==null||(property.onePrimitive||(property.manyPrimitive||(property.name=="id"||property.name=="uri"))))){var text=null;if(property.associationClassOne&&!property.memberEndOfAssociationClass){var propertyNameParts=
property.name.split("_");if(propertyNameParts.length===1)text=propertyNameParts[0];else text=propertyNameParts[0]+"["+propertyNameParts[1]+"]"}else text=property.name;if(property.upper==-1)text+=" ["+property.lower+"..*]";else text+=" ["+property.lower+".."+property.upper+"]";var adjustedUri=addUiToUrl(property.tumlUri);var li=$("\x3cli /\x3e").appendTo(contextMenuUl);var a=$("\x3ca /\x3e",{title:property.name,tabindex:-1,href:adjustedUri}).appendTo(li);var menuIconClass="ui-icon";if(property.composite)menuIconClass=
menuIconClass+" ui-icon-umlcomposition";else if(property.associationClassOne&&!property.memberEndOfAssociationClass)menuIconClass=menuIconClass+" ui-icon-umlassociationclass";else menuIconClass=menuIconClass+" ui-icon-umlassociation";$('\x3ci class\x3d"umlg-icon '+menuIconClass+'"/\x3e').appendTo(a);a.data("contextData",{name:property.name,property:property});a.on("click",function(e){var link=$(e.target);var row=contextMenu.data("row");self.handleContextMenuSelection(link,row);contextMenu.hide();
e.preventDefault();e.stopImmediatePropagation()});a.append(" "+text);if(property.derived)a.append(" {derived}");if(property.qualified!==undefined&&property.qualified)a.append(" [qualified]")}}return contextMenuUl};TumlBaseGridManager.prototype.handleContextMenuSelection=function(a,gridRow){var contextData=a.data("contextData");if(contextData.name!=="delete"){var url;if(contextData.name!=="self")if(!contextData.property.composite&&(!contextData.property.qualified&&contextData.property.upper==1))if(!contextData.property.inverseComposite&&
this.data[gridRow][contextData.property.name].id==null){alert("Property "+contextData.property.qualifiedName+" on "+this.localMetaForData.name+" does not exist!\nIt can not be created as it is a non composite property.");return}else url=contextData.property.tumlUri.replace(new RegExp("{(s*?.*?)*?}","gi"),encodeURIComponent(this.data[gridRow].id));else url=contextData.property.tumlUri.replace(new RegExp("{(s*?.*?)*?}","gi"),encodeURIComponent(this.data[gridRow].id));else url=contextData.uri.replace(new RegExp("{(s*?.*?)*?}",
"gi"),encodeURIComponent(this.data[gridRow].id));this.handleContextMenuClickLink(url)}else this.handleDeleteRow(gridRow,this.data)};TumlBaseGridManager.prototype.setupOptions=function(){this.options={autoHeight:false,showHeaderRow:true,headerRowHeight:30,editable:!this.propertyNavigatingTo.readOnly,enableAddRow:this.propertyNavigatingTo.composite&&!this.propertyNavigatingTo.associationClassOne?true:false,enableCellNavigation:true,asyncEditorLoading:false,enableAsyncPostRender:true,forceFitColumns:false,
topPanelHeight:25,autoEdit:false}};TumlBaseGridManager.prototype.setData=function(data){this.dataView.setItems(data)};TumlBaseGridManager.prototype.getResult=function(data){return this.result}})(jQuery);
(function($){$.extend(true,window,{Tuml:{TumlTabOneManager:TumlTabOneManager,TumlTabComponentOneManager:TumlTabComponentOneManager}});function TumlTabComponentOneManager(tumlTabViewManager){TumlBaseTabOneManager.call(this,tumlTabViewManager);$.extend(this,{"TumlTabComponentOneManager":"1.0.0"});this.getDiv=function(){return $("#"+this.metaForData.name+"OneComponent")}}TumlTabComponentOneManager.prototype=new TumlBaseTabOneManager;function TumlTabOneManager(tumlTabViewManager){TumlBaseTabOneManager.call(this,
tumlTabViewManager);this.getDiv=function(){return $("#"+this.metaForData.name)}}TumlTabOneManager.prototype=new TumlBaseTabOneManager;function TumlBaseTabOneManager(tumlTabViewManager){this.TumlBaseTabOneManager="1.0.0";this.tumlTabViewManager=tumlTabViewManager;function init(){}this.updateGridAfterCommitOrRollback=function(item){this.setDataModel(item);this.refreshFromDataModel()};this.handleLookup=function(lookupUri,qualifiedName,loadDataCallback){this.tumlTabViewManager.handleLookup(lookupUri,
qualifiedName,loadDataCallback)};this.calculateContainsOne=function(){for(var i=0;i<this.metaForData.properties.length;i++){var property=this.metaForData.properties[i];if(property.oneToOne&&!property.onePrimitive){this.containsOneToOne=true;break}}};this.updateDataModelForOneToOne=function(data){for(var i=0;i<this.metaForData.properties.length;i++){var property=this.metaForData.properties[i];if(data[property.name]!==undefined&&(data[property.name]!==null&&(property.oneToOne&&(!property.inverseComposite&&
!property.onePrimitive)))){this.tumlTabViewManager.updateDataModelForOneToOne(data[property.name].previousId,property.inverseName,{});this.tumlTabViewManager.updateDataModelForOneToOne(data[property.name].id,property.inverseName,data)}}};init()}TumlBaseTabOneManager.prototype.getDiv=function(){console.log("TumlBaseTabOneManager.prototype.getDiv must be overriden")};TumlBaseTabOneManager.prototype.updateData=function(property,value){var foundProperty=false;for(var i=0;i<this.metaForData.properties.length;i++){var metaProperty=
this.metaForData.properties[i];if(metaProperty.name==property.name){foundProperty=true;break}}if(!foundProperty)throw"Updating non existing property on one. Property \x3d "+property.name;this.data[property.name]=value};TumlBaseTabOneManager.prototype.refresh=function(data,metaForData,isForCreation){var self=this;this.currentActiveProperty=null;this.metaForData=metaForData.to;this.qualifiedName=this.metaForData.qualifiedName;this.data=data;this.data.qualifiedName=this.qualifiedName;this.isForCreation=
isForCreation;this.calculateContainsOne();var tabDiv=this.getDiv();tabDiv.children().remove();$('\x3cdiv id\x3d"serverErrorMsg" /\x3e').appendTo(tabDiv);var formDiv=$("\x3cdiv /\x3e",{id:"formDiv"+this.metaForData.name,role:"form",class:"form-horizontal"}).appendTo(tabDiv);if(this.metaForData.name!==tumlModelName){var first=true;for(var i=0;i<this.metaForData.properties.length;i++){var property=this.metaForData.properties[i];if(this.isPropertyForOnePage(property)){if(!property.onePrimitive&&(property.dataTypeEnum==
undefined&&(!property.manyPrimitive&&(!property.composite&&property.oneToOne))))continue;else if(!property.onePrimitive&&(property.dataTypeEnum==undefined&&(!property.manyPrimitive&&(!property.composite&&property.manyToOne))))continue;var formGroupDiv=$("\x3cdiv\x3e",{class:"umlg-form-group form-group"}).appendTo(formDiv);if(property.fieldType!=="Boolean"||(property.upper>1||property.upper===-1)){var label=$("\x3clabel /\x3e",{for:property.name+"Id",class:"col-lg-3 control-label"});if(property.derived)label.text("/ "+
property.name+" :");else label.text(property.name+" :");label.appendTo(formGroupDiv)}else console.log("wf");var $input=this.constructInputForField(property,false);if(first){first=false;this.currentActiveProperty=property}var inputDiv=$("\x3cdiv /\x3e",{class:"input-group col-lg-6"}).appendTo(formGroupDiv);if(!property.readOnly&&property.lower>0)inputDiv.append('\x3cspan class\x3d"input-group-addon glyphicon glyphicon-asterisk"\x3e\x3c/span\x3e');if(property.fieldType=="Boolean"&&property.upper==1){inputDiv.addClass("col-lg-offset-3");
var checkboxLabel=$("\x3clabel /\x3e");checkboxLabel.append($input);checkboxLabel.append(" "+property.name);checkboxLabel.appendTo(inputDiv)}else{$input.appendTo(inputDiv);if(property.readOnly)$input.wrap("\x3cfieldset disabled /\x3e")}if(property.manyPrimitive||property.manyEnumeration){var $manyDiv=$('\x3clabel for\x3d"'+$input.attr("id")+'" class\x3d"input-group-addon"\x3e\x3ci class\x3d"glyphicon glyphicon-bell"\x3e\x3c/i\x3e\x3c/label\x3e');$input.parent().append($manyDiv);$manyDiv.click(function(inputScoped,
propertyScoped,manyDivScoped,liScoped){return function(e){self.openEditorForMany(inputScoped,propertyScoped,manyDivScoped,liScoped);e.preventDefault();e.stopImmediatePropagation()}}($input,property,$input,formGroupDiv));$input.keypress(function(inputScoped,propertyScoped,manyDivScoped,liScoped){return function(e){if(e.which==13){self.openEditorForMany(inputScoped,propertyScoped,manyDivScoped,liScoped);e.preventDefault();e.stopImmediatePropagation()}}}($input,property,$input,formGroupDiv))}else if(property.composite&&
(property.lower==1&&property.upper==1))$input.click(function(e,args){alert("TumlBaseTabOneManager.prototype.refresh $input.click not implemented")});else if(property.composite&&(property.lower>=1&&(property.upper>1||property.upper==-1)))$input.click(function(tumlUriScoped,propertyScoped){return function(e){if(self.data[propertyScoped.name]===undefined||self.data[propertyScoped.name]===null)self.tumlTabViewManager.openManyComponent([],tumlUriScoped,propertyScoped);else self.tumlTabViewManager.openManyComponent(self.data[propertyScoped.name],
tumlUriScoped,propertyScoped)}}(property.tumlUri,property));if($input!==undefined)if(property.dataTypeEnum!=null&&property.dataTypeEnum!==undefined)if(property.dataTypeEnum=="Date"){(function(p){$input.datepicker({buttonImageOnly:true,dateFormat:"yy-mm-dd",onClose:function(dateText,inst){self.synchronizeModel(p)}})})(property);$input.parent().append('\x3clabel for\x3d"'+$input.attr("id")+'" class\x3d"input-group-addon"\x3e\x3ci class\x3d"glyphicon glyphicon-calendar"\x3e\x3c/i\x3e\x3c/label\x3e')}else if(property.dataTypeEnum==
"Time"){(function(p){$input.timepicker({buttonImageOnly:true,onClose:function(dateText,inst){self.synchronizeModel(p)}})})(property);$input.parent().append('\x3clabel for\x3d"'+$input.attr("id")+'" class\x3d"input-group-addon"\x3e\x3ci class\x3d"glyphicon glyphicon-calendar"\x3e\x3c/i\x3e\x3c/label\x3e')}else if(property.dataTypeEnum=="DateTime"){(function(p){$input.datetimepicker({buttonImageOnly:true,dateFormat:"yy-mm-dd",timeFormat:"hh:mm:ss",onClose:function(dateText,inst){self.synchronizeModel(p)}})})(property);
$input.parent().append('\x3clabel for\x3d"'+$input.attr("id")+'" class\x3d"input-group-addon"\x3e\x3ci class\x3d"glyphicon glyphicon-calendar"\x3e\x3c/i\x3e\x3c/label\x3e')}}}for(var i=0;i<this.metaForData.properties.length;i++){var property=this.metaForData.properties[i];if(this.isPropertyForOnePage(property)&&(!property.onePrimitive&&(property.dataTypeEnum==undefined&&(!property.manyPrimitive&&(!property.composite&&(property.oneToOne||property.manyToOne)))))){var formGroupDiv=$("\x3cdiv\x3e",{class:"umlg-form-group form-group"});
formGroupDiv.appendTo(formDiv);$("\x3clabel /\x3e",{for:property.name+"Id",class:"col-lg-3 control-label"}).text(property.name+" :").appendTo(formGroupDiv);var $input=this.constructInputForField(property);var inputDiv=$("\x3cdiv /\x3e",{class:"input-group col-lg-4"}).appendTo(formGroupDiv);if(property.lower>0)inputDiv.append('\x3cspan class\x3d"input-group-addon glyphicon glyphicon-asterisk"\x3e\x3c/span\x3e');$input.appendTo(inputDiv)}}}};TumlBaseTabOneManager.prototype.doSave=function(){alert("doSave must be overridden")};
TumlBaseTabOneManager.prototype.doCancel=function(){this.refresh(this.data,this.metaForData,this.qualifiedName)};TumlBaseTabOneManager.prototype.isPropertyForOnePage=function(property){return!property.associationClassOne&&(!property.inverseComposite&&(!property.composite&&(property.oneToOne||(property.manyToOne||(property.manyPrimitive||property.manyEnumeration)))))||!property.associationClassOne&&(this.isForCreation&&(property.composite&&property.lower>0)&&property.name!=="uri")};TumlBaseTabOneManager.prototype.synchronizeModel=
function(property){if(property.name==="id"){var id=$("#"+property.name+escapeColon(this.metaForData.qualifiedName)+"Id").val();if(id.indexOf("fake")===-1)this.data.id=id;else{this.data.id=id;this.data.tmpId=this.data.id}}else if(property.readOnly);else if(property.name!=="uri")if(property.onePrimitive){var stringValue=$("#"+property.name+escapeColon(this.metaForData.qualifiedName)+"Id").val();if(property.fieldType=="Integer"||property.fieldType=="Long")if(stringValue=="")this.data[property.name]=
null;else this.data[property.name]=parseInt(stringValue);else if(property.fieldType=="Real")if(stringValue=="")this.data[property.name]=null;else this.data[property.name]=parseFloat(stringValue);else if(property.fieldType=="String")if(stringValue=="")this.data[property.name]=null;else this.data[property.name]=stringValue;else if(property.fieldType=="Boolean")this.data[property.name]=$("#"+property.name+escapeColon(this.metaForData.qualifiedName)+"Id").is(":checked")}else if(property.dataTypeEnum!==
null&&property.dataTypeEnum!==undefined)if(property.dataTypeEnum=="DateTime")this.data[property.name]=$("#"+property.name+escapeColon(this.metaForData.qualifiedName)+"Id").val();else if(property.dataTypeEnum=="Image");else this.data[property.name]=$("#"+property.name+escapeColon(this.metaForData.qualifiedName)+"Id").val();else if(property.oneEnumeration){var $select=$("#"+property.name+escapeColon(this.metaForData.qualifiedName)+"Id");var options=$select.children();for(var j=0;j<options.length;j++)if(options[j].selected){this.data[property.name]=
$select.val();break}}else if(property.manyPrimitive){var inputValue=$("#"+property.name+escapeColon(this.metaForData.qualifiedName)+"Id").val();var array=inputValue===""?[]:inputValue.split(",");if(property.fieldType=="Integer"||property.fieldType=="Long")for(var j=0;j<array.length;j++)array[j]=parseInt(array[j],10);else if(property.fieldType=="Real")for(var j=0;j<array.length;j++)array[j]=parseFloat(array[j]);else if(property.fieldType=="Boolean")for(var j=0;j<array.length;j++)array[j]=array[j]===
"true";this.data[property.name]=array}else if(property.manyEnumeration){var inputValue=$("#"+property.name+escapeColon(this.metaForData.qualifiedName)+"Id").val();var array=inputValue===""?[]:inputValue.split(",");this.data[property.name]=array}else if(property.composite&&property.lower>0);else if(!property.onePrimitive&&(!property.manyPrimitive&&!property.inverseComposite)){var $select=$("#"+property.name+escapeColon(this.metaForData.qualifiedName)+"Id");var options=$select.children();for(var j=
0;j<options.length;j++)if(options[j].selected){var optionId=$select.val();if(optionId.indexOf("fake")===-1){if(optionId==="")optionId=null;this.data[property.name]={id:optionId,displayName:options[j].label,previousId:this.data[property.name].id}}else this.data[property.name]={id:optionId,displayName:options[j].label,previousId:this.data[property.name].id};break}}};TumlBaseTabOneManager.prototype.constructInputForField=function(property,isForManyEditor){var self=this;var $input;if(property.name=="id"){$input=
$("\x3cinput /\x3e",{disabled:"disabled",type:"text",id:inputFieldId(property,this.metaForData,isForManyEditor),name:property.name,class:"form-control"});if(this.data[property.name]!==undefined&&this.data[property.name]!==null)$input[0].defaultValue=this.data[property.name]}else if(property.readOnly)if(!this.isForCreation)$input=$("\x3cp /\x3e",{class:"form-control"}).text(this.data[property.name]);else $input=$("\x3cp /\x3e",{class:"form-control"});else if(property.dataTypeEnum!=null&&property.dataTypeEnum!==
undefined){if(property.dataTypeEnum=="Date"||(property.dataTypeEnum=="Time"||(property.dataTypeEnum=="DateTime"||(property.dataTypeEnum=="InternationalPhoneNumber"||(property.dataTypeEnum=="LocalPhoneNumber"||property.dataTypeEnum=="Email")))))$input=$("\x3cinput /\x3e",{type:"text",id:inputFieldId(property,this.metaForData,isForManyEditor),name:property.name,class:"form-control"});else if(property.dataTypeEnum=="Video"||(property.dataTypeEnum=="Audio"||property.dataTypeEnum=="Image"))$input=$("\x3cinput /\x3e",
{type:"text",id:inputFieldId(property,this.metaForData,isForManyEditor),name:property.name,class:"form-control"});else alert("Unsupported dataType "+property.dataTypeEnum);if(!this.isForCreation)$input.val(this.data[property.name])}else if(property.composite&&property.lower>0){$input=$("\x3cinput /\x3e",{type:"text",id:inputFieldId(property,this.metaForData,isForManyEditor),name:property.name,class:"form-control"});if(!this.isForCreation)$input.val(this.data[property.name])}else if(property.oneEnumeration){$input=
$("\x3cselect /\x3e",{class:"chzn-select form-control",id:inputFieldId(property,this.metaForData,isForManyEditor),name:property.name});if(!this.isForCreation)this.appendEnumerationLoopupOptionsToSelect("/"+tumlModelName+"/tumlEnumLookup",property.qualifiedName,property.lower>0,this.data[property.name],$input);else this.appendEnumerationLoopupOptionsToSelect("/"+tumlModelName+"/tumlEnumLookup",property.qualifiedName,property.lower>0,null,$input)}else if(isForManyEditor&&property.manyEnumeration){$input=
$("\x3cselect /\x3e",{id:inputFieldId(property,this.metaForData,isForManyEditor),class:"chzn-select form-control",name:property.name});if(!this.isForCreation)this.appendEnumerationLoopupOptionsToSelect("/"+tumlModelName+"/tumlEnumLookup",property.qualifiedName,property.lower>0,this.data[property.name],$input);else this.appendEnumerationLoopupOptionsToSelect("/"+tumlModelName+"/tumlEnumLookup",property.qualifiedName,property.lower>0,null,$input)}else if(!property.onePrimitive&&(property.dataTypeEnum==
undefined&&(!property.manyPrimitive&&(!property.composite&&property.oneToOne)))){$input=$("\x3cselect /\x3e",{class:"chzn-select form-control",style:"width:350px;",id:inputFieldId(property,this.metaForData,isForManyEditor),name:property.name});if(!this.isForCreation)this.appendLoopupOptionsToSelect2(property,this.data["id"],$input,this.data[property.name])}else if(!property.onePrimitive&&(property.dataTypeEnum==undefined&&(!property.manyPrimitive&&(!property.composite&&property.manyToOne)))){$input=
$("\x3cselect /\x3e",{class:"chzn-select form-control",style:"width:350px;",id:inputFieldId(property,this.metaForData,isForManyEditor),name:property.name});if(!this.isForCreation)this.appendLoopupOptionsToSelect2(property,this.data["id"],$input,this.data[property.name])}else if(property.fieldType=="String"||(property.fieldType=="Integer"||(property.fieldType=="Long"||(property.fieldType=="Real"||property.manyEnumeration)))){$input=$("\x3cinput /\x3e",{type:"text",class:"form-control",id:inputFieldId(property,
this.metaForData,isForManyEditor),name:property.name});if(!this.isForCreation)$input.val(this.data[property.name]===null?"":this.data[property.name])}else if(property.fieldType=="Boolean")if(!property.manyPrimitive&&(this.data!==undefined&&this.data!==null))if(!this.isForCreation)$input=$("\x3cinput /\x3e",{type:"checkbox",id:inputFieldId(property,this.metaForData,isForManyEditor),name:property.name,checked:this.data[property.name]?"checked":false});else $input=$("\x3cinput /\x3e",{type:"checkbox",
id:inputFieldId(property,this.metaForData,isForManyEditor),name:property.name,checked:false});else if(!property.manyPrimitive)$input=$("\x3cinput /\x3e",{type:"checkbox",class:"editor-checkbox",id:inputFieldId(property,this.metaForData,isForManyEditor),name:property.name});else{$input=$("\x3cinput /\x3e",{type:"text",class:"form-control",id:inputFieldId(property,this.metaForData,isForManyEditor),name:property.name});if(!this.isForCreation)$input.val(this.data[property.name])}if(!property.composite){$input.focus(function(){self.currentActiveProperty=
property});if($input.is("select")&&!isForManyEditor)$input.change(function(){var validationResult=self.validateField(property,$input,isForManyEditor);if(validationResult.valid)self.synchronizeModel(property);else setTimeout(function(){$input.focus()},5);return false});else if(property.fieldType==="Boolean"&&(!isForManyEditor&&property.upper===1))$input.change(function(){var validationResult=self.validateField(property,$input,isForManyEditor);if(validationResult.valid)self.synchronizeModel(property);
else setTimeout(function(){$input.focus()},5);return false});else if(!isForManyEditor)$input.blur(function(){var validationResult=self.validateField(property,$input,isForManyEditor);if(validationResult.valid)self.synchronizeModel(property);else setTimeout(function(){$input.focus()},5);return false});$input.keyup(function(e){if(e.keyCode==27){self.refreshFromDataModelForProperty(property);self.validateField(property,$input,isForManyEditor);return false}})}return $input};function inputFieldId(property,
metaData,isForManyEditor){var result=property.name+metaData.qualifiedName+"Id";if(isForManyEditor)result+="::manyEditor";return result}function inputFieldIdForValidate(property,metaData,isForManyEditor){var result="#"+property.name+escapeColon(metaData.qualifiedName)+"Id";if(isForManyEditor)result+="::manyEditor";return result}TumlBaseTabOneManager.prototype.setDataModel=function(dataModel){this.data=dataModel};TumlBaseTabOneManager.prototype.refreshFromDataModelForProperty=function(property){var self=
this;if(this.isPropertyForOnePage(property)){if(property.name=="id"){var input=$(inputFieldIdForValidate(property,this.metaForData,false));if(this.data[property.name]!==undefined)input.val(this.data[property.name])}else if(property.readOnly){var input=$(inputFieldIdForValidate(property,this.metaForData,false));if(this.data[property.name]!==undefined)input.text(this.data[property.name])}else if(property.dataTypeEnum!=null&&property.dataTypeEnum!==undefined){var input=$(inputFieldIdForValidate(property,
this.metaForData,false));if(this.data[property.name]!==undefined)input.val(this.data[property.name])}else if(property.composite&&property.lower>0){var input=$(inputFieldIdForValidate(property,this.metaForData,false));if(this.data[property.name]!==undefined)input.val(this.data[property.name])}else if(property.oneEnumeration){var input=$(inputFieldIdForValidate(property,this.metaForData,false));if(this.data[property.name]!==undefined)this.appendEnumerationLoopupOptionsToSelect("/"+tumlModelName+"/tumlEnumLookup",
property.qualifiedName,property.lower>0,this.data[property.name],input);else this.appendEnumerationLoopupOptionsToSelect("/"+tumlModelName+"/tumlEnumLookup",property.qualifiedName,property.lower>0,null,input)}else if(!property.onePrimitive&&(property.dataTypeEnum==undefined&&(!property.manyPrimitive&&(!property.composite&&property.oneToOne)))){var input=$(inputFieldIdForValidate(property,this.metaForData,false));this.appendLoopupOptionsToSelect2(property,this.data["id"],input,this.data[property.name])}else if(!property.onePrimitive&&
(property.dataTypeEnum==undefined&&(!property.manyPrimitive&&(!property.composite&&property.manyToOne))))if(this.data[property.name]!==undefined)this.appendLoopupOptionsToSelect2(property.tumlLookupUri,property.lower>0,this.data["id"],this.data[property.name],input);else this.appendLoopupOptionsToSelect2(property.tumlLookupOnCompositeParentUri,property.lower>0,this.data["id"],this.data[property.name],input);else if(property.fieldType=="String"||(property.fieldType=="Integer"||(property.fieldType==
"Long"||(property.fieldType=="Real"||property.manyEnumeration)))){var input=$(inputFieldIdForValidate(property,this.metaForData,false));if(this.data[property.name]!==undefined)input.val(this.data[property.name])}else if(property.fieldType=="Boolean")if(!property.manyPrimitive){var input=$(inputFieldIdForValidate(property,this.metaForData,false));if(this.data[property.name])input.attr("checked","checked");else input.attr("checked",false)}else if(property.manyPrimitive){var input=$(inputFieldIdForValidate(property,
this.metaForData,false));if(this.data[property.name]!==undefined)input.val(this.data[property.name])}if(!(property.composite&&property.lower>0)){var input=$(inputFieldIdForValidate(property,this.metaForData,false));input.blur(function(){self.validateField(property,input,false)})}}};TumlBaseTabOneManager.prototype.refreshFromDataModel=function(){for(var i=0;i<this.metaForData.properties.length;i++){var property=this.metaForData.properties[i];this.refreshFromDataModelForProperty(property)}var input=
$("#"+property.name+escapeColon(this.metaForData.qualifiedName)+"Id");if(this.isForCreation)input.addClass("umlg-new-id");else input.addClass("umlg-updated-id");return input};TumlBaseTabOneManager.prototype.openEditorForMany=function($inputToSet,property,$manyDiv,$li){var $div=$("\x3cdiv class\x3d'panel panel-default many-primitive-editor-for-one' /\x3e");$div.keyup(function(e){if(e.which==27)$div.click()});$(document).mouseup(function(e){var container=$(".many-primitive-editor-for-one");if(container.has(e.target).length===
0)container.remove()});$div.keydown(function(event){if(event.which==27){event.preventDefault();event.stopImmediatePropagation();$div.remove()}});var panelHeading=$('\x3cdiv class\x3d"panel-heading umlg-panel-heading-popup" /\x3e').appendTo($div);var topNavBar=$('\x3cdiv class\x3d"collapse navbar-collapse" /\x3e').appendTo(panelHeading);var panelBody=$('\x3cdiv class\x3d"panel-body umlg-panel-body-popup" /\x3e').appendTo($div);var panelFooter=$('\x3cdiv class\x3d"panel-footer umlg-panel-footer-popup" /\x3e').appendTo($div);
var $table;var $input;var editor=selectEditor(property);var serializer=(new editor).serializeValueForOne;var button=$('\x3cbutton type\x3d"button" id\x3d"many-primitive-editor-input-add-button" class\x3d"btn btn-default pull-left" /\x3e').text("Add").click(function(){var input=panelHeading.find(".form-control");var valueToAdd=input.val();var currentValues=serializer($table);var testArray=[];if(valueToAdd!==""){testArray.push(valueToAdd);var validator=selectFieldValidator(property);var validationResults=
validator(testArray);if(currentValues.length!==0&&(validationResults.valid&&property.unique))validationResults=validator(currentValues,valueToAdd);if(!validationResults.valid)alert(validationResults.msg);else{addTr(valueToAdd);$table.tableDnD();if(!property.manyEnumeration)$input.val("")}}}).appendTo(topNavBar);$input=this.constructInputForField(property,true);$input.val("");$input.addClass("form-control");var formGroup=$('\x3cdiv class\x3d"form-group pull-left" /\x3e');$input.appendTo(formGroup);
formGroup.appendTo(topNavBar);$input.keypress(function(e){if(e.which==13)$("#many-primitive-editor-input-add-button").click()});var resultDiv=$('\x3cdiv class\x3d"many-primitive-editor-result" /\x3e').appendTo(panelBody);$table=$('\x3ctable class\x3d"table table-bordered" /\x3e').appendTo(resultDiv);var existingValues=$inputToSet.val().split(",");for(var i=0;i<existingValues.length;i++)if(existingValues[i]!=="")addTr(existingValues[i]);if(property.ordered)$table.tableDnD();panelFooter.append($('\x3cbutton type\x3d"button" class\x3d"btn btn-default many-primitive-editor-select"/\x3e').click(function(){var currentValues=
serializer($table);$inputToSet.val(currentValues.join(","));$inputToSet.blur();$div.remove();$inputToSet.focus()}).text("Select"));panelFooter.append($('\x3cbutton type\x3d"button" class\x3d"btn btn-default many-primitive-editor-cancel"/\x3e').click(function(){$div.remove();$inputToSet.focus()}).text("Cancel"));$div.appendTo($("body"));$input.focus();function addTr(value){var row=$("\x3ctr /\x3e").addClass("many-primitive-editor-row");var rowValue=$('\x3ctd class\x3d"many-primitive-editor-cell col-xs-6" /\x3e').text(value);
row.append(rowValue);row.data("value",value);var img=$("\x3cimg/\x3e",{class:"umlg-many-select-img",src:"/"+tumlModelName+"/javascript/images/delete.png"}).click(function(){var liClicked=$(this).parent().parent();liClicked.remove()});var imgValue=$('\x3ctd class\x3d"many-primitive-editor-cell-img col-xs-2" /\x3e');imgValue.append(img);row.append(imgValue);$table.append(row)}var topBox=document.getElementById("umlgnavbar").getBoundingClientRect();var bottomBox=document.getElementById("footer").getBoundingClientRect();
var box=document.getElementById($manyDiv[0].id).getBoundingClientRect();if(bottomBox.bottom-box.bottom-topBox.height<$div.height()){$div.css("left",box.left);$div.css("top",box.top-$div.height()+10)}else{$div.css("left",box.left);$div.css("top",box.top+box.height)}};TumlBaseTabOneManager.prototype.appendEnumerationLoopupOptionsToSelect=function(tumlLookupUri,propertyJavaClassName,required,currentValue,select){var jqxhr=$.getJSON(tumlLookupUri+"?enumQualifiedName\x3d"+propertyJavaClassName,function(response,
b,c){select.html("");if(!required)select.append($("\x3coption /\x3e)").val("").html(""));for(var i=0;i<response.data.length;i++)select.append($("\x3coption /\x3e)").val(response.data[i]).html(response.data[i]));if(currentValue!==null)select.val(currentValue);if(!required)select.chosen({allow_single_deselect:true});else select.chosen();select.focus()}).fail(function(a,b,c){alert("error "+a+" "+b+" "+c)})};TumlBaseTabOneManager.prototype.appendLoopupOptionsToSelect2=function(property,contextVertexId,
$select,currentValue){var adjustedUri=property.tumlLookupUri.replace(new RegExp("{(s*?.*?)*?}","gi"),encodeURIComponent(contextVertexId));var required=property.lower>0;this.handleLookup(adjustedUri,this.metaForData.qualifiedName,function(data){if(!required)$select.append($("\x3coption /\x3e)").val("").html(""));for(var i=0;i<data.length;i++){var obj=data[i];$select.append($("\x3coption /\x3e)").val(obj.id).html(obj.name))}if(currentValue!==undefined&&currentValue!==null)$select.append($('\x3coption selected\x3d"selected"/\x3e)').val(currentValue.id).html(currentValue.displayName));
if(!required)$select.chosen({allow_single_deselect:true});else $select.chosen();$select.focus()})};TumlBaseTabOneManager.prototype.commitCurrentEdit=function(){this.synchronizeModel(this.currentActiveProperty);if(!(this.tumlTabViewManager.parentTabContainerManager instanceof Tuml.TumlMainViewManager)){var validateInput=$(inputFieldIdForValidate(this.currentActiveProperty,this.metaForData,false));if(validateInput.val()!=""){var validationResult=this.validateField(this.currentActiveProperty,validateInput,
false);return validationResult.valid}else return true}else if(this.currentActiveProperty!==undefined&&!this.currentActiveProperty.readOnly){var validationResult=this.validateField(this.currentActiveProperty,null,false);return validationResult.valid}else return true};TumlBaseTabOneManager.prototype.validateField=function(property,input,isForManyEditor){this.removeServerErrorMessage();var validateInput;if(input===undefined||input===null)validateInput=$(inputFieldIdForValidate(property,this.metaForData,
isForManyEditor));else validateInput=input;var validationResult=null;if(property.manyPrimitive||property.manyEnumeration){var stringValueArray=[];var value=validateInput.val();if(value!=="")stringValueArray=value.split(",");var tmpSerializedValue=[];for(var i=0;i<stringValueArray.length;i++){var tmpValue=stringValueArray[i];if(property.fieldType==="Integer"||property.fieldType==="Long")if(isNaN(tmpValue))validationResult={valid:false,msg:"Please enter a valid number."};else if(property.unique&&tmpSerializedValue.indexOf(parseInt(tmpValue))!==
-1)validationResult={valid:false,msg:"Duplicates are not allowed."};else tmpSerializedValue.push(parseInt(tmpValue));else if(property.fieldType==="Real")if(isNaN(tmpValue))validationResult={valid:false,msg:"Please enter a valid number."};else if(property.unique&&tmpSerializedValue.indexOf(parseFloat(tmpValue))!==-1)validationResult={valid:false,msg:"Duplicates are not allowed."};else tmpSerializedValue.push(parseFloat(tmpValue));else if(property.fieldType==="Boolean")if(tmpValue!="true"&&tmpValue!=
"false")validationResult={valid:false,msg:'Value must be "true" or "false".'};else tmpSerializedValue.push(tmpValue);else if(property.unique&&tmpSerializedValue.indexOf(tmpValue)!==-1)validationResult={valid:false,msg:"Duplicates are not allowed."};else tmpSerializedValue.push(stringValueArray[i])}if(validationResult===undefined||validationResult===null)validationResult=selectFieldValidator(property)(tmpSerializedValue)}else if(property.fieldType==="Boolean")validationResult=selectFieldValidator(property)(validateInput.is(":checked")?
"t":"f");else validationResult=selectFieldValidator(property)(validateInput.val());if(!validationResult.valid){validateInput.parents(".form-group").removeClass("has-error");validateInput.parents(".form-group").addClass("has-error");validateInput.parent("div").siblings("p").remove();validateInput.parent("div").after($('\x3cp class\x3d"help-block" /\x3e').text(validationResult.msg))}else{validateInput.parents(".form-group").removeClass("has-error");validateInput.parent("div").siblings("p").remove()}return validationResult};
TumlBaseTabOneManager.prototype.removeServerErrorMessage=function(){$("#serverErrorMsg").removeClass("server-error-msg").empty()}})(jQuery);
(function($){$.extend(true,window,{Tuml:{TumlTabQueryManager:TumlTabQueryManager}});function TumlTabQueryManager(parentTumlTabViewManager,instanceQueryUri,classQueryUri,rootQueryUri,queryId){var tumlQueryGridManager;var codeMirror;this.instanceQueryUri=instanceQueryUri;this.classQueryUri=classQueryUri;this.rootQueryUri=rootQueryUri;if(queryId!==undefined)this.queryId=queryId;this.tumlTabViewManager=parentTumlTabViewManager;function init(){tumlQueryGridManager=new Tuml.TumlQueryGridManager(parentTumlTabViewManager)}
this.executeQuery=function(){var self=this;$.ajax({url:this.oclExecuteUri+"?query\x3d"+encodeURIComponent(codeMirror.getValue())+"\x26type\x3d"+this.tumlTabViewManager.parentTabContainerManager.executeButton.val()+"\x26contextClassifierQualifiedName\x3d"+this.tumlTabViewManager.parentTabContainerManager.qualifiedName,type:"GET",contentType:"application/json",success:function(data){self.afterExecuteQuery(data)},error:function(jqXHR){$("#serverErrorMsg_"+self.queryTabDivName).addClass("server-error-msg").html(jqXHR.responseText)}})};
this.afterExecuteQuery=function(data){if(Array.isArray(data))if(data[0].data.length!==0)tumlQueryGridManager.refresh(data[0],this.queryTabDivName+"_"+"OclResult",true);else{var outerDivForResults=$("#"+this.queryTabDivName+"_"+"OclResult");outerDivForResults.children().remove();var textAreaResult=$("\x3ctextarea /\x3e",{id:"queryResultId"});textAreaResult.text("no result").appendTo(outerDivForResults);CodeMirror.fromTextArea(textAreaResult[0],{mode:"text/x-sh",readOnly:true})}else{var outerDivForResults=
$("#"+this.queryTabDivName+"_"+"OclResult");outerDivForResults.children().remove();var textAreaResult=$("\x3ctextarea /\x3e",{id:"queryResultId"});if(data.result===undefined)textAreaResult.text(data).appendTo(outerDivForResults);else textAreaResult.text(data.result).appendTo(outerDivForResults);CodeMirror.fromTextArea(textAreaResult[0],{mode:"text/x-sh",readOnly:true})}$("#serverErrorMsg_"+this.queryTabDivName).removeClass("server-error-msg");$("#serverErrorMsg_"+this.queryTabDivName).empty();$("#tab-container").tabs("resize")};
this.saveToInstance=function(){var self=this;this.synchronizeQuery(this.queryId);this.query.qualifiedName="umlglib::org::umlg::query::InstanceQuery";var overloadedPostData={insert:[],update:[],delete:[]};if(this.query.post)overloadedPostData.insert.push(this.query);else overloadedPostData.update.push(this.query);$.ajax({url:this.instanceQueryUri,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(overloadedPostData),success:function(data){var queryFromDb;var queries=data[0].data;
for(var i=0;i<queries.length;i++){queryFromDb=queries[i];if(queryFromDb.name==self.query.name)break}if(self.query.post)self.afterSaveInstance({queryType:"instanceQuery",query:queryFromDb,gridData:tumlQueryGridManager.getResult()});else self.afterUpdateInstance({queryType:"instanceQuery",query:queryFromDb,gridData:tumlQueryGridManager.getResult()})},error:function(jqXHR,textStatus,errorThrown){$("#serverErrorMsg_"+this.queryTabDivName).addClass("server-error-msg").html(jqXHR.responseText)}})};this.deleteQuery=
function(){var self=this;this.synchronizeQuery(this.queryId);var url;if(this.instanceQueryUri!=="")url=this.instanceQueryUri;else if(this.classQueryUri!=="")url=this.classQueryUri;else if(this.rootQueryUri!=="")url=this.rootQueryUri;else throw"Unknown query uri!";var isInstanceQuery=this.instanceQueryUri!==""?true:false;this.query.qualifiedName=isInstanceQuery?"umlglib::org::umlg::query::InstanceQuery":"umlglib::org::umlg::query::ClassQuery";var overloadedPostData={insert:[],update:[],delete:[]};
overloadedPostData.delete.push(this.query);$.ajax({url:url,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(overloadedPostData),success:function(data,textStatus,jqXHR){if(self.instanceQueryUri!=="")self.afterDeleteInstance({queryType:"instanceQuery",query:self.query,gridData:tumlQueryGridManager.getResult()});else if(self.classQueryUri!=="")self.afterDeleteClassQuery({queryType:"classQuery",query:self.query,gridData:tumlQueryGridManager.getResult()});else if(self.rootQueryUri!==
"")self.afterDeleteRootQuery({queryType:"rootQuery",query:self.query,gridData:tumlQueryGridManager.getResult()});else throw"Unknown query uri!";},error:function(jqXHR,textStatus,errorThrown){$("#serverErrorMsg_"+queryTabDivName).addClass("server-error-msg").html(jqXHR.responseText)}})};this.cancelQuery=function(){var executeButton=this.queryExecuteButtonFormGroupDiv.find("#executeButton");executeButton.text("Execute "+this.query.type.toUpperCase());executeButton.val(this.query.type.toUpperCase());
codeMirror.setValue(this.query.queryString);var queryNameInput=this.queryQueryNameFormGroupDiv.find("#queryName");queryNameInput.val(this.query.name)};this.afterSaveInstance=function(result){this.tumlTabViewManager.afterSaveInstance(result)};this.afterUpdateInstance=function(result){this.tumlTabViewManager.afterUpdateInstance(result)};this.afterDeleteInstance=function(result){this.tumlTabViewManager.afterDeleteInstance(result)};this.afterSaveClassQuery=function(result){this.tumlTabViewManager.afterSaveClassQuery(result)};
this.afterUpdateClassQuery=function(result){this.tumlTabViewManager.afterUpdateClassQuery(result)};this.afterDeleteClassQuery=function(result){this.tumlTabViewManager.afterDeleteClassQuery(result)};this.afterSaveRootQuery=function(result){this.tumlTabViewManager.afterSaveRootQuery(result)};this.afterUpdateRootQuery=function(result){this.tumlTabViewManager.afterUpdateRootQuery(result)};this.afterDeleteRootQuery=function(result){this.tumlTabViewManager.afterDeleteRootQuery(result)};this.saveToClass=
function(){var self=this;this.synchronizeQuery(this.queryId);this.query.qualifiedName="umlglib::org::umlg::meta::ClassQuery";var overloadedPostData={insert:[],update:[],delete:[]};if(this.query.post)overloadedPostData.insert.push(this.query);else overloadedPostData.update.push(this.query);$.ajax({url:this.classQueryUri,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(overloadedPostData),success:function(data){var queryFromDb;var queries=data[0].data;for(var i=0;i<queries.length;i++){queryFromDb=
queries[i];if(queryFromDb.name==self.query.name)break}if(self.query.post)self.afterSaveClassQuery({queryType:"classQuery",query:queryFromDb,gridData:tumlQueryGridManager.getResult()});else self.afterUpdateClassQuery({queryType:"classQuery",query:queryFromDb,gridData:tumlQueryGridManager.getResult()})},error:function(jqXHR,textStatus,errorThrown){$("#serverErrorMsg_"+self.queryTabDivName).addClass("server-error-msg").html(jqXHR.responseText)}})};this.saveToRoot=function(){var self=this;this.synchronizeQuery(this.queryId);
var overloadedPostData={insert:[],update:[],delete:[]};if(this.query.post)overloadedPostData.insert.push(this.query);else overloadedPostData.update.push(this.query);$.ajax({url:this.rootQueryUri,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(overloadedPostData),success:function(data){var queryFromDb;var queries=data[0].data;for(var i=0;i<queries.length;i++){queryFromDb=queries[i];if(queryFromDb.name==self.query.name)break}if(self.query.post)self.afterSaveRootQuery({queryType:"rootQuery",
query:queryFromDb,gridData:tumlQueryGridManager.getResult()});else self.afterUpdateRootQuery({queryType:"rootQuery",query:queryFromDb,gridData:tumlQueryGridManager.getResult()})},error:function(jqXHR,textStatus,errorThrown){$("#serverErrorMsg_"+self.queryTabDivName).addClass("server-error-msg").html(jqXHR.responseText)}})};this.createQuery=function(queryTabDivName,oclExecuteUri,query,post){var self=this;this.queryTabDivName=queryTabDivName;this.query=query;this.query.post=post;this.oclExecuteUri=
oclExecuteUri;var queryTab=$("#"+queryTabDivName);var queryPanel=$("\x3cdiv /\x3e",{class:"umlg-query-panel panel panel-default"}).appendTo(queryTab);var queryPanelBody=$("\x3cdiv /\x3e",{class:"panel-body"}).appendTo(queryPanel);var tabFooter=this.tumlTabViewManager.parentTabContainerManager.tabLayoutTabFooterDiv;this.queryExecuteButtonFormGroupDiv;this.queryQueryNameFormGroupDiv;this.querySaveInstanceFormGroupDiv;this.querySaveClassFormGroupDiv;this.queryCancelButtonFormGroupDiv;this.queryDeleteButtonFormGroupDiv;
var queryFormDiv=tabFooter.find(".form-inline");if(queryFormDiv.length!==0){this.queryExecuteButtonFormGroupDiv=queryFormDiv.find("#queryExecuteButtonFormGroupDiv");this.queryQueryNameFormGroupDiv=queryFormDiv.find("#queryNameFormDiv");this.querySaveInstanceFormGroupDiv=queryFormDiv.find("#saveInstanceFormGroup");this.querySaveClassFormGroupDiv=queryFormDiv.find("#saveClassFormGroup");this.queryCancelButtonFormGroupDiv=queryFormDiv.find("#cancelButtonFormGroup");this.queryDeleteButtonFormGroupDiv=
queryFormDiv.find("#deleteButtonFormGroup")}else this.tumlTabViewManager.parentTabContainerManager.addQueryButtons(this.query);var windowHeight=$(".ui-layout-center").height()-165;var layoutDiv=$("\x3cdiv /\x3e",{id:"queryLayoutDiv",style:"height: "+windowHeight+'px; width" 100%; overflow: hidden;'});layoutDiv.appendTo(queryPanelBody);var northDiv=$("\x3cdiv /\x3e",{class:"query-north"});var centerDiv=$("\x3cdiv /\x3e",{class:"query-center"});northDiv.appendTo(layoutDiv);centerDiv.appendTo(layoutDiv);
$("\x3cdiv /\x3e",{id:"serverErrorMsg_"+queryTabDivName}).appendTo(northDiv);var oclOuter=$("\x3cdiv /\x3e",{id:queryTabDivName+"_"+"OclOuter",class:"oclouter"});oclOuter.appendTo(northDiv);var oclInner=$("\x3cdiv /\x3e",{id:queryTabDivName+"_"+"OclInner",class:"oclinner"}).appendTo(oclOuter);var oclTextAreaDiv=$("\x3cdiv /\x3e",{class:"ocltextarea"}).appendTo(oclInner);var textArea=$("\x3ctextarea /\x3e",{id:queryTabDivName+"_"+"QueryString"});textArea.text(query.queryString);textArea.appendTo(oclTextAreaDiv);
codeMirror=CodeMirror.fromTextArea(textArea[0],{lineNumbers:true,extraKeys:{"Ctrl-Space":"autocomplete"},matchBrackets:true,mode:"text/x-groovy",onKeyEvent:function(o,e){if(e.which===13&&(e.altKey&&e.type==="keydown")||e.which===13&&(e.ctrlKey&&e.type==="keydown")){self.executeQuery();e.preventDefault()}}});if(query.type==="ocl")CodeMirror.commands.autocomplete=function(cm){CodeMirror.showHint(cm,CodeMirror.hint.ocl,{async:true,closeOnUnfocus:true,completeSingle:true,contextClassifierQualifiedName:self.tumlTabViewManager.parentTabContainerManager.uiManager.leftMenuManager.contextMetaDataFrom.qualifiedName})};
else if(query.type==="groovy")CodeMirror.commands.autocomplete=function(cm){CodeMirror.showHint(cm,CodeMirror.hint.gremlin,{async:true,closeOnUnfocus:true,completeSingle:false,contextClassifierQualifiedName:self.tumlTabViewManager.parentTabContainerManager.qualifiedName})};var oclResult=$("\x3cdiv /\x3e",{id:queryTabDivName+"_"+"OclResult",class:"oclresult"});oclResult.appendTo(centerDiv);if(query.data!==undefined&&query.data!==null)tumlQueryGridManager.refresh(query.data,queryTabDivName+"_"+"OclResult");
layoutDiv.layout({center__paneSelector:".query-center",north__paneSelector:".query-north",north__size:125,spacing_open:3,onresize_end:function(){var northHeight=$(".query-north").height()-15;$(".CodeMirror").height(northHeight);return true}})};this.synchronizeQuery=function(id){this.query.name=this.tumlTabViewManager.parentTabContainerManager.queryQueryNameFormGroupDiv.find("#queryName").val();this.query.queryString=codeMirror.getValue();this.query.queryEnum=this.tumlTabViewManager.parentTabContainerManager.executeButton.val();
if(id!==undefined)this.query.id=id};$.extend(this,{"TumlTabQueryManagerVersion":"1.0.0","onSelfCellClick":new Tuml.Event});init()}})(jQuery);
(function($){$.extend(true,window,{Tuml:{TumlBaseTabViewManager:TumlBaseTabViewManager,TumlTabOneViewManager:TumlTabOneViewManager,TumlTabManyComponentViewManager:TumlTabManyComponentViewManager,TumlTabManyViewManager:TumlTabManyViewManager,TumlTabQueryViewManager:TumlTabQueryViewManager,TumlTabDiagramViewManager:TumlTabDiagramViewManager}});function TumlBaseTabViewManager(tabEnum,tabContainer,tumlUri,result,propertyNavigatingTo){this.TumlBaseTabViewManager="1.0.0";this.backupData=null;this.activated=
false;this.isOpen;this.tabEnum=tabEnum;this.open=false;this.showInlineForm=function(){this.parentTabContainerManager.tabLayoutTabFooterDiv.find(".btn-toolbar").hide();this.parentTabContainerManager.tabLayoutTabFooterDiv.find(".form-inline").show()};this.hideInlineForm=function(){this.parentTabContainerManager.tabLayoutTabFooterDiv.find(".form-inline").hide();this.parentTabContainerManager.tabLayoutTabFooterDiv.find(".btn-toolbar").show()};function getTab(title){return $("#tab-container").tabs("getTab",
title)}this.disableTab=function(){$("#tab-container").tabs("disableTab",this.tabTitleName)};Tuml.TumlTabContainerManager.call(this,tabContainer,propertyNavigatingTo);if(this.result!==undefined)this.init(tumlUri,result);this.handleLookup=function(lookupUri,qualifiedName,loadDataCallback){this.parentTabContainerManager.handleLookup(lookupUri,qualifiedName,loadDataCallback)}}TumlBaseTabViewManager.prototype=new Tuml.TumlTabContainerManager;TumlBaseTabViewManager.prototype.passOnValidationResults=function(tumlManyComponentTabViewManager,
row,propertyName){var componentValidationResultsToRemove=[];if(this.validationResults!==null){for(var j=0;j<this.validationResults.length;j++){var validationResult=this.validationResults[j];if(validationResult.row==row&&validationResult.property==propertyName){for(var k=0;k<validationResult.validationResults.length;k++){var componentValidationResult=validationResult.validationResults[k];if(componentValidationResult.validationResults.length>0)tumlManyComponentTabViewManager.validationResults=validationResult.validationResults}componentValidationResultsToRemove.push(j)}}for(var j=
0;j<componentValidationResultsToRemove.length;j++)this.validationResults.splice(componentValidationResultsToRemove[j],1)}};TumlBaseTabViewManager.prototype.getTabId=function(){return this.tabId};TumlBaseTabViewManager.prototype.validateUpdate=function(){throw"TumlBaseTabViewManager.prototype.validateUpdate must be overriden";};TumlBaseTabViewManager.prototype.closeTab=function(){this.clearAllTabs();$("#"+this.tabId).remove();this.li.remove();var indexOfTab=this.parentTabContainerManager.tumlTabViewManagers.indexOf(this);
this.parentTabContainerManager.tumlTabViewManagers.splice(indexOfTab,1)};TumlBaseTabViewManager.prototype.updateTabTitle=function(name){this.li.find("a").text(name)};TumlBaseTabViewManager.prototype.saveAndCloseTab=function(){this.saveAndClearAllTabs();this.parentTabContainerManager.setCellValue(this.tumlTabGridManager.dataView.getItems());$("#"+this.tabId).remove();this.li.remove();var indexOfTab=this.parentTabContainerManager.tumlTabViewManagers.indexOf(this);this.parentTabContainerManager.tumlTabViewManagers.splice(indexOfTab,
1)};TumlBaseTabViewManager.prototype.init=function(tumlUri,result){this.metaForData=result.meta};TumlBaseTabViewManager.prototype.createTab=function(){var self=this;var tabTemplate;if(this.parentTabContainerManager instanceof Tuml.TumlMainViewManager)tabTemplate="\x3cli id\x3d'li"+this.tabId+"'\x3e\x3ca href\x3d'#{href}' data-toggle\x3d'tab'\x3e#{label}\x3c/a\x3e";else tabTemplate="\x3cli id\x3d'li"+this.tabId+"'\x3e\x3ca href\x3d'#{href}' data-toggle\x3d'tab'\x3e#{label}\x3c/a\x3e\x3c/li\x3e";var label=
this.tabTitleName;this.li=$(tabTemplate.replace(/#\{href\}/g,"#"+this.tabId).replace(/#\{label\}/g,label));this.parentTabContainer.children("ul").append(this.li);var divPanel=$("\x3cdiv /\x3e",{id:this.tabId,class:"umlg-tab tab-pane"});this.parentTabContainer.children("div.tab-content").append(divPanel);this.li.children("a:first").tab("show");$.data(divPanel[0],"tabEnum",this.tabEnum);this.li.find('a[href\x3d"#'+this.tabId+'"]').on("shown.bs.tab",function(e){self.hideInlineForm();self.parentTabContainerManager.handleTabActivate(e)});
return divPanel};TumlBaseTabViewManager.prototype.getTabData=function(){alert("This must be overriden")};TumlBaseTabViewManager.prototype.openManyComponent=function(data,cell,tumlUri,property){throw"TumlBaseTabViewManager.prototype.openManyComponent must be overriden";};TumlBaseTabViewManager.prototype.openOneComponent=function(data,cell,tumlUri,property){throw"TumlBaseTabViewManager.prototype.openOneComponent must be overriden";};TumlBaseTabViewManager.prototype.saveNewRow=function(){this.parentTabContainerManager.updateMultiplicityWarningHeader();
if(this.tumlTabViewManagers.length>0){var data=null;var tumlTabViewManager=this.tumlTabViewManagers[0];if(tumlTabViewManager instanceof TumlTabOneViewManager)data=tumlTabViewManager.getTabData();else{data=[];for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];data.push.apply(data,tumlTabViewManager.getTabData())}}this.setCellValue(data)}this.parentTabContainerManager.saveNewRow()};TumlBaseTabViewManager.prototype.updateGridAfterCommit=function(item){for(var i=
0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];tumlTabViewManager.beginUpdate();var componentData=item[tumlTabViewManager.propertyNavigatingTo.name];if(tumlTabViewManager instanceof TumlTabOneViewManager)tumlTabViewManager.updateGridAfterCommit(componentData);else for(var j=0;j<componentData.length;j++){var gridRow=componentData[j];if(tumlTabViewManager.metaForData.to.qualifiedName===gridRow.qualifiedName)tumlTabViewManager.updateGridAfterCommit(gridRow)}tumlTabViewManager.endUpdate(true)}};
TumlBaseTabViewManager.prototype.updateGridAfterRollback=function(item){for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];tumlTabViewManager.beginUpdate();var componentData=item[tumlTabViewManager.propertyNavigatingTo.name];if(tumlTabViewManager instanceof TumlTabOneViewManager)tumlTabViewManager.updateGridAfterRollback(componentData);else for(var j=0;j<componentData.length;j++){var gridRow=componentData[j];if(tumlTabViewManager.metaForData.to.qualifiedName===
gridRow.qualifiedName)tumlTabViewManager.updateGridAfterRollback(gridRow)}tumlTabViewManager.endUpdate(true)}};TumlBaseTabViewManager.prototype.beginUpdate=function(){};TumlBaseTabViewManager.prototype.endUpdate=function(){};function TumlTabQueryViewManager(tabEnum,tabContainer,instanceQueryUri,classQueryUri,rootQueryUri,tabDivName,tabTitleName,queryId){this.TumlTabQueryViewManager="1.0.0";if(queryId!==undefined)this.queryId=queryId;this.tabId=tabDivName;this.tabTitleName=tabTitleName;this.tumlTabQueryManager=
new Tuml.TumlTabQueryManager(this,instanceQueryUri,classQueryUri,rootQueryUri,this.queryId);this.createQuery=function(oclExecuteUri,query,post){this.tumlTabQueryManager.createQuery(this.tabId,oclExecuteUri,query,post)};this.afterSaveInstance=function(result){var previousIndex=this.parentTabContainerManager.tumlTabViewManagers.indexOf(this);this.closeTab();this.parentTabContainerManager.afterSaveInstance(result,previousIndex)};this.afterUpdateInstance=function(result){this.updateTabTitle(result.query.name);
this.parentTabContainerManager.afterUpdateInstance(result)};this.afterDeleteInstance=function(result){this.parentTabContainerManager.afterDeleteInstance(result);this.closeTab()};this.afterSaveClassQuery=function(result){var previousIndex=this.parentTabContainerManager.tumlTabViewManagers.indexOf(this);this.closeTab();this.parentTabContainerManager.afterSaveClassQuery(result,previousIndex)};this.afterUpdateClassQuery=function(result){this.updateTabTitle(result.query.name);this.parentTabContainerManager.afterUpdateClassQuery(result)};
this.afterDeleteClassQuery=function(result){this.parentTabContainerManager.afterDeleteClassQuery(result);this.closeTab()};this.afterSaveRootQuery=function(result){var previousIndex=this.parentTabContainerManager.tumlTabViewManagers.indexOf(this);this.closeTab();this.parentTabContainerManager.afterSaveRootQuery(result,previousIndex)};this.afterUpdateRootQuery=function(result){this.updateTabTitle(result.query.name);this.parentTabContainerManager.afterUpdateRootQuery(result)};this.afterDeleteRootQuery=
function(result){this.parentTabContainerManager.afterDeleteRootQuery(result);this.closeTab()};TumlBaseTabViewManager.call(this,tabEnum,tabContainer);this.showInlineForm=function(){this.parentTabContainerManager.showInlineForm();this.parentTabContainerManager.showCorrectQueryButtons(this.tumlTabQueryManager.query)};this.hideInlineForm=function(){this.parentTabContainerManager.hideInlineForm()}}TumlTabQueryViewManager.prototype=new Tuml.TumlBaseTabViewManager;TumlTabQueryViewManager.prototype.saveViaKeyPress=
function(){if(this.open)return true;else return TumlBaseTabViewManager.prototype.saveViaKeyPress.call(this)};TumlTabQueryViewManager.prototype.cancelViaKeyPress=function(){if(this.open)return true;else return TumlBaseTabViewManager.prototype.cancelViaKeyPress.call(this)};TumlTabQueryViewManager.prototype.closeTab=function(fromUpdate){var previousIndex=this.parentTabContainerManager.tumlTabViewManagers.indexOf(this);var nextIndex=previousIndex-1;TumlBaseTabViewManager.prototype.closeTab.call(this);
if(!fromUpdate)this.tabUl.find("li:eq("+previousIndex+") a").tab("show")};TumlTabQueryViewManager.prototype.createTab=function(post){var self=this;var tabTemplate;if(this.parentTabContainerManager instanceof Tuml.TumlMainViewManager)tabTemplate="\x3cli id\x3d'li"+this.tabId+"'\x3e\x3ca href\x3d'#{href}' data-toggle\x3d'tab'\x3e#{label}\x3c/a\x3e";else if(post)tabTemplate="\x3cli id\x3d'li"+this.tabId+"'\x3e\x3ca href\x3d'#{href}' data-toggle\x3d'tab'\x3e#{label}\x3c/a\x3e\x3c/li\x3e";else tabTemplate=
"\x3cli id\x3d'li"+this.tabId+"'\x3e\x3ca href\x3d'#{href}' data-toggle\x3d'tab'\x3e#{label} \x3cspan class\x3d'umlg-query-tab glyphicon glyphicon-remove'\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e";var label=this.tabTitleName;var id=this.tabId;this.li=$(tabTemplate.replace(/#\{href\}/g,"#"+id).replace(/#\{label\}/g,label));if(!post)this.li.find("span.umlg-query-tab").click(function(){if(Slick.GlobalEditorLock.commitCurrentEdit())self.closeTab()});this.tabUl=this.parentTabContainer.children("ul");this.tabUl.append(this.li);
var divPanel=$("\x3cdiv /\x3e",{id:this.tabId,class:"umlg-tab tab-pane"});this.parentTabContainer.children(".tab-content").append(divPanel);$.data(divPanel[0],"tabEnum",this.tabEnum);this.tabUl.find("a:last").tab("show");this.tabUl.find("a[href\x3d'#"+id+"']").on("shown.bs.tab",function(e){self.showInlineForm();self.parentTabContainerManager.handleTabActivate(e);var queryLayoutDiv=$("#queryLayoutDiv").layout().resizeAll()});if(this.queryId!==undefined)$.data(divPanel[0],"queryId",this.queryId);return divPanel};
function TumlTabDiagramViewManager(tabEnum,tabContainer,tabDivName,tabTitleName){this.TumlTabDiagramViewManager="1.0.0";this.tabId=tabDivName;this.tabTitleName=tabTitleName;this.tumlTabDiagramManager=new Tuml.TumlTabDiagramManager(this);TumlBaseTabViewManager.call(this,tabEnum,tabContainer);this.createDiagram=function(url,type){this.tumlTabDiagramManager.createDiagram(this.tabId,url,type)}}TumlTabDiagramViewManager.prototype=new Tuml.TumlBaseTabViewManager;TumlTabDiagramViewManager.prototype.createTab=
function(){var self=this;var tabTemplate;if(this.parentTabContainerManager instanceof Tuml.TumlMainViewManager)tabTemplate="\x3cli id\x3d'li"+this.tabId+"'\x3e\x3ca href\x3d'#{href}' data-toggle\x3d'tab'\x3e#{label}\x3c/a\x3e";else tabTemplate="\x3cli id\x3d'li"+this.tabId+"'\x3e\x3ca href\x3d'#{href}' data-toggle\x3d'tab'\x3e#{label} \x3cspan class\x3d'umlg-diagram-tab glyphicon glyphicon-remove'\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e";var label=this.tabTitleName;var id=this.tabId;this.li=$(tabTemplate.replace(/#\{href\}/g,
"#"+id).replace(/#\{label\}/g,label));this.li.find("span.umlg-diagram-tab").click(function(){if(Slick.GlobalEditorLock.commitCurrentEdit())self.closeTab()});this.tabUl=this.parentTabContainer.children("ul");this.tabUl.append(this.li);var divPanel=$("\x3cdiv /\x3e",{id:this.tabId,class:"umlg-tab tab-pane"});this.parentTabContainer.children(".tab-content").append(divPanel);$.data(divPanel[0],"tabEnum",this.tabEnum);this.tabUl.find("a:last").tab("show");this.tabUl.find("a[href\x3d'#"+id+"']").on("shown.bs.tab",
function(e){self.parentTabContainerManager.handleTabActivate(e)});$.data(divPanel[0],"diagramName",this.tabTitleName);return divPanel};TumlTabDiagramViewManager.prototype.closeTab=function(){var previousIndex=this.parentTabContainerManager.tumlTabViewManagers.indexOf(this);var nextIndex=previousIndex-1;TumlBaseTabViewManager.prototype.closeTab.call(this);this.tabUl.find("li:eq("+previousIndex+") a").tab("show")};function TumlTabOneViewManager(tabEnum,tabContainer,oneManyOrQuery,tumlUri,result,propertyNavigatingTo){this.TumlTabOneViewManager=
"1.0.0";this.oneManyOrQuery=oneManyOrQuery;this.result=result;this.setComponentProperty=function(property){this.componentProperty=property};this.setFocus=function(){this.li.focus()};TumlBaseTabViewManager.call(this,tabEnum,tabContainer,tumlUri,result,propertyNavigatingTo);this.showInlineForm=function(){this.parentTabContainerManager.showInlineForm()};this.hideInlineForm=function(){this.parentTabContainerManager.hideInlineForm()}}TumlTabOneViewManager.prototype=new Tuml.TumlBaseTabViewManager;TumlTabOneViewManager.prototype.saveViaKeyPress=
function(){if(this.open){this.commitCurrentEdit();this.parentTabContainerManager.saveTabs();return true}else return TumlBaseTabViewManager.prototype.saveViaKeyPress.call(this)};TumlTabOneViewManager.prototype.cancelViaKeyPress=function(){if(this.open){this.parentTabContainerManager.doCancel();return true}else return TumlBaseTabViewManager.prototype.cancelViaKeyPress.call(this)};TumlTabOneViewManager.prototype.createTab=function(result,forCreation){if(this.oneManyOrQuery.forOneComponent){this.tabId=
this.result.meta.to.name+"OneComponent";this.tabTitleName=this.result.meta.to.name}else{this.tabId=this.result.meta.to.name;this.tabTitleName=this.result.meta.to.name}TumlBaseTabViewManager.prototype.createTab.call(this);this.createOne(result.data,forCreation)};TumlTabOneViewManager.prototype.disableButtons=function(){var tabsNav=this.tabContainer.find(".ui-tabs-nav");tabsNav.find("#"+this.getTabId()+"save").attr("disabled","disabled")};TumlTabOneViewManager.prototype.enableButtons=function(){var tabsNav=
this.tabContainer.find(".ui-tabs-nav");tabsNav.find("#"+this.getTabId()+"save").removeAttr("disabled")};TumlTabOneViewManager.prototype.commitCurrentEdit=function(){this.tumlTabOneManager.commitCurrentEdit()};TumlTabOneViewManager.prototype.doCancel=function(){Tuml.TumlTabContainerManager.prototype.doInternalCancel.call(this);$("#formDiv"+this.tabTitleName).show();this.open=true};TumlTabOneViewManager.prototype.validateUpdate=function(){var validationResults=[];var item=this.getTabData();if(this.metaForData.qualifiedName==
item.qualifiedName)for(var k=0;k<this.metaForData.to.properties.length;k++){var property=this.metaForData.to.properties[k];if(!property.composite&&(!property.inverseComposite&&property.lower>0))if(property.upper===-1||property.upper>1){if(item[property.name].length===0){var validationResult=new Tuml.ValidationResult(0,property.name);validationResult.message=property.name+" is a required field!";validationResults.push(validationResult)}}else if(item[property.name]==null){var validationResult=new Tuml.ValidationResult(0,
property.name);validationResult.message=property.name+" is a required field!";validationResults.push(validationResult)}}return validationResults};TumlTabOneViewManager.prototype.validateInsert=function(){var validationResults=[];var item=this.getTabData();if(this.metaForData.qualifiedName==item.qualifiedName)for(var k=0;k<this.metaForData.to.properties.length;k++){var property=this.metaForData.to.properties[k];if(!property.inverseComposite&&property.lower>0)if(property.upper===-1||property.upper>
1){if(item[property.name]==undefined||item[property.name].length===0){var validationResult=new Tuml.ValidationResult(0,property.name);validationResult.row=0;validationResult.property=property;validationResult.qualifiedName=property.qualifiedName;validationResult.message=property.name+" is a required field!";validationResults.push(validationResult)}}else if(item[property.name]==null){var validationResult=new Tuml.ValidationResult(0,property.name);validationResult.row=0;validationResult.property=property;
validationResult.qualifiedName=property.qualifiedName;validationResult.message=property.name+" is a required field!";validationResults.push(validationResult)}}if(this.validationResults!=null)for(var j=0;j<this.validationResults.length;j++){var componentValidationResult=this.validationResults[j];validationResults.push(componentValidationResult)}return validationResults};TumlTabOneViewManager.prototype.getTabData=function(){return this.tumlTabOneManager.data};TumlTabOneViewManager.prototype.updateGridAfterCommit=
function(item){this.tumlTabOneManager.updateGridAfterCommitOrRollback(item);TumlBaseTabViewManager.prototype.updateGridAfterCommit.call(this,item);this.oneManyOrQuery.forCreation=false;this.tumlTabOneManager.isForCreation=false};TumlTabOneViewManager.prototype.updateGridAfterRollback=function(item){this.tumlTabOneManager.updateGridAfterCommitOrRollback(item);TumlBaseTabViewManager.prototype.updateGridAfterRollback.call(this,item)};TumlTabOneViewManager.prototype.init=function(tumlUri,result){TumlBaseTabViewManager.prototype.init.call(this,
tumlUri,result);if(this.oneManyOrQuery.forOneComponent)this.tumlTabOneManager=new Tuml.TumlTabComponentOneManager(this);else this.tumlTabOneManager=new Tuml.TumlTabOneManager(this)};TumlTabOneViewManager.prototype.addToCellValue=function(value){this.tumlTabOneManager.addToCellValue(this.property,value)};TumlTabOneViewManager.prototype.createOne=function(result,forCreation){this.tumlTabOneManager.refresh(result,this.metaForData,forCreation)};TumlTabOneViewManager.prototype.setComponentProperty=function(property){this.tumlTabOneManager.setComponentProperty(property)};
TumlTabOneViewManager.prototype.setCellValue=function(value){this.tumlTabOneManager.updateData(this.componentProperty,value);this.tumlTabOneManager.refreshFromDataModel()};TumlTabOneViewManager.prototype.openManyComponent=function(data,tumlUri,property){var self=this;Tuml.Metadata.Cache.get(property.qualifiedName,property,function(result){var component={meta:null,data:null};self.tabContainerProperty=property;var firstTumlManyComponentTabViewManager=null;for(var i=0;i<result.length;i++){component.meta=
result[i].meta;self.maybeCreateTabContainer();self.addButtons();component.data=data;var tumlManyComponentTabViewManager=self.createTabContainer(tuml.tab.Enum.Properties,component,tumlUri,{forLookup:false,forManyComponent:true,forOneComponent:false,isOne:false,forCreation:true},property);self.setComponentProperty(property);self.addToTumlTabViewManagers(tumlManyComponentTabViewManager);tumlManyComponentTabViewManager.parentTabContainerManager=self;var parentPanelPanelDefault=$("#"+self.parentTabContainerManager.getTabId()+
"panelPanelDefault");var parentTabContent=parentPanelPanelDefault.find(".tab-content");parentTabContent.hide();parentPanelPanelDefault.children(".umlg-panel-body.panel-body").height(45);var parentTabFooter=parentPanelPanelDefault.find(".umlg-panel-footer.panel-footer");parentTabFooter.hide();tumlManyComponentTabViewManager.backupData=$.extend(true,[],data);self.passOnValidationResults(tumlManyComponentTabViewManager,0,self.tabContainerProperty.name);tumlManyComponentTabViewManager.createTab(component,
false);if(i===0)firstTumlManyComponentTabViewManager=tumlManyComponentTabViewManager}self.open=false;var qualifiedName=property.qualifiedName;self.updateNavigationHeader(qualifiedName);self.updateMultiplicityWarningHeader()})};TumlTabOneViewManager.prototype.setValidationResults=function(qualifiedName,validationResults,count){if(this.validationResults==null)this.validationResults=[];var componentValidationResult=new Tuml.ValidationResult(0,this.tabContainerProperty.name);componentValidationResult.qualifiedName=
qualifiedName;componentValidationResult.validationResults=validationResults;componentValidationResult.multiplicity=count;this.validationResults.push(componentValidationResult)};TumlTabOneViewManager.prototype.openOneComponent=function(data,cell,tumlUri,property){var self=this;Tuml.Metadata.Cache.get(property.qualifiedName,property,function(result){var component={meta:null,data:null};self.tabContainerProperty=property;var firstTumlOneComponentTabViewManager=null;for(var i=0;i<result.length;i++){component.meta=
result[i].meta;self.maybeCreateTabContainer();self.addButtons();component.data=data;var tumlOneComponentTabViewManager=self.createTabContainer(tuml.tab.Enum.Properties,component,tumlUri,{forLookup:false,forManyComponent:false,forOneComponent:true,isOne:true,forCreation:true},property);self.setCell(cell);self.addToTumlTabViewManagers(tumlOneComponentTabViewManager);tumlOneComponentTabViewManager.parentTabContainerManager=self;var parentPanelPanelDefault=$("#"+self.parentTabContainerManager.getTabId()+
"panelPanelDefault");var parentTabContent=parentPanelPanelDefault.find(".tab-content");parentTabContent.hide();var parentTabFooter=parentPanelPanelDefault.find(".umlg-panel-footer.panel-footer");parentTabFooter.hide();tumlOneComponentTabViewManager.backupData=$.extend(true,{},component.data);if(component.data.id===undefined||component.data.id===null){tumlOneComponentTabViewManager.createTab(component,true);self.saveNewRow();if(tumlOneComponentTabViewManager.tumlTabOneManager.containsOneToOne)tumlOneComponentTabViewManager.parentTabContainerManager.addToOneToOneIndex(component.data.id,
{})}else tumlOneComponentTabViewManager.createTab(component,false);if(i===0)firstTumlOneComponentTabViewManager=tumlOneComponentTabViewManager;self.passOnValidationResults(tumlOneComponentTabViewManager,0,self.tabContainerProperty.name)}self.open=false;if(firstTumlOneComponentTabViewManager!==null)self.tabContainer.find("a:first").tab("show");var qualifiedName=property.qualifiedName;self.updateNavigationHeader(qualifiedName);self.updateMultiplicityWarningHeader()})};TumlTabOneViewManager.prototype.saveTabs=
function(){Tuml.TumlTabContainerManager.prototype.saveTabs.call(this);var parentPanelPanelDefault=$("#"+this.parentTabContainerManager.getTabId()+"panelPanelDefault");var parentTabContent=parentPanelPanelDefault.find(".tab-content");parentTabContent.show();var height=calculateBodyHeight(this.parentTabContainerManager);var parentTabFooter=parentPanelPanelDefault.find(".umlg-panel-footer.panel-footer");parentTabFooter.show();parentPanelPanelDefault.children(".umlg-panel-body.panel-body").height(height-
10);this.open=true};function TumlTabManyViewManager(tabEnum,tabContainer,oneManyOrQuery,tumlUri,result,propertyNavigatingTo){this.TumlTabManyViewManager="1.0.0";this.oneManyOrQuery=oneManyOrQuery;this.result=result;this.tumlTabGridManager=null;TumlBaseTabViewManager.call(this,tabEnum,tabContainer,tumlUri,result,propertyNavigatingTo);this.showInlineForm=function(){this.parentTabContainerManager.showInlineForm()};this.hideInlineForm=function(){this.parentTabContainerManager.hideInlineForm()};this.setFocus=
function(focusTo){if(focusTo==Tuml.FocusEnum.CENTER_TAB)this.li.focus();else if(focusTo==Tuml.FocusEnum.CENTER_GRID)this.tumlTabGridManager.setFocus();else throw Error("Can not call TumlTabManyViewManager.setFocus for "+focusTo);}}TumlTabManyViewManager.prototype=new Tuml.TumlBaseTabViewManager;TumlTabManyViewManager.prototype.doCancel=function(){this.doInternalCancel.call(this);this.open=true};TumlTabManyViewManager.prototype.validateUpdate=function(){var validationResults=[];var toValidate=this.tumlTabGridManager.dataView.getUpdatedItems();
for(var i=0;i<toValidate.length;i++){var item=toValidate[i];if(this.metaForData.qualifiedName==item.qualifiedName)for(var k=0;k<this.metaForData.to.properties.length;k++){var property=this.metaForData.to.properties[k];if(!property.composite&&(!property.inverseComposite&&property.lower>0))if(property.upper===-1||property.upper>1){if(item[property.name].length===0){var validationResult=new Tuml.ValidationResult(i,property.name);validationResult.message=property.name+" is a required field!";validationResults.push(validationResult)}}else if(item[property.name]==
null){var validationResult=new Tuml.ValidationResult(i,property.name);validationResult.message=property.name+" is a required field!";validationResults.push(validationResult)}}}return validationResults};TumlTabManyViewManager.prototype.validateInsert=function(){var validationResults=[];var toValidate=this.tumlTabGridManager.dataView.getNewItems();for(var row=0;row<toValidate.length;row++){var item=toValidate[row];if(this.metaForData.to.qualifiedName==item.qualifiedName)for(var k=0;k<this.metaForData.to.properties.length;k++){var property=
this.metaForData.to.properties[k];var validateRequired=false;var validateAssociationClass=false;if(property.associationClassOne||property.derived)validateRequired=false;else if(property.memberEndOfAssociationClass&&property.inverseQualifiedName===this.propertyNavigatingTo.qualifiedName){validateRequired=true;validateAssociationClass=true}else if(!property.inverseComposite&&property.lower>0)validateRequired=true;if(validateRequired&&!validateAssociationClass)this.validateInsertNonAssociationClass(property,
item,row,validationResults);else if(validateAssociationClass)if(item[property.associationClassPropertyName]==null){var validationResult=new Tuml.ValidationResult(i,property.name);validationResult.row=this.tumlTabGridManager.dataView.getIdxById(item.id);validationResult.property=property;validationResult.qualifiedName=property.qualifiedName;validationResult.message="The association class for "+property.name+" is required!";validationResults.push(validationResult)}else{var associationClassProperty;
for(var l=0;l<this.metaForData.to.properties.length;l++){associationClassProperty=this.metaForData.to.properties[l];if(associationClassProperty.name===property.associationClassPropertyName)break}var alreadyValidated=false;if(this.validationResults!=null)for(var m=0;m<this.validationResults.length;m++){var validationResult=this.validationResults[m];if(validationResult.property===associationClassProperty.name){alreadyValidated=true;break}}if(!alreadyValidated){var result=Tuml.Metadata.Cache.getFromCache(associationClassProperty.qualifiedName);
if(result===undefined)throw"Meta data for association class must be available in the cache!";for(var n=0;n<result.length;n++)for(var o=0;o<result[n].meta.to.properties.length;o++){var associationClassPropertyProperty=result[n].meta.to.properties[o];if(!associationClassPropertyProperty.associationClassProperty&&associationClassPropertyProperty.lower>0)this.validateInsertNonAssociationClass(associationClassPropertyProperty,item[associationClassProperty.name],row,validationResults)}}}}}if(this.validationResults!=
null)for(var j=0;j<this.validationResults.length;j++){var componentValidationResult=this.validationResults[j];validationResults.push(componentValidationResult)}return validationResults};TumlTabManyViewManager.prototype.validateInsertNonAssociationClass=function(property,item,row,validationResults){if(property.upper===-1||property.upper>1){if(item[property.name]==undefined||item[property.name].length===0){var validationResult=new Tuml.ValidationResult(row,property.name);validationResult.row=this.tumlTabGridManager.dataView.getIdxById(item.id);
validationResult.property=property;validationResult.qualifiedName=property.qualifiedName;validationResult.message=property.name+" is a required field!";validationResults.push(validationResult)}}else if(!property.onePrimitive&&(!property.manyPrimitive&&(!property.oneEnumeration&&(property.dataTypeEnum==null&&(!property.composite&&(property.manyToOne||property.oneToOne)))))){if(item[property.name].id==null){var validationResult=new Tuml.ValidationResult(row,property.name);validationResult.row=this.tumlTabGridManager.dataView.getIdxById(item.id);
validationResult.property=property;validationResult.qualifiedName=property.qualifiedName;validationResult.message=property.name+" is a required field!";validationResults.push(validationResult)}}else if(item[property.name]==null){var validationResult=new Tuml.ValidationResult(row,property.name);validationResult.row=this.tumlTabGridManager.dataView.getIdxById(item.id);validationResult.property=property;validationResult.qualifiedName=property.qualifiedName;validationResult.message=property.name+" is a required field!";
validationResults.push(validationResult)}};TumlTabManyViewManager.prototype.updateOneForUpdate=function(id,displayName,fieldName,one){var item=this.tumlTabGridManager.dataView.getItemById(id);if(item!==undefined){item[fieldName].id=one.id;item[fieldName].displayName=displayName;this.tumlTabGridManager.dataView.updateItem(item.id,item,fieldName);this.tumlTabGridManager.grid.invalidateAllRows();this.tumlTabGridManager.grid.render()}};TumlTabManyViewManager.prototype.updateOne=function(fakeId,fieldName,
one,indexForFakeId){var item=this.tumlTabGridManager.dataView.getItemById(indexForFakeId.id);this.updateOneRecursive(item,fakeId,fieldName,one,indexForFakeId)};TumlTabManyViewManager.prototype.saveViaKeyPress=function(){if(this.open){if(Slick.GlobalEditorLock.commitCurrentEdit()){this.parentTabContainerManager.saveTabs();this.tumlTabGridManager.grid.focus()}return true}else return TumlBaseTabViewManager.prototype.saveViaKeyPress.call(this)};TumlTabManyViewManager.prototype.cancelViaKeyPress=function(){if(this.open){if(Slick.GlobalEditorLock.commitCurrentEdit())this.parentTabContainerManager.doCancel();
return true}else return TumlBaseTabViewManager.prototype.cancelViaKeyPress.call(this)};TumlTabManyViewManager.prototype.updateOneRecursive=function(item,fakeId,fieldName,one,indexForFakeId){var nextComponent=item[indexForFakeId.field];if(Array.isArray(nextComponent)){for(var i=0;i<nextComponent.length;i++){var nextItem=nextComponent[i];if(nextItem.id===fakeId){nextItem[fieldName].id=one.id;nextItem[fieldName].displayName=one.name;console.log("set one to one to in array "+nextItem[fieldName].id+" "+
nextItem[fieldName].displayName);return true}else if(this.updateOneRecursive(nextItem,fakeId,fieldName,one,indexForFakeId.next))return true}return false}else if(typeof nextComponent==="object"){var nextItem=nextComponent;if(nextItem.id===fakeId){nextItem[fieldName].id=one.id;nextItem[fieldName].displayName=one.name;console.log("set one to one to from one "+nextItem[fieldName].id+" "+nextItem[fieldName].displayName);return true}else return this.updateOneRecursive(nextItem,fakeId,fieldName,one,indexForFakeId.next)}return false};
TumlTabManyViewManager.prototype.addToOneToOneIndex=function(fakeId,item){var parentItem=this.tumlTabGridManager.dataView.getItem(this.componentCell.row);var field=this.tumlTabGridManager.columns[this.componentCell.cell].name;var newObject={id:parentItem.id,field:field,next:item};this.parentTabContainerManager.addToOneToOneIndex(fakeId,newObject)};TumlTabManyViewManager.prototype.deactivateGrids=function(){this.tumlTabGridManager.active=false;Tuml.TumlTabContainerManager.prototype.deactivateGrids.call(this)};
TumlTabManyViewManager.prototype.activeOpenTabsGrid=function(){if(this.tumlTabViewManagers.length===0&&this.open===true)this.tumlTabGridManager.active=true;Tuml.TumlTabContainerManager.prototype.activeOpenTabsGrid.call(this)};TumlTabManyViewManager.prototype.updateGridAfterRollback=function(item){this.tumlTabGridManager.updateGridAfterRollback(item);if(this.tumlTabViewManagers.length>0)if(item.tmpId!==undefined&&this.tumlTabGridManager.dataView.getItem(this.componentCell.row).tmpId===item.tmpId)TumlBaseTabViewManager.prototype.updateGridAfterRollback.call(this,
item);else if(this.tumlTabGridManager.dataView.getItem(this.componentCell.row).id===item.id)TumlBaseTabViewManager.prototype.updateGridAfterRollback.call(this,item)};TumlTabManyViewManager.prototype.updateGridAfterCommit=function(item){this.tumlTabGridManager.updateGridAfterCommit(item);if(this.tumlTabViewManagers.length>0)if(this.tumlTabGridManager.dataView.getItem(this.componentCell.row).tmpId===item.tmpId)TumlBaseTabViewManager.prototype.updateGridAfterCommit.call(this,item)};TumlTabManyViewManager.prototype.clearArraysAfterCommit=
function(){this.tumlTabGridManager.clearArraysAfterCommit()};TumlTabManyViewManager.prototype.getTabData=function(){if(this.tumlTabGridManager.dataView.getItems().length>0)return this.tumlTabGridManager.dataView.getItems();else return[]};TumlTabManyViewManager.prototype.beginUpdate=function(){this.tumlTabGridManager.beginUpdate()};TumlTabManyViewManager.prototype.endUpdate=function(editActiveCell){this.tumlTabGridManager.endUpdate(editActiveCell)};TumlTabManyViewManager.prototype.handleDeleteRow=
function(){this.parentTabContainerManager.updateMultiplicityWarningHeader();if(this.tumlTabViewManagers.length>0){var data=[];for(var i=0;i<this.tumlTabViewManagers.length;i++){var tumlTabViewManager=this.tumlTabViewManagers[i];if(tumlTabViewManager.tumlTabGridManager.dataView.getItems().length>0)data.push.apply(data,tumlTabViewManager.tumlTabGridManager.dataView.getItems())}this.setCellValue(data)}this.parentTabContainerManager.handleDeleteRow()};TumlTabManyViewManager.prototype.createTab=function(result,
forCreation){if(this.oneManyOrQuery.forLookup){this.tabId=this.result.meta.to.name+"Lookup";this.tabTitleName=this.result.meta.to.name+" Select"}else if(this.oneManyOrQuery.forManyComponent){this.tabId=this.result.meta.to.name+"ManyComponent";this.tabTitleName=this.result.meta.to.name}else{this.tabId=this.result.meta.to.name;this.tabTitleName=this.result.meta.to.name}TumlBaseTabViewManager.prototype.createTab.call(this,result,forCreation);if(this.oneManyOrQuery.forLookup){var buttonPullRightDiv=this.parentTabContainerManager.tabLayoutTabFooterDiv.find(".pull-right");
var firstSpan=buttonPullRightDiv.find("button:first-child").find("span:first-child");firstSpan.removeClass("glyphicon-save");firstSpan.addClass("glyphicon-ok");firstSpan.next("span").text(" Select")}this.createGrid(result)};TumlTabManyViewManager.prototype.setCell=function(cell){this.componentCell=cell};TumlTabManyViewManager.prototype.init=function(tumlUri,result){TumlBaseTabViewManager.prototype.init.call(this,tumlUri,result);if(this.oneManyOrQuery.forLookup)this.tumlTabGridManager=new Tuml.TumlForManyLookupGridManager(this,
tumlUri,this.propertyNavigatingTo);else if(this.oneManyOrQuery.forManyComponent)this.tumlTabGridManager=new Tuml.TumlManyComponentGridManager(this,tumlUri,this.propertyNavigatingTo);else this.tumlTabGridManager=new Tuml.TumlTabGridManager(this,tumlUri,this.propertyNavigatingTo)};TumlTabManyViewManager.prototype.addItems=function(items){this.tumlTabGridManager.addItems(items)};TumlTabManyViewManager.prototype.setCellValue=function(value){this.tumlTabGridManager.setCellValue(this.componentCell,value)};
TumlTabManyViewManager.prototype.createGrid=function(result){var gridDiv=$("\x3cdiv /\x3e",{id:"slickGrid"+this.tabId,class:"slickGridOuter"});$("#"+this.tabId).append(gridDiv);this.tumlTabGridManager.refresh(result,gridDiv)};TumlTabManyViewManager.prototype.openManyComponent=function(data,cell,tumlUri,property){var self=this;Tuml.Metadata.Cache.get(property.qualifiedName,property,function(result){self.tabContainerProperty=property;var firstTumlManyComponentTabViewManager=null;for(var i=0;i<result.length;i++){var component=
{meta:result[i].meta,data:[]};self.maybeCreateTabContainer();self.addButtons();for(var j=0;j<data.length;j++)if(data[j].qualifiedName===component.meta.to.qualifiedName)component.data.push(data[j]);var tumlManyComponentTabViewManager=self.createTabContainer(tuml.tab.Enum.Properties,component,tumlUri,{forLookup:false,forManyComponent:true,forOneComponent:false,isOne:false,forCreation:true},property);self.setCell(cell);self.addToTumlTabViewManagers(tumlManyComponentTabViewManager);tumlManyComponentTabViewManager.parentTabContainerManager=
self;var parentPanelPanelDefault=$("#"+self.parentTabContainerManager.getTabId()+"panelPanelDefault");var parentTabContent=parentPanelPanelDefault.find(".tab-content");parentTabContent.hide();parentPanelPanelDefault.children(".umlg-panel-body.panel-body").height(45);var parentTabFooter=parentPanelPanelDefault.find(".umlg-panel-footer.panel-footer");parentTabFooter.hide();tumlManyComponentTabViewManager.backupData=$.extend(true,[],data);self.passOnValidationResults(tumlManyComponentTabViewManager,
cell.row,self.tumlTabGridManager.grid.getColumns()[cell.cell].name);tumlManyComponentTabViewManager.createTab(component,false);if(i===0)firstTumlManyComponentTabViewManager=tumlManyComponentTabViewManager}self.open=false;if(firstTumlManyComponentTabViewManager!==null)self.tabContainer.find("a:first").tab("show");var qualifiedName=property.qualifiedName;self.updateNavigationHeader(qualifiedName);self.updateMultiplicityWarningHeader()})};TumlTabManyViewManager.prototype.openNonCompositeMany=function(property,
qualifiedName){var self=this;var contextvertexId=this.parentTabContainerManager.contextVertexId;var adjustedUri=property.tumlLookupUri.replace(new RegExp("{(s*?.*?)*?}","gi"),contextvertexId);this.handleLookup(adjustedUri,qualifiedName,function(data){var firstTumlManyComponentTabViewManager=null;for(var i=0;i<data.length;i++){var concreteData=data[i];var component={meta:concreteData.meta,data:concreteData.data};self.maybeCreateTabContainer();self.addButtons();var tumlManyTabViewManager=self.createTabContainer(tuml.tab.Enum.Properties,
component,property.tumlUri,{forLookup:true,forManyComponent:false,forOneComponent:false,isOne:false,forCreation:false},property);self.addToTumlTabViewManagers(tumlManyTabViewManager);tumlManyTabViewManager.parentTabContainerManager=self;var parentPanelPanelDefault=$("#"+self.parentTabContainerManager.getTabId()+"panelPanelDefault");var parentTabContent=parentPanelPanelDefault.find(".tab-content");parentTabContent.hide();parentPanelPanelDefault.children(".umlg-panel-body.panel-body").height(45);var parentTabFooter=
parentPanelPanelDefault.find(".umlg-panel-footer.panel-footer");parentTabFooter.hide();tumlManyTabViewManager.backupData=$.extend(true,[],data);tumlManyTabViewManager.createTab(component,false);if(i===0)firstTumlManyComponentTabViewManager=tumlManyTabViewManager}self.open=false;if(firstTumlManyComponentTabViewManager!==null)self.tabContainer.find("a:first").tab("show");var qualifiedName=property.qualifiedName;self.updateNavigationHeader(qualifiedName)})};TumlTabManyViewManager.prototype.setValidationResults=
function(qualifiedName,validationResults,count){if(this.validationResults==null)this.validationResults=[];var componentValidationResult=new Tuml.ValidationResult(this.componentCell.row,this.tabContainerProperty.name);componentValidationResult.qualifiedName=qualifiedName;componentValidationResult.validationResults=validationResults;componentValidationResult.multiplicity=count;this.validationResults.push(componentValidationResult)};TumlTabManyViewManager.prototype.openOneComponent=function(data,cell,
tumlUri,property){var self=this;Tuml.Metadata.Cache.get(property.qualifiedName,property,function(result){var oneComponent={meta:null,data:null};self.tabContainerProperty=property;var firstTumlOneComponentTabViewManager=null;for(var i=0;i<result.length;i++){oneComponent.meta=result[i].meta;self.maybeCreateTabContainer();self.addButtons();oneComponent.data=data;var tumlOneComponentTabViewManager=self.createTabContainer(tuml.tab.Enum.Properties,oneComponent,tumlUri,{forLookup:false,forManyComponent:false,
forOneComponent:true,isOne:true,forCreation:true},property);self.setCell(cell);self.addToTumlTabViewManagers(tumlOneComponentTabViewManager);tumlOneComponentTabViewManager.parentTabContainerManager=self;var parentPanelPanelDefault=$("#"+self.parentTabContainerManager.getTabId()+"panelPanelDefault");var parentTabContent=parentPanelPanelDefault.find(".tab-content");parentTabContent.hide();parentPanelPanelDefault.children(".umlg-panel-body.panel-body").height(45);var parentTabFooter=parentPanelPanelDefault.find(".umlg-panel-footer.panel-footer");
parentTabFooter.hide();tumlOneComponentTabViewManager.backupData=$.extend(true,{},oneComponent.data);if(oneComponent.data.id===undefined||oneComponent.data.id===null){oneComponent.data.id="fake::"+Tuml.TumlFakeIndex++;oneComponent.data.tmpId=oneComponent.data.id;tumlOneComponentTabViewManager.createTab(oneComponent,true);tumlOneComponentTabViewManager.saveNewRow();if(tumlOneComponentTabViewManager.tumlTabOneManager.containsOneToOne)tumlOneComponentTabViewManager.parentTabContainerManager.addToOneToOneIndex(oneComponent.data.id,
{})}else{tumlOneComponentTabViewManager.createTab(oneComponent,oneComponent.data.id.indexOf("fake")!==-1);tumlOneComponentTabViewManager.tumlTabOneManager.refreshFromDataModel()}if(i===0)firstTumlOneComponentTabViewManager=tumlOneComponentTabViewManager;self.passOnValidationResults(tumlOneComponentTabViewManager,cell.row,self.tumlTabGridManager.grid.getColumns()[cell.cell].name)}self.open=false;if(firstTumlOneComponentTabViewManager!==null)self.tabContainer.find("a:first").tab("show");var qualifiedName=
property.qualifiedName;self.updateNavigationHeader(qualifiedName);self.updateMultiplicityWarningHeader()})};TumlTabManyViewManager.prototype.openAssociationClass=function(data,cell,tumlUri,property){var self=this;Tuml.Metadata.Cache.get(property.qualifiedName,property,function(result){var oneComponent={meta:null,data:null};self.tabContainerProperty=property;var firstTumlOneComponentTabViewManager=null;for(var i=0;i<result.length;i++){oneComponent.meta=result[i].meta;self.maybeCreateTabContainer();
self.addButtons();oneComponent.data=data;var tumlOneTabViewManager=self.createTabContainer(tuml.tab.Enum.Properties,oneComponent,tumlUri,{forLookup:false,forManyComponent:false,forOneComponent:true,isOne:true,forCreation:true},property);self.setCell(cell);self.addToTumlTabViewManagers(tumlOneTabViewManager);tumlOneTabViewManager.parentTabContainerManager=self;var parentPanelPanelDefault=$("#"+self.parentTabContainerManager.getTabId()+"panelPanelDefault");var parentTabContent=parentPanelPanelDefault.find(".tab-content");
parentTabContent.hide();parentPanelPanelDefault.children(".umlg-panel-body.panel-body").height(45);var parentTabFooter=parentPanelPanelDefault.find(".umlg-panel-footer.panel-footer");parentTabFooter.hide();tumlOneTabViewManager.backupData=$.extend(true,{},oneComponent.data);if(oneComponent.data.refreshFromDb!==undefined&&oneComponent.data.refreshFromDb){tumlOneTabViewManager.createTab(oneComponent,true);tumlOneTabViewManager.saveNewRow();if(tumlOneTabViewManager.tumlTabOneManager.containsOneToOne)tumlOneTabViewManager.parentTabContainerManager.addToOneToOneIndex(oneComponent.data.id,
{})}else{tumlOneTabViewManager.createTab(oneComponent,oneComponent.data.id.indexOf("fake")!==-1);tumlOneTabViewManager.tumlTabOneManager.refreshFromDataModel()}if(i===0)firstTumlOneComponentTabViewManager=tumlOneTabViewManager;self.passOnValidationResults(tumlOneTabViewManager,cell.row,self.tumlTabGridManager.grid.getColumns()[cell.cell].name)}self.open=false;if(firstTumlOneComponentTabViewManager!==null)self.tabContainer.find("a:first").tab("show");var qualifiedName=property.qualifiedName;self.updateNavigationHeader(qualifiedName);
self.updateMultiplicityWarningHeader()})};TumlTabManyViewManager.prototype.saveTabs=function(){Tuml.TumlTabContainerManager.prototype.saveTabs.call(this);this.tumlTabGridManager.active=true;var parentPanelPanelDefault=$("#"+this.parentTabContainerManager.getTabId()+"panelPanelDefault");var parentTabContent=parentPanelPanelDefault.find(".tab-content");parentTabContent.show();var height=calculateBodyHeight(this.parentTabContainerManager);var parentTabFooter=parentPanelPanelDefault.find(".umlg-panel-footer.panel-footer");
parentTabFooter.show();parentPanelPanelDefault.children(".umlg-panel-body.panel-body").height(height-10);this.open=true};TumlTabManyViewManager.prototype.closeTab=function(){Slick.GlobalEditorLock.cancelCurrentEdit();this.tumlTabGridManager.removeGrid();TumlBaseTabViewManager.prototype.closeTab.call(this)};function TumlTabManyComponentViewManager(tabEnum,tabContainer,oneManyOrQuery,tumlUri,result,propertyNavigatingTo){this.TumlTabManyComponentViewManager="1.0.0";TumlTabManyViewManager.call(this,tabEnum,
tabContainer,oneManyOrQuery,tumlUri,result,propertyNavigatingTo)}TumlTabManyComponentViewManager.prototype=new Tuml.TumlTabManyViewManager;TumlTabManyComponentViewManager.prototype.closeTab=function(){Slick.GlobalEditorLock.cancelCurrentEdit();TumlBaseTabViewManager.prototype.closeTab.call(this)}})(jQuery);
(function($){$.extend(true,window,{Tuml:{UiManager:UiManager,Event:Event,EventData:EventData,EventHandler:EventHandler,FocusEnum:{LEFT_MENU:0,TOP_CONTEXT:1,CENTER_TAB:2,CENTER_GRID:3}}});function UiManager(tumlUri){var self=this;var menuManager;contextManager=null;this.leftMenuManager=null;var mainViewManager;var currentFocus;this.init=function(){var topHeight=parseInt($(".navbar").css("min-height").replace("px",""));var panelReziserSpace=5;var myLayout=$("body").layout({enableCursorHotkey:false,
livePaneResizing:true,north:{initClosed:false,togglerLength_open:0,minSize:topHeight,resizable:false,spacing_open:panelReziserSpace,spacing_closed:panelReziserSpace},east:{initClosed:true,spacing_open:panelReziserSpace,spacing_closed:panelReziserSpace},south:{minSize:30,togglerLength_open:0,initClosed:false,resizable:false,spacing_open:0,spacing_closed:0},west:{minSize:300,spacing_open:panelReziserSpace,spacing_closed:panelReziserSpace}});myLayout.allowOverflow("north");myLayout.resizeAll();contextManager=
new Tuml.ContextManager;contextManager.onClickContextMenu.subscribe(function(e,args){self.refresh(args.uri)});menuManager=new Tuml.MenuManager;this.leftMenuManager=new Tuml.LeftMenuManager;this.leftMenuManager.onMenuClick.subscribe(function(e,args){self.refresh(args.uri)});this.leftMenuManager.onQueryClick.subscribe(function(e,args){mainViewManager.addQueryTab(false,new Tuml.Query(args.id,args.name,args.name,args.queryString,args.queryEnum,null,args.queryType))});this.leftMenuManager.onDiagramClick.subscribe(function(e,
treeNode){mainViewManager.addDiagramTab(treeNode)});currentFocus=Tuml.FocusEnum.LEFT_MENU;mainViewManager=new Tuml.TumlMainViewManager(this,this.leftMenuManager);window.onpopstate=function(event){if(event.state!==null&&document.location.hash===""){var pathname=removeUiFromUrl(document.location.pathname);self.refresh(pathname,false)}};$(document).keydown(function(event){if(!(event.which==17||(event.which==117||(event.which==27||(event.which==8||(event.which==83||event.which==39))))))return true;if(event.ctrlKey&&
event.which==83){self.saveViaKeyPress();event.preventDefault();event.stopImmediatePropagation();return false}else if(event.which==27){self.cancelViaKeyPress();event.preventDefault();event.stopImmediatePropagation();return false}else if(event.ctrlKey&&event.which==8){self.goBackOne();event.preventDefault();event.stopImmediatePropagation()}else if(event.which==117){self.moveFocus();event.preventDefault();event.stopImmediatePropagation()}else if(event.which==39);else return true});$(document).keydown(function(event){if(!(event.which==
8))return true;if(event.ctrlKey&&event.which==8)alert("go back");else return true});var umlgWebsocket=new WebSocket("ws://"+window.location.host+"/"+tumlModelName+"/websocket");var userCountP=$("#userCountId");umlgWebsocket.onmessage=function(event){console.log(event.data);userCountP.text(tumlModelName+" users \x3d "+event.data)};umlgWebsocket.onclose=function(event){console.log(event.data)};umlgWebsocket.onerror=function(event){console.log(event.data)};umlgWebsocket.onopen=function(event){console.log(event.data)};
self.refresh(tumlUri)};this.goBackOne=function(){contextManager.goBackOne()};this.moveFocus=function(){if(currentFocus==Tuml.FocusEnum.LEFT_MENU){currentFocus=Tuml.FocusEnum.CENTER_GRID;mainViewManager.setFocus(currentFocus)}else if(currentFocus==Tuml.FocusEnum.CENTER_GRID){currentFocus=Tuml.FocusEnum.TOP_CONTEXT;contextManager.setFocus()}else if(currentFocus==Tuml.FocusEnum.TOP_CONTEXT){currentFocus=Tuml.FocusEnum.LEFT_MENU;mainViewManager.setFocus(currentFocus)}else{currentFocus=Tuml.FocusEnum.LEFT_MENU;
mainViewManager.setFocus(currentFocus)}};this.saveViaKeyPress=function(){mainViewManager.saveViaKeyPress()};this.cancelViaKeyPress=function(){mainViewManager.cancelViaKeyPress()};this.refresh=function(tumlUri,pushUrl){var tumlUriAdjusted=tumlUri;if(tumlUri.indexOf(tumlModelName,tumlUri.length-tumlModelName.length)!==-1)tumlUriAdjusted=tumlUriAdjusted+"/umlgRoot";if(pushUrl===undefined||pushUrl)pushUrlToBrowser(tumlUriAdjusted);var contextVertexId=retrieveVertexId(tumlUriAdjusted);if(contextVertexId!==
null)contextVertexId=decodeURIComponent(contextVertexId);$.ajax({url:tumlUriAdjusted,type:"GET",dataType:"json",contentType:"json",success:function(result){retrieveMetaDataIfNotInCache(tumlUriAdjusted,contextVertexId,result,continueRefresh)},error:function(jqXHR,textStatus,errorThrown){alert("error getting "+tumlUriAdjusted+"\n textStatus: "+textStatus+"\n errorThrown: "+errorThrown)}})};function continueRefresh(tumlUri,result,contextVertexId){if(mainViewManager.refresh(tumlUri,result)){var contextMetaData=
getContextMetaData(result,contextVertexId);contextManager.refresh(contextMetaData.name,contextMetaData.uri,contextMetaData.contextVertexId)}}function getContextMetaData(result,urlId){var qualifiedName=result[0].meta.qualifiedName;var metaDataNavigatingTo=result[0].meta.to;var metaDataNavigatingFrom=result[0].meta.from;var propertyNavigatingTo=metaDataNavigatingFrom==undefined?null:findPropertyNavigatingTo(qualifiedName,metaDataNavigatingFrom);if(propertyNavigatingTo!=null&&(propertyNavigatingTo.oneToMany||
propertyNavigatingTo.manyToMany))return{name:metaDataNavigatingFrom.name,uri:metaDataNavigatingFrom.uri,contextVertexId:urlId};else{for(var i=0;i<result.length;i++){var response=result[i];if(response.data===undefined&&response.data===null)alert("UIManager.getContextMetaData response.data !\x3d\x3d undefined \x26\x26 response.data !\x3d\x3d null");if(response.data.id!==undefined&&response.data.id.indexOf("fake")===-1||metaDataNavigatingTo.name===tumlModelName){metaDataNavigatingTo=result[i].meta.to;
return{name:metaDataNavigatingTo.name,uri:metaDataNavigatingTo.uri,contextVertexId:response.data.id}}}return{name:metaDataNavigatingFrom.name,uri:metaDataNavigatingFrom.uri,contextVertexId:urlId}}}function findPropertyNavigatingTo(qualifiedName,metaDataNavigatingFrom){if(metaDataNavigatingFrom==undefined)return null;else{for(var i=0;i<metaDataNavigatingFrom.properties.length;i++){var property=metaDataNavigatingFrom.properties[i];if(property.qualifiedName==qualifiedName)return property}alert("Property navigatingTo not found!!!");
return null}}function pushUrlToBrowser(url){history.pushState({},"firefox ignores this",addUiToUrl(url))}$.extend(this,{"TumlUiManagerVersion":"1.0.0"});this.init()}function EventData(){var isPropagationStopped=false;var isImmediatePropagationStopped=false;this.stopPropagation=function(){isPropagationStopped=true};this.isPropagationStopped=function(){return isPropagationStopped};this.stopImmediatePropagation=function(){isImmediatePropagationStopped=true};this.isImmediatePropagationStopped=function(){return isImmediatePropagationStopped}}
function Event(){var handlers=[];this.getHandlers=function(){return handlers};this.subscribe=function(fn){handlers.push(fn)};this.unsubscribe=function(fn){for(var i=handlers.length-1;i>=0;i--)if(handlers[i]===fn)handlers.splice(i,1)};this.notify=function(args,e,scope){e=e||new EventData;scope=scope||this;var returnValue;for(var i=0;i<handlers.length&&!(e.isPropagationStopped()||e.isImmediatePropagationStopped());i++)returnValue=handlers[i].call(scope,e,args);return returnValue}}function EventHandler(){var handlers=
[];this.subscribe=function(event,handler){handlers.push({event:event,handler:handler});event.subscribe(handler);return this};this.unsubscribe=function(event,handler){var i=handlers.length;while(i--)if(handlers[i].event===event&&handlers[i].handler===handler){handlers.splice(i,1);event.unsubscribe(handler);return}return this};this.unsubscribeAll=function(){var i=handlers.length;while(i--)handlers[i].event.unsubscribe(handlers[i].handler);handlers=[];return this}}$.extend(this,{"TumlUIVersion":"1.0.0",
"refreshUri":new Tuml.Event})})(jQuery);function calculateBodyHeight(container){var windowHeight;if(container instanceof Tuml.TumlTabManyViewManager)windowHeight=600;else windowHeight=$(".ui-layout-center").height()-102;return windowHeight}
function retrieveMetaDataIfNotInCache(tumlUri,contextVertexId,result,callback){var uriToCache=removeContextFromUrl(tumlUri);var metaDataFromCache=Tuml.Metadata.Cache.getFromCache(uriToCache);if(metaDataFromCache===undefined||metaDataFromCache===null)$.ajax({url:tumlUri,type:"OPTIONS",dataType:"json",contentType:"json",success:function(metaDataResult){var metaDataArray=[];for(var i=0;i<metaDataResult.length;i++){var metaData={data:[]};metaData.meta=metaDataResult[i].meta;metaDataArray.push(metaData)}Tuml.Metadata.Cache.add(uriToCache,
metaDataArray);combineMetaDataWithResult(result,metaDataResult);callback(tumlUri,result,contextVertexId)},error:function(jqXHR,textStatus,errorThrown){alert("error getting meta data from retrieveMetaDataIfNotInCache  "+tumlUri+"\n textStatus: "+textStatus+"\n errorThrown: "+errorThrown)}});else{combineMetaDataWithResult(result,metaDataFromCache);callback(tumlUri,result,contextVertexId)}function removeContextFromUrl(url){if(url=="/"+tumlModelName)return tumlModelName;else{var trimmedUrl=url.replace("/"+
tumlModelName+"/","");var firstIndexOf=trimmedUrl.indexOf("/");var secondIndexOf=trimmedUrl.indexOf("/",firstIndexOf+1);var result=trimmedUrl.substring(0,firstIndexOf+1)+"{param}"+trimmedUrl.substring(secondIndexOf);return result}}}
function combineMetaDataWithResult(result,metaDataResult){for(var i=0;i<result.length;i++)if(metaDataResult[i].meta.from==undefined)result[i].meta=metaDataResult[i].meta;else for(var j=0;j<metaDataResult.length;j++)if(result[i].meta.qualifiedNameTo==metaDataResult[j].meta.to.qualifiedName)if(result[i].meta.qualifiedNameFrom==metaDataResult[j].meta.from.qualifiedName){result[i].meta=metaDataResult[j].meta;break}}function escapeColon(string){return string.replace(/(:|\.)/g,"\\$1")}
function retrieveVertexId(url){if(url=="/"+tumlModelName)return null;else{var trimmedUrl=url.replace("/"+tumlModelName+"/","");var firstIndexOfForwardSlash=trimmedUrl.indexOf("/");var lastIndexOfForwardSlash=trimmedUrl.lastIndexOf("/");if(lastIndexOfForwardSlash!==-1)if(firstIndexOfForwardSlash==lastIndexOfForwardSlash){var urlId=trimmedUrl.substring(lastIndexOfForwardSlash+1);return urlId}else{var tempUrl=trimmedUrl.substring(0,lastIndexOfForwardSlash);var secondLastIndexOfForwardSlash=tempUrl.lastIndexOf("/");
var urlId=trimmedUrl.substring(secondLastIndexOfForwardSlash+1,lastIndexOfForwardSlash);return urlId}else return null}}
function selectFormatter(property,isNew,updatedId){if(property.name=="uri")return new TumlSlick.Formatters.Link;else if(property.derived)return TumlSlick.Formatters.TumlDerivedPropertyFormatter;else if(property.name=="id")if(isNew)return TumlSlick.Formatters.TumlIdNewFormatter;else if(updatedId)return TumlSlick.Formatters.TumlIdUpdatedFormatter;else return TumlSlick.Formatters.TumlRegularFormatter;else if(property.lower>0&&(property.dataTypeEnum!=null&&property.dataTypeEnum!==undefined))return TumlSlick.Formatters.TumlRequired;
else if(property.dataTypeEnum!=null&&property.dataTypeEnum!==undefined)return null;else if(property.lower>0&&(property.oneEnumeration||property.manyEnumeration))return TumlSlick.Formatters.TumlRequired;else if(property.composite&&property.lower>0)return null;else if(!property.onePrimitive&&(!property.manyPrimitive&&(!property.composite&&((property.manyToOne||property.oneToOne)&&property.lower>0))))return TumlSlick.Formatters.TumlToOneRequiredFormatter;else if(!property.onePrimitive&&(!property.manyPrimitive&&
!property.manyEnumeration)){return function waitingFormatter(row,cell,value,columnDef,dataContext){if(value!==undefined&&value!==null)return value.displayName;else return""};return null}else if(property.lower>0&&property.fieldType=="Long")return TumlSlick.Formatters.TumlRequired;else if(property.lower>0&&property.fieldType=="Real")return TumlSlick.Formatters.TumlRequired;else if(property.lower>0&&property.fieldType=="Integer")return TumlSlick.Formatters.TumlRequired;else if(property.lower>0&&property.fieldType==
"String")return TumlSlick.Formatters.TumlRequired;else if(property.manyPrimitive&&property.fieldType=="Boolean")return TumlSlick.Formatters.TumlManyBoolean;else if(property.fieldType=="Boolean")return TumlSlick.Formatters.TumlBoolean;else return TumlSlick.Formatters.TumlRegularFormatter}
function selectFieldValidator(property){if(property.name=="uri");else if(property.derived);else if(property.dataTypeEnum!=null&&property.dataTypeEnum!==undefined){3;if(property.upper>1||property.upper===-1)if(property.dataTypeEnum=="Date")return(new TumlSlick.Validators.TumlManyDateValidator(property)).validate;else if(property.dataTypeEnum=="Time")return(new TumlSlick.Validators.TumlManyTimeValidator(property)).validate;else if(property.dataTypeEnum=="DateTime")return(new TumlSlick.Validators.TumlManyDateTimeValidator(property)).validate;
else if(property.dataTypeEnum=="InternationalPhoneNumber");else if(property.dataTypeEnum=="LocalPhoneNumber");else if(property.dataTypeEnum=="Email")return(new TumlSlick.Validators.TumlManyString(property)).validate;else if(property.dataTypeEnum=="Video");else if(property.dataTypeEnum=="Audio");else if(property.dataTypeEnum=="Image");else alert("Unsupported dataType "+property.dataTypeEnum);else if(property.dataTypeEnum=="Date")return(new TumlSlick.Validators.Date(property)).validate;else if(property.dataTypeEnum==
"Time")return(new TumlSlick.Validators.Time(property)).validate;else if(property.dataTypeEnum=="DateTime")return(new TumlSlick.Validators.DateTime(property)).validate;else if(property.dataTypeEnum=="InternationalPhoneNumber");else if(property.dataTypeEnum=="LocalPhoneNumber");else if(property.dataTypeEnum=="Email")return(new TumlSlick.Validators.TumlString(property)).validate;else if(property.dataTypeEnum=="Video");else if(property.dataTypeEnum=="Audio");else if(property.dataTypeEnum=="Image");else alert("Unsupported dataType "+
property.dataTypeEnum)}else if(property.composite)return(new TumlSlick.Validators.TumlObject(property)).validate;else if(property.manyEnumeration)return(new TumlSlick.Validators.TumlManyEnumerationValidator(property)).validate;else if(property.oneEnumeration)return(new TumlSlick.Validators.TumlString(property)).validate;else if(!property.onePrimitive&&(!property.manyPrimitive&&!property.composite));else if(property.name=="id");else if(!property.manyPrimitive&&property.fieldType=="String")return(new TumlSlick.Validators.TumlString(property)).validate;
else if(property.manyPrimitive&&property.fieldType=="String")return(new TumlSlick.Validators.TumlManyString(property)).validate;else if(!property.manyPrimitive&&property.fieldType=="Integer")return(new TumlSlick.Validators.TumlNumber(property)).validate;else if(property.manyPrimitive&&property.fieldType=="Integer")return(new TumlSlick.Validators.TumlManyNumber(property)).validate;else if(!property.manyPrimitive&&property.fieldType=="Long")return(new TumlSlick.Validators.TumlNumber(property)).validate;
else if(property.manyPrimitive&&property.fieldType=="Long")return(new TumlSlick.Validators.TumlManyNumber(property)).validate;else if(!property.manyPrimitive&&property.fieldType=="Real")return(new TumlSlick.Validators.TumlNumber(property)).validate;else if(property.manyPrimitive&&property.fieldType=="Real")return(new TumlSlick.Validators.TumlManyNumber(property)).validate;else if(!property.manyPrimitive&&property.fieldType=="Boolean")return(new TumlSlick.Validators.TumlBoolean(property)).validate;
else if(property.manyPrimitive&&property.fieldType=="Boolean")return(new TumlSlick.Validators.TumlManyBoolean(property)).validate;else alert("validator not found for property "+property.name);return function(){return{valid:true,msg:null}}}
function selectEditor(property){if(property.name=="uri")return null;else if(property.readOnly)return null;else if(property.dataTypeEnum!==undefined&&property.dataTypeEnum!=null)if(property.upper>1||property.upper===-1)if(property.dataTypeEnum=="Date")return Tuml.Slick.Editors.ManyDateEditor;else if(property.dataTypeEnum=="Time")return Tuml.Slick.Editors.ManyTime;else if(property.dataTypeEnum=="DateTime")return Tuml.Slick.Editors.ManyDateTime;else if(property.dataTypeEnum=="InternationalPhoneNumber")return Tuml.Slick.Editors.Text;
else if(property.dataTypeEnum=="LocalPhoneNumber")return Tuml.Slick.Editors.Text;else if(property.dataTypeEnum=="Email")return Tuml.Slick.Editors.Text;else if(property.dataTypeEnum=="Video")return Tuml.Slick.Editors.Text;else if(property.dataTypeEnum=="Audio")return Tuml.Slick.Editors.Text;else if(property.dataTypeEnum=="Image")return Tuml.Slick.Editors.Text;else alert("Unsupported dataType "+property.dataTypeEnum);else if(property.dataTypeEnum=="Date")return Tuml.Slick.Editors.Date;else if(property.dataTypeEnum==
"Time")return Tuml.Slick.Editors.Time;else if(property.dataTypeEnum=="DateTime")return Tuml.Slick.Editors.DateTime;else if(property.dataTypeEnum=="InternationalPhoneNumber")return Tuml.Slick.Editors.Text;else if(property.dataTypeEnum=="LocalPhoneNumber")return Tuml.Slick.Editors.Text;else if(property.dataTypeEnum=="Email")return Tuml.Slick.Editors.Text;else if(property.dataTypeEnum=="Video")return Tuml.Slick.Editors.Text;else if(property.dataTypeEnum=="Audio")return Tuml.Slick.Editors.Text;else if(property.dataTypeEnum==
"Image")return Tuml.Slick.Editors.Text;else alert("Unsupported dataType "+property.dataTypeEnum);else if(property.composite&&(property.lower===1&&property.upper==1))return null;else if(property.composite&&(property.lower>=1&&(property.upper>1||property.upper==-1)))return null;else if(property.oneEnumeration)return Tuml.Slick.Editors.SelectEnumerationCellEditor;else if(property.manyEnumeration)return Tuml.Slick.Editors.ManyEnumerationEditor;else if(property.manyPrimitive&&property.fieldType==="String")return Tuml.Slick.Editors.ManyStringPrimitiveEditor;
else if(property.manyPrimitive&&property.fieldType==="Integer")return Tuml.Slick.Editors.ManyIntegerPrimitiveEditor;else if(property.manyPrimitive&&property.fieldType==="Long")return Tuml.Slick.Editors.ManyIntegerPrimitiveEditor;else if(property.manyPrimitive&&property.fieldType==="Real")return Tuml.Slick.Editors.ManyIntegerPrimitiveEditor;else if(property.manyPrimitive&&property.fieldType==="Boolean")return Tuml.Slick.Editors.ManyBooleanPrimitiveEditor;else if(!property.onePrimitive&&(!property.manyPrimitive&&
(!property.composite&&(!property.associationClassOne&&(property.memberEndOfAssociationClass&&(property.oneToOne||property.manyToOne))))))return Tuml.Slick.Editors.SelectToOneAssociationClassCellEditor;else if(!property.onePrimitive&&(!property.manyPrimitive&&(!property.composite&&(!property.associationClassOne&&(property.oneToOne||property.manyToOne)))))return Tuml.Slick.Editors.SelectOneToOneCellEditor;else if(!property.composite&&(property.lower>0&&property.associationClassOne))return null;else if(property.name==
"id")return null;else if(property.fieldType=="String")return Tuml.Slick.Editors.Text;else if(property.fieldType=="Integer")return Tuml.Slick.Editors.Integer;else if(property.fieldType=="Long")return Tuml.Slick.Editors.Integer;else if(property.fieldType=="Real")return Tuml.Slick.Editors.Double;else if(property.fieldType=="Boolean")return Tuml.Slick.Editors.Checkbox;else return Slick.Editors.Text}
function addUiToUrl(url){var indexOfSecondBackSlash=url.indexOf("/",1);var firstPart=url.substring(0,indexOfSecondBackSlash);var secondPart=url.substring(indexOfSecondBackSlash,url.length);var result;if(firstPart!==undefined&&firstPart!="")result=firstPart+"/ui2"+secondPart;else result=secondPart+"/ui2";return result}function removeUiFromUrl(url){return url.replace("/ui2","")}
function createGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c==="x"?r:r&3|8;return v.toString(16)})}
(function($){$.extend(true,window,{Tuml:{ValidationResult:ValidationResult}});function ValidationResult(row,property){this.row=row;this.property=property;this.qualifiedName=null;this.validationResults=[];this.message=null;this.count=null;this.internalToString=function(){var result;if(row!==-1)result="Validation errors for:\n    row \x3d "+this.row+"\n";else result="Validation errors for:\n    ";result+="property \x3d "+this.property.name+"\n    qualified name \x3d "+this.qualifiedName;result+="\n    message \x3d "+
this.message+"\n\n";for(var i=0;i<this.validationResults.length;i++){var validationResult=this.validationResults[i];result+=validationResult.internalToString()}return result};this.toString=function(){return this.internalToString()}}})(jQuery);